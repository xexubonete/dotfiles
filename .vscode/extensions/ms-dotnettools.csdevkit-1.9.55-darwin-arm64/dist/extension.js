/*! For license information please see extension.js.LICENSE.txt */
(()=>{var e,t={7453:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BE_PROFILE:()=>s,NRT_PROFILE:()=>i,PostChannel:()=>Dt,RT_PROFILE:()=>o});var n,o="REAL_TIME",i="NEAR_REAL_TIME",s="BEST_EFFORT",a=r(2012),c=r(4635),u=r(2631),l=r(3107),d="",p="timings",f="value",h="kind",g="length",v="processTelemetryStart",m=l.V4.hasOwnProperty,y=((n={})[0]=0,n[2]=6,n[1]=1,n[3]=7,n[4098]=6,n[4097]=1,n[4099]=7,n);function _(e){return!(e===d||(0,u.lep)(e))}function S(e,t,r){var n=-1;if(!(0,u.o8e)(e))if(t>0&&(32===t?n=8192:t<=13&&(n=t<<5)),function(e){return e>=0&&e<=9}(r))-1===n&&(n=0),n|=r;else{var o=y[T(e)]||-1;-1!==n&&-1!==o?n|=o:6===o&&(n=o)}return n}function E(e,t,r,n,o){var i={},s=!1,a=0,c=arguments[g],l=arguments;for((0,u.jnD)(l[0])&&(s=l[0],a++);a<c;a++)e=l[a],(0,u.rWU)(e,(function(e,t){s&&t&&(0,u.Kn2)(t)?(0,u.kJL)(t)?(i[e]=i[e]||[],(0,u.tOU)(t,(function(t,r){t&&(0,u.Kn2)(t)?i[e][r]=E(!0,i[e][r],t):i[e][r]=t}))):i[e]=E(!0,i[e],t):i[e]=t}));return i}(0,u.Nvg)(),(0,u.Ymo)();var w=u.Jjf;function b(e,t){var r=e;r[p]=r[p]||{},r[p][v]=r[p][v]||{},r[p][v][t]=w()}function T(e){var t=0;if(null!=e){var r=typeof e;"string"===r?t=1:"number"===r?t=2:"boolean"===r?t=3:r===l.fK&&(t=4,(0,u.kJL)(e)?(t=4096,e[g]>0&&(t|=T(e[0]))):m.call(e,"value")&&(t=8192|T(e[f])))}return t}function C(e){return e>0}var P=r(7019),I=r(3668),O=r(3831),N=r(1328),A=r(8570),R=r(8769),x=r(3657),k=r(8942),D=r(8264),M=r(862),j="",L="drop",F="requeue",U="no-cache, no-store",B="application/x-json-stream",V="cache-control",$="content-type",H="client-version",q="client-id",z="time-delta-to-apply-millis",G="upload-time",W="apikey",K="AuthMsaDeviceTicket",X="WebAuthToken",J="AuthXToken",Q="msfpc",Y="trace",Z="user",ee="allowRequestSending",te="firstRequestSent",re="shouldAddClockSkewHeaders",ne="getClockSkewHeaderValue",oe="setClockSkew",ie="length",se="concat",ae="iKey",ce="count",ue="events",le="push",de="split",pe="splice",fe="toLowerCase",he="hdrs",ge="useHdrs",ve="initialize",me="setTimeoutOverride",ye="clearTimeoutOverride",_e="overrideEndpointUrl",Se="avoidOptions",Ee="enableCompoundKey",we="disableXhrSync",be="disableFetchKeepAlive",Te="useSendBeacon",Ce="alwaysUseXhrOverride",Pe="serializeOfflineEvt",Ie="getOfflineRequestDetails",Oe="createPayload",Ne="createOneDSPayload",Ae="payloadBlob",Re="headers",xe="_thePayload",ke="urlString",De="batches",Me="sendType",je="addHeader",Le="canSendRequest",Fe="sendQueuedRequests",Ue="isCompletelyIdle",Be="setUnloading",Ve="sendSynchronousBatch",$e="_transport",He="getWParam",qe="isBeacon",ze="timings",Ge="isTeardown",We="isSync",Ke="data",Xe="_sendReason",Je="setKillSwitchTenants",Qe="_backOffTransmission",Ye="identifier",Ze="eventsLimitInMem",et="autoFlushEventsLimit",tt="baseData",rt="sendAttempt",nt="latency",ot="sync";function it(e){var t=(e.ext||{}).intweb;return t&&_(t[Q])?t[Q]:null}function st(e){for(var t=null,r=0;null===t&&r<e[ie];r++)t=it(e[r]);return t}var at=function(){function e(t,r){var n=r?[][se](r):[],o=this,i=st(n);o[ae]=function(){return t},o.Msfpc=function(){return i||j},o[ce]=function(){return n[ie]},o[ue]=function(){return n},o.addEvent=function(e){return!!e&&(n[le](e),i||(i=it(e)),!0)},o[de]=function(r,o){var s;if(r<n[ie]){var a=n[ie]-r;(0,u.lep)(o)||(a=o<a?o:a),s=n[pe](r,a),i=st(n)}return new e(t,s)}}return e.create=function(t,r){return new e(t,r)},e}(),ct=r(9233),ut=r(8224),lt=function(){function e(){var t=!0,r=!0,n=!0,o="use-collector-delta",i=!1;(0,c.Z)(e,this,(function(e){e[ee]=function(){return t},e[te]=function(){n&&(n=!1,i||(t=!1))},e[re]=function(){return r},e[ne]=function(){return o},e[oe]=function(e){i||(e?(o=e,r=!0,i=!0):r=!1,t=!0)}}))}return e.__ieDyn=1,e}(),dt=function(){function e(){var t={};(0,c.Z)(e,this,(function(e){e[Je]=function(e,r){if(e&&r)try{var n=(s=e[de](","),a=[],s&&(0,u.tOU)(s,(function(e){a[le]((0,u.ndY)(e))})),a);if("this-request-only"===r)return n;for(var o=1e3*parseInt(r,10),i=0;i<n[ie];++i)t[n[i]]=(0,u.Ggd)()+o}catch(e){return[]}var s,a;return[]},e.isTenantKilled=function(e){var r=t,n=(0,u.ndY)(e);return void 0!==r[n]&&r[n]>(0,u.Ggd)()||(delete r[n],!1)}}))}return e.__ieDyn=1,e}();function pt(e){var t,r=Math.floor(1200*Math.random())+2400;return t=Math.pow(2,e)*r,Math.min(t,6e5)}var ft,ht=2e6,gt=Math.min(ht,65e3),vt="metadata",mt="f",yt=/\./,_t=function(){function e(t,r,n,o,i,s){var a="data",l="baseData",p=!!o,v=r,y={},E=!!s,w=i||S;(0,c.Z)(e,this,(function(e){function r(e,t,o,i,s,a,c){(0,u.rWU)(e,(function(e,l){var S=null;if(l||_(l)){var E=o,w=e,b=s,T=t;if(p&&!i&&yt.test(e)){var C=e.split("."),P=C.length;if(P>1){b&&(b=b.slice());for(var I=0;I<P-1;I++){var O=C[I];T=T[O]=T[O]||{},E+="."+O,b&&b.push(O)}w=C[P-1]}}var N=i&&function(e,t){var r=y[e];return void 0===r&&(e.length>=7&&(r=(0,u.xee)(e,"ext.metadata")||(0,u.xee)(e,"ext.web")),y[e]=r),r}(E);if(S=!N&&v&&v.handleField(E,w)?v.value(E,w,l,n):function(e,t,r){if(!t&&!_(t)||"string"!=typeof e)return null;var n,o=typeof t;if("string"===o||"number"===o||"boolean"===o||(0,u.kJL)(t))t={value:t};else if("object"!==o||m.call(t,"value")){if((0,u.lep)(t[f])||t[f]===d||!(0,u.HD0)(t[f])&&!(0,u.hj$)(t[f])&&!(0,u.jnD)(t[f])&&!(0,u.kJL)(t[f]))return null}else t={value:r?JSON.stringify(t):t};if((0,u.kJL)(t[f])&&!(t[f][g]>0))return null;if(!(0,u.lep)(t[h])){if((0,u.kJL)(t[f])||!(0===(n=t[h])||n>0&&n<=13||32===n))return null;t[f]=t[f].toString()}return t}(w,l,n)){var A=S.value;if(T[w]=A,a&&a(b,w,S),c&&"object"==typeof A&&!(0,u.kJL)(A)){var R=b;R&&(R=R.slice()).push(w),r(l,A,E+"."+w,i,R,a,c)}}}}))}e.createPayload=function(e,t,r,n,o,i){return{apiKeys:[],payloadBlob:j,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:e,isTeardown:t,isSync:r,isBeacon:n,sendType:i,sendReason:o}},e.appendPayload=function(r,n,o){var i=r&&n&&!r.overflow;return i&&(0,P.Lm)(t,(function(){return"Serializer:appendPayload"}),(function(){for(var t=n.events(),i=r.payloadBlob,s=r.numEvents,a=!1,c=[],l=[],d=r.isBeacon,p=d?65e3:3984588,f=d?gt:ht,h=0,g=0;h<t.length;){var v=t[h];if(v){if(s>=o){r.overflow=n.split(h);break}var m=e.getEventBlob(v);if(m&&m.length<=f){var y=m.length;if(i.length+y>p){r.overflow=n.split(h);break}i&&(i+="\n"),i+=m,++g>20&&((0,u.s1E)(i,0,1),g=0),a=!0,s++}else m?c.push(v):l.push(v),t.splice(h,1),h--}h++}if(c.length>0&&r.sizeExceed.push(at.create(n.iKey(),c)),l.length>0&&r.failedEvts.push(at.create(n.iKey(),l)),a){r.batches.push(n),r.payloadBlob=i,r.numEvents=s;var _=n.iKey();-1===(0,u.UAM)(r.apiKeys,_)&&r.apiKeys.push(_)}}),(function(){return{payload:r,theBatch:{iKey:n.iKey(),evts:n.events()},max:o}})),i},e.getEventBlob=function(e){try{return(0,P.Lm)(t,(function(){return"Serializer.getEventBlob"}),(function(){var t={};t.name=e.name,t.time=e.time,t.ver=e.ver,t.iKey="o:"+function(e){if(e){var t=(0,u.MLb)(e,"-");if(t>-1)return(0,u.lH9)(e,t)}return d}(e.iKey);var n,o={};E||(n=function(e,t,r){!function(e,t,r,n,o){if(o&&t){var i=e(o.value,o.kind,o.propertyType);if(i>-1){var s=t[vt];s||(s=t[vt]={f:{}});var a=s[mt];if(a||(a=s[mt]={}),r)for(var c=0;c<r.length;c++){var l=r[c];a[l]||(a[l]={f:{}});var d=a[l][mt];d||(d=a[l][mt]={}),a=d}a=a[n]={},(0,u.kJL)(o.value)?a.a={t:i}:a.t=i}}}(w,o,e,t,r)});var i=e.ext;i&&(t.ext=o,(0,u.rWU)(i,(function(e,t){r(t,o[e]={},"ext."+e,!0,null,null,!0)})));var s=t[a]={};s.baseType=e.baseType;var c=s[l]={};return r(e.baseData,c,l,!1,[l],n,!0),r(e.data,s,a,!1,[],n,!0),JSON.stringify(t)}),(function(){return{item:e}}))}catch(e){return null}}}))}return e.__ieDyn=1,e}();function St(e,t){return{set:function(r,n){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];return(0,u._HB)([e,t],r,n,o)}}}var Et="sendAttempt",wt="?cors=true&"+$[fe]()+"="+B,bt=((ft={})[1]=F,ft[100]=F,ft[200]="sent",ft[8004]=L,ft[8003]=L,ft),Tt={},Ct={};function Pt(e,t,r){Tt[e]=t,!1!==r&&(Ct[t]=e)}function It(e,t){var r=!1;if(e&&t){var n=(0,u.FYL)(e);if(n&&n[ie]>0)for(var o=t[fe](),i=0;i<n[ie];i++){var s=n[i];if(s&&(0,u.aE6)(t,s)&&s[fe]()===o){r=!0;break}}}return r}function Ot(e,t,r,n){t&&r&&r[ie]>0&&(n&&Tt[t]?(e[he][Tt[t]]=r,e[ge]=!0):e.url+="&"+t+"="+r)}Pt(K,K,!1),Pt(H,H),Pt(q,"Client-Id"),Pt(W,W),Pt(z,z),Pt(G,G),Pt(J,J);var Nt=function(){function e(t,r,n,o){var i,s,a,d,p,f,h,g,v,m,y,b,T,C,I,O,A,x,D,M,F,K,X,J,Y,Z,fe,Ye,Ze,et,tt,rt=!1;(0,c.Z)(e,this,(function(e){function c(e,t){try{return tt&&tt.getSenderInst(e,t)}catch(e){}return null}function nt(e,t,r){var n=(0,R.tV)(e);st(t,200,{},n),kt(n)}function ot(e,t,r,n){var o={},i=e[Re];i&&i.forEach((function(e,t){o[t]=e})),function(e,r,n){st(t,e,r,n),kt(n)}(e.status,o,r||j)}function it(e,t,r){var n=(0,R.tV)(e);st(t,e.status,(0,R.Fz)(e,!0),n),kt(n)}function st(e,t,r,n){try{e(t,r,n)}catch(e){(0,k.kP)(h,2,518,(0,u.eUe)(e))}}function ft(e,t,r){var n=200,o=e[xe],i=e[ke]+(X?"&NoResponseBody=true":j);try{var s=(0,u.jWD)();if(o){var a=!!v.getPlugin("LocalStorage"),c=[],l=[];(0,u.tOU)(o[De],(function(e){if(c&&e&&e[ce]()>0)for(var t=e[ue](),r=0;r<t[ie];r++){if(!s.sendBeacon(i,C.getEventBlob(t[r]))){c[le](e[de](r));break}l[le](e[r])}else c[le](e[de](0))})),l[ie]>0&&(o.sentEvts=l),a||Dt(c,8003,o[Me],!0)}else n=0}catch(e){(0,k.jV)(h,"Failed to send telemetry using sendBeacon API. Ex:"+(0,u.eUe)(e)),n=0}finally{st(t,n,{},j)}}function ht(e){return 2===e||3===e}function gt(e){return A&&ht(e)&&(e=2),e}function vt(){return!a&&p<r}function mt(){var e=T;return T=[],e}function yt(e,t,r){var n=!1;return e&&e[ie]>0&&!a&&g[t]&&C&&(n=0!==t||vt()&&(r>0||d[ee]())),n}function Tt(e){var t={};return e&&(0,u.tOU)(e,(function(e,r){t[r]={iKey:e[ae](),evts:e[ue]()}})),t}function Pt(e,r,n,o,i){if(e&&0!==e[ie])if(a)Dt(e,1,o);else{o=gt(o);try{var c=e,l=0!==o;(0,P.Lm)(v,(function(){return"HttpManager:_sendBatches"}),(function(a){a&&(e=e.slice(0));for(var c=[],u=null,d=w(),p=g[o]||(l?g[1]:g[0]),f=p&&p[$e],h=K&&(A||ht(o)||3===f||p._isSync&&2===f);yt(e,o,r);){var v=e.shift();v&&v[ce]()>0&&(s.isTenantKilled(v[ae]())?c[le](v):(u=u||C[Oe](r,n,l,h,i,o),C.appendPayload(u,v,t)?null!==u.overflow&&(e=[u.overflow][se](e),u.overflow=null,Rt(u,d,w(),i),d=w(),u=null):(Rt(u,d,w(),i),d=w(),e=[v][se](e),u=null)))}u&&Rt(u,d,w(),i),e[ie]>0&&(T=e[se](T)),Dt(c,8004,o)}),(function(){return{batches:Tt(c),retryCount:r,isTeardown:n,isSynchronous:l,sendReason:i,useSendBeacon:ht(o),sendType:o}}),!l)}catch(e){(0,k.kP)(h,2,48,"Unexpected Exception sending batch: "+(0,u.eUe)(e))}}}function Nt(e,t){var r={url:i,hdrs:{},useHdrs:!1};t?(r[he]=E(r[he],b),r.useHdrs=(0,u.FYL)(r.hdrs)[ie]>0):(0,u.rWU)(b,(function(e,t){Ct[e]?Ot(r,Ct[e],t,!1):(r[he][e]=t,r[ge]=!0)})),Ot(r,q,"NO_AUTH",t),Ot(r,H,"1DS-Web-JS-4.3.0",t);var n=j;(0,u.tOU)(e.apiKeys,(function(e){n[ie]>0&&(n+=","),n+=e})),Ot(r,W,n,t),Ot(r,G,(0,u.Ggd)().toString(),t);var o=function(e){for(var t=0;t<e.batches[ie];t++){var r=e[De][t].Msfpc();if(r)return encodeURIComponent(r)}return j}(e);if(_(o)&&(r.url+="&ext.intweb.msfpc="+o),d[re]()&&Ot(r,z,d[ne](),t),v[He]){var s=v[He]();s>=0&&(r.url+="&w="+s)}for(var a=0;a<y[ie];a++)r.url+="&"+y[a].name+"="+y[a].value;return r}function At(e,t,r){e[t]=e[t]||{},e[t][f.identifier]=r}function Rt(t,r,o,i){if(t&&t.payloadBlob&&t.payloadBlob[ie]>0){var a=!!Y,c=g[t.sendType];!ht(t[Me])&&t[qe]&&2===t.sendReason&&(c=g[2]||g[3]||c);var y=x;(t.isBeacon||3===c[$e])&&(y=!1);var _=Nt(t,y);y=y||_[ge];var S=w();(0,P.Lm)(v,(function(){return"HttpManager:_doPayloadSend"}),(function(){for(var g=0;g<t.batches[ie];g++)for(var b=t[De][g][ue](),T=0;T<b[ie];T++){var C=b[T];if(I){var O=C[ze]=C[ze]||{};At(O,"sendEventStart",S),At(O,"serializationStart",r),At(O,"serializationCompleted",o)}C[Et]>0?C[Et]++:C[Et]=1}Dt(t[De],1e3+(i||0),t[Me],!0);var N={data:t[Ae],urlString:_.url,headers:_[he],_thePayload:t,_sendReason:i,timeout:D,disableXhrSync:M,disableFetchKeepAlive:F};y&&(It(N[Re],V)||(N[Re][V]=U),It(N[Re],$)||(N[Re][$]=B));var R=null;c&&(R=function(r){d[te]();var o=function(r,o){!function(t,r,o,i){var a,c=9e3,h=null,g=!1,v=!1;try{var m=!0;if(typeof t!==l.jA){if(r){d[oe](r["time-delta-millis"]);var y=r["kill-duration"]||r["kill-duration-seconds"];(0,u.tOU)(s[Je](r["kill-tokens"],y),(function(e){(0,u.tOU)(o[De],(function(t){if(t[ae]()===e){h=h||[];var r=t[de](0);o.numEvents-=r[ce](),h[le](r)}}))}))}if(200==t||204==t)return void(c=200);((a=t)>=300&&a<500&&429!=a||501==a||505==a||o.numEvents<=0)&&(m=!1),c=9e3+t%1e3}if(m){c=100;var _=o.retryCnt;0===o[Me]&&(_<n?(g=!0,xt((function(){0===o[Me]&&p--,Pt(o[De],_+1,o[Ge],A?2:o[Me],5)}),A,pt(_))):(v=!0,A&&(c=8001)))}}finally{g||(d[oe](),function(t,r,n,o){try{o&&f[Qe]();var i=t[De];200===r&&(i=t.sentEvts||t[De],o||t[We]||f._clearBackOff(),function(e){if(I){var t=w();(0,u.tOU)(e,(function(e){e&&e[ce]()>0&&function(e,t){I&&(0,u.tOU)(e,(function(e){At(e[ze]=e[ze]||{},"sendEventCompleted",t)}))}(e[ue](),t)}))}}(i)),Dt(i,r,t[Me],!0)}finally{0===t[Me]&&(p--,5!==n&&e.sendQueuedRequests(t[Me],n))}}(o,c,i,v)),Dt(h,8004,o[Me])}}(r,o,t,i)},a=t[Ge]||t[We];try{c.sendPOST(r,o,a),Z&&Z(N,r,a,t[qe])}catch(e){(0,k.jV)(h,"Unexpected exception sending payload. Ex:"+(0,u.eUe)(e)),st(o,0,{})}}),(0,P.Lm)(v,(function(){return"HttpManager:_doPayloadSend.sender"}),(function(){if(R)if(0===t[Me]&&p++,a&&!t.isBeacon&&3!==c[$e]){var e={data:N[Ke],urlString:N[ke],headers:E({},N[Re]),timeout:N.timeout,disableXhrSync:N[we],disableFetchKeepAlive:N[be]},r=!1;(0,P.Lm)(v,(function(){return"HttpManager:_doPayloadSend.sendHook"}),(function(){try{Y(e,(function(e){r=!0,m||e[xe]||(e[xe]=e[xe]||N[xe],e[Xe]=e[Xe]||N[Xe]),R(e)}),t.isSync||t[Ge])}catch(e){r||R(N)}}))}else R(N)}))}),(function(){return{thePayload:t,serializationStart:r,serializationCompleted:o,sendReason:i}}),t[We])}t.sizeExceed&&t.sizeExceed[ie]>0&&Dt(t.sizeExceed,8003,t[Me]),t.failedEvts&&t.failedEvts[ie]>0&&Dt(t.failedEvts,8002,t[Me])}function xt(e,t,r){t?e():Ze.set(e,r)}function kt(e){var t=fe;try{for(var r=0;r<t[ie];r++)try{t[r](e)}catch(e){(0,k.kP)(h,1,519,"Response handler failed: "+e)}if(e){var n=JSON.parse(e);_(n.webResult)&&_(n.webResult[Q])&&O.set("MSFPC",n.webResult[Q],31536e3)}}catch(e){}}function Dt(e,t,r,n){if(e&&e[ie]>0&&o){var i=o[(a=t,c=bt[a],_(c)||(c="oth",a>=9e3&&a<=9999?c="rspFail":a>=8e3&&a<=8999?c=L:a>=1e3&&a<=1999&&(c="send")),c)];if(i){var s=0!==r;(0,P.Lm)(v,(function(){return"HttpManager:_sendBatchesNotification"}),(function(){xt((function(){try{i.call(o,e,t,s,r)}catch(e){(0,k.kP)(h,1,74,"send request notification failed: "+e)}}),n||s,0)}),(function(){return{batches:Tt(e),reason:t,isSync:s,sendSync:n,sendType:r}}),!s)}}var a,c}!function(){var e;i=null,s=new dt,a=!1,d=new lt,rt=!1,p=0,f=null,h=null,g=null,v=null,m=!0,y=[],b={},T=[],C=null,I=!1,O=null,A=!1,x=!1,D=e,M=e,F=e,K=e,X=e,J=[],Y=e,Z=e,fe=[],Ye=!1,Ze=St(),et=!1,tt=null}(),e[ve]=function(e,t,r){Ye||(v=t,O=t.getCookieMgr(),h=(f=r).diagLog(),(0,u.W5k)(J,(0,N.k)(e,(function(e){var n,o=e.cfg,s=e.cfg.extensionConfig[r.identifier];Ze=St(s[me],s[ye]),_(o.anonCookieName)?function(e,t,r){for(var n=0;n<e[ie];n++)if(e[n].name===t)return void(e[n].value=r);e[le]({name:t,value:r})}(y,"anoncknm",o.anonCookieName):function(e,t){for(var r=0;r<e[ie];r++)if("anoncknm"===e[r].name)return void e[pe](r,1)}(y),Y=s.payloadPreprocessor,Z=s.payloadListener;var a=s.httpXHROverride,l=s[_e]?s[_e]:o.endpointUrl;i=l+wt,x=!!(0,u.o8e)(s[Se])||!s[Se],I=!s.disableEventTimings;var d=s.valueSanitizer,p=s.stringifyObjects,f=!!o[Ee];(0,u.o8e)(s[Ee])||(f=!!s[Ee]),D=s.xhrTimeout,M=!!s[we],F=!!s[be],X=!1!==s.addNoResponse,et=!!s.excludeCsMetaData,t.getPlugin("LocalStorage")&&(F=!0),rt=!(0,ct.b$)(),C=new _t(v,d,p,f,S,et),(0,u.lep)(s[Te])||(rt=!!s[Te]);var E=function(){try{return{enableSendPromise:!1,isOneDs:!0,disableCredentials:!1,disableXhr:!1,disableBeacon:!rt,disableBeaconSync:!rt,disableFetchKeepAlive:F,timeWrapper:Ze,addNoResponse:X,senderOnCompleteCallBack:{xdrOnComplete:nt,fetchOnComplete:ot,xhrOnComplete:it,beaconOnRetry:ft}}}catch(e){}return null}();tt?tt.SetConfig(E):(tt=new ut.s)[ve](E,h);var w=a,b=s[Ce]?a:null,T=s[Ce]?a:null,P=[3,2];if(!a){m=!1;var O=[];(0,ct.b$)()?(O=[2,1],P=[2,1,3]):O=[1,2,3],(a=c(O=(0,R.fM)(O,s.transports),!1))||(0,k.jV)(h,"No available transport to send events"),w=c(O,!0)}b||(b=c(P=(0,R.fM)(P,s.unloadTransports),!0)),K=!m&&(rt&&(0,ct.MF)()||!F&&(0,ct.JO)(!0)),(n={})[0]=a,n[1]=w||c([1,2,3],!0),n[2]=b||w||c([1],!0),n[3]=T||c([2,3],!0)||w||c([1],!0),g=n}))),Ye=!0)},e.addResponseHandler=function(e){return fe[le](e),{rm:function(){var t=fe.indexOf(e);t>=0&&fe[pe](t,1)}}},e[Pe]=function(e){try{if(C)return C.getEventBlob(e)}catch(e){}return j},e[Ie]=function(){try{return Nt(C&&C[Oe](0,!1,!1,!1,1,0),x)}catch(e){}return null},e[Ne]=function(e,r){try{var n=[];(0,u.tOU)(e,(function(e){r&&(e=(0,R.Ax)(e));var t=at.create(e[ae],[e]);n[le](t)}));for(var o=null;n[ie]>0&&C;){var i=n.shift();i&&i[ce]()>0&&(o=o||C[Oe](0,!1,!1,!1,1,0),C.appendPayload(o,i,t))}var s=Nt(o,x),a={data:o[Ae],urlString:s.url,headers:s[he],timeout:D,disableXhrSync:M,disableFetchKeepAlive:F};return x&&(It(a[Re],V)||(a[Re][V]=U),It(a[Re],$)||(a[Re][$]=B)),a}catch(e){}return null},e._getDbgPlgTargets=function(){return[g[0],s,C,g]},e[je]=function(e,t){b[e]=t},e.removeHeader=function(e){delete b[e]},e[Le]=function(){return vt()&&d[ee]()},e[Fe]=function(e,t){(0,u.o8e)(e)&&(e=0),A&&(e=gt(e),t=2),yt(T,e,0)&&Pt(mt(),0,!1,e,t||0)},e[Ue]=function(){return!a&&0===p&&0===T[ie]},e[Be]=function(e){A=e},e.addBatch=function(e){if(e&&e[ce]()>0){if(s.isTenantKilled(e[ae]()))return!1;T[le](e)}return!0},e.teardown=function(){T[ie]>0&&Pt(mt(),0,!0,2,2),(0,u.tOU)(J,(function(e){e&&e.rm&&e.rm()})),J=[]},e.pause=function(){a=!0},e.resume=function(){a=!1,e[Fe](0,4)},e[Ve]=function(e,t,r){e&&e[ce]()>0&&((0,u.lep)(t)&&(t=1),A&&(t=gt(t),r=2),Pt([e],0,!1,t,r||0))}}))}return e.__ieDyn=1,e}(),At=1e4,Rt="eventsDiscarded",xt=void 0,kt=(0,u.Hef)({eventsLimitInMem:{isVal:C,v:At},immediateEventLimit:{isVal:C,v:500},autoFlushEventsLimit:{isVal:C,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:function(e){return e&&e.sendPOST},v:xt},overrideInstrumentationKey:xt,overrideEndpointUrl:xt,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:xt,clearTimeoutOverride:xt,payloadPreprocessor:xt,payloadListener:xt,disableEventTimings:xt,valueSanitizer:xt,stringifyObjects:xt,enableCompoundKey:xt,disableOptimizeObj:!1,transports:xt,unloadTransports:xt,useSendBeacon:xt,disableFetchKeepAlive:xt,avoidOptions:!1,xhrTimeout:xt,disableXhrSync:xt,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:u.hj$,v:6},maxUnloadEventRetryAttempts:{isVal:u.hj$,v:2},addNoResponse:xt,excludeCsMetaData:xt}),Dt=function(e){function t(){var r,n=e.call(this)||this;n.identifier="PostChannel",n.priority=1011,n.version="4.3.0";var a,l,d,p,f,h,g,v,m,y,_,S,E,w,T,D,j,L,F,U,B,V,$,H,q,z=!1,G=[],W=!1,J=0,Q=0,ee={},te=o;return(0,c.Z)(t,n,(function(e,t){function n(){(0,I.JA)(null,L),(0,I.C9)(null,L),(0,I.Yl)(null,L)}function c(e){var t="";return e&&e[ie]&&(0,u.tOU)(e,(function(e){t&&(t+="\n"),t+=e})),t}function re(e){var t="";try{fe(e),t=v[Pe](e)}catch(e){}return t}function ne(e){"beforeunload"!==(e||(0,u.Jj3)().event).type&&(T=!0,v[Be](T)),Te(2,2)}function oe(e){T=!1,v[Be](T)}function fe(e){e.ext&&e.ext[Y]&&delete e.ext[Y],e.ext&&e.ext[Z]&&e.ext[Z].id&&delete e.ext[Z].id,w&&(e.ext=(0,R.Ax)(e.ext),e[tt]&&(e[tt]=(0,R.Ax)(e[tt])),e[Ke]&&(e[Ke]=(0,R.Ax)(e[Ke])))}function he(e,t){if(e[rt]||(e[rt]=0),e[nt]||(e[nt]=1),fe(e),e[ot])if(h||W)e[nt]=3,e[ot]=!1;else if(v)return w&&(e=(0,R.Ax)(e)),void v[Ve](at.create(e[ae],[e]),!0===e[ot]?1:e[ot],3);var r=e[nt],n=Q,o=d;4===r&&(n=J,o=l);var i=!1;if(n<o)i=!Ae(e,t);else{var s=1,a=20;4===r&&(s=4,a=1),i=!0,function(e,t,r,n){for(;r<=t;){var o=Ce(e,t,!0);if(o&&o[ce]()>0){var i=o[de](0,n),s=i[ce]();if(s>0)return 4===r?J-=s:Q-=s,We(Rt,[i],x.h.QueueFull),!0}r++}return Re(),!1}(e[ae],e[nt],s,a)&&(i=!Ae(e,t))}i&&Ge(Rt,[e],x.h.QueueFull)}function ge(e,t,r){var n=xe(e,t,r);return v[Fe](t,r),n}function _e(){return Q>0}function Se(){if(S>=0&&xe(S,0,E)&&v[Fe](0,E),J>0&&!f&&!W){var e=ee[te][2];e>=0&&(f=we((function(){f=null,ge(4,0,1),Se()}),e))}var t=ee[te][1];!p&&!a&&t>=0&&!W&&(_e()?p=we((function(){p=null,ge(0===g?3:1,0,1),g++,g%=2,Se()}),t):g=0)}function Ee(){r=null,z=!1,G=[],a=null,W=!1,J=0,l=500,Q=0,d=At,ee={},te=o,p=null,f=null,h=0,g=0,m={},y=0,$=!1,_=0,S=-1,E=null,w=!0,T=!1,D=6,j=2,L=null,H=null,q=!1,F=St(),v=new Nt(500,2,1,{requeue:qe,send:Xe,sent:Je,drop:it,rspFail:st,oth:ct}),$e(),m[4]={batches:[],iKeyMap:{}},m[3]={batches:[],iKeyMap:{}},m[2]={batches:[],iKeyMap:{}},m[1]={batches:[],iKeyMap:{}},ut()}function we(e,t){0===t&&h&&(t=1);var r=1e3;return h&&(r=pt(h-1)),F.set(e,t*r)}function be(){return null!==p&&(p.cancel(),p=null,g=0,!0)}function Te(e,t){be(),a&&(a.cancel(),a=null),W||ge(1,e,t)}function Ce(e,t,r){var n=m[t];n||(n=m[t=1]);var o=n.iKeyMap[e];return!o&&r&&(o=at.create(e),n.batches[le](o),n.iKeyMap[e]=o),o}function Oe(t,r){v[Le]()&&!h&&(y>0&&Q>y&&(r=!0),r&&null==a&&e.flush(t,(function(){}),20))}function Ae(e,t){w&&(e=(0,R.Ax)(e));var r=e[nt],n=Ce(e[ae],r,!0);return!!n.addEvent(e)&&(4!==r?(Q++,t&&0===e[rt]&&Oe(!e.sync,_>0&&n[ce]()>=_)):J++,!0)}function Re(){for(var e=0,t=0,r=function(r){var n=m[r];n&&n[De]&&(0,u.tOU)(n[De],(function(n){4===r?e+=n[ce]():t+=n[ce]()}))},n=1;n<=4;n++)r(n);Q=t,J=e}function xe(t,r,n){var o=!1,i=0===r;return!i||v[Le]()?(0,P.Lm)(e.core,(function(){return"PostChannel._queueBatches"}),(function(){for(var e=[],r=4;r>=t;){var n=m[r];n&&n.batches&&n.batches[ie]>0&&((0,u.tOU)(n[De],(function(t){v.addBatch(t)?o=o||t&&t[ce]()>0:e=e[se](t[ue]()),4===r?J-=t[ce]():Q-=t[ce]()})),n[De]=[],n.iKeyMap={}),r--}e[ie]>0&&Ge(Rt,e,x.h.KillSwitch),o&&S>=t&&(S=-1,E=0)}),(function(){return{latency:t,sendType:r,sendReason:n}}),!i):(S=S>=0?Math.min(S,t):t,E=Math.max(E,n)),o}function ke(e,t){ge(1,0,t),Re(),Me((function(){e&&e(),G[ie]>0?a=we((function(){a=null,ke(G.shift(),t)}),0):(a=null,Se())}))}function Me(e){v[Ue]()?e():a=we((function(){a=null,Me(e)}),.25)}function $e(){(ee={})[o]=[2,1,0],ee[i]=[6,3,0],ee[s]=[18,9,0]}function qe(t,r){var n=[],o=D;T&&(o=j),(0,u.tOU)(t,(function(t){t&&t[ce]()>0&&(0,u.tOU)(t[ue](),(function(t){t&&(t[ot]&&(t[nt]=4,t[ot]=!1),t[rt]<o?(b(t,e[Ye]),he(t,!1)):n[le](t))}))})),n[ie]>0&&Ge(Rt,n,x.h.NonRetryableStatus),T&&Te(2,2)}function ze(t,r){var n=V||{},o=n[t];if(o)try{o.apply(n,r)}catch(r){(0,k.kP)(e.diagLog(),1,74,t+" notification failed: "+r)}}function Ge(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];t&&t[ie]>0&&ze(e,[t][se](r))}function We(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];t&&t[ie]>0&&(0,u.tOU)(t,(function(t){t&&t[ce]()>0&&ze(e,[t.events()][se](r))}))}function Xe(e,t,r){e&&e[ie]>0&&ze("eventsSendRequest",[t>=1e3&&t<=1999?t-1e3:0,!0!==r])}function Je(e,t){We("eventsSent",e,t),Se()}function it(e,t){We(Rt,e,t>=8e3&&t<=8999?t-8e3:x.h.Unknown)}function st(e){We(Rt,e,x.h.NonRetryableStatus),Se()}function ct(e,t){We(Rt,e,x.h.Unknown),Se()}function ut(){_=B?0:Math.max(1500,d/6)}Ee(),e._getDbgPlgTargets=function(){return[v,r]},e[ve]=function(o,i,s){(0,P.Lm)(i,(function(){return"PostChannel:initialize"}),(function(){t[ve](o,i,s),V=i.getNotifyMgr();try{L=(0,I.jU)((0,O.J)(e[Ye]),i.evtNamespace&&i.evtNamespace()),e._addHook((0,N.k)(o,(function(t){var o=t.cfg,s=(0,A.CD)(null,o,i);r=s.getExtCfg(e[Ye],kt),F=St(r[me],r[ye]),w=!r.disableOptimizeObj&&!!(0,u.vsb)("chrome"),U=r.ignoreMc1Ms0CookieProcessing,function(e){var t=e[He];e[He]=function(){var r=0;return U&&(r|=2),r|t.call(e)}}(i),d=r[Ze],l=r.immediateEventLimit,y=r[et],D=r.maxEventRetryAttempts,j=r.maxUnloadEventRetryAttempts,B=r.disableAutoBatchFlushLimit,ut(),H=r.overrideInstrumentationKey,q=!!r.disableTelemetry,$&&n();var a=o.disablePageUnloadEvents||[];$=(0,I.c9)(ne,a,L),$=(0,I.TJ)(ne,a,L)||$,$=(0,I.nD)(oe,o.disablePageShowEvents,L)||$}))),v[ve](o,e.core,e)}catch(t){throw e.setInitialized(!1),t}}),(function(){return{theConfig:o,core:i,extensions:s}}))},e.processTelemetry=function(t,r){b(t,e[Ye]),r=r||e._getTelCtx(r);var n=t;q||z||(H&&(n[ae]=H),he(n,!0),T?Te(2,2):Se()),e.processNext(n,r)},e.getOfflineSupport=function(){try{var e=v&&v[Ie]();if(v)return{getUrl:function(){return e?e.url:null},serialize:re,batch:c,shouldProcess:function(e){return!q},createPayload:function(e){return null},createOneDSPayload:function(e){if(v[Ne])return v[Ne](e,w)}}}catch(e){}return null},e._doTeardown=function(e,t){Te(2,2),z=!0,v.teardown(),n(),Ee()},e.setEventQueueLimits=function(e,t){r[Ze]=d=C(e)?e:At,r[et]=y=C(t)?t:0,ut();var n=Q>e;if(!n&&_>0)for(var o=1;!n&&o<=3;o++){var i=m[o];i&&i[De]&&(0,u.tOU)(i[De],(function(e){e&&e[ce]()>=_&&(n=!0)}))}Oe(!0,n)},e.pause=function(){be(),W=!0,v.pause()},e.resume=function(){W=!1,v.resume(),Se()},e._loadTransmitProfiles=function(e){be(),$e(),te=o,Se(),(0,u.rWU)(e,(function(e,t){var r=t[ie];if(r>=2){var n=r>2?t[2]:0;if(t[pe](0,r-2),t[1]<0&&(t[0]=-1),t[1]>0&&t[0]>0){var o=t[0]/t[1];t[0]=Math.ceil(o)*t[1]}n>=0&&t[1]>=0&&n>t[1]&&(n=t[1]),t[le](n),ee[e]=t}}))},e.flush=function(e,t,r){var n;if(void 0===e&&(e=!0),!W)if(r=r||1,e)t||(n=(0,M.wv)((function(e){t=e}))),null==a?(be(),xe(1,0,r),a=we((function(){a=null,ke(t,r)}),0)):G[le](t);else{var o=be();ge(1,1,r),t&&t(),o&&Se()}return n},e.setMsaAuthTicket=function(e){v[je](K,e)},e.setAuthPluginHeader=function(e){v[je](X,e)},e.removeAuthPluginHeader=function(){v.removeHeader(X)},e.hasEvents=_e,e._setTransmitProfile=function(e){te!==e&&void 0!==ee[e]&&(be(),te=e,Se())},(0,R.Vb)(e,(function(){return v}),["addResponseHandler"]),e[Qe]=function(){h<4&&(h++,be(),Se())},e._clearBackOff=function(){h&&(h=0,be(),Se())}})),n}return(0,a.ne)(t,e),t.__ieDyn=1,t}(D.i)},673:(e,t,r)=>{"use strict";r.d(t,{N:()=>u,X:()=>c});var n=r(2631),o=r(508),i=r(1895),s=";",a="=";function c(e){if(!e)return{};var t=e[i.w6](s),r=(0,n.XzL)(t,(function(e,t){var r=t[i.w6](a);if(2===r[i.R5]){var n=r[0][i.T1](),o=r[1];e[n]=o}return e}),{});if((0,n.FYL)(r)[i.R5]>0){if(r.endpointsuffix){var c=r.location?r.location+".":"";r[i.ok]=r[i.ok]||"https://"+c+"dc."+r.endpointsuffix}r[i.ok]=r[i.ok]||o.cA,(0,n.IdH)(r[i.ok],"/")&&(r[i.ok]=r[i.ok].slice(0,-1))}return r}var u={parse:c}},508:(e,t,r)=>{"use strict";r.d(t,{b2:()=>u,cA:()=>a,cV:()=>i,fb:()=>o,ly:()=>l,qp:()=>c,tP:()=>n,w$:()=>s});var n="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",o="sampleRate",i="ProcessLegacy",s="http.method",a="https://dc.services.visualstudio.com",c="/v2/track",u="not_specified",l="iKey"},200:(e,t,r)=>{"use strict";r.d(t,{IN:()=>s,Z1:()=>o,vp:()=>i});var n=r(488),o=(0,n.B)({LocalStorage:0,SessionStorage:1}),i=(0,n.B)({AI:0,AI_AND_W3C:1,W3C:2}),s=(0,n.B)({Normal:1,Critical:2})},9722:(e,t,r)=>{"use strict";r.d(t,{CO:()=>s,eN:()=>a,uI:()=>u,y1:()=>c});var n=r(2631),o=r(1895),i="";function s(e,t){return void 0===t&&(t=!1),null==e?t:"true"===e.toString()[o.T1]()}function a(e){(isNaN(e)||e<0)&&(e=0),e=Math.round(e);var t=i+e%1e3,r=i+Math.floor(e/1e3)%60,n=i+Math.floor(e/6e4)%60,s=i+Math.floor(e/36e5)%24,a=Math.floor(e/864e5);return t=1===t[o.R5]?"00"+t:2===t[o.R5]?"0"+t:t,r=r[o.R5]<2?"0"+r:r,n=n[o.R5]<2?"0"+n:n,s=s[o.R5]<2?"0"+s:s,(a>0?a+".":i)+s+":"+n+":"+r+"."+t}function c(e,t){var r=null;return(0,n.tOU)(e,(function(e){if(e.identifier===t)return r=e,-1})),r}function u(e,t,r,o,i){return!i&&(0,n.HD0)(e)&&("Script error."===e||"Script error"===e)}},8266:(e,t,r)=>{"use strict";r.d(t,{n:()=>h});var n=r(2012),o=r(8769);function i(e){var t="ai."+e+".";return function(e){return t+e}}var s=i("application"),a=i("device"),c=i("location"),u=i("operation"),l=i("session"),d=i("user"),p=i("cloud"),f=i("internal"),h=function(e){function t(){return e.call(this)||this}return(0,n.ne)(t,e),t}((0,o.hl)({applicationVersion:s("ver"),applicationBuild:s("build"),applicationTypeId:s("typeId"),applicationId:s("applicationId"),applicationLayer:s("layer"),deviceId:a("id"),deviceIp:a("ip"),deviceLanguage:a("language"),deviceLocale:a("locale"),deviceModel:a("model"),deviceFriendlyName:a("friendlyName"),deviceNetwork:a("network"),deviceNetworkName:a("networkName"),deviceOEMName:a("oemName"),deviceOS:a("os"),deviceOSVersion:a("osVersion"),deviceRoleInstance:a("roleInstance"),deviceRoleName:a("roleName"),deviceScreenResolution:a("screenResolution"),deviceType:a("type"),deviceMachineName:a("machineName"),deviceVMName:a("vmName"),deviceBrowser:a("browser"),deviceBrowserVersion:a("browserVersion"),locationIp:c("ip"),locationCountry:c("country"),locationProvince:c("province"),locationCity:c("city"),operationId:u("id"),operationName:u("name"),operationParentId:u("parentId"),operationRootId:u("rootId"),operationSyntheticSource:u("syntheticSource"),operationCorrelationVector:u("correlationVector"),sessionId:l("id"),sessionIsFirst:l("isFirst"),sessionIsNew:l("isNew"),userAccountAcquisitionDate:d("accountAcquisitionDate"),userAccountId:d("accountId"),userAgent:d("userAgent"),userId:d("id"),userStoreRegion:d("storeRegion"),userAuthUserId:d("authUserId"),userAnonymousUserAcquisitionDate:d("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:d("authUserAcquisitionDate"),cloudName:p("name"),cloudRole:p("role"),cloudRoleVer:p("roleVer"),cloudRoleInstance:p("roleInstance"),cloudEnvironment:p("environment"),cloudLocation:p("location"),cloudDeploymentUnit:p("deploymentUnit"),internalNodeName:f("nodeName"),internalSdkVersion:f("sdkVersion"),internalAgentVersion:f("agentVersion"),internalSnippet:f("snippet"),internalSdkSrc:f("sdkSrc")}))},8967:(e,t,r)=>{"use strict";r.d(t,{_:()=>n});var n=(0,r(488).B)({Verbose:0,Information:1,Warning:2,Error:3,Critical:4})},1874:(e,t,r)=>{"use strict";r.d(t,{I:()=>o,Y:()=>i});var n=r(8266),o={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},i=new n.n},5358:(e,t,r)=>{"use strict";r.d(t,{g:()=>c});var n=r(3668),o=r(2631),i=r(3831),s=r(1895);function a(e,t){(0,n.QY)(e,null,null,t)}function c(e){var t=(0,o.MeC)(),r=(0,o.jWD)(),c=!1,u=[],l=1;!r||(0,o.lep)(r.onLine)||r.onLine||(l=2);var d=0,p=v(),f=(0,n.jU)((0,i.J)("OfflineListener"),e);try{if(g((0,o.Jj3)())&&(c=!0),t){var h=t.body||t;h.ononline&&g(h)&&(c=!0)}}catch(e){c=!1}function g(e){var t=!1;return e&&(t=(0,n.XO)(e,"online",y,f))&&(0,n.XO)(e,"offline",_,f),t}function v(){return 2!==d&&2!==l}function m(){var e=v();p!==e&&(p=e,(0,o.tOU)(u,(function(e){var t={isOnline:p,rState:l,uState:d};try{e(t)}catch(e){}})))}function y(){l=1,m()}function _(){l=2,m()}return{isOnline:function(){return p},isListening:function(){return c},unload:function(){var e=(0,o.Jj3)();if(e&&c){if(a(e,f),t){var r=t.body||t;(0,o.o8e)(r.ononline)||a(r,f)}c=!1}},addListener:function(e){return u[s.MW](e),{rm:function(){var t=u.indexOf(e);return t>-1?u.splice(t,1):void 0}}},setOnlineState:function(e){d=e,m()}}}},6708:(e,t,r)=>{"use strict";r.d(t,{C:()=>n});var n=(0,r(488).c)({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]})},1464:(e,t,r)=>{"use strict";r.d(t,{B1:()=>g,D3:()=>w,KX:()=>E,LN:()=>_,MB:()=>m,TY:()=>S,Vd:()=>T,d4:()=>y,lC:()=>b,ll:()=>P,mh:()=>v,yp:()=>C});var n=r(2631),o=r(8363),i=r(8942),s=r(8769),a=r(200),c=r(1895),u=void 0,l=void 0,d="";function p(){return y()?f(a.Z1.LocalStorage):null}function f(e){try{if((0,n.lep)((0,o.Rd)()))return null;var t=(new Date)[c.r_](),r=(0,n.vsb)(e===a.Z1.LocalStorage?"localStorage":"sessionStorage"),i=d+t;r.setItem(i,t);var s=r.getItem(i)!==t;if(r[c.XI](i),!s)return r}catch(e){}return null}function h(){return w()?f(a.Z1.SessionStorage):null}function g(){u=!1,l=!1}function v(e){d=e||""}function m(){u=y(!0),l=w(!0)}function y(e){return(e||void 0===u)&&(u=!!f(a.Z1.LocalStorage)),u}function _(e,t){var r=p();if(null!==r)try{return r.getItem(t)}catch(t){u=!1,(0,i.kP)(e,2,1,"Browser failed read of local storage. "+(0,s.jj)(t),{exception:(0,n.eUe)(t)})}return null}function S(e,t,r){var o=p();if(null!==o)try{return o.setItem(t,r),!0}catch(t){u=!1,(0,i.kP)(e,2,3,"Browser failed write to local storage. "+(0,s.jj)(t),{exception:(0,n.eUe)(t)})}return!1}function E(e,t){var r=p();if(null!==r)try{return r[c.XI](t),!0}catch(t){u=!1,(0,i.kP)(e,2,5,"Browser failed removal of local storage item. "+(0,s.jj)(t),{exception:(0,n.eUe)(t)})}return!1}function w(e){return(e||void 0===l)&&(l=!!f(a.Z1.SessionStorage)),l}function b(){var e=[];return w()&&(0,n.rWU)((0,n.vsb)("sessionStorage"),(function(t){e[c.MW](t)})),e}function T(e,t){var r=h();if(null!==r)try{return r.getItem(t)}catch(t){l=!1,(0,i.kP)(e,2,2,"Browser failed read of session storage. "+(0,s.jj)(t),{exception:(0,n.eUe)(t)})}return null}function C(e,t,r){var o=h();if(null!==o)try{return o.setItem(t,r),!0}catch(t){l=!1,(0,i.kP)(e,2,4,"Browser failed write to session storage. "+(0,s.jj)(t),{exception:(0,n.eUe)(t)})}return!1}function P(e,t){var r=h();if(null!==r)try{return r[c.XI](t),!0}catch(t){l=!1,(0,i.kP)(e,2,6,"Browser failed removal of session storage item. "+(0,s.jj)(t),{exception:(0,n.eUe)(t)})}return!1}},7979:(e,t,r)=>{"use strict";r.d(t,{V:()=>n});var n=function(e,t){this.aiDataContract={baseType:1,baseData:1},this.baseType=e,this.baseData=t}},733:(e,t,r)=>{"use strict";r.d(t,{AL:()=>c,G9:()=>f,GO:()=>p,HS:()=>d,NN:()=>h,O$:()=>u,X0:()=>a,ev:()=>m,oN:()=>v,oO:()=>g,rr:()=>l});var n=r(2631),o=r(8942),i=r(9233),s=r(1895);function a(e,t,r){var o=t[s.R5],i=c(e,t);if(i[s.R5]!==o){for(var a=0,u=i;void 0!==r[u];)a++,u=(0,n.k4L)(i,0,147)+m(a);i=u}return i}function c(e,t){var r;return t&&(t=(0,n.ndY)((0,n.XCJ)(t)))[s.R5]>150&&(r=(0,n.k4L)(t,0,150),(0,o.kP)(e,2,57,"name is too long.  It has been truncated to 150 characters.",{name:t},!0)),r||t}function u(e,t,r){var i;return void 0===r&&(r=1024),t&&(r=r||1024,(t=(0,n.ndY)((0,n.XCJ)(t)))[s.R5]>r&&(i=(0,n.k4L)(t,0,r),(0,o.kP)(e,2,61,"string value is too long. It has been truncated to "+r+" characters.",{value:t},!0))),i||t}function l(e,t){return v(e,t,2048,66)}function d(e,t){var r;return t&&t[s.R5]>32768&&(r=(0,n.k4L)(t,0,32768),(0,o.kP)(e,2,56,"message is too long, it has been truncated to 32768 characters.",{message:t},!0)),r||t}function p(e,t){var r;if(t){var i=""+t;i[s.R5]>32768&&(r=(0,n.k4L)(i,0,32768),(0,o.kP)(e,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:t},!0))}return r||t}function f(e,t){if(t){var r={};(0,n.rWU)(t,(function(t,c){if((0,n.Kn2)(c)&&(0,i.nS)())try{c=(0,i.xA)()[s.MB](c)}catch(t){(0,o.kP)(e,2,49,"custom property is not valid",{exception:t},!0)}c=u(e,c,8192),t=a(e,t,r),r[t]=c})),t=r}return t}function h(e,t){if(t){var r={};(0,n.rWU)(t,(function(t,n){t=a(e,t,r),r[t]=n})),t=r}return t}function g(e,t){return t?v(e,t,128,69)[s.r_]():t}function v(e,t,r,i){var a;return t&&(t=(0,n.ndY)((0,n.XCJ)(t)))[s.R5]>r&&(a=(0,n.k4L)(t,0,r),(0,o.kP)(e,2,i,"input is too long, it has been truncated to "+r+" characters.",{data:t},!0)),a||t}function m(e){var t="00"+e;return(0,n.s1E)(t,t[s.R5]-3)}},5922:(e,t,r)=>{"use strict";r.d(t,{w:()=>a});var n=r(8769),o=r(508),i=r(1895),s=r(733),a=function(e,t,r){var a=this,c=this;c.ver=1,c.sampleRate=100,c.tags={},c[i.I]=(0,s.O$)(e,r)||o.b2,c.data=t,c.time=(0,n.Y6)(new Date),c.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return 100===a.sampleRate?4:1},tags:1,data:1}}},6938:(e,t,r)=>{"use strict";r.d(t,{j:()=>s});var n=r(508),o=r(1895),i=r(733),s=function(){function e(e,t,r,s){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var a=this;a.ver=2,a[o.I]=(0,i.O$)(e,t)||n.b2,a[o.qZ]=(0,i.G9)(e,r),a[o.Ee]=(0,i.NN)(e,s)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Event",e.dataType="EventData",e}()},4045:(e,t,r)=>{"use strict";r.d(t,{Pp:()=>E});var n=r(2012),o=r(2631),i=r(508),s=r(1895),a=r(733),c="error",u="stack",l="stackDetails",d="errorSrc",p="message",f="description";function h(e,t){var r=e;return r&&!(0,o.HD0)(r)&&(JSON&&JSON[s.MB]?(r=JSON[s.MB](e),!t||r&&"{}"!==r||(r=(0,o.mf2)(e[s.r_])?e[s.r_]():""+e)):r=e+" - (Missing JSON.stringify)"),r||""}function g(e,t){var r=e;return e&&(r&&!(0,o.HD0)(r)&&(r=e[p]||e[f]||r),r&&!(0,o.HD0)(r)&&(r=h(r,!0)),e.filename&&(r=r+" @"+(e.filename||"")+":"+(e.lineno||"?")+":"+(e.colno||"?"))),t&&"String"!==t&&"Object"!==t&&"Error"!==t&&-1===(0,o.MLb)(r||"",t)&&(r=t+": "+r),r||""}function v(e){return e&&e.src&&(0,o.HD0)(e.src)&&e.obj&&(0,o.kJL)(e.obj)}function m(e){var t=e||"";(0,o.HD0)(t)||(t=(0,o.HD0)(t[u])?t[u]:""+t);var r=t[s.w6]("\n");return{src:t,obj:r}}function y(e){var t=null;if(e)try{if(e[u])t=m(e[u]);else if(e[c]&&e[c][u])t=m(e[c][u]);else if(e.exception&&e.exception[u])t=m(e.exception[u]);else if(v(e))t=e;else if(v(e[l]))t=e[l];else if((0,o.Jj3)()&&(0,o.Jj3)().opera&&e[p])t=function(e){for(var t=[],r=e[s.w6]("\n"),n=0;n<r[s.R5];n++){var o=r[n];r[n+1]&&(o+="@"+r[n+1],n++),t[s.MW](o)}return{src:e,obj:t}}(e[s.gU]);else if(e.reason&&e.reason[u])t=m(e.reason[u]);else if((0,o.HD0)(e))t=m(e);else{var r=e[p]||e[f]||"";(0,o.HD0)(e[d])&&(r&&(r+="\n"),r+=" from "+e[d]),r&&(t=m(r))}}catch(e){t=m(e)}return t||{src:"",obj:null}}function _(e){var t="";if(e&&!(t=e.typeName||e[s.I]||""))try{var r=/function (.{1,200})\(/.exec(e.constructor[s.r_]());t=r&&r[s.R5]>1?r[1]:""}catch(e){}return t}function S(e){if(e)try{if(!(0,o.HD0)(e)){var t=_(e),r=h(e,!1);return r&&"{}"!==r||(e[c]&&(t=_(e=e[c])),r=h(e,!0)),0!==(0,o.MLb)(r,t)&&"String"!==t?t+":"+r:r}}catch(e){}return""+(e||"")}var E=function(){function e(e,t,r,n,i,c){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var u=this;u.ver=2,function(e){try{if((0,o.Kn2)(e))return"ver"in e&&"exceptions"in e&&"properties"in e}catch(e){}return!1}(t)?(u[s.pj]=t[s.pj]||[],u[s.qZ]=t[s.qZ],u[s.Ee]=t[s.Ee],t[s.uO]&&(u[s.uO]=t[s.uO]),t.id&&(u.id=t.id,t[s.qZ].id=t.id),t[s.oJ]&&(u[s.oJ]=t[s.oJ]),(0,o.lep)(t[s.NE])||(u[s.NE]=t[s.NE])):(r||(r={}),c&&(r.id=c),u[s.pj]=[new w(e,t,r)],u[s.qZ]=(0,a.G9)(e,r),u[s.Ee]=(0,a.NN)(e,n),i&&(u[s.uO]=i),c&&(u.id=c))}return e.CreateAutoException=function(e,t,r,n,o,i,a,c){var u,l=_(o||i||e);return(u={})[s.gU]=g(e,l),u.url=t,u.lineNumber=r,u.columnNumber=n,u.error=S(o||i||e),u.evt=S(i||e),u[s.YX]=l,u.stackDetails=y(a||o||i),u.errorSrc=c,u},e.CreateFromInterface=function(t,r,i,a){var c=r[s.pj]&&(0,o.Mrq)(r[s.pj],(function(e){return w[s.HO](t,e)}));return new e(t,(0,n.uc)((0,n.uc)({},r),{exceptions:c}),i,a)},e.prototype.toInterface=function(){var e,t=this,r=t.exceptions,n=t.properties,i=t.measurements,a=t.severityLevel,c=t.problemGroup,u=t.id,l=t.isManual,d=r instanceof Array&&(0,o.Mrq)(r,(function(e){return e.toInterface()}))||void 0;return(e={ver:"4.0"})[s.pj]=d,e.severityLevel=a,e.properties=n,e.measurements=i,e.problemGroup=c,e.id=u,e.isManual=l,e},e.CreateSimpleException=function(e,t,r,n,o,i){var a;return{exceptions:[(a={},a[s.A5]=!0,a.message=e,a.stack=o,a.typeName=t,a)]}},e.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",e.dataType="ExceptionData",e.formatError=S,e}(),w=function(){function e(e,t,r){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var n=this;if(function(e){try{if((0,o.Kn2)(e))return"hasFullStack"in e&&"typeName"in e}catch(e){}return!1}(t))n[s.YX]=t[s.YX],n[s.gU]=t[s.gU],n[u]=t[u],n[s.Xo]=t[s.Xo]||[],n[s.A5]=t[s.A5];else{var d=t,p=d&&d.evt;(0,o.VZO)(d)||(d=d[c]||p||d),n[s.YX]=(0,a.O$)(e,_(d))||i.b2,n[s.gU]=(0,a.HS)(e,g(t||d,n[s.YX]))||i.b2;var f=t[l]||y(t);n[s.Xo]=function(e){var t,r=e.obj;if(r&&r[s.R5]>0){t=[];var n=0,i=0;if((0,o.tOU)(r,(function(e){var r=e[s.r_]();if(b.regex.test(r)){var o=new b(r,n++);i+=o[s.$t],t[s.MW](o)}})),i>32768)for(var a=0,c=t[s.R5]-1,u=0,l=a,d=c;a<c;){if((u+=t[a][s.$t]+t[c][s.$t])>32768){var p=d-l+1;t.splice(l,p);break}l=a,d=c,a++,c--}}return t}(f),(0,o.kJL)(n[s.Xo])&&(0,o.Mrq)(n[s.Xo],(function(t){t[s.wp]=(0,a.O$)(e,t[s.wp]),t[s.us]=(0,a.O$)(e,t[s.us])})),n[u]=(0,a.GO)(e,function(e){var t="";return e&&(e.obj?(0,o.tOU)(e.obj,(function(e){t+=e+"\n"})):t=e.src||""),t}(f)),n.hasFullStack=(0,o.kJL)(n.parsedStack)&&n.parsedStack[s.R5]>0,r&&(r[s.YX]=r[s.YX]||n[s.YX])}}return e.prototype.toInterface=function(){var e,t=this,r=t[s.Xo]instanceof Array&&(0,o.Mrq)(t[s.Xo],(function(e){return e.toInterface()}));return(e={id:t.id,outerId:t.outerId,typeName:t[s.YX],message:t[s.gU],hasFullStack:t[s.A5],stack:t[u]})[s.Xo]=r||void 0,e},e.CreateFromInterface=function(t,r){var i=r[s.Xo]instanceof Array&&(0,o.Mrq)(r[s.Xo],(function(e){return b[s.HO](e)}))||r[s.Xo];return new e(t,(0,n.uc)((0,n.uc)({},r),{parsedStack:i}))},e}(),b=function(){function e(t,r){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var n=this;if(n[s.$t]=0,"string"==typeof t){var i=t;n[s.qs]=r,n[s.RQ]="<no_method>",n[s.wp]=(0,o.ndY)(i),n[s.us]="",n[s.sO]=0;var a=i.match(e.regex);a&&a[s.R5]>=5&&(n[s.RQ]=(0,o.ndY)(a[2])||n[s.RQ],n[s.us]=(0,o.ndY)(a[4]),n[s.sO]=parseInt(a[5])||0)}else n[s.qs]=t[s.qs],n[s.RQ]=t[s.RQ],n[s.wp]=t[s.wp],n[s.us]=t[s.us],n[s.sO]=t[s.sO],n[s.$t]=0;n.sizeInBytes+=n.method[s.R5],n.sizeInBytes+=n.fileName[s.R5],n.sizeInBytes+=n.assembly[s.R5],n[s.$t]+=e.baseSize,n.sizeInBytes+=n.level.toString()[s.R5],n.sizeInBytes+=n.line.toString()[s.R5]}return e.CreateFromInterface=function(t){return new e(t,null)},e.prototype.toInterface=function(){var e=this;return{level:e[s.qs],method:e[s.RQ],assembly:e[s.wp],fileName:e[s.us],line:e[s.sO]}},e.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,e.baseSize=58,e}()},8829:(e,t,r)=>{"use strict";r.d(t,{j:()=>a});var n=r(508),o=r(1895),i=function(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0},s=r(733),a=function(){function e(e,t,r,a,c,u,l,d,p){this.aiDataContract={ver:1,metrics:1,properties:0};var f=this;f.ver=2;var h=new i;h[o.yM]=a>0?a:void 0,h.max=isNaN(u)||null===u?void 0:u,h.min=isNaN(c)||null===c?void 0:c,h[o.I]=(0,s.O$)(e,t)||n.b2,h.value=r,h.stdDev=isNaN(l)||null===l?void 0:l,f.metrics=[h],f[o.qZ]=(0,s.G9)(e,d),f[o.Ee]=(0,s.NN)(e,p)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",e.dataType="MetricData",e}()},2642:(e,t,r)=>{"use strict";r.d(t,{B:()=>a});var n=r(508),o=r(9722),i=r(1895),s=r(733),a=function(){function e(e,t,r,a,c,u,l){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var d=this;d.ver=2,d.id=(0,s.oO)(e,l),d.url=(0,s.rr)(e,r),d[i.I]=(0,s.O$)(e,t)||n.b2,isNaN(a)||(d[i.az]=(0,o.eN)(a)),d[i.qZ]=(0,s.G9)(e,c),d[i.Ee]=(0,s.NN)(e,u)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",e.dataType="PageviewData",e}()},4486:(e,t,r)=>{"use strict";r.d(t,{y:()=>s});var n=r(508),o=r(1895),i=r(733),s=function(){function e(e,t,r,s,a,c,u){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var l=this;l.ver=2,l.url=(0,i.rr)(e,r),l[o.I]=(0,i.O$)(e,t)||n.b2,l[o.qZ]=(0,i.G9)(e,a),l[o.Ee]=(0,i.NN)(e,c),u&&(l.domProcessing=u.domProcessing,l[o.az]=u[o.az],l.networkConnect=u.networkConnect,l.perfTotal=u.perfTotal,l[o.g5]=u[o.g5],l.sentRequest=u.sentRequest)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",e.dataType="PageviewPerformanceData",e}()},4124:(e,t,r)=>{"use strict";r.d(t,{H:()=>a});var n=r(9722),o=r(8861),i=r(1895),s=r(733),a=function(){function e(e,t,r,a,c,u,l,d,p,f,h,g){void 0===p&&(p="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var v=this;v.ver=2,v.id=t,v[i.az]=(0,n.eN)(c),v.success=u,v.resultCode=l+"",v.type=(0,s.O$)(e,p);var m=(0,o.BB)(e,r,d,a);v.data=(0,s.rr)(e,a)||m.data,v.target=(0,s.O$)(e,m.target),f&&(v.target="".concat(v.target," | ").concat(f)),v[i.I]=(0,s.O$)(e,m[i.I]),v[i.qZ]=(0,s.G9)(e,h),v[i.Ee]=(0,s.NN)(e,g)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",e.dataType="RemoteDependencyData",e}()},9856:(e,t,r)=>{"use strict";r.d(t,{f:()=>s});var n=r(508),o=r(1895),i=r(733),s=function(){function e(e,t,r,s,a){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var c=this;c.ver=2,t=t||n.b2,c[o.gU]=(0,i.HS)(e,t),c[o.qZ]=(0,i.G9)(e,s),c[o.Ee]=(0,i.NN)(e,a),r&&(c[o.uO]=r)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Message",e.dataType="MessageData",e}()},6979:(e,t,r)=>{"use strict";r.d(t,{NZ:()=>f,U:()=>u,ZM:()=>l,az:()=>p,hq:()=>d,oy:()=>c});var n=r(2631),o=r(1895),i=(0,n.MeC)()||{},s=0,a=[null,null,null,null,null];function c(e){var t=s,r=a,n=r[t];return i.createElement?r[t]||(n=r[t]=i.createElement("a")):n={host:p(e,!0)},n.href=e,++t>=r[o.R5]&&(t=0),s=t,n}function u(e){var t,r=c(e);return r&&(t=r.href),t}function l(e){var t,r=c(e);return r&&(t=r[o.wL]),t}function d(e,t){return e?e.toUpperCase()+" "+t:t}function p(e,t){var r=f(e,t)||"";if(r){var i=r.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(null!=i&&i[o.R5]>3&&(0,n.HD0)(i[2])&&i[2][o.R5]>0)return i[2]+(i[3]||"")}return r}function f(e,t){var r=null;if(e){var i=e.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(null!=i&&i[o.R5]>2&&(0,n.HD0)(i[2])&&i[2][o.R5]>0&&(r=i[2]||"",t&&i[o.R5]>2)){var s=(i[1]||"")[o.T1](),a=i[3]||"";("http"===s&&":80"===a||"https"===s&&":443"===a)&&(a=""),r+=a}}return r}},8861:(e,t,r)=>{"use strict";r.d(t,{BB:()=>y,EX:()=>p,HZ:()=>h,I:()=>g,Je:()=>m,QM:()=>_,m:()=>v,wc:()=>f,xx:()=>E,yZ:()=>S});var n=r(2631),o=r(3866),i=r(508),s=r(6708),a=r(733),c=r(6979),u=r(1895),l=[i.cA+i.qp,"https://breeze.aimon.applicationinsights.io"+i.qp,"https://dc-int.services.visualstudio.com"+i.qp],d="cid-v1:";function p(e){return-1!==(0,n.UAM)(l,e[u.T1]())}function f(e){d=e}function h(){return d}function g(e,t,r){if(!t||e&&e.disableCorrelationHeaders)return!1;if(e&&e[u.ZP])for(var o=0;o<e.correlationHeaderExcludePatterns[u.R5];o++)if(e[u.ZP][o].test(t))return!1;var i=(0,c.oy)(t).host[u.T1]();if(!i||-1===(0,n.MLb)(i,":443")&&-1===(0,n.MLb)(i,":80")||(i=((0,c.NZ)(t,!0)||"")[u.T1]()),(!e||!e.enableCorsCorrelation)&&i&&i!==r)return!1;var s,a=e&&e.correlationHeaderDomains;if(a&&((0,n.tOU)(a,(function(e){var t=new RegExp(e.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));s=s||t.test(i)})),!s))return!1;var l=e&&e.correlationHeaderExcludedDomains;if(!l||0===l[u.R5])return!0;for(o=0;o<l[u.R5];o++)if(new RegExp(l[o].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")).test(i))return!1;return i&&i[u.R5]>0}function v(e){if(e){var t=m(e,s.C[1]);if(t&&t!==d)return t}}function m(e,t){if(e)for(var r=e[u.w6](","),n=0;n<r[u.R5];++n){var o=r[n][u.w6]("=");if(2===o[u.R5]&&o[0]===t)return o[1]}}function y(e,t,r,n){var o,i=n,s=n;if(t&&t[u.R5]>0){var l=(0,c.oy)(t);if(o=l.host,!i)if(null!=l[u.wL]){var d=0===l.pathname[u.R5]?"/":l[u.wL];"/"!==d.charAt(0)&&(d="/"+d),s=l[u.wL],i=(0,a.O$)(e,r?r+" "+d:d)}else i=(0,a.O$)(e,t)}else o=n,i=n;return{target:o,name:i,data:s}}function _(){var e=(0,n.ra_)();if(e&&e.now&&e.timing){var t=e.now()+e.timing.navigationStart;if(t>0)return t}return(0,n.Ggd)()}function S(e,t){var r=null;return 0===e||0===t||(0,n.lep)(e)||(0,n.lep)(t)||(r=t-e),r}function E(e,t){var r=e||{};return{getName:function(){return r[u.I]},setName:function(e){t&&t.setName(e),r[u.I]=e},getTraceId:function(){return r.traceID},setTraceId:function(e){t&&t.setTraceId(e),(0,o.jN)(e)&&(r.traceID=e)},getSpanId:function(){return r.parentID},setSpanId:function(e){t&&t.setSpanId(e),(0,o.Lc)(e)&&(r.parentID=e)},getTraceFlags:function(){return r.traceFlags},setTraceFlags:function(e){t&&t.setTraceFlags(e),r.traceFlags=e}}}},1895:(e,t,r)=>{"use strict";r.d(t,{$t:()=>I,A5:()=>M,Ee:()=>P,G$:()=>g,GW:()=>y,Gb:()=>m,HO:()=>x,I:()=>l,MB:()=>_,MW:()=>c,NE:()=>R,R5:()=>o,RQ:()=>L,T1:()=>i,XI:()=>u,Xo:()=>T,YX:()=>O,ZP:()=>E,az:()=>U,g5:()=>B,gU:()=>d,iU:()=>f,ih:()=>w,jZ:()=>v,oJ:()=>A,ok:()=>s,pj:()=>b,qZ:()=>C,qs:()=>j,r_:()=>a,sO:()=>F,uO:()=>N,us:()=>D,w6:()=>n,wL:()=>S,wp:()=>k,x5:()=>h,yM:()=>p});var n="split",o="length",i="toLowerCase",s="ingestionendpoint",a="toString",c="push",u="removeItem",l="name",d="message",p="count",f="preTriggerDate",h="disabled",g="interval",v="daysOfMonth",m="date",y="getUTCDate",_="stringify",S="pathname",E="correlationHeaderExcludePatterns",w="extensionConfig",b="exceptions",T="parsedStack",C="properties",P="measurements",I="sizeInBytes",O="typeName",N="severityLevel",A="problemGroup",R="isManual",x="CreateFromInterface",k="assembly",D="fileName",M="hasFullStack",j="level",L="method",F="line",U="duration",B="receivedResponse"},3238:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AnalyticsPluginIdentifier:()=>B,BreezeChannelIdentifier:()=>U,ConfigurationManager:()=>C,ConnectionStringParser:()=>p.N,ContextTagKeys:()=>P.n,CtxTagKeys:()=>A.Y,DEFAULT_BREEZE_ENDPOINT:()=>h.cA,DEFAULT_BREEZE_PATH:()=>h.qp,Data:()=>b.V,DisabledPropertyName:()=>h.tP,DistributedTracingModes:()=>R.vp,Envelope:()=>g.w,Event:()=>v.j,EventPersistence:()=>R.IN,Exception:()=>m.Pp,Extensions:()=>A.I,HttpMethod:()=>h.w$,Metric:()=>y.j,PageView:()=>_.B,PageViewPerformance:()=>w.y,ProcessLegacy:()=>h.cV,PropertiesPluginIdentifier:()=>F,RemoteDependencyData:()=>S.H,RequestHeaders:()=>f.C,SampleRate:()=>h.fb,SeverityLevel:()=>T._,TelemetryItemCreator:()=>N,ThrottleMgr:()=>d,Trace:()=>E.f,correlationIdCanIncludeCorrelationHeader:()=>n.I,correlationIdGetCorrelationContext:()=>n.m,correlationIdGetCorrelationContextValue:()=>n.Je,correlationIdGetPrefix:()=>n.HZ,correlationIdSetPrefix:()=>n.wc,createDistributedTraceContextFromTrace:()=>n.xx,createDomEvent:()=>M,createOfflineListener:()=>L.g,createTelemetryItem:()=>O,createTraceParent:()=>D.SU,dataSanitizeException:()=>I.GO,dataSanitizeId:()=>I.oO,dataSanitizeInput:()=>I.oN,dataSanitizeKey:()=>I.AL,dataSanitizeKeyAndAddUniqueness:()=>I.X0,dataSanitizeMeasurements:()=>I.NN,dataSanitizeMessage:()=>I.HS,dataSanitizeProperties:()=>I.G9,dataSanitizeString:()=>I.O$,dataSanitizeUrl:()=>I.rr,dateTimeUtilsDuration:()=>n.yZ,dateTimeUtilsNow:()=>n.QM,dsPadNumber:()=>I.ev,findW3cTraceParent:()=>D.lq,formatTraceParent:()=>D.aR,getExtensionByName:()=>x.y1,isBeaconApiSupported:()=>k.MF,isCrossOriginError:()=>x.uI,isInternalApplicationInsightsEndpoint:()=>n.EX,isSampledFlag:()=>D.Pn,isValidSpanId:()=>D.Lc,isValidTraceId:()=>D.jN,isValidTraceParent:()=>D.J6,msToTimeSpan:()=>x.eN,parseConnectionString:()=>p.X,parseTraceParent:()=>D.j_,strNotSpecified:()=>h.b2,stringToBoolOrDefault:()=>x.CO,urlGetAbsoluteUrl:()=>j.U,urlGetCompleteUrl:()=>j.hq,urlGetPathName:()=>j.ZM,urlParseFullHost:()=>j.NZ,urlParseHost:()=>j.az,urlParseUrl:()=>j.oy,utlCanUseLocalStorage:()=>u.d4,utlCanUseSessionStorage:()=>u.D3,utlDisableStorage:()=>u.B1,utlEnableStorage:()=>u.MB,utlGetLocalStorage:()=>u.LN,utlGetSessionStorage:()=>u.Vd,utlGetSessionStorageKeys:()=>u.lC,utlRemoveSessionStorage:()=>u.ll,utlRemoveStorage:()=>u.KX,utlSetLocalStorage:()=>u.TY,utlSetSessionStorage:()=>u.yp,utlSetStoragePrefix:()=>u.mh});var n=r(8861),o=r(2631),i=r(8942),s=r(8769),a=r(1328),c=r(5778),u=r(1464),l=r(1895),d=function(e,t){var r,n,d,p,f,h,g,v=this,m=!1,y=!1;function _(e,t,o,i){if(m){var s=function(e){try{var t=S(e);return(0,c.az)(1e6)<=t.limit.samplingRate}catch(e){}return!1}(e);if(!s)return;var a=S(e),u=O(e),d=w(a,r,u),p=!1,h=0,g=N(e);try{d&&!g?(h=Math.min(a.limit.maxSendNumber,u[l.yM]+1),u[l.yM]=0,p=!0,f[e]=!0,u[l.iU]=new Date):(f[e]=d,u[l.yM]+=1);var v=b(e);C(n,v,u);for(var y=0;y<h;y++)I(e,n,t,o)}catch(e){}return{isThrottled:p,throttleNum:h}}return i&&A(e)[l.MW]({msgID:e,message:t,severity:o}),null}function S(e){return d[e]||d[109]}function E(e,t){var r,n,i,s,a;try{var c=t||{},u={};u[l.x5]=!!c[l.x5];var p=c[l.G$]||{};y=(null==p?void 0:p.daysOfMonth)&&(null==p?void 0:p.daysOfMonth[l.R5])>0,u[l.G$]=(s=null===(i=(i=p)||{})||void 0===i?void 0:i.monthInterval,a=null==i?void 0:i.dayInterval,(0,o.lep)(s)&&(0,o.lep)(a)&&(i.monthInterval=3,y||(i[l.jZ]=[28],y=!0)),i={monthInterval:null==i?void 0:i.monthInterval,dayInterval:null==i?void 0:i.dayInterval,daysOfMonth:null==i?void 0:i.daysOfMonth});var f={samplingRate:(null===(r=c.limit)||void 0===r?void 0:r.samplingRate)||100,maxSendNumber:(null===(n=c.limit)||void 0===n?void 0:n.maxSendNumber)||1};u.limit=f,d[e]=u}catch(e){}}function w(e,t,r){if(e&&!e[l.x5]&&t&&(0,s.BX)(r)){var n=T(),i=r[l.Gb],a=e[l.G$],c=1;if(null==a?void 0:a.monthInterval){var u=12*(n.getUTCFullYear()-i.getUTCFullYear())+n.getUTCMonth()-i.getUTCMonth();c=P(a.monthInterval,0,u)}var d=1;if(y)d=(0,o.UAM)(a[l.jZ],n[l.GW]());else if(null==a?void 0:a.dayInterval){var p=Math.floor((n.getTime()-i.getTime())/864e5);d=P(a.dayInterval,0,p)}return c>=0&&d>=0}return!1}function b(e,t){var r=(0,s.BX)(t)?t:"";return e?"appInsightsThrottle"+r+"-"+e:null}function T(e){try{if(!e)return new Date;var t=new Date(e);if(!isNaN(t.getDate()))return t}catch(e){}return null}function C(e,t,r){try{return(0,u.TY)(e,t,(0,o.ndY)(JSON[l.MB](r)))}catch(e){}return!1}function P(e,t,r){return e<=0?1:r>=t&&(r-t)%e==0?Math.floor((r-t)/e)+1:-1}function I(e,t,r,n){(0,i.kP)(t,n||1,e,r)}function O(e){try{var t=p[e];if(!t){var r=b(e,h);t=function(e,t,r){try{var n={date:T(),count:0};if(e){var o=JSON.parse(e);return{date:T(o[l.Gb])||n[l.Gb],count:o[l.yM]||n[l.yM],preTriggerDate:o.preTriggerDate?T(o[l.iU]):void 0}}return C(t,r,n),n}catch(e){}return null}((0,u.LN)(n,r),n,r),p[e]=t}return p[e]}catch(e){}return null}function N(e){var t=f[e];if((0,o.lep)(t)){t=!1;var r=O(e);r&&(t=function(e){try{if(e){var t=new Date;return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e[l.GW]()===t[l.GW]()}}catch(e){}return!1}(r[l.iU])),f[e]=t}return f[e]}function A(e){return g=g||{},(0,o.lep)(g[e])&&(g[e]=[]),g[e]}n=(0,i.vH)(e),f={},p={},g={},d={},E(109),h=(0,s.BX)(t)?t:"",e.addUnloadHook((0,a.k)(e.config,(function(e){var t=e.cfg;r=(0,u.d4)();var n=t.throttleMgrCfg||{};(0,o.rWU)(n,(function(e,t){E(parseInt(e),t)}))}))),v._getDbgPlgTargets=function(){return[g]},v.getConfig=function(){return d},v.canThrottle=function(e){var t=O(e);return w(S(e),r,t)},v.isTriggered=function(e){return N(e)},v.isReady=function(){return m},v.flush=function(e){try{var t=A(e);if(t&&t[l.R5]>0){var r=t.slice(0);return g[e]=[],(0,o.tOU)(r,(function(e){_(e.msgID,e[l.gU],e.severity,!1)})),!0}}catch(e){}return!1},v.flushAll=function(){try{if(g){var e=!0;return(0,o.rWU)(g,(function(t){var r=v.flush(parseInt(t));e=e&&r})),e}}catch(e){}return!1},v.onReadyState=function(e,t){return void 0===t&&(t=!0),(m=!!(0,o.lep)(e)||e)&&t?v.flushAll():null},v.sendMessage=function(e,t,r){return _(e,t,r,!0)}},p=r(673),f=r(6708),h=r(508),g=r(5922),v=r(6938),m=r(4045),y=r(8829),_=r(2642),S=r(4124),E=r(9856),w=r(4486),b=r(7979),T=r(8967),C=function(){function e(){}return e.getConfig=function(e,t,r,n){var i;return void 0===n&&(n=!1),i=r&&e[l.ih]&&e[l.ih][r]&&!(0,o.lep)(e[l.ih][r][t])?e[l.ih][r][t]:e[t],(0,o.lep)(i)?n:i},e}(),P=r(8266),I=r(733);function O(e,t,r,n,i,a){var c;r=(0,I.O$)(n,r)||h.b2,((0,o.lep)(e)||(0,o.lep)(t)||(0,o.lep)(r))&&(0,o._yM)("Input doesn't contain all required fields");var u="";e[h.ly]&&(u=e[h.ly],delete e[h.ly]);var d=((c={})[l.I]=r,c.time=(0,s.Y6)(new Date),c.iKey=u,c.ext=a||{},c.tags=[],c.data={},c.baseType=t,c.baseData=e,c);return(0,o.lep)(i)||(0,o.rWU)(i,(function(e,t){d.data[e]=t})),d}var N=function(){function e(){}return e.create=O,e}(),A=r(1874),R=r(200),x=r(9722),k=r(9233),D=r(3866);function M(e){var t=null;if((0,o.mf2)(Event))t=new Event(e);else{var r=(0,o.MeC)();r&&r.createEvent&&(t=r.createEvent("Event")).initEvent(e,!0,!0)}return t}var j=r(6979),L=r(5358),F="AppInsightsPropertiesPlugin",U="AppInsightsChannelPlugin",B="ApplicationInsightsAnalytics"},7082:(e,t,r)=>{"use strict";r.d(t,{bK:()=>s,gI:()=>a,up:()=>c});var n=r(2631),o=r(7372);function i(e,t,r){return!e&&(0,n.lep)(e)?t:(0,n.jnD)(e)?e:"true"===(0,n.XCJ)(e)[o.D7]()}function s(e){return{mrg:!0,v:e}}function a(e,t,r){return{fb:r,isVal:e,v:t}}function c(e,t){return{fb:t,set:i,v:!!e}}},4619:(e,t,r)=>{"use strict";r.d(t,{e:()=>c});var n=r(2631),o=r(7372);function i(e){return e&&(0,n.Kn2)(e)&&(e.isVal||e.fb||(0,n.wj3)(e,"v")||(0,n.wj3)(e,"mrg")||(0,n.wj3)(e,"ref")||e.set)}function s(e,t,r){var i,s=r.dfVal||n.$KD;if(t&&r.fb){var a=r.fb;(0,n.kJL)(a)||(a=[a]);for(var c=0;c<a[o.R5];c++){var u=a[c],l=t[u];if(s(l)?i=l:e&&(s(l=e.cfg[u])&&(i=l),e.set(e.cfg,(0,n.XCJ)(u),l)),s(i))break}}return!s(i)&&s(r.v)&&(i=r.v),i}function a(e,t,r){var c,u=r;return r&&i(r)&&(u=s(e,t,r)),u&&(i(u)&&(u=a(e,t,u)),(0,n.kJL)(u)?(c=[])[o.R5]=u[o.R5]:(0,n.POo)(u)&&(c={}),c&&((0,n.rWU)(u,(function(r,n){n&&i(n)&&(n=a(e,t,n)),c[r]=n})),u=c)),u}function c(e,t,r,u){var l,d,p,f,h,g,v,m,y=u;i(y)?(l=y.isVal,d=y.set,g=y[o.aV],v=y[o.vd],f=y.mrg,!(h=y.ref)&&(0,n.o8e)(h)&&(h=!!f),p=s(e,t,y)):p=u,v&&e[o.vd](t,r);var _=!0,S=t[r];!S&&(0,n.lep)(S)||(m=S,_=!1,l&&m!==p&&!l(m)&&(m=p,_=!0),d&&(_=(m=d(m,p,t))===p)),_?m=p?a(e,t,p):p:((0,n.POo)(m)||(0,n.kJL)(p))&&f&&p&&((0,n.POo)(p)||(0,n.kJL)(p))&&(0,n.rWU)(p,(function(t,r){c(e,m,t,r)})),e.set(t,r,m),h&&e.ref(t,r),g&&e[o.aV](t,r)}},1328:(e,t,r)=>{"use strict";r.d(t,{o:()=>_,k:()=>S});var n,o=r(2631),i=r(3831),s=r(370),a=r(7372),c=r(4619),u=r(388),l=["push","pop","shift","unshift","splice"],d=function(e,t,r,n){e&&e[a.v1](3,108,"".concat(r," [").concat(t,"] failed - ")+(0,o.eUe)(n))};function p(e,t){var r=(0,o.Sn2)(e,t);return r&&r.get}function f(e,t,r,n){if(t){var i=p(t,r);i&&i[e.prop]?t[r]=n:function(e,t,r,n){var i={n:r,h:[],trk:function(t){t&&t.fn&&(-1===(0,o.UAM)(i.h,t)&&i.h[a.MW](t),e.trk(t,i))},clr:function(e){var t=(0,o.UAM)(i.h,e);-1!==t&&i.h[a.cb](t,1)}},c=!0,l=!1;function h(){c&&(l=l||(0,u.QT)(h,e,n),n&&!n[u.iM]&&l&&(n=g(e,n,r,"Converting")),c=!1);var t=e.act;return t&&i.trk(t),n}h[e.prop]={chng:function(){e.add(i)}},(0,o.g$V)(t,i.n,{g:h,s:function(v){if(n!==v){h[e.ro]&&!e.upd&&(0,u.bh)("["+r+"] is read-only:"+(0,o.eUe)(t)),c&&(l=l||(0,u.QT)(h,e,n),c=!1);var m=l&&h[e.rf];if(l)if(m){(0,o.rWU)(n,(function(e){n[e]=v?v[e]:s.c8}));try{(0,o.rWU)(v,(function(t,r){f(e,n,t,r)})),v=n}catch(t){d((e.hdlr||{})[a.eZ],r,"Assigning",t),l=!1}}else n&&n[u.iM]&&(0,o.rWU)(n,(function(t){var r=p(n,t);if(r){var o=r[e.prop];o&&o.chng()}}));if(v!==n){var y=v&&(0,u.QT)(h,e,v);!m&&y&&(v=g(e,v,r,"Converting")),n=v,l=y}e.add(i)}}})}(e,t,r,n)}return t}function h(e,t,r,n){if(t){var o=p(t,r),i=o&&!!o[e.prop],s=n&&n[0],c=n&&n[1],l=n&&n[2];if(!i){if(l)try{(0,u.qx)(t)}catch(t){d((e.hdlr||{})[a.eZ],r,"Blocking",t)}try{f(e,t,r,t[r]),o=p(t,r)}catch(t){d((e.hdlr||{})[a.eZ],r,"State",t)}}s&&(o[e.rf]=s),c&&(o[e.ro]=c),l&&(o[e.blkVal]=!0)}return t}function g(e,t,r,n){try{(0,o.rWU)(t,(function(r,n){f(e,t,r,n)})),t[u.iM]||((0,o.iUz)(t,u.iM,{get:function(){return e[a.Hp]}}),function(e,t,r){(0,o.kJL)(t)&&(0,o.tOU)(l,(function(n){var o=t[n];t[n]=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=o[a.ZV](this,n);return g(e,t,r,"Patching"),s}}))}(e,t,r))}catch(t){d((e.hdlr||{})[a.eZ],r,n,t)}return t}var v="[[ai_",m="]]";function y(e,t,r){var s,l=(0,u.Rw)(t);if(l)return l;var p,y=(0,i.J)("dyncfg",!0),_=t&&!1!==r?t:(0,u.$1)(t),S=((s={uid:null,cfg:_})[a.eZ]=e,s[a.jW]=function(){p[a.jW]()},s.set=function(t,r,n){try{t=f(p,t,r,n)}catch(t){d(e,r,"Setting value",t)}return t[r]},s[a.Ag]=function(e,t){return t&&(0,o.rWU)(t,(function(t,r){(0,c.e)(S,e,t,r)})),e},s[a.DI]=function(e){return function(e,t){var r={fn:t,rm:function(){r.fn=null,e=null,t=null}};return(0,o.g$V)(r,"toJSON",{v:function(){return"WatcherHandler"+(r.fn?"":"[X]")}}),e.use(r,t),r}(p,e)},s.ref=function(e,t){var r;return h(p,e,t,(r={},r[0]=!0,r))[t]},s[a.aV]=function(e,t){var r;return h(p,e,t,(r={},r[1]=!0,r))[t]},s[a.vd]=function(e,t){var r;return h(p,e,t,(r={},r[2]=!0,r))[t]},s._block=function(e,t){p.use(null,(function(r){var n=p.upd;try{(0,o.o8e)(t)||(p.upd=t),e(r)}finally{p.upd=n}}))},s);return(0,o.g$V)(S,"uid",{c:!1,e:!1,w:!1,v:y}),g(p=function(e){var t,r,i=(0,o.eML)(v+"get"+e.uid+m),s=(0,o.eML)(v+"ro"+e.uid+m),c=(0,o.eML)(v+"rf"+e.uid+m),u=(0,o.eML)(v+"blkVal"+e.uid+m),l=(0,o.eML)(v+"dtl"+e.uid+m),d=null,p=null;function f(t,n){var i=r.act;try{r.act=t,t&&t[l]&&((0,o.tOU)(t[l],(function(e){e.clr(t)})),t[l]=[]),n({cfg:e.cfg,set:e.set.bind(e),setDf:e[a.Ag].bind(e),ref:e.ref.bind(e),rdOnly:e[a.aV].bind(e)})}catch(t){var s=e[a.eZ];throw s&&s[a.v1](1,107,(0,o.eUe)(t)),t}finally{r.act=i||null}}function h(){if(d){var e=d;d=null,p&&p[a.SG](),p=null;var t=[];if((0,o.tOU)(e,(function(e){if(e&&(e[l]&&((0,o.tOU)(e[l],(function(t){t.clr(e)})),e[l]=null),e.fn))try{f(e,e.fn)}catch(e){t[a.MW](e)}})),d)try{h()}catch(e){t[a.MW](e)}t[a.R5]>0&&function(e,t){n||(n=(0,o.cHs)("AggregationError",(function(e,t){t[a.R5]>1&&(e.errors=t[1])})));var r="Watcher error(s): ";throw(0,o.tOU)(t,(function(e,t){r+="\n".concat(t," > ").concat((0,o.eUe)(e))})),new n(r,t||[])}(0,t)}}return(t={prop:i,ro:s,rf:c})[a.vd]=u,t[a.Hp]=e,t.add=function(e){if(e&&e.h[a.R5]>0){d||(d=[]),p||(p=(0,o.tXR)((function(){p=null,h()}),0));for(var t=0;t<e.h[a.R5];t++){var r=e.h[t];r&&-1===(0,o.UAM)(d,r)&&d[a.MW](r)}}},t[a.jW]=h,t.use=f,t.trk=function(e,t){if(e){var r=e[l]=e[l]||[];-1===(0,o.UAM)(r,t)&&r[a.MW](t)}},r=t}(S),_,"config","Creating"),S}function _(e,t,r,n){var o=y(r,e||{},n);return t&&o[a.Ag](o.cfg,t),o}function S(e,t,r){var n=e[u.iM]||e;return!n.cfg||n.cfg!==e&&n.cfg[u.iM]!==n?(function(e,t){e?(e[a.pQ](t),e[a.v1](2,108,t)):(0,u.bh)(t)}(r,s.XS+(0,o.eUe)(e)),_(e,null,r)[a.DI](t)):n[a.DI](t)}},388:(e,t,r)=>{"use strict";r.d(t,{$1:()=>c,QT:()=>p,Rw:()=>u,bh:()=>f,iM:()=>i,qx:()=>l,sP:()=>d});var n=r(2631),o=r(7372),i=(0,n.dvW)("[[ai_dynCfg_1]]"),s=(0,n.dvW)("[[ai_blkDynCfg_1]]"),a=(0,n.dvW)("[[ai_frcDynCfg_1]]");function c(e){var t;return e&&((0,n.kJL)(e)?(t=[])[o.R5]=e[o.R5]:(0,n.POo)(e)&&(t={}),t)?((0,n.rWU)(e,(function(e,r){t[e]=c(r)})),t):e}function u(e){if(e){var t=e[i]||e;if(t.cfg&&(t.cfg===e||t.cfg[i]===t))return t}return null}function l(e){if(e&&((0,n.POo)(e)||(0,n.kJL)(e)))try{e[s]=!0}catch(e){}return e}function d(e){if(e)try{e[a]=!0}catch(e){}return e}function p(e,t,r){var o=!1;return r&&!e[t.blkVal]&&((o=r[a])||r[s]||(o=(0,n.POo)(r)||(0,n.kJL)(r))),o}function f(e){(0,n.ZU2)("InvalidAccess:"+e)}},488:(e,t,r)=>{"use strict";r.d(t,{B:()=>o,c:()=>i});var n=r(2631),o=n.$S8,i=n.Oz1},3657:(e,t,r)=>{"use strict";r.d(t,{h:()=>o});var n=r(488),o=(0,n.B)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5});(0,n.B)({Unknown:0,NonRetryableStatus:1,CleanStorage:2,MaxInStorageTimeExceeded:3})},6182:(e,t,r)=>{"use strict";r.d(t,{t:()=>n});var n=(0,r(488).B)({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2})},9451:(e,t,r)=>{"use strict";r.d(t,{F:()=>k});var n,o=r(2012),i=r(4635),s=r(862),a=r(2631),c=r(1328),u=r(6182),l=r(7372),d=r(2187),p=r(7970),f=r(2450),h=r(3831),g=r(9266),v=r(8942),m=r(8769),y=r(370),_=r(1016),S=r(7019),E=r(8570),w=r(7076),b=function(e){function t(){var r,n,o=e.call(this)||this;function s(){r=0,n=[]}return o.identifier="TelemetryInitializerPlugin",o.priority=199,s(),(0,i.Z)(t,o,(function(e,t){e.addTelemetryInitializer=function(e){return function(e,t,r){var n={id:t,fn:r};return(0,a.W5k)(e,n),{remove:function(){(0,a.tOU)(e,(function(t,r){if(t.id===n.id)return e[l.cb](r,1),-1}))}}}(n,r++,e)},e[y.hL]=function(t,r){(function(e,t,r){for(var n=!1,o=e[l.R5],i=0;i<o;++i){var s=e[i];if(s)try{if(!1===s.fn[l.ZV](null,[t])){n=!0;break}}catch(e){(0,v.kP)(r,2,64,"Telemetry initializer failed: "+(0,m.jj)(e),{exception:(0,a.eUe)(e)},!0)}}return!n})(n,t,r?r[l.mc]():e[l.mc]())&&e[l.uL](t,r)},e[l.F3]=function(){s()}})),o}return(0,o.ne)(t,e),t.__ieDyn=1,t}(r(8264).i),T=r(6096),C=r(9925),P="Plugins must provide initialize method",I="SDK is still unloading...",O=(0,a.Hef)(((n={cookieCfg:{}})[y.js]={rdOnly:!0,ref:!0,v:[]},n[y.Z]={rdOnly:!0,ref:!0,v:[]},n[y.Zh]={ref:!0,v:{}},n[y.DN]=y.c8,n.loggingLevelConsole=0,n.diagnosticLogInterval=y.c8,n));function N(e,t){return new S.Jk(t)}function A(e,t){var r=!1;return(0,a.tOU)(t,(function(t){if(t===e)return r=!0,-1})),r}function R(e,t,r,n){r&&(0,a.rWU)(r,(function(r,o){n&&(0,a.POo)(o)&&(0,a.POo)(t[r])&&R(e,t[r],o,n),n&&(0,a.POo)(o)&&(0,a.POo)(t[r])?R(e,t[r],o,n):e.set(t,r,o)}))}function x(e,t){var r=null,n=-1;return(0,a.tOU)(e,(function(e,o){if(e.w===t)return r=e,n=o,-1})),{i:n,l:r}}var k=function(){function e(){var t,r,n,k,D,M,j,L,F,U,B,V,$,H,q,z,G,W,K,X,J,Q,Y,Z,ee,te,re,ne,oe,ie,se,ae;(0,i.Z)(e,this,(function(e){function i(){oe=!0,(0,a.lep)(J)?(te=u.t[l.Vv],(0,v.kP)(n,1,112,"ikey can't be resolved from promises")):te=u.t.ACTIVE,ce()}function ce(){r&&(e.releaseQueue(),e[l.T1]())}function ue(e){return ie&&ie[l.jP]||ae||(e||n&&n.queue[l.R5]>0)&&(se||(se=!0,we(t[l.DI]((function(e){var t=e.cfg.diagnosticLogInterval;t&&t>0||(t=1e4);var r=!1;ie&&(r=ie[l.jP],ie[l.SG]()),(ie=(0,a._w8)(me,t)).unref(),ie[l.jP]=r})))),ie[l.jP]=!0),ie}function le(){var e={};Z=[];var t=function(t){t&&(0,a.tOU)(t,(function(t){if(t[l.pZ]&&t[l.PA]&&!e[t.identifier]){var r=t[l.pZ]+"="+t[l.PA];Z[l.MW](r),e[t.identifier]=t}}))};t(V),B&&(0,a.tOU)(B,(function(e){t(e)})),t(U)}function de(){r=!1,(t=(0,c.o)({},O,e[l.eZ])).cfg[l.KW]=1,(0,a.g$V)(e,"config",{g:function(){return t.cfg},s:function(t){e.updateCfg(t,!1)}}),(0,a.g$V)(e,"pluginVersionStringArr",{g:function(){return Z||le(),Z}}),(0,a.g$V)(e,"pluginVersionString",{g:function(){return ee||(Z||le(),ee=Z.join(";")),ee||y.qS}}),(0,a.g$V)(e,"logger",{g:function(){return n||(n=new v.AQ(t.cfg),t[l.eZ]=n),n},s:function(e){t[l.eZ]=e,n!==e&&((0,d.e)(n,!1),n=e)}}),e[l.eZ]=new v.AQ(t.cfg),Y=[];var o=e.config[y.js]||[];o.splice(0,o[l.R5]),(0,a.W5k)(o,Y),H=new b,k=[],(0,d.e)(D,!1),D=null,M=null,j=null,(0,d.e)(L,!1),L=null,F=null,U=[],B=null,V=null,$=!1,q=null,z=(0,h.J)("AIBaseCore",!0),G=(0,T.Y)(),X=null,J=null,W=(0,C.t)(),Q=[],ee=null,Z=null,ae=!1,ie=null,se=!1,te=0,re=null,ne=null,oe=!1}function pe(){var r=(0,E.CD)(ge(),t.cfg,e);return r[l.Fc](ue),r}function fe(t){var r=function(e,t,r){var n,o=[],i=[],s={};return(0,a.tOU)(r,(function(r){((0,a.lep)(r)||(0,a.lep)(r[l.VL]))&&(0,a._yM)(P);var n=r[y.yi],c=r[l.pZ];r&&n&&((0,a.lep)(s[n])?s[n]=c:(0,v.jV)(e,"Two extensions have same priority #"+n+" - "+s[n]+", "+c)),!n||n<t?o[l.MW](r):i[l.MW](r)})),(n={})[y.oV]=o,n[y.Z]=i,n}(e[l.eZ],p.A,U);F=null,ee=null,Z=null,V=(B||[])[0]||[],V=(0,w.AA)((0,a.W5k)(V,r[y.Z]));var n=(0,a.W5k)((0,w.AA)(r[y.oV]),V);Y=(0,a.FL5)(n);var o=e.config[y.js]||[];o.splice(0,o[l.R5]),(0,a.W5k)(o,Y);var i=pe();V&&V[l.R5]>0&&(0,w.bP)(i[l.zV](V),n),(0,w.bP)(i,n),t&&_e(t)}function he(e){var t=null,r=null,n=[];return(0,a.tOU)(Y,(function(t){if(t[l.pZ]===e&&t!==H)return r=t,-1;t.getChannel&&n[l.MW](t)})),!r&&n[l.R5]>0&&(0,a.tOU)(n,(function(t){if(!(r=t.getChannel(e)))return-1})),r&&(t={plugin:r,setEnabled:function(e){(0,w.OY)(r)[y.mE]=!e},isEnabled:function(){var e=(0,w.OY)(r);return!e[l.fi]&&!e[y.mE]},remove:function(e,t){var n;void 0===e&&(e=!0);var o=[r],i=((n={reason:1})[l.d]=e,n);ve(o,i,(function(e){e&&fe({reason:32,removed:o}),t&&t(e)}))}}),t}function ge(){if(!F){var r=(Y||[]).slice();-1===(0,a.UAM)(r,H)&&r[l.MW](H),F=(0,E.jV)((0,w.AA)(r),t.cfg,e)}return F}function ve(r,n,o){if(r&&r[l.R5]>0){var i=(0,E.jV)(r,t.cfg,e),s=(0,E.Bt)(i,e);s[l.Fc]((function(){var e=!1,t=[];(0,a.tOU)(U,(function(n,o){A(n,r)?e=!0:t[l.MW](n)})),U=t,ee=null,Z=null;var n=[];B&&((0,a.tOU)(B,(function(t,o){var i=[];(0,a.tOU)(t,(function(t){A(t,r)?e=!0:i[l.MW](t)})),n[l.MW](i)})),B=n),o&&o(e),ue()})),s[l.uL](n)}else o(!1)}function me(){if(n&&n.queue){var t=n.queue.slice(0);n.queue[l.R5]=0,(0,a.tOU)(t,(function(t){var r,n=((r={})[l.I]=q||"InternalMessageId: "+t[l.Gc],r[l.fm]=J,r[l.Z_]=(0,m.Y6)(new Date),r.baseType=v.lQ.dataType,r.baseData={message:t[l.gU]},r);e.track(n)}))}}function ye(e,t,r,n){var o=1,i=!1,s=null;function c(){o--,i&&0===o&&(s&&s[l.SG](),s=null,t&&t(i),t=null)}return n=n||5e3,V&&V[l.R5]>0&&pe()[l.zV](V).iterate((function(t){if(t.flush){o++;var i=!1;t.flush(e,(function(){i=!0,c()}),r)||i||(e&&null==s?s=(0,a.tXR)((function(){s=null,c()}),n):c())}})),i=!0,c(),!0}function _e(t){var r=(0,E.xy)(ge(),e);r[l.Fc](ue),e._updateHook&&!0===e._updateHook(r,t)||r[l.uL](t)}function Se(t){var r=e[l.eZ];r?((0,v.kP)(r,2,73,t),ue()):(0,a._yM)(t)}function Ee(t){var r=e[l.tb]();r&&r[y.$F]([t],2)}function we(e){W.add(e)}de(),e._getDbgPlgTargets=function(){return[Y,k]},e[l.yl]=function(){return r},e.activeStatus=function(){return te},e._setPendingStatus=function(){te=3},e[l.VL]=function(d,p,f,h){var _;$&&(0,a._yM)(I),e[l.yl]()&&(0,a._yM)("Core cannot be initialized more than once"),t=(0,c.o)(d,O,f||e[l.eZ],!1),d=t.cfg,we(t[l.DI]((function(e){var t=e.cfg;if(3!==te){ne=t.initInMemoMaxSize||100;var o=t[l.p$],c=t.endpointUrl;if((0,a.lep)(o)){J=null,te=u.t[l.Vv];var p="Please provide instrumentation key";r?((0,v.kP)(n,1,100,p),ce()):(0,a._yM)(p)}else{var f=[];if((0,a.y8_)(o)?(f[l.MW](o),J=null):J=o,(0,a.y8_)(c)?(f[l.MW](c),re=null):re=c,f[l.R5]){oe=!1,te=3;var h=(0,m.BX)(t.initTimeOut)?t.initTimeOut:5e4,g=(0,s.Zu)(f);(0,a.tXR)((function(){oe||i()}),h),(0,s.Zm)(g,(function(e){try{if(oe)return;if(!e.rejected){var t=e[l.V_];if(t&&t[l.R5]){var r=t[0];if(J=r&&r[l.V_],t[l.R5]>1){var n=t[1];re=n&&n[l.V_]}}J&&(d[l.p$]=J,d.endpointUrl=re)}i()}catch(e){oe||i()}}))}else i();var _=e.ref(e.cfg,y.Zh);(0,a.rWU)(_,(function(t){e.ref(_,t)}))}}}))),K=function(e,t,r,n){return t.add(e[l.DI]((function(e){var t=e.cfg.disableDbgExt;!0===t&&n&&(r[l.nG](n),n=null),r&&!n&&!0!==t&&(n=(0,g.p)(e.cfg),r[l.g](n))}))),n}(t,W,(D=h)&&e[l.tb](),K),we(t[l.DI]((function(t){if(t.cfg.enablePerfMgr){var r=t.cfg[y.DN];_!==r&&(r||(r=N),(0,m.qK)(t.cfg,y.DN,r),_=r,j=null),M||j||!(0,a.mf2)(r)||(j=r(e,e[l.tb]()))}else j=null,_=null}))),e[l.eZ]=f;var S=d[y.js];if((U=[])[l.MW].apply(U,(0,o.$h)((0,o.$h)([],p,!1),S,!1)),B=d[y.Z],fe(null),V&&0!==V[l.R5]||(0,a._yM)("No "+y.Z+" available"),B&&B[l.R5]>1){var E=e[l.TO]("TeeChannelController");E&&E.plugin||(0,v.kP)(n,1,28,"TeeChannel required")}!function(e,t,r){(0,a.tOU)(t,(function(t){var n=(0,c.k)(e,t.w,r);delete t.w,t.rm=function(){n.rm()}}))}(d,Q,n),Q=null,r=!0,te===u.t.ACTIVE&&ce()},e.getChannels=function(){var e=[];return V&&(0,a.tOU)(V,(function(t){e[l.MW](t)})),(0,a.FL5)(e)},e.track=function(t){(0,S.Lm)(e[y.kl](),(function(){return"AppInsightsCore:track"}),(function(){null===t&&(Ee(t),(0,a._yM)("Invalid telemetry item")),!t[l.I]&&(0,a.lep)(t[l.I])&&(Ee(t),(0,a._yM)("telemetry name required")),t[l.fm]=t[l.fm]||J,t[l.Z_]=t[l.Z_]||(0,m.Y6)(new Date),t.ver=t.ver||"4.0",!$&&e[l.yl]()&&te===u.t.ACTIVE?pe()[l.uL](t):te!==u.t[l.Vv]&&k[l.R5]<=ne&&k[l.MW](t)}),(function(){return{item:t}}),!t.sync)},e[l.fs]=pe,e[l.tb]=function(){return D||(D=new _.f(t.cfg),e._notificationManager=D),D},e[l.g]=function(t){e.getNotifyMgr()[l.g](t)},e[l.nG]=function(e){D&&D[l.nG](e)},e.getCookieMgr=function(){return L||(L=(0,f.Nz)(t.cfg,e[l.eZ])),L},e.setCookieMgr=function(e){L!==e&&((0,d.e)(L,!1),L=e)},e[y.kl]=function(){return M||j||(0,S.j5)()},e.setPerfMgr=function(e){M=e},e.eventCnt=function(){return k[l.R5]},e.releaseQueue=function(){if(r&&k[l.R5]>0){var e=k;k=[],2===te?(0,a.tOU)(e,(function(e){e[l.fm]=e[l.fm]||J,pe()[l.uL](e)})):(0,v.kP)(n,2,20,"core init status is not active")}},e[l.T1]=function(e){return q=e||null,ae=!1,ie&&ie[l.SG](),ue(!0)},e[l.LS]=function(){ae=!0,ie&&ie[l.SG](),me()},(0,m.Vb)(e,(function(){return H}),["addTelemetryInitializer"]),e[l.c7]=function(t,o,i){var c;void 0===t&&(t=!0),r||(0,a._yM)("SDK is not initialized"),$&&(0,a._yM)(I);var u,p=((c={reason:50})[l.d]=t,c.flushComplete=!1,c);t&&!o&&(u=(0,s.wv)((function(e){o=e})));var f=(0,E.Bt)(ge(),e);function h(t){p.flushComplete=t,$=!0,G.run(f,p),e[l.LS](),f[l.uL](p)}return f[l.Fc]((function(){W.run(e[l.eZ]),(0,d.G)([L,D,n],t,(function(){de(),o&&o(p)}))}),e),me(),ye(t,h,6,i)||h(!1),u},e[l.TO]=he,e.addPlugin=function(e,t,r,n){if(!e)return n&&n(!1),void Se(P);var o=he(e[l.pZ]);if(o&&!t)return n&&n(!1),void Se("Plugin ["+e[l.pZ]+"] is already loaded!");var i={reason:16};function s(t){U[l.MW](e),i.added=[e],fe(i),n&&n(!0)}if(o){var a=[o.plugin];ve(a,{reason:2,isAsync:!!r},(function(e){e?(i.removed=a,i.reason|=32,s()):n&&n(!1)}))}else s()},e.updateCfg=function(r,n){var o;if(void 0===n&&(n=!0),e[l.yl]()){o={reason:1,cfg:t.cfg,oldCfg:(0,a.ZBL)({},t.cfg),newConfig:(0,a.ZBL)({},r),merge:n},r=o.newConfig;var i=t.cfg;r[y.js]=i[y.js],r[y.Z]=i[y.Z]}t._block((function(e){var t=e.cfg;R(e,t,r,n),n||(0,a.rWU)(t,(function(n){(0,a.wj3)(r,n)||e.set(t,n,y.c8)})),e[l.Ag](t,O)}),!0),t[l.jW](),o&&_e(o)},e.evtNamespace=function(){return z},e.flush=ye,e.getTraceCtx=function(e){return X||(X=(0,w.Yn)()),X},e.setTraceCtx=function(e){X=e||null},e.addUnloadHook=we,(0,m.Oi)(e,"addUnloadCb",(function(){return G}),"add"),e.onCfgChange=function(n){var o,i,s,u;return r?o=(0,c.k)(t.cfg,n,e[l.eZ]):((u=x(i=Q,s=n).l)||(u={w:s,rm:function(){var e=x(i,s);-1!==e.i&&i[l.cb](e.i,1)}},i[l.MW](u)),o=u),function(e){return(0,a.g$V)({rm:function(){e.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(e)+">"}})}(o)},e.getWParam=function(){return(0,a.Nvg)()||t.cfg.enableWParam?0:-1}}))}return e.__ieDyn=1,e}()},2187:(e,t,r)=>{"use strict";r.d(t,{G:()=>a,e:()=>s});var n=r(862),o=r(2631),i=r(7372);function s(e,t){if(e&&e[i.c7])return e[i.c7](t)}function a(e,t,r){var i;return r||(i=(0,n.wv)((function(e){r=e}))),e&&(0,o.xAH)(e)>0?(0,n.Zm)(s(e[0],t),(function(){a((0,o.K7g)(e,1),t,r)})):r(),i}},8264:(e,t,r)=>{"use strict";r.d(t,{i:()=>v});var n,o=r(4635),i=r(2631),s=r(1328),a=r(7372),c=r(8942),u=r(8769),l=r(370),d=r(8570),p=r(6096),f=r(9925),h="getPlugin",g=((n={})[l.Zh]={isVal:u.BX,v:{}},n),v=function(){function e(){var t,r,n,v,m,y=this;function _(e){void 0===e&&(e=null);var t=e;if(!t){var o=r||(0,d.CD)(null,{},y[l.oV]);t=n&&n[h]?o[a.zV](null,n[h]):o[a.zV](null,n)}return t}function S(e,t,o){(0,s.o)(e,g,(0,c.vH)(t)),!o&&t&&(o=t[a.fs]()[a.Fr]());var i=n;n&&n[h]&&(i=n[h]()),y[l.oV]=t,r=(0,d.CD)(o,e,t,i)}function E(){t=!1,y[l.oV]=null,r=null,n=null,m=(0,f.t)(),v=(0,p.Y)()}E(),(0,o.Z)(e,y,(function(e){e[a.VL]=function(e,r,n,o){S(e,r,o),t=!0},e[a.fi]=function(t,r){var o,i=e[l.oV];if(i&&(!t||i===t[l.oV]())){var s,c=!1,u=t||(0,d.Bt)(null,i,n&&n[h]?n[h]():n),p=r||((o={reason:0})[a.d]=!1,o);return e[a.F3]&&!0===e[a.F3](u,p,f)?s=!0:f(),s}function f(){c||(c=!0,v.run(u,r),m.run(u[a.mc]()),!0===s&&u[a.uL](p),E())}},e[a.Tu]=function(t,r){var o=e[l.oV];if(o&&(!t||o===t[l.oV]())){var i,s=!1,c=t||(0,d.xy)(null,o,n&&n[h]?n[h]():n),u=r||{reason:0};return e._doUpdate&&!0===e._doUpdate(c,u,p)?i=!0:p(),i}function p(){s||(s=!0,S(c.getCfg(),c.core(),c[a.Fr]()))}},(0,u.Oi)(e,"_addUnloadCb",(function(){return v}),"add"),(0,u.Oi)(e,"_addHook",(function(){return m}),"add"),(0,i.g$V)(e,"_unloadHooks",{g:function(){return m}})})),y[a.mc]=function(e){return _(e)[a.mc]()},y[a.yl]=function(){return t},y.setInitialized=function(e){t=e},y[a.Jd]=function(e){n=e},y[a.uL]=function(e,t){t?t[a.uL](e):n&&(0,i.mf2)(n[l.hL])&&n[l.hL](e,null)},y._getTelCtx=_}return e.__ieDyn=1,e}()},7970:(e,t,r)=>{"use strict";r.d(t,{A:()=>n,t:()=>o});var n=500,o="Microsoft_ApplicationInsights_BypassAjaxInstrumentation"},2450:(e,t,r)=>{"use strict";r.d(t,{JP:()=>R,Nz:()=>x,UY:()=>U,p7:()=>k});var n,o,i,s=r(2631),a=r(7082),c=r(1328),u=r(7372),l=r(8942),d=r(9233),p=r(8769),f=r(370),h="toGMTString",g="toUTCString",v="cookie",m="expires",y="isCookieUseDisabled",_="disableCookiesUsage",S="_ckMgr",E=null,w=null,b=null,T={},C={},P=((n={cookieCfg:(0,a.bK)((o={},o[f.sB]={fb:"cookieDomain",dfVal:p.BX},o.path={fb:"cookiePath",dfVal:p.BX},o.enabled=f.c8,o.ignoreCookies=f.c8,o.blockedCookies=f.c8,o)),cookieDomain:f.c8,cookiePath:f.c8})[_]=f.c8,n);function I(){!i&&(i=(0,s.d$o)((function(){return(0,s.MeC)()})))}function O(e){return!e||e.isEnabled()}function N(e,t){return!!(t&&e&&(0,s.kJL)(e.ignoreCookies))&&-1!==(0,s.UAM)(e.ignoreCookies,t)}function A(e,t){var r=t[u.jP];if((0,s.lep)(r)){var n=void 0;(0,s.o8e)(e[y])||(n=!e[y]),(0,s.o8e)(e[_])||(n=!e[_]),r=n}return r}function R(e,t){var r;if(e)r=e.getCookieMgr();else if(t){var n=t.cookieCfg;r=n&&n[S]?n[S]:x(t)}return r||(r=function(e,t){var r=x[S]||C[S];return r||(r=x[S]=x(e,t),C[S]=r),r}(t,(e||{})[u.eZ])),r}function x(e,t){var r,n,o,i,a,l,v,y,_;e=(0,c.o)(e||C,null,t).cfg,a=(0,c.k)(e,(function(t){t[u.Ag](t.cfg,P),n=t.ref(t.cfg,"cookieCfg"),o=n[f.W8]||"/",i=n[f.sB],l=!1!==A(e,n),v=n.getCookie||L,y=n.setCookie||F,_=n.delCookie||F}),t);var E=((r={isEnabled:function(){var r=!1!==A(e,n)&&l&&k(t),o=C[S];return r&&o&&E!==o&&(r=O(o)),r},setEnabled:function(e){l=!1!==e,n[u.jP]=e},set:function(e,t,r,a,c){var l=!1;if(O(E)&&!function(e,t){return!!(t&&e&&(0,s.kJL)(e.blockedCookies)&&-1!==(0,s.UAM)(e.blockedCookies,t))||N(e,t)}(n,e)){var v={},_=(0,s.ndY)(t||f.qS),S=(0,s.MLb)(_,";");if(-1!==S&&(_=(0,s.ndY)((0,s.lH9)(t,S)),v=D((0,s.k4L)(t,S+1))),(0,p.sO)(v,f.sB,a||i,s.fQg,s.o8e),!(0,s.lep)(r)){var b=(0,d.w1)();if((0,s.o8e)(v[m])){var T=(0,s.Ggd)()+1e3*r;if(T>0){var C=new Date;C.setTime(T),(0,p.sO)(v,m,M(C,b?h:g)||M(C,b?h:g)||f.qS,s.fQg)}}b||(0,p.sO)(v,"max-age",f.qS+r,null,s.o8e)}var P=(0,d.k$)();P&&"https:"===P[u.Po]&&((0,p.sO)(v,"secure",null,null,s.o8e),null===w&&(w=!U(((0,s.jWD)()||{})[u.qV])),w&&(0,p.sO)(v,"SameSite","None",null,s.o8e)),(0,p.sO)(v,f.W8,c||o,null,s.o8e),y(e,j(_,v)),l=!0}return l},get:function(e){var t=f.qS;return O(E)&&!N(n,e)&&(t=v(e)),t},del:function(e,t){var r=!1;return O(E)&&(r=E.purge(e,t)),r},purge:function(e,r){var n,o=!1;if(k(t)){var i=((n={})[f.W8]=r||"/",n[m]="Thu, 01 Jan 1970 00:00:01 GMT",n);(0,d.w1)()||(i["max-age"]="0"),_(e,j(f.qS,i)),o=!0}return o}})[u.c7]=function(e){a&&a.rm(),a=null},r);return E[S]=E,E}function k(e){if(null===E){E=!1,!i&&I();try{var t=i.v||{};E=void 0!==t[v]}catch(t){(0,l.kP)(e,2,68,"Cannot access document.cookie - "+(0,p.jj)(t),{exception:(0,s.eUe)(t)})}}return E}function D(e){var t={};if(e&&e[u.R5]){var r=(0,s.ndY)(e)[u.w6](";");(0,s.tOU)(r,(function(e){if(e=(0,s.ndY)(e||f.qS)){var r=(0,s.MLb)(e,"=");-1===r?t[e]=null:t[(0,s.ndY)((0,s.lH9)(e,r))]=(0,s.ndY)((0,s.k4L)(e,r+1))}}))}return t}function M(e,t){return(0,s.mf2)(e[t])?e[t]():null}function j(e,t){var r=e||f.qS;return(0,s.rWU)(t,(function(e,t){r+="; "+e+((0,s.lep)(t)?f.qS:"="+t)})),r}function L(e){var t=f.qS;if(!i&&I(),i.v){var r=i.v[v]||f.qS;b!==r&&(T=D(r),b=r),t=(0,s.ndY)(T[e]||f.qS)}return t}function F(e,t){!i&&I(),i.v&&(i.v[v]=e+"="+t)}function U(e){return!(!(0,s.HD0)(e)||!(0,p._Q)(e,"CPU iPhone OS 12")&&!(0,p._Q)(e,"iPad; CPU OS 12")&&!((0,p._Q)(e,"Macintosh; Intel Mac OS X 10_14")&&(0,p._Q)(e,"Version/")&&(0,p._Q)(e,"Safari"))&&(!(0,p._Q)(e,"Macintosh; Intel Mac OS X 10_14")||!(0,s.IdH)(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)"))&&!(0,p._Q)(e,"Chrome/5")&&!(0,p._Q)(e,"Chrome/6")&&(!(0,p._Q)(e,"UnrealEngine")||(0,p._Q)(e,"Chrome"))&&!(0,p._Q)(e,"UCBrowser/12")&&!(0,p._Q)(e,"UCBrowser/11"))}},9187:(e,t,r)=>{"use strict";r.d(t,{DO:()=>a,GW:()=>s});var n=r(2631),o=r(370),i=r(5778);function s(){var e=a();return(0,n.k4L)(e,0,8)+"-"+(0,n.k4L)(e,8,12)+"-"+(0,n.k4L)(e,12,16)+"-"+(0,n.k4L)(e,16,20)+"-"+(0,n.k4L)(e,20)}function a(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r=o.qS,s=0;s<4;s++)r+=t[15&(e=(0,i._l)())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var a=t[8+(3&(0,i._l)())|0];return(0,n.s1E)(r,0,8)+(0,n.s1E)(r,9,4)+"4"+(0,n.s1E)(r,13,3)+a+(0,n.s1E)(r,16,3)+(0,n.s1E)(r,19,12)}},3831:(e,t,r)=>{"use strict";r.d(t,{J:()=>p,K:()=>f});var n=r(2631),o=r(7372),i=r(8769),s=r(370),a=r(5778),c="3.3.0",u="."+(0,a.pZ)(6),l=0;function d(e){return 1===e[o.xv]||9===e[o.xv]||!+e[o.xv]}function p(e,t){return void 0===t&&(t=!1),(0,i.Gf)(e+l+++(t?"."+c:s.qS)+u)}function f(e){var t={id:p("_aiData-"+(e||s.qS)+"."+c),accept:function(e){return d(e)},get:function(e,r,o,s){var a=e[t.id];return a?a[(0,i.Gf)(r)]:(s&&(a=function(e,t){var r=t[e.id];if(!r){r={};try{d(t)&&(0,n.g$V)(t,e.id,{e:!1,v:r})}catch(e){}}return r}(t,e),a[(0,i.Gf)(r)]=o),o)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch(e){}}};return t}},9266:(e,t,r)=>{"use strict";r.d(t,{j:()=>l,p:()=>d});var n,o=r(2631),i=r(7372),s=r(370),a=[s.uC,s.$F,s.f_,s.C$],c=null;function u(e,t){return function(){var r=arguments,n=l(t);if(n){var o=n.listener;o&&o[e]&&o[e][i.ZV](o,r)}}}function l(e){var t,r=c;return r||!0===e.disableDbgExt||(r=c||((t=(0,o.vsb)("Microsoft"))&&(c=t.ApplicationInsights),c)),r?r.ChromeDbgExt:null}function d(e){if(!n){n={};for(var t=0;t<a[i.R5];t++)n[a[t]]=u(a[t],e)}return n}},8942:(e,t,r)=>{"use strict";r.d(t,{AQ:()=>y,L4:()=>w,jV:()=>E,kP:()=>S,lQ:()=>v,vH:()=>m});var n,o=r(4635),i=r(2631),s=r(1328),a=r(7372),c=r(9266),u=r(9233),l=r(370),d="warnToConsole",p={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},f=((n={})[0]=null,n[1]="errorToConsole",n[2]=d,n[3]="debugToConsole",n);function h(e){return e?'"'+e[a.i7](/\"/g,l.qS)+'"':l.qS}function g(e,t){var r=(0,u.dr)();if(r){var n="log";r[e]&&(n=e),(0,i.mf2)(r[n])&&r[n](t)}}var v=function(){function e(e,t,r,n){void 0===r&&(r=!1);var o=this;o[a.Gc]=e,o[a.gU]=(r?"AI: ":"AI (Internal): ")+e;var i=l.qS;(0,u.nS)()&&(i=(0,u.xA)().stringify(n));var s=(t?" message:"+h(t):l.qS)+(n?" props:"+h(i):l.qS);o[a.gU]+=s}return e.dataType="MessageData",e}();function m(e,t){return(e||{})[a.eZ]||new y(t)}var y=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var r,n,u,l,h,m=0,y={};(0,o.Z)(e,this,(function(e){function o(t,r){if(!(m>=u)){var o=!0,i="AITR_"+r[a.Gc];if(y[i]?o=!1:y[i]=!0,o&&(t<=n&&(e.queue[a.MW](r),m++,_(1===t?"error":"warn",r)),m===u)){var s="Internal events throttle limit per PageView reached for this app.",c=new v(23,s,!1);e.queue[a.MW](c),1===t?e.errorToConsole(s):e[a.pQ](s)}}}function _(e,r){var n=(0,c.j)(t||{});n&&n[a.mc]&&n[a.mc](e,r)}h=function(t){return(0,s.k)((0,s.o)(t,p,e).cfg,(function(e){var t=e.cfg;r=t[a.KW],n=t.loggingLevelTelemetry,u=t.maxMessageLimit,l=t.enableDebug}))}(t||{}),e.consoleLoggingLevel=function(){return r},e[a.v1]=function(t,n,s,c,u){void 0===u&&(u=!1);var p=new v(n,s,u,c);if(l)throw(0,i.eUe)(p);var h=f[t]||d;if((0,i.o8e)(p[a.gU]))_("throw"+(1===t?"Critical":"Warning"),p);else{if(u){var g=+p[a.Gc];!y[g]&&r>=t&&(e[h](p[a.gU]),y[g]=!0)}else r>=t&&e[h](p[a.gU]);o(t,p)}},e.debugToConsole=function(e){g("debug",e),_("warning",e)},e[a.pQ]=function(e){g("warn",e),_("warning",e)},e.errorToConsole=function(e){g("error",e),_("error",e)},e.resetInternalMessageCount=function(){m=0,y={}},e[a.jk]=o,e[a.c7]=function(e){h&&h.rm(),h=null}}))}return e.__ieDyn=1,e}();function _(e){return e||new y}function S(e,t,r,n,o,i){void 0===i&&(i=!1),_(e)[a.v1](t,r,n,o,i)}function E(e,t){_(e)[a.pQ](t)}function w(e,t,r){_(e)[a.jk](t,r)}},9233:(e,t,r)=>{"use strict";r.d(t,{JO:()=>M,MF:()=>D,MX:()=>N,Z3:()=>L,b$:()=>R,cp:()=>j,dI:()=>T,dr:()=>P,ed:()=>U,gz:()=>A,k$:()=>C,nS:()=>I,pI:()=>B,sA:()=>k,w1:()=>x,xA:()=>O});var n=r(3107),o=r(2631),i=r(7372),s=r(8769),a=r(370),c="documentMode",u="location",l="console",d="JSON",p="crypto",f="msCrypto",h="ReactNative",g="msie",v="trident/",m="XMLHttpRequest",y=null,_=null,S=!1,E=null,w=null;function b(e,t){var r=!1;if(e){try{if(!(r=t in e)){var i=e[n.hB];i&&(r=t in i)}}catch(e){}if(!r)try{var s=new e;r=!(0,o.o8e)(s[t])}catch(e){}}return r}function T(e){S=e}function C(e){if(e&&S){var t=(0,o.vsb)("__mockLocation");if(t)return t}return typeof location===n.fK&&location?location:(0,o.vsb)(u)}function P(){return typeof console!==n.jA?console:(0,o.vsb)(l)}function I(){return Boolean(typeof JSON===n.fK&&JSON||null!==(0,o.vsb)(d))}function O(){return I()?JSON||(0,o.vsb)(d):null}function N(){return(0,o.vsb)(p)}function A(){return(0,o.vsb)(f)}function R(){var e=(0,o.jWD)();return!(!e||!e.product)&&e.product===h}function x(){var e=(0,o.jWD)();if(e&&(e[i.qV]!==_||null===y)){var t=((_=e[i.qV])||a.qS)[i.D7]();y=(0,s._Q)(t,g)||(0,s._Q)(t,v)}return y}function k(e){if(void 0===e&&(e=null),!e){var t=(0,o.jWD)()||{};e=t?(t.userAgent||a.qS)[i.D7]():a.qS}var r=(e||a.qS)[i.D7]();if((0,s._Q)(r,g)){var n=(0,o.MeC)()||{};return Math.max(parseInt(r[i.w6](g)[1]),n[c]||0)}if((0,s._Q)(r,v)){var u=parseInt(r[i.w6](v)[1]);if(u)return u+4}return null}function D(e){return null!==w&&!1!==e||(w=(0,o.d6F)()&&Boolean((0,o.jWD)().sendBeacon)),w}function M(e){var t=!1;try{t=!!(0,o.vsb)("fetch");var r=(0,o.vsb)("Request");t&&e&&r&&(t=b(r,"keepalive"))}catch(e){}return t}function j(){return null===E&&(E=typeof XDomainRequest!==n.jA)&&L()&&(E=E&&!b((0,o.vsb)(m),"withCredentials")),E}function L(){var e=!1;try{e=!!(0,o.vsb)(m)}catch(e){}return e}function F(e,t){if(e)for(var r=0;r<e[i.R5];r++){var n=e[r];if(n[i.I]&&n[i.I]===t)return n}return{}}function U(e){var t=(0,o.MeC)();return t&&e?F(t.querySelectorAll("meta"),e).content:null}function B(e){var t,r=(0,o.ra_)();if(r){var n=r.getEntriesByType("navigation")||[];t=F((n[i.R5]>0?n[0]:{}).serverTiming,e).description}return t}},3668:(e,t,r)=>{"use strict";r.d(t,{C1:()=>L,C9:()=>q,Ib:()=>j,JA:()=>$,QY:()=>k,TJ:()=>H,XO:()=>x,Yl:()=>G,c9:()=>V,jU:()=>R,nD:()=>z,nJ:()=>B,pD:()=>M,pZ:()=>D,um:()=>I,yw:()=>U});var n=r(2631),o=r(7372),i=r(3831),s=r(370),a="on",c="attachEvent",u="addEventListener",l="detachEvent",d="removeEventListener",p="events",f="visibilitychange",h="pagehide",g="pageshow",v="unload",m="beforeunload",y=(0,i.J)("aiEvtPageHide"),_=(0,i.J)("aiEvtPageShow"),S=/\.[\.]+/g,E=/[\.]+$/,w=1,b=(0,i.K)("events"),T=/^([^.]*)(?:\.(.+)|)/;function C(e){return e&&e[o.i7]?e[o.i7](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,s.qS):e}function P(e,t){var r;if(t){var i=s.qS;(0,n.kJL)(t)?(i=s.qS,(0,n.tOU)(t,(function(e){(e=C(e))&&("."!==e[0]&&(e="."+e),i+=e)}))):i=C(t),i&&("."!==i[0]&&(i="."+i),e=(e||s.qS)+i)}var a=T.exec(e||s.qS)||[];return(r={})[o.P6]=a[1],r.ns=(a[2]||s.qS).replace(S,".").replace(E,s.qS)[o.w6](".").sort().join("."),r}function I(e,t,r){var i=[],a=b.get(e,p,{},!1),c=P(t,r);return(0,n.rWU)(a,(function(e,t){(0,n.tOU)(t,(function(e){var t;c[o.P6]&&c[o.P6]!==e.evtName[o.P6]||c.ns&&c.ns!=c.ns||i[o.MW](((t={})[o.I]=e.evtName[o.P6]+(e.evtName.ns?"."+e.evtName.ns:s.qS),t.handler=e[o.Kn],t))}))})),i}function O(e,t,r){void 0===r&&(r=!0);var n=b.get(e,p,{},r),o=n[t];return o||(o=n[t]=[]),o}function N(e,t,r,n){e&&t&&t[o.P6]&&(e[d]?e[d](t[o.P6],r,n):e[l]&&e[l](a+t[o.P6],r))}function A(e,t,r,n){for(var i=t[o.R5];i--;){var s=t[i];s&&(r.ns&&r.ns!==s.evtName.ns||n&&!n(s)||(N(e,s.evtName,s[o.Kn],s.capture),t[o.cb](i,1)))}}function R(e,t){return t?P("xx",(0,n.kJL)(t)?[e].concat(t):[e,t]).ns[o.w6]("."):e}function x(e,t,r,n,i){var s;void 0===i&&(i=!1);var l=!1;if(e)try{var d=P(t,n);if(l=function(e,t,r,n){var i=!1;return e&&t&&t[o.P6]&&r&&(e[u]?(e[u](t[o.P6],r,n),i=!0):e[c]&&(e[c](a+t[o.P6],r),i=!0)),i}(e,d,r,i),l&&b.accept(e)){var p=((s={guid:w++,evtName:d})[o.Kn]=r,s.capture=i,s);O(e,d.type)[o.MW](p)}}catch(e){}return l}function k(e,t,r,i,s){if(void 0===s&&(s=!1),e)try{var a=P(t,i),c=!1;!function(e,t,r){if(t[o.P6])A(e,O(e,t[o.P6]),t,r);else{var i=b.get(e,p,{});(0,n.rWU)(i,(function(n,o){A(e,o,t,r)})),0===(0,n.FYL)(i)[o.R5]&&b.kill(e,p)}}(e,a,(function(e){return!((!a.ns||r)&&e[o.Kn]!==r||(c=!0,0))})),c||N(e,a,r,s)}catch(e){}}function D(e,t,r,n){return void 0===n&&(n=!1),x(e,t,r,null,n)}function M(e,t,r,n){void 0===n&&(n=!1),k(e,t,r,null,n)}function j(e,t,r){var o=!1,i=(0,n.Jj3)();i&&(o=x(i,e,t,r),o=x(i.body,e,t,r)||o);var s=(0,n.MeC)();return s&&(o=x(s,e,t,r)||o),o}function L(e,t,r){var o=(0,n.Jj3)();o&&(k(o,e,t,r),k(o.body,e,t,r));var i=(0,n.MeC)();i&&k(i,e,t,r)}function F(e,t,r,i){var s=!1;return t&&e&&e[o.R5]>0&&(0,n.tOU)(e,(function(e){e&&(r&&-1!==(0,n.UAM)(r,e)||(s=j(e,t,i)||s))})),s}function U(e,t,r,i){var s=!1;return t&&e&&(0,n.kJL)(e)&&!(s=F(e,t,r,i))&&r&&r[o.R5]>0&&(s=F(e,t,null,i)),s}function B(e,t,r){e&&(0,n.kJL)(e)&&(0,n.tOU)(e,(function(e){e&&L(e,t,r)}))}function V(e,t,r){return U([m,v,h],e,t,r)}function $(e,t){B([m,v,h],e,t)}function H(e,t,r){var o=R(y,r),i=F([h],e,t,o);return t&&-1!==(0,n.UAM)(t,f)||(i=F([f],(function(t){var r=(0,n.MeC)();e&&r&&"hidden"===r.visibilityState&&e(t)}),t,o)||i),!i&&t&&(i=H(e,null,r)),i}function q(e,t){var r=R(y,t);B([h],e,r),B([f],null,r)}function z(e,t,r){var o=R(_,r),i=F([g],e,t,o);return!(i=F([f],(function(t){var r=(0,n.MeC)();e&&r&&"visible"===r.visibilityState&&e(t)}),t,o)||i)&&t&&(i=z(e,null,r)),i}function G(e,t){var r=R(_,t);B([g],e,r),B([f],null,r)}},8769:(e,t,r)=>{"use strict";r.d(t,{An:()=>I,Ax:()=>b,BX:()=>d,F3:()=>D,Fz:()=>F,Gf:()=>p,Np:()=>P,Oi:()=>S,Vb:()=>E,XE:()=>k,Y6:()=>h,_Q:()=>f,cf:()=>_,fM:()=>O,hl:()=>w,jj:()=>g,mm:()=>T,ot:()=>x,qK:()=>m,sO:()=>v,tV:()=>C});var n=r(6761),o=r(3107),i=r(2631),s=r(7372),a=r(370),c=/-([a-z])/g,u=/([^\w\d_$])/g,l=/^(\d+[\w\d_$])/;function d(e){return!(0,i.lep)(e)}function p(e){var t=e;return t&&(0,i.HD0)(t)&&(t=(t=(t=t[s.i7](c,(function(e,t){return t.toUpperCase()})))[s.i7](u,"_"))[s.i7](l,(function(e,t){return"_"+t}))),t}function f(e,t){return!(!e||!t)&&-1!==(0,i.MLb)(e,t)}function h(e){return e&&e.toISOString()||""}function g(e){return(0,i.VZO)(e)?e[s.I]:a.qS}function v(e,t,r,n,o){var i=r;return e&&((i=e[t])===r||o&&!o(i)||n&&!n(r)||(i=r,e[t]=i)),i}function m(e,t,r){var n;return e?!(n=e[t])&&(0,i.lep)(n)&&(n=(0,i.o8e)(r)?{}:r,e[t]=n):n=(0,i.o8e)(r)?{}:r,n}function y(e,t){var r=null,n=null;return(0,i.mf2)(e)?r=e:n=e,function(){var e=arguments;if(r&&(n=r()),n)return n[t][s.ZV](n,e)}}function _(e,t,r){if(e&&t&&(0,i.Kn2)(e)&&(0,i.Kn2)(t)){var n=function(n){if((0,i.HD0)(n)){var o=t[n];(0,i.mf2)(o)?r&&!r(n,!0,t,e)||(e[n]=y(t,n)):r&&!r(n,!1,t,e)||((0,i.wj3)(e,n)&&delete e[n],(0,i.g$V)(e,n,{g:function(){return t[n]},s:function(e){t[n]=e}}))}};for(var o in t)n(o)}return e}function S(e,t,r,n,o){e&&t&&r&&(!1!==o||(0,i.o8e)(e[t]))&&(e[t]=y(r,n))}function E(e,t,r,n){return e&&t&&(0,i.Kn2)(e)&&(0,i.kJL)(r)&&(0,i.tOU)(r,(function(r){(0,i.HD0)(r)&&S(e,r,t,r,n)})),e}function w(e){return function(){var t=this;e&&(0,i.rWU)(e,(function(e,r){t[e]=r}))}}function b(e){return e&&n.z$&&(e=(0,o.Pw)((0,n.z$)({},e))),e}function T(e,t,r,n,o,a){var c=arguments,u=c[0]||{},l=c[s.R5],d=!1,p=1;for(l>0&&(0,i.jnD)(u)&&(d=u,u=c[p]||{},p++),(0,i.Kn2)(u)||(u={});p<l;p++){var f=c[p],h=(0,i.kJL)(f),g=(0,i.Kn2)(f);for(var v in f)if(h&&v in f||g&&(0,i.wj3)(f,v)){var m=f[v],y=void 0;if(d&&m&&((y=(0,i.kJL)(m))||(0,i.POo)(m))){var _=u[v];y?(0,i.kJL)(_)||(_=[]):(0,i.POo)(_)||(_={}),m=T(d,_,m)}void 0!==m&&(u[v]=m)}}return u}function C(e){try{return e.responseText}catch(e){}return null}function P(e,t){return e?"XDomainRequest,Response:"+C(e)||0:t}function I(e,t){return e?"XMLHttpRequest,Status:"+e[s.Yz]+",Response:"+C(e)||0:t}function O(e,t){return t&&((0,i.hj$)(t)?e=[t].concat(e):(0,i.kJL)(t)&&(e=t.concat(e))),e}Object.getPrototypeOf;var N="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",A="withCredentials",R="timeout";function x(e,t,r,n,o,i){function s(e,t,r){try{e[t]=r}catch(e){}}void 0===n&&(n=!1),void 0===o&&(o=!1);var a=new XMLHttpRequest;return n&&s(a,N,n),r&&s(a,A,r),a.open(e,t,!o),r&&s(a,A,r),!o&&i&&s(a,R,i),a}function k(e){var t={};if((0,i.HD0)(e)){var r=(0,i.ndY)(e)[s.w6](/[\r\n]+/);(0,i.tOU)(r,(function(e){if(e){var r=e.indexOf(": ");if(-1!==r){var n=(0,i.ndY)(e.substring(0,r))[s.D7](),o=(0,i.ndY)(e.substring(r+1));t[n]=o}else t[(0,i.ndY)(e)]=1}}))}return t}function D(e,t,r){if(!e[r]&&t&&t[s.rb]){var n=t[s.rb](r);n&&(e[r]=(0,i.ndY)(n))}return e}var M="kill-duration",j="kill-duration-seconds",L="time-delta-millis";function F(e,t){var r={};return e[s.l8]?r=k(e[s.l8]()):t&&(r=D(r,e,L),r=D(r,e,M),r=D(r,e,j)),r}},370:(e,t,r)=>{"use strict";r.d(t,{$F:()=>h,C$:()=>v,DN:()=>a,W$:()=>y,W8:()=>w,XS:()=>b,Z:()=>i,Zh:()=>u,c8:()=>n,f_:()=>g,hL:()=>d,js:()=>l,kl:()=>S,lO:()=>m,mE:()=>c,oV:()=>s,qS:()=>o,sB:()=>E,uC:()=>f,v_:()=>_,yi:()=>p});var n=void 0,o="",i="channels",s="core",a="createPerfMgr",c="disabled",u="extensionConfig",l="extensions",d="processTelemetry",p="priority",f="eventsSent",h="eventsDiscarded",g="eventsSendRequest",v="perfEvent",m="offlineEventsStored",y="offlineBatchSent",_="offlineBatchDrop",S="getPerfMgr",E="domain",w="path",b="Not dynamic - "},1016:(e,t,r)=>{"use strict";r.d(t,{f:()=>p});var n=r(4635),o=r(862),i=r(2631),s=r(1328),a=r(7372),c=r(370),u={perfEvtsSendAll:!1};function l(e){e.h=null;var t=e.cb;e.cb=[],(0,i.tOU)(t,(function(e){(0,i.TwK)(e.fn,[e.arg])}))}function d(e,t,r,n){(0,i.tOU)(e,(function(e){e&&e[t]&&(r?(r.cb[a.MW]({fn:n,arg:e}),r.h=r.h||(0,i.tXR)(l,0,r)):(0,i.TwK)(n,[e]))}))}var p=function(){function e(t){var r,l;this.listeners=[];var p=[],f={h:null,cb:[]},h=(0,s.o)(t,u);l=h[a.DI]((function(e){r=!!e.cfg.perfEvtsSendAll})),(0,n.Z)(e,this,(function(e){(0,i.g$V)(e,"listeners",{g:function(){return p}}),e[a.g]=function(e){p[a.MW](e)},e[a.nG]=function(e){for(var t=(0,i.UAM)(p,e);t>-1;)p[a.cb](t,1),t=(0,i.UAM)(p,e)},e[c.uC]=function(e){d(p,c.uC,f,(function(t){t[c.uC](e)}))},e[c.$F]=function(e,t){d(p,c.$F,f,(function(r){r[c.$F](e,t)}))},e[c.f_]=function(e,t){d(p,c.f_,t?f:null,(function(r){r[c.f_](e,t)}))},e[c.C$]=function(e){e&&(!r&&e[a.PL]()||d(p,c.C$,null,(function(t){e[a.d]?(0,i.tXR)((function(){return t[c.C$](e)}),0):t[c.C$](e)})))},e[c.lO]=function(e){e&&e[a.R5]&&d(p,c.lO,f,(function(t){t[c.lO](e)}))},e[c.W$]=function(e){e&&e[a.ob]&&d(p,c.W$,f,(function(t){t[c.W$](e)}))},e[c.v_]=function(e,t){if(e>0){var r=t||0;d(p,c.v_,f,(function(t){t[c.v_](e,r)}))}},e[a.c7]=function(e){var t,r=function(){l&&l.rm(),l=null,p=[],f.h&&f.h[a.SG](),f.h=null,f.cb=[]};if(d(p,"unload",null,(function(r){var n=r[a.c7](e);n&&(t||(t=[]),t[a.MW](n))})),t)return(0,o.wv)((function(e){return(0,o.Zm)((0,o.Tp)(t),(function(){r(),e()}))}));r()}}))}return e.__ieDyn=1,e}()},7019:(e,t,r)=>{"use strict";r.d(t,{Jk:()=>p,Lm:()=>h,j5:()=>g,zn:()=>d});var n=r(4635),o=r(2631),i=r(7372),s=r(370),a="ctx",c="ParentContextKey",u="ChildrenContextKey",l=null,d=function(){function e(t,r,n){var s,l=this;l.start=(0,o.Ggd)(),l[i.I]=t,l[i.d]=n,l[i.PL]=function(){return!1},(0,o.mf2)(r)&&(0,o.g$V)(l,"payload",{g:function(){return!s&&(0,o.mf2)(r)&&(s=r(),r=null),s}}),l[i.T]=function(t){return t?t===e[c]||t===e[u]?l[t]:(l[a]||{})[t]:null},l[i.wu]=function(t,r){t&&(t===e[c]?(l[t]||(l[i.PL]=function(){return!0}),l[t]=r):t===e[u]?l[t]=r:(l[a]=l[a]||{})[t]=r)},l[i.Km]=function(){var t=0,r=l[i.T](e[u]);if((0,o.kJL)(r))for(var n=0;n<r[i.R5];n++){var s=r[n];s&&(t+=s[i.Z_])}l[i.Z_]=(0,o.Ggd)()-l.start,l.exTime=l[i.Z_]-t,l[i.Km]=function(){}}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),p=function(){function e(t){this.ctx={},(0,n.Z)(e,this,(function(e){e.create=function(e,t,r){return new d(e,t,r)},e.fire=function(e){e&&(e[i.Km](),t&&(0,o.mf2)(t[s.C$])&&t[s.C$](e))},e[i.wu]=function(t,r){t&&((e[a]=e[a]||{})[t]=r)},e[i.T]=function(t){return(e[a]||{})[t]}}))}return e.__ieDyn=1,e}(),f="CoreUtils.doPerf";function h(e,t,r,n,o){if(e){var a=e;if(a[s.kl]&&(a=a[s.kl]()),a){var l=void 0,p=a[i.T](f);try{if(l=a.create(t(),n,o)){if(p&&l[i.wu]&&(l[i.wu](d[c],p),p[i.T]&&p[i.wu])){var h=p[i.T](d[u]);h||(h=[],p[i.wu](d[u],h)),h[i.MW](l)}return a[i.wu](f,l),r(l)}}catch(e){l&&l[i.wu]&&l[i.wu]("exception",e)}finally{l&&a.fire(l),a[i.wu](f,p)}}}return r()}function g(){return l}},8570:(e,t,r)=>{"use strict";r.d(t,{Bt:()=>y,CD:()=>m,Vi:()=>E,jV:()=>S,xy:()=>_});var n=r(2631),o=r(4619),i=r(1328),s=r(7372),a=r(8942),c=r(8769),u=r(370),l=r(7019),d=r(7076),p="TelemetryPluginChain",f="_hasRun",h="_getTelCtx",g=0;function v(e,t,r,c){var l=null,d=[];t||(t=(0,i.o)({},null,r[s.eZ])),null!==c&&(l=c?function(e,t,r){for(;e;){if(e[s.TO]()===r)return e;e=e[s.Fr]()}return S([r],t.config||{},t)}(e,r,c):e);var p={_next:function(){var e=l;if(l=e?e[s.Fr]():null,!e){var t=d;t&&t[s.R5]>0&&((0,n.tOU)(t,(function(e){try{e.func.call(e.self,e.args)}catch(e){(0,a.kP)(r[s.eZ],2,73,"Unexpected Exception during onComplete - "+(0,n.eUe)(e))}})),d=[])}return e},ctx:{core:function(){return r},diagLog:function(){return(0,a.vH)(r,t.cfg)},getCfg:function(){return t.cfg},getExtCfg:function(e,r){var i=f(e,!0);return r&&(0,n.rWU)(r,(function(e,r){if((0,n.lep)(i[e])){var s=t.cfg[e];!s&&(0,n.lep)(s)||(i[e]=s)}(0,o.e)(t,i,e,r)})),t[s.Ag](i,r)},getConfig:function(e,r,o){void 0===o&&(o=!1);var i,s=f(e,!1),a=t.cfg;return!s||!s[r]&&(0,n.lep)(s[r])?!a[r]&&(0,n.lep)(a[r])||(i=a[r]):i=s[r],i||!(0,n.lep)(i)?i:o},hasNext:function(){return!!l},getNext:function(){return l},setNext:function(e){l=e},iterate:function(e){for(var t;t=p._next();){var r=t[s.TO]();r&&e(r)}},onComplete:function(e,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];e&&d[s.MW]({func:e,self:(0,n.o8e)(t)?p.ctx:t,args:r})}}};function f(e,r){var n=null,o=t.cfg;if(o&&e){var i=o[u.Zh];!i&&r&&(i={}),o[u.Zh]=i,(i=t.ref(o,u.Zh))&&(!(n=i[e])&&r&&(n={}),i[e]=n,n=t.ref(i,e))}return n}return p}function m(e,t,r,o){var a=(0,i.o)(t),c=v(e,a,r,o),l=c.ctx;return l[s.uL]=function(e){var t=c._next();return t&&t[u.hL](e,l),!t},l[s.zV]=function(e,t){return void 0===e&&(e=null),(0,n.kJL)(e)&&(e=S(e,a.cfg,r,t)),m(e||l[s.Fr](),a.cfg,r,t)},l}function y(e,t,r){var o=(0,i.o)(t.config),a=v(e,o,t,r),c=a.ctx;return c[s.uL]=function(e){var t=a._next();return t&&t[s.c7](c,e),!t},c[s.zV]=function(e,r){return void 0===e&&(e=null),(0,n.kJL)(e)&&(e=S(e,o.cfg,t,r)),y(e||c[s.Fr](),t,r)},c}function _(e,t,r){var o=(0,i.o)(t.config),a=v(e,o,t,r).ctx;return a[s.uL]=function(e){return a.iterate((function(t){(0,n.mf2)(t[s.Tu])&&t[s.Tu](a,e)}))},a[s.zV]=function(e,r){return void 0===e&&(e=null),(0,n.kJL)(e)&&(e=S(e,o.cfg,t,r)),_(e||a[s.Fr](),t,r)},a}function S(e,t,r,o){var i=null,c=!o;if((0,n.kJL)(e)&&e[s.R5]>0){var v=null;(0,n.tOU)(e,(function(e){if(c||o!==e||(c=!0),c&&e&&(0,n.mf2)(e[u.hL])){var y=function(e,t,r){var o,i=null,c=(0,n.mf2)(e[u.hL]),v=(0,n.mf2)(e[s.Jd]),y={getPlugin:function(){return e},getNext:function(){return i},processTelemetry:function(o,a){_(a=a||function(){var o;return e&&(0,n.mf2)(e[h])&&(o=e[h]()),o||(o=m(y,t,r)),o}(),(function(t){if(!e||!c)return!1;var r=(0,d.OY)(e);return!r[s.fi]&&!r[u.mE]&&(v&&e[s.Jd](i),e[u.hL](o,t),!0)}),"processTelemetry",(function(){return{item:o}}),!o.sync)||a[s.uL](o)},unload:function(t,r){_(t,(function(){var n=!1;if(e){var o=(0,d.OY)(e),i=e[u.oV]||o[u.oV];!e||i&&i!==t.core()||o[s.fi]||(o[u.oV]=null,o[s.fi]=!0,o[s.yl]=!1,e[s.fi]&&!0===e[s.fi](t,r)&&(n=!0))}return n}),"unload",(function(){}),r[s.d])||t[s.uL](r)},update:function(t,r){_(t,(function(){var n=!1;if(e){var o=(0,d.OY)(e),i=e[u.oV]||o[u.oV];!e||i&&i!==t.core()||o[s.fi]||e[s.Tu]&&!0===e[s.Tu](t,r)&&(n=!0)}return n}),"update",(function(){}),!1)||t[s.uL](r)},_id:o=e?e[s.pZ]+"-"+e[u.yi]+"-"+g++:"Unknown-0-"+g++,_setNext:function(e){i=e}};function _(t,r,c,d,h){var g=!1,v=e?e[s.pZ]:p,m=t[f];return m||(m=t[f]={}),t.setNext(i),e&&(0,l.Lm)(t[u.oV](),(function(){return v+":"+c}),(function(){m[o]=!0;try{var e=i?i._id:u.qS;e&&(m[e]=!1),g=r(t)}catch(e){var l=!i||m[i._id];l&&(g=!0),i&&l||(0,a.kP)(t[s.mc](),1,73,"Plugin ["+v+"] failed during "+c+" - "+(0,n.eUe)(e)+", run flags: "+(0,n.eUe)(m))}}),d,h),g}return(0,n.FL5)(y)}(e,t,r);i||(i=y),v&&v._setNext(y),v=y}}))}return o&&!i?S([o],t,r):i}var E=function(e,t,r,o){var i=m(e,t,r,o);(0,c.Vb)(this,i,(0,n.FYL)(i))}},5778:(e,t,r)=>{"use strict";r.d(t,{_l:()=>v,az:()=>g,pZ:()=>m});var n=r(2631),o=r(7372),i=r(9233),s=r(370),a=4294967296,c=4294967295,u=123456789,l=987654321,d=!1,p=u,f=l;function h(){try{var e=2147483647&(0,n.Ggd)();(t=(Math.random()*a^e)+e)<0&&(t>>>=0),p=u+t&c,f=l-t&c,d=!0}catch(e){}var t}function g(e){return e>0?Math.floor(v()/c*(e+1))>>>0:0}function v(e){var t=0,r=(0,i.MX)()||(0,i.gz)();return r&&r.getRandomValues&&(t=r.getRandomValues(new Uint32Array(1))[0]&c),0===t&&(0,i.w1)()&&(d||h(),t=function(e){var t=((f=36969*(65535&f)+(f>>16)&c)<<16)+(65535&(p=18e3*(65535&p)+(p>>16)&c))>>>0&c|0;return t>>>=0}()&c),0===t&&(t=Math.floor(a*Math.random()|0)),e||(t>>>=0),t}function m(e){void 0===e&&(e=22);for(var t=v()>>>0,r=0,n=s.qS;n[o.R5]<e;)r++,n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===r&&(t=(v()<<2&4294967295|3&t)>>>0,r=0);return n}},7781:(e,t,r)=>{"use strict";r.d(t,{L:()=>a});var n=r(2631),o=r(7372),i=r(8942),s=r(9233);function a(e,t){try{if(e&&""!==e){var r=(0,s.xA)().parse(e);if(r&&r[o.QQ]&&r[o.QQ]>=r.itemsAccepted&&r.itemsReceived-r.itemsAccepted===r.errors[o.R5])return r}}catch(r){(0,i.kP)(t,1,43,"Cannot parse the response. "+(r[o.I]||(0,n.eUe)(r)),{response:e})}return null}},8224:(e,t,r)=>{"use strict";r.d(t,{s:()=>h});var n=r(4635),o=r(862),i=r(2631),s=r(7372),a=r(7970),c=r(8942),u=r(9233),l=r(8769),d="",p="&NoResponseBody=true",f="POST",h=function(){function e(){var t,r,h,g,v,m,y,_,S,E,w,b,T,C=0;(0,n.Z)(e,this,(function(e,n){var P=!0;function I(e,t){(0,c.kP)(h,2,26,"Failed to send telemetry.",{message:e}),N(t,400,{})}function O(e){I("No endpoint url is provided for the batch",e)}function N(e,t,r,n){try{e&&e(t,r,n)}catch(e){}}function A(e,t){var r=(0,i.jWD)(),n=e[s.jx];if(!n)return O(t),!0;n=e[s.jx]+(b?p:d);var o=e[s.ob],a=g?o:new Blob([o],{type:"text/plain;charset=UTF-8"});return r.sendBeacon(n,a)}function R(e,t,r){var n=e[s.ob];try{if(n)if(A(e,t))N(t,200,{},d);else{var o=v&&v.beaconOnRetry;o&&(0,i.mf2)(o)?o(e,t,A):(y&&y[s.Jz](e,t,!0),(0,c.kP)(h,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(e){g&&(0,c.jV)(h,"Failed to send telemetry using sendBeacon API. Ex:"+(0,i.eUe)(e)),N(t,g?0:400,{},d)}}function x(e,r,n){var a,c,u,p=e[s.JA]||{};!n&&t&&(a=(0,o.wv)((function(e,t){c=e,u=t}))),g&&n&&e.disableXhrSync&&(n=!1);var h=e[s.jx];if(!h)return O(r),void(c&&c(!1));var m=(0,l.ot)(f,h,P,!0,n,e[s.jh]);function y(t){var n=v&&v.xhrOnComplete;if(n&&(0,i.mf2)(n))n(t,r,e);else{var o=(0,l.tV)(t);N(r,t[s.Yz],(0,l.Fz)(t,g),o)}}return g||m[s.tp]("Content-type","application/json"),(0,i.tOU)((0,i.FYL)(p),(function(e){m[s.tp](e,p[e])})),m.onreadystatechange=function(){g||(y(m),4===m.readyState&&c&&c(!0))},m.onload=function(){g&&y(m)},m.onerror=function(e){N(r,g?m[s.Yz]:400,(0,l.Fz)(m,g),g?d:(0,l.An)(m)),u&&u(e)},m.ontimeout=function(){N(r,g?m[s.Yz]:500,(0,l.Fz)(m,g),g?d:(0,l.An)(m)),c&&c(!1)},m.send(e[s.ob]),a}function k(e,r,n){var c,u,l,h,m=e[s.jx],y=e[s.ob],_=g?y:new Blob([y],{type:"application/json"}),S=new Headers,E=y[s.R5],w=!1,I=!1,A=e[s.JA]||{},R=((c={method:f,body:_})[a.t]=!0,c);e.headers&&(0,i.FYL)(e.headers)[s.R5]>0&&((0,i.tOU)((0,i.FYL)(A),(function(e){S.append(e,A[e])})),R[s.JA]=S),P&&g&&(R.credentials="include"),n&&(R.keepalive=!0,C+=E,g?2===e._sendReason&&(w=!0,b&&(m+=p)):w=!0);var x=new Request(m,R);try{x[a.t]=!0}catch(e){}if(!n&&t&&(u=(0,o.wv)((function(e,t){l=e,h=t}))),!m)return O(r),void(l&&l(!1));function k(e){N(r,g?0:400,{},g?d:e)}function D(e,t,n){var o=e[s.Yz],a=v.fetchOnComplete;a&&(0,i.mf2)(a)?a(e,r,n||d,t):N(r,o,{},n||d)}try{(0,o.Zm)(fetch(g?m:x,g?R:null),(function(t){if(n&&(C-=E,E=0),!I)if(I=!0,t.rejected)k(t.reason&&t.reason[s.gU]),h&&h(t.reason);else{var r=t[s.V_];try{g||r.ok?g&&!r.body?(D(r,null,d),l&&l(!0)):(0,o.Zm)(r.text(),(function(t){D(r,e,t[s.V_]),l&&l(!0)})):(k(r.statusText),l&&l(!1))}catch(e){k((0,i.eUe)(e)),h&&h(e)}}}))}catch(e){I||(k((0,i.eUe)(e)),h&&h(e))}return w&&!I&&(I=!0,N(r,200,{}),l&&l(!0)),g&&!I&&e[s.jh]>0&&T&&T.set((function(){I||(I=!0,N(r,500,{}),l&&l(!0))}),e[s.jh]),u}function D(e,t,r){var n=(0,i.Jj3)(),o=new XDomainRequest,a=e[s.ob];o.onload=function(){var r=(0,l.tV)(o),n=v&&v.xdrOnComplete;n&&(0,i.mf2)(n)?n(o,t,e):N(t,200,{},r)},o.onerror=function(){N(t,400,{},g?d:(0,l.Np)(o))},o.ontimeout=function(){N(t,500,{})},o.onprogress=function(){};var u=n&&n.location&&n.location[s.Po]||"",p=e[s.jx];if(p){if(!g&&0!==p.lastIndexOf(u,0)){var m="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";return(0,c.kP)(h,2,40,". "+m),void I(m,t)}var y=g?p:p[s.i7](/^(https?:)/,"");o.open(f,y),e[s.jh]&&(o[s.jh]=e[s.jh]),o.send(a),g&&r?T&&T.set((function(){o.send(a)}),0):o.send(a)}else O(t)}function M(){C=0,r=!1,t=!1,h=null,g=null,v=null,m=null,y=null,_=!1,S=!1,E=!1,w=!1,b=!1,T=null}M(),e[s.VL]=function(t,n){h=n,r&&(0,c.kP)(h,1,28,"Sender is already initialized"),e.SetConfig(t),r=!0},e._getDbgPlgTargets=function(){return[r,g,m,t]},e.SetConfig=function(e){try{if(v=e.senderOnCompleteCallBack||{},m=!!e.disableCredentials,g=!!e.isOneDs,t=!!e.enableSendPromise,_=!!e.disableXhr,S=!!e.disableBeacon,E=!!e.disableBeaconSync,T=e.timeWrapper,b=!!e.addNoResponse,w=!!e.disableFetchKeepAlive,y={sendPOST:x},g||(P=!1),m){var r=(0,u.k$)();r&&r.protocol&&"file:"===r.protocol[s.D7]()&&(P=!1)}return!0}catch(e){}return!1},e.getSyncFetchPayload=function(){return C},e.getSenderInst=function(e,t){return e&&e[s.R5]?function(e,t){for(var r,n=0,o=null,i=0;null==o&&i<e[s.R5];)n=e[i],_||1!==n?2!==n||!(0,u.JO)(t)||t&&w?3!==n||!(0,u.MF)()||(t?E:S)||(o=R):o=k:(0,u.cp)()?o=D:(0,u.Z3)()&&(o=x),i++;return o?((r={_transport:n,_isSync:t})[s.Jz]=o,r):null}(e,t):null},e.getFallbackInst=function(){return y},e[s.F3]=function(e,t){M()}}))}return e.__ieDyn=1,e}()},7076:(e,t,r)=>{"use strict";r.d(t,{AA:()=>d,OY:()=>u,Yn:()=>p,bP:()=>l});var n=r(2631),o=r(7372),i=r(3831),s=r(370),a=r(3866),c=(0,i.K)("plugin");function u(e){return c.get(e,"state",{},!0)}function l(e,t){for(var r,i=[],a=null,c=e[o.Fr]();c;){var l=c[o.TO]();if(l){a&&a[o.Jd]&&l[s.hL]&&a[o.Jd](l);var d=!!(r=u(l))[o.yl];l[o.yl]&&(d=l[o.yl]()),d||i[o.MW](l),a=l,c=c[o.Fr]()}}(0,n.tOU)(i,(function(n){var i=e[s.oV]();n[o.VL](e.getCfg(),i,t,e[o.Fr]()),r=u(n),n[s.oV]||r[s.oV]||(r[s.oV]=i),r[o.yl]=!0,delete r[o.fi]}))}function d(e){return e.sort((function(e,t){var r=0;if(t){var n=t[s.hL];e[s.hL]?r=n?e[s.yi]-t[s.yi]:1:n&&(r=-1)}else r=e?1:-1;return r}))}function p(e){var t={};return{getName:function(){return t[o.I]},setName:function(r){e&&e.setName(r),t[o.I]=r},getTraceId:function(){return t[o.nY]},setTraceId:function(r){e&&e.setTraceId(r),(0,a.jN)(r)&&(t[o.nY]=r)},getSpanId:function(){return t[o._d]},setSpanId:function(r){e&&e.setSpanId(r),(0,a.Lc)(r)&&(t[o._d]=r)},getTraceFlags:function(){return t[o.T0]},setTraceFlags:function(r){e&&e.setTraceFlags(r),t[o.T0]=r}}}},6096:(e,t,r)=>{"use strict";r.d(t,{Y:()=>s});var n=r(2631),o=r(7372),i=r(8942);function s(){var e=[];return{add:function(t){t&&e[o.MW](t)},run:function(t,r){(0,n.tOU)(e,(function(e){try{e(t,r)}catch(e){(0,i.kP)(t[o.mc](),2,73,"Unexpected error calling unload handler - "+(0,n.eUe)(e))}})),e=[]}}}},9925:(e,t,r)=>{"use strict";r.d(t,{f:()=>c,t:()=>u});var n,o,i=r(2631),s=r(7372),a=r(8942);function c(e,t){n=e,o=t}function u(){var e=[];return{run:function(t){var r=e;e=[],(0,i.tOU)(r,(function(e){try{(e.rm||e.remove).call(e)}catch(e){(0,a.kP)(t,2,73,"Unloading:"+(0,i.eUe)(e))}})),n&&r[s.R5]>n&&(o?o("doUnload",r):(0,a.kP)(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected."))},add:function(t){t&&((0,i.W5k)(e,t),n&&e[s.R5]>n&&(o?o("Add",e):(0,a.kP)(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected.")))}}}},3866:(e,t,r)=>{"use strict";r.d(t,{J6:()=>E,Lc:()=>S,Pn:()=>w,SU:()=>m,aR:()=>b,jN:()=>_,j_:()=>y,lq:()=>T});var n=r(2631),o=r(7372),i=r(9187),s=r(9233),a=r(370),c=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,u="00",l="ff",d="00000000000000000000000000000000",p="0000000000000000",f=1;function h(e,t,r){return!(!e||e[o.R5]!==t||e===r||!e.match(/^[\da-f]*$/i))}function g(e,t,r){return h(e,t)?e:r}function v(e){(isNaN(e)||e<0||e>255)&&(e=1);for(var t=e.toString(16);t[o.R5]<2;)t="0"+t;return t}function m(e,t,r,s){var a;return(a={})[o.PA]=h(s,2,l)?s:u,a[o.nY]=_(e)?e:(0,i.DO)(),a[o._d]=S(t)?t:(0,n.lH9)((0,i.DO)(),16),a.traceFlags=r>=0&&r<=255?r:1,a}function y(e,t){var r;if(!e)return null;if((0,n.kJL)(e)&&(e=e[0]||""),!e||!(0,n.HD0)(e)||e[o.R5]>8192)return null;if(-1!==e.indexOf(",")){var i=e[o.w6](",");e=i[t>0&&i[o.R5]>t?t:0]}var s=c.exec((0,n.ndY)(e));return s&&s[1]!==l&&s[2]!==d&&s[3]!==p?((r={version:(s[1]||a.qS)[o.D7](),traceId:(s[2]||a.qS)[o.D7](),spanId:(s[3]||a.qS)[o.D7]()})[o.T0]=parseInt(s[4],16),r):null}function _(e){return h(e,32,d)}function S(e){return h(e,16,p)}function E(e){return!!(e&&h(e[o.PA],2,l)&&h(e[o.nY],32,d)&&h(e[o._d],16,p)&&h(v(e[o.T0]),2))}function w(e){return!!E(e)&&(e[o.T0]&f)===f}function b(e){if(e){var t=v(e[o.T0]);h(t,2)||(t="01");var r=e[o.PA]||u;return"00"!==r&&"ff"!==r&&(r=u),"".concat(r.toLowerCase(),"-").concat(g(e.traceId,32,d).toLowerCase(),"-").concat(g(e.spanId,16,p).toLowerCase(),"-").concat(t.toLowerCase())}return""}function T(e){var t="traceparent",r=y((0,s.ed)(t),e);return r||(r=y((0,s.pI)(t),e)),r}},7372:(e,t,r)=>{"use strict";r.d(t,{Ag:()=>l,D7:()=>n,DI:()=>d,F3:()=>G,Fc:()=>L,Fr:()=>K,Gc:()=>$,Hp:()=>v,I:()=>O,JA:()=>ge,Jd:()=>X,Jz:()=>he,KW:()=>U,Km:()=>de,Kn:()=>ne,LS:()=>M,MW:()=>h,P6:()=>re,PA:()=>F,PL:()=>ae,Po:()=>J,QQ:()=>pe,R5:()=>i,SG:()=>m,T:()=>ue,T0:()=>Se,T1:()=>k,TO:()=>I,Tu:()=>W,VL:()=>y,V_:()=>C,Vv:()=>T,Yz:()=>oe,ZV:()=>f,Z_:()=>A,_d:()=>_e,aV:()=>s,c7:()=>j,cb:()=>g,d:()=>q,eZ:()=>p,fi:()=>V,fm:()=>N,fs:()=>x,g:()=>E,gU:()=>H,i7:()=>ee,jP:()=>D,jW:()=>a,jh:()=>ve,jk:()=>te,jx:()=>fe,l8:()=>se,mc:()=>z,nG:()=>S,nY:()=>ye,ob:()=>ce,p$:()=>b,pQ:()=>c,pZ:()=>_,qV:()=>Q,rb:()=>ie,tb:()=>P,tp:()=>me,uL:()=>R,v1:()=>u,vd:()=>o,w6:()=>Y,wu:()=>le,xv:()=>Z,yl:()=>w,zV:()=>B});var n="toLowerCase",o="blkVal",i="length",s="rdOnly",a="notify",c="warnToConsole",u="throwInternal",l="setDf",d="watch",p="logger",f="apply",h="push",g="splice",v="hdlr",m="cancel",y="initialize",_="identifier",S="removeNotificationListener",E="addNotificationListener",w="isInitialized",b="instrumentationKey",T="INACTIVE",C="value",P="getNotifyMgr",I="getPlugin",O="name",N="iKey",A="time",R="processNext",x="getProcessTelContext",k="pollInternalLogs",D="enabled",M="stopPollingInternalLogs",j="unload",L="onComplete",F="version",U="loggingLevelConsole",B="createNew",V="teardown",$="messageId",H="message",q="isAsync",z="diagLog",G="_doTeardown",W="update",K="getNext",X="setNextPlugin",J="protocol",Q="userAgent",Y="split",Z="nodeType",ee="replace",te="logInternalMessage",re="type",ne="handler",oe="status",ie="getResponseHeader",se="getAllResponseHeaders",ae="isChildEvt",ce="data",ue="getCtx",le="setCtx",de="complete",pe="itemsReceived",fe="urlString",he="sendPOST",ge="headers",ve="timeout",me="setRequestHeader",ye="traceId",_e="spanId",Se="traceFlags"},3107:(e,t,r)=>{"use strict";r.d(t,{Pw:()=>a,V4:()=>c,cb:()=>n,fK:()=>o,hB:()=>s,jA:()=>i});var n="function",o="object",i="undefined",s="prototype",a=Object,c=a[s]},2012:(e,t,r)=>{"use strict";r.d(t,{uc:()=>d,ne:()=>f,$h:()=>h});var n=r(8363),o=r(6761),i=r(1825),s=r(3529);function a(e,t){var r=i.E_;if((0,s.VZ)(e))r="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'";else try{r=JSON.stringify(e,i.Il,t?(0,s.hj)(t)?t:4:i.z_)}catch(e){r=" - "+a(e,t)}return(0,s.Mu)(e)+": "+r}var c=i.Pw.create||function(e){if(!e)return{};var t=typeof e;if(t!==i.$l&&t!==i.cy)throw new TypeError("Prototype must be an Object or function: "+a(e));function r(){}return r[i.sw]=e,new r},u=r(3107),l=(((0,n.Rd)()||{}).Symbol,((0,n.Rd)()||{}).Reflect,"hasOwnProperty"),d=o.z$||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])u.V4[l].call(t,o)&&(e[o]=t[o]);return e},p=function(e,t){return p=u.Pw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t[l](r)&&(e[r]=t[r])},p(e,t)};function f(e,t){function r(){this.constructor=e}typeof t!==u.cb&&null!==t&&function(e){throw new TypeError(e)}("Class extends value "+String(t)+" is not a constructor or null"),p(e,t),e[u.hB]=null===t?c(t):(r[u.hB]=t[u.hB],new r)}function h(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e}},3529:(e,t,r)=>{"use strict";r.d(t,{Kn:()=>a,Mu:()=>s,VZ:()=>u,hj:()=>c});var n=r(1825);function o(e){return function(t){return typeof t===e}}function i(e){var t="[object "+e+"]";return function(e){return!(!e||s(e)!==t)}}function s(e){return n.V4.toString.call(e)}function a(e){return!(!e&&function(e){return e===n.Il||function(e){return typeof e===n.i_||e===n.i_}(e)}(e)||!e||typeof e!==n.$l)}n.jd,n.Wu,n.IX,n.i_,o(n.jd),o(n.cy),n.Ch.isArray,i("Date");var c=o(n.Wu),u=(o(n.IX),i("RegExp"),i("File"),i("FormData"),i("Blob"),i("ArrayBuffer"),i("Error"))},8363:(e,t,r)=>{"use strict";r.d(t,{Rd:()=>d});var n,o=r(1825),i="__tsUtils$gblCfg";function s(){var e;return typeof globalThis!==o.i_&&(e=globalThis),e||typeof self===o.i_||(e=self),e||typeof window===o.i_||(e=window),e||typeof global===o.i_||(e=global),e}o.o9;var a,c=o.Pw.defineProperty;o.Pw.defineProperties;var u=function(){a=function(){if(!n){var e=s()||{};n=e[i]=e[i]||{}}return n}(),u=o.Il};var l,d=function(e){return(!l||!1===e||a&&a.lzy&&!l.b)&&(t=s,r=o.Il,l=function(e){var t={};return u&&u(),t.b=a.lzy,c(t,"v",{configurable:!0,get:function(){var r=e();return a.lzy||(c(t,"v",{value:r}),t.b&&delete t.b),a.lzy&&t.b!==a.lzy&&(t.b=a.lzy),r}}),t}((function(){return function(e,t){var r=t;try{r=e()}catch(e){}return r}(t,r)}))),l.v;var t,r}},1825:(e,t,r)=>{"use strict";r.d(t,{$l:()=>u,Ch:()=>m,E_:()=>i,IX:()=>s,Il:()=>o,Pw:()=>g,V4:()=>v,Wu:()=>c,b6:()=>d,cy:()=>a,i_:()=>f,jd:()=>p,o9:()=>h,sw:()=>l,z_:()=>n});var n=void 0,o=null,i="",s="boolean",a="function",c="number",u="object",l="prototype",d="__proto__",p="string",f="undefined",h="value",g=Object,v=g[l],m=(String[l],Array);m[l]},6761:(e,t,r)=>{"use strict";r.d(t,{z$:()=>i});var n=r(1825),o=(r(3529),n.Pw.getOwnPropertyDescriptor);n.Pw.hasOwn;n.Pw.freeze;var i=n.Pw.assign;n.Pw.seal,n.Pw.getPrototypeOf,n.Pw.entries,n.Pw.values},4843:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AppInsightsCore:()=>gt.F,ApplicationInsights:()=>Ct,Sender:()=>ft,SeverityLevel:()=>bt._,arrForEach:()=>E.tOU,isNullOrUndefined:()=>E.lep,proxyFunctions:()=>S.Vb,throwError:()=>E._yM});var n=r(4635),o=r(2012),i=r(508),s=r(6938),a=r(9856),c=r(2642),u=r(4486),l=r(4045),d=r(8829),p=r(4124),f=r(3238),h=r(5358),g=r(1464),v=r(8861),m=r(6708),y=r(7082),_=r(8942),S=r(8769),E=r(2631),w=r(3668),b=r(3831),T=r(1328),C=r(8570),P=r(6182),I=r(9233),O=r(8224),N=r(2187),A=r(7781),R=r(8264),x=r(1874),k=r(733),D=r(5922),M=r(7979),j="duration",L="tags",F="deviceType",U="data",B="name",V="traceID",$="length",H="stringify",q="measurements",z="dataType",G="envelopeType",W="toString",K="_get",X="enqueue",J="count",Q="eventsLimitInMem",Y="push",Z="item",ee="emitLineDelimitedJson",te="clear",re="createNew",ne="markAsSent",oe="clearSent",ie="bufferOverride",se="BUFFER_KEY",ae="SENT_BUFFER_KEY",ce="concat",ue="MAX_BUFFER_SIZE",le="triggerSend",de="diagLog",pe="initialize",fe="_sender",he="customHeaders",ge="maxBatchSizeInBytes",ve="onunloadDisableBeacon",me="isBeaconApiDisabled",ye="alwaysUseXhrOverride",_e="disableXhr",Se="enableSessionStorageBuffer",Ee="_buffer",we="onunloadDisableFetch",be="disableSendBeaconSplit",Te="instrumentationKey",Ce="enableSendPromise",Pe="getSenderInst",Ie="unloadTransports",Oe="convertUndefined",Ne="maxBatchInterval",Ae="serialize",Re="_onError",xe="_onPartialSuccess",ke="_onSuccess",De="itemsReceived",Me="itemsAccepted",je="oriPayload",Le="baseType",Fe="sampleRate",Ue="eventsSendRequest",Be="getSamplingScore",Ve="baseType",$e="baseData",He="properties",qe="true";function ze(e,t,r){return(0,S.sO)(e,t,r,E.fQg)}function Ge(e,t,r){(0,E.lep)(e)||(0,E.rWU)(e,(function(e,n){(0,E.hj$)(n)?r[e]=n:(0,E.HD0)(n)?t[e]=n:(0,I.nS)()&&(t[e]=(0,I.xA)()[H](n))}))}function We(e,t){(0,E.lep)(e)||(0,E.rWU)(e,(function(r,n){e[r]=n||t}))}function Ke(e,t,r,n){var s=new D.w(e,n,t);ze(s,"sampleRate",r[i.fb]),(r[$e]||{}).startTime&&(s.time=(0,S.Y6)(r[$e].startTime)),s.iKey=r.iKey;var a=r.iKey.replace(/-/g,"");return s[B]=s[B].replace("{0}",a),function(e,t,r){var n=r[L]=r[L]||{},i=t.ext=t.ext||{},s=t[L]=t[L]||[],a=i.user;a&&(ze(n,x.Y.userAuthUserId,a.authId),ze(n,x.Y.userId,a.id||a.localId));var c=i.app;c&&ze(n,x.Y.sessionId,c.sesId);var u=i.device;u&&(ze(n,x.Y.deviceId,u.id||u.localId),ze(n,x.Y[F],u.deviceClass),ze(n,x.Y.deviceIp,u.ip),ze(n,x.Y.deviceModel,u.model),ze(n,x.Y[F],u[F]));var l=t.ext.web;if(l){ze(n,x.Y.deviceLanguage,l.browserLang),ze(n,x.Y.deviceBrowserVersion,l.browserVer),ze(n,x.Y.deviceBrowser,l.browser);var d=r[U]=r[U]||{},p=d[$e]=d[$e]||{},f=p[He]=p[He]||{};ze(f,"domain",l.domain),ze(f,"isManual",l.isManual?qe:null),ze(f,"screenRes",l.screenRes),ze(f,"userConsent",l.userConsent?qe:null)}var h=i.os;h&&(ze(n,x.Y.deviceOS,h[B]),ze(n,x.Y.deviceOSVersion,h.osVer));var g=i.trace;g&&(ze(n,x.Y.operationParentId,g.parentID),ze(n,x.Y.operationName,(0,k.O$)(e,g[B])),ze(n,x.Y.operationId,g[V]));for(var v={},m=s[$]-1;m>=0;m--){var y=s[m];(0,E.rWU)(y,(function(e,t){v[e]=t})),s.splice(m,1)}(0,E.rWU)(s,(function(e,t){v[e]=t}));var _=(0,o.uc)((0,o.uc)({},n),v);_[x.Y.internalSdkVersion]||(_[x.Y.internalSdkVersion]=(0,k.O$)(e,"javascript:".concat(Je.Version),64)),r[L]=(0,S.Ax)(_)}(e,r,s),r[L]=r[L]||[],(0,S.Ax)(s)}function Xe(e,t){(0,E.lep)(t[$e])&&(0,_.kP)(e,1,46,"telemetryItem.baseData cannot be null.")}var Je={Version:"3.3.0"};function Qe(e,t,r){Xe(e,t);var n={},o={};t[Ve]!==s.j[z]&&(n.baseTypeSource=t[Ve]),t[Ve]===s.j[z]?(n=t[$e][He]||{},o=t[$e][q]||{}):t[$e]&&Ge(t[$e],n,o),Ge(t[U],n,o),(0,E.lep)(r)||We(n,r);var i=t[$e][B],a=new s.j(e,i,n,o),c=new M.V(s.j[z],a);return Ke(e,s.j[G],t,c)}var Ye,Ze,et=function(){function e(t,r){var o=[],i=!1,s=r.maxRetryCnt;this[K]=function(){return o},this._set=function(e){return o=e},(0,n.Z)(e,this,(function(e){e[X]=function(n){e[J]()>=r[Q]?i||((0,_.kP)(t,2,105,"Maximum in-memory buffer size reached: "+e[J](),!0),i=!0):(n.cnt=n.cnt||0,!(0,E.lep)(s)&&n.cnt>s||o[Y](n))},e[J]=function(){return o[$]},e.size=function(){for(var e=o[$],t=0;t<o[$];t++)e+=o[t].item[$];return r[ee]||(e+=2),e},e[te]=function(){o=[],i=!1},e.getItems=function(){return o.slice(0)},e.batchPayloads=function(e){if(e&&e[$]>0){var t=[];return(0,E.tOU)(e,(function(e){t[Y](e[Z])})),r[ee]?t.join("\n"):"["+t.join(",")+"]"}return null},e[re]=function(e,r,n){var i=o.slice(0);e=e||t,r=r||{};var s=n?new nt(e,r):new tt(e,r);return(0,E.tOU)(i,(function(e){s[X](e)})),s}}))}return e.__ieDyn=1,e}(),tt=function(e){function t(r,o){var i=e.call(this,r,o)||this;return(0,n.Z)(t,i,(function(e,t){e[ne]=function(e){t[te]()},e[oe]=function(e){}})),i}return(0,o.ne)(t,e),t.__ieDyn=1,t}(et),rt=["AI_buffer","AI_sentBuffer"],nt=function(e){function t(r,o){var i=e.call(this,r,o)||this,s=!1,a=null==o?void 0:o.namePrefix,c=o[ie]||{getItem:g.Vd,setItem:g.yp},u=c.getItem,l=c.setItem,d=o.maxRetryCnt;return(0,n.Z)(t,i,(function(e,n){var o=v(t[se]),i=v(t[ae]),c=function(){var e=[];try{return(0,E.tOU)(rt,(function(t){var r=w(t);if(e=e[ce](r),a){var n=w(a+"_"+t);e=e[ce](n)}})),e}catch(e){(0,_.kP)(r,2,41,"Transfer events from previous buffers: "+(0,S.jj)(e)+". previous Buffer items can not be removed",{exception:(0,E.eUe)(e)})}return[]}(),p=i[ce](c),f=e._set(o[ce](p));function h(e,t){var r=[],n=[];return(0,E.tOU)(e,(function(e){n[Y](e[Z])})),(0,E.tOU)(t,(function(e){(0,E.mf2)(e)||-1!==(0,E.UAM)(n,e[Z])||r[Y](e)})),r}function v(e){return m(a?a+"_"+e:e)}function m(e){try{var t=u(r,e);if(t){var n=(0,I.xA)().parse(t);if((0,E.HD0)(n)&&(n=(0,I.xA)().parse(n)),n&&(0,E.kJL)(n))return n}}catch(t){(0,_.kP)(r,1,42," storage key: "+e+", "+(0,S.jj)(t),{exception:(0,E.eUe)(t)})}return[]}function y(e,t){var n=e;try{n=a?a+"_"+n:n;var o=JSON[H](t);l(r,n,o)}catch(e){l(r,n,JSON[H]([])),(0,_.kP)(r,2,41," storage key: "+n+", "+(0,S.jj)(e)+". Buffer cleared",{exception:(0,E.eUe)(e)})}}function w(e){try{var t=m(e),n=[];return(0,E.tOU)(t,(function(e){var t={item:e,cnt:0};n[Y](t)})),(0,g.ll)(r,e),n}catch(e){}return[]}f[$]>t[ue]&&(f[$]=t[ue]),y(t[ae],[]),y(t[se],f),e[X]=function(o){e[J]()>=t[ue]?s||((0,_.kP)(r,2,67,"Maximum buffer size reached: "+e[J](),!0),s=!0):(o.cnt=o.cnt||0,!(0,E.lep)(d)&&o.cnt>d||(n[X](o),y(t.BUFFER_KEY,e[K]())))},e[te]=function(){n[te](),y(t.BUFFER_KEY,e[K]()),y(t[ae],[]),s=!1},e[ne]=function(n){y(t[se],e._set(h(n,e[K]())));var o=v(t[ae]);o instanceof Array&&n instanceof Array&&((o=o[ce](n))[$]>t[ue]&&((0,_.kP)(r,1,67,"Sent buffer reached its maximum size: "+o[$],!0),o[$]=t[ue]),y(t[ae],o))},e[oe]=function(e){var r=v(t[ae]);r=h(e,r),y(t[ae],r)},e[re]=function(n,o,i){i=!!i;var s=e[K]().slice(0),a=v(t[ae]).slice(0);n=n||r,o=o||{},e[te]();var c=i?new t(n,o):new tt(n,o);return(0,E.tOU)(s,(function(e){c[X](e)})),i&&c[ne](a),c}})),i}var r;return(0,o.ne)(t,e),r=t,t.VERSION="_1",t.BUFFER_KEY="AI_buffer"+r.VERSION,t.SENT_BUFFER_KEY="AI_sentBuffer"+r.VERSION,t.MAX_BUFFER_SIZE=2e3,t}(et),ot=function(){function e(t){(0,n.Z)(e,this,(function(e){function r(e,i){var s="__aiCircularRefCheck",a={};if(!e)return(0,_.kP)(t,1,48,"cannot serialize object because it is null or undefined",{name:i},!0),a;if(e[s])return(0,_.kP)(t,2,50,"Circular reference detected while serializing object",{name:i},!0),a;if(!e.aiDataContract){if("measurements"===i)a=o(e,"number",i);else if("properties"===i)a=o(e,"string",i);else if("tags"===i)a=o(e,"string",i);else if((0,E.kJL)(e))a=n(e,i);else{(0,_.kP)(t,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:i},!0);try{(0,I.xA)()[H](e),a=e}catch(e){(0,_.kP)(t,1,48,e&&(0,E.mf2)(e[W])?e[W]():"Error serializing object",null,!0)}}return a}return e[s]=!0,(0,E.rWU)(e.aiDataContract,(function(o,s){var c=(0,E.mf2)(s)?1&s():1&s,u=(0,E.mf2)(s)?4&s():4&s,l=2&s,d=void 0!==e[o],p=(0,E.Kn2)(e[o])&&null!==e[o];if(!c||d||l){if(!u){var f;void 0!==(f=p?l?n(e[o],o):r(e[o],o):e[o])&&(a[o]=f)}}else(0,_.kP)(t,1,24,"Missing required field specification. The field is required but not present on source",{field:o,name:i})})),delete e[s],a}function n(e,n){var o;if(e)if((0,E.kJL)(e)){o=[];for(var i=0;i<e[$];i++){var s=r(e[i],n+"["+i+"]");o[Y](s)}}else(0,_.kP)(t,1,54,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:n},!0);return o}function o(e,r,n){var o;return e&&(o={},(0,E.rWU)(e,(function(e,i){if("string"===r)void 0===i?o[e]="undefined":null===i?o[e]="null":i[W]?o[e]=i[W]():o[e]="invalid field: toString() is not defined.";else if("number"===r)if(void 0===i)o[e]="undefined";else if(null===i)o[e]="null";else{var s=parseFloat(i);o[e]=s}else o[e]="invalid field: "+n+" is of unknown type.",(0,_.kP)(t,1,o[e],null,!0)}))),o}e[Ae]=function(e){var n=r(e,"root");try{return(0,I.xA)()[H](n)}catch(e){(0,_.kP)(t,1,48,e&&(0,E.mf2)(e[W])?e[W]():"Error serializing object",null,!0)}}}))}return e.__ieDyn=1,e}(),it=r(8266),st=function(){function e(){}return e.prototype.getHashCodeScore=function(t){return this.getHashCode(t)/e.INT_MAX_VALUE*100},e.prototype.getHashCode=function(e){if(""===e)return 0;for(;e[$]<8;)e=e[ce](e);for(var t=5381,r=0;r<e[$];++r)t=(t<<5)+t+e.charCodeAt(r),t&=t;return Math.abs(t)},e.INT_MAX_VALUE=2147483647,e}(),at=function(){var e=new st,t=new it.n;this[Be]=function(r){return r[L]&&r[L][t.userId]?e.getHashCodeScore(r[L][t.userId]):r.ext&&r.ext.user&&r.ext.user.id?e.getHashCodeScore(r.ext.user.id):r[L]&&r[L][t.operationId]?e.getHashCodeScore(r[L][t.operationId]):r.ext&&r.ext.telemetryTrace&&r.ext.telemetryTrace[V]?e.getHashCodeScore(r.ext.telemetryTrace[V]):100*Math.random()}},ct=function(){function e(e,t){this.INT_MAX_VALUE=2147483647;var r=t||(0,_.vH)(null);(e>100||e<0)&&(r.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this[Fe]=e,this.samplingScoreGenerator=new at}return e.prototype.isSampledIn=function(e){var t=this[Fe];return null==t||t>=100||e.baseType===d.j[z]||this.samplingScoreGenerator[Be](e)<t},e}(),ut=void 0;function lt(e){try{return e.responseText}catch(e){}return null}var dt=(0,E.Hef)(((Ye={endpointUrl:(0,y.gI)(E.fQg,i.cA+i.qp)})[ee]=(0,y.up)(),Ye[Ne]=15e3,Ye[ge]=102400,Ye.disableTelemetry=(0,y.up)(),Ye[Se]=(0,y.up)(!0),Ye.isRetryDisabled=(0,y.up)(),Ye[me]=(0,y.up)(!0),Ye[be]=(0,y.up)(!0),Ye[_e]=(0,y.up)(),Ye[we]=(0,y.up)(),Ye[ve]=(0,y.up)(),Ye[Te]=ut,Ye.namePrefix=ut,Ye.samplingPercentage=(0,y.gI)((function(e){return!isNaN(e)&&e>0&&e<=100}),100),Ye[he]=ut,Ye[Oe]=ut,Ye[Q]=1e4,Ye[ie]=!1,Ye.httpXHROverride={isVal:function(e){return e&&e.sendPOST},v:ut},Ye[ye]=(0,y.up)(),Ye.transports=ut,Ye.retryCodes=ut,Ye.maxRetryCnt={isVal:E.hj$,v:10},Ye)),pt=((Ze={})[s.j.dataType]=Qe,Ze[a.f.dataType]=function(e,t,r){Xe(e,t);var n=t[$e].message,o=t[$e].severityLevel,i=t[$e][He]||{},s=t[$e][q]||{};Ge(t[U],i,s),(0,E.lep)(r)||We(i,r);var c=new a.f(e,n,o,i,s),u=new M.V(a.f[z],c);return Ke(e,a.f[G],t,u)},Ze[c.B.dataType]=function(e,t,r){var n;Xe(e,t);var o=t[$e];(0,E.lep)(o)||(0,E.lep)(o[He])||(0,E.lep)(o[He][j])?(0,E.lep)(t[U])||(0,E.lep)(t[U][j])||(n=t[U][j],delete t[U][j]):(n=o[He][j],delete o[He][j]);var i,s=t[$e];((t.ext||{}).trace||{})[V]&&(i=t.ext.trace[V]);var a=s.id||i,u=s[B],l=s.uri,d=s[He]||{},p=s[q]||{};if((0,E.lep)(s.refUri)||(d.refUri=s.refUri),(0,E.lep)(s.pageType)||(d.pageType=s.pageType),(0,E.lep)(s.isLoggedIn)||(d.isLoggedIn=s.isLoggedIn[W]()),!(0,E.lep)(s[He])){var f=s[He];(0,E.rWU)(f,(function(e,t){d[e]=t}))}Ge(t[U],d,p),(0,E.lep)(r)||We(d,r);var h=new c.B(e,u,l,n,d,p,a),g=new M.V(c.B[z],h);return Ke(e,c.B[G],t,g)},Ze[u.y.dataType]=function(e,t,r){Xe(e,t);var n=t[$e],o=n[B],i=n.uri||n.url,s=n[He]||{},a=n[q]||{};Ge(t[U],s,a),(0,E.lep)(r)||We(s,r);var c=new u.y(e,o,i,void 0,s,a,n),l=new M.V(u.y[z],c);return Ke(e,u.y[G],t,l)},Ze[l.Pp.dataType]=function(e,t,r){Xe(e,t);var n=t[$e][q]||{},o=t[$e][He]||{};Ge(t[U],o,n),(0,E.lep)(r)||We(o,r);var i=t[$e],s=l.Pp.CreateFromInterface(e,i,o,n),a=new M.V(l.Pp[z],s);return Ke(e,l.Pp[G],t,a)},Ze[d.j.dataType]=function(e,t,r){Xe(e,t);var n=t[$e],o=n[He]||{},i=n[q]||{};Ge(t[U],o,i),(0,E.lep)(r)||We(o,r);var s=new d.j(e,n[B],n.average,n.sampleCount,n.min,n.max,n.stdDev,o,i),a=new M.V(d.j[z],s);return Ke(e,d.j[G],t,a)},Ze[p.H.dataType]=function(e,t,r){Xe(e,t);var n=t[$e][q]||{},o=t[$e][He]||{};Ge(t[U],o,n),(0,E.lep)(r)||We(o,r);var s=t[$e];if((0,E.lep)(s))return(0,_.jV)(e,"Invalid input for dependency data"),null;var a=s[He]&&s[He][i.w$]?s[He][i.w$]:"GET",c=new p.H(e,s.id,s.target,s[B],s[j],s.success,s.responseCode,a,s.type,s.correlationContext,o,n),u=new M.V(p.H[z],c);return Ke(e,p.H[G],t,u)},Ze),ft=function(e){function t(){var r,o,s,a,c,u,l,d=e.call(this)||this;d.priority=1001,d.identifier=f.BreezeChannelIdentifier;var p,y,R,x,k,D,M,j,F,B,V,H,q,z,G,W,K,Q,ee,se,ae,ce,ue,Be,Ve,$e,He,qe=0;return(0,n.Z)(t,d,(function(e,n){function f(t,n){var o=lt(t);if(!t||o+""!="200"&&""!==o){var i=(0,A.L)(o);i&&i[De]&&i[De]>i[Me]&&!z?e[xe](n,i):e[Re](n,(0,S.Np)(t))}else r=0,e[ke](n,0)}function ze(e,t,r){4===e.readyState&&it(e.status,t,e.responseURL,r,(0,S.An)(e),lt(e)||e.response)}function Ge(e){try{if(e){var t=e[je];return t&&t[$]?t:null}}catch(e){}return null}function We(t,r){return!(V||(t?t.baseData&&!t[Le]?(r&&(0,_.kP)(r,1,70,"Cannot send telemetry without baseData and baseType"),1):(t[Le]||(t[Le]="EventData"),e[fe]?(n=t,e._sample.isSampledIn(n)?(t[i.fb]=e._sample[Fe],0):(r&&(0,_.kP)(r,2,33,"Telemetry item was sampled out and not sent",{SampleRate:e._sample[Fe]}),1)):(r&&(0,_.kP)(r,1,28,"Sender was not initialized"),1)):(r&&(0,_.kP)(r,1,7,"Cannot send empty telemetry"),1)));var n}function Ke(e,r){var n=e.iKey||H,o=t.constructEnvelope(e,n,r,q);if(o){var s=!1;if(e[L]&&e[L][i.cV]&&((0,E.tOU)(e[L][i.cV],(function(e){try{e&&!1===e(o)&&(s=!0,(0,_.jV)(r,"Telemetry processor check returns false"))}catch(e){(0,_.kP)(r,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,S.jj)(e),{exception:(0,E.eUe)(e)},!0)}})),delete e[L][i.cV]),!s)return o}else(0,_.kP)(r,1,47,"Unable to create an AppInsights envelope")}function Xe(t){var r="",n=e[de]();try{var o=We(t,n),i=null;o&&(i=Ke(t,n)),i&&(r=c[Ae](i))}catch(e){}return r}function Je(e){var t="";return e&&e[$]&&(t="["+e.join(",")+"]"),t}function Qe(e){var t,r=et();return(t={urlString:x})[U]=e,t.headers=r,t}function Ye(t,r,n,o){void 0===o&&(o=!0);var i=Ze(r),s=t&&t.sendPOST;return s&&i?(o&&e._buffer[ne](r),s(i,(function(t,n,o){return function(t,r,n,o){200===r&&t?e._onSuccess(t,t[$]):o&&e[Re](t,o)}(r,t,0,o)}),!n)):null}function Ze(t){var r;if((0,E.kJL)(t)&&t[$]>0){var n=e[Ee].batchPayloads(t),o=et();return(r={})[U]=n,r.urlString=x,r.headers=o,r.disableXhrSync=ae,r.disableFetchKeepAlive=!ce,r[je]=t,r}return null}function et(){try{var e=l||{};return(0,v.EX)(x)&&(e[m.C[6]]=m.C[7]),e}catch(e){}return null}function rt(t){var r=t?t[$]:0;return e[Ee].size()+r>D&&(y&&!y.isOnline()||e[le](!0,null,10),!0)}function it(t,n,o,i,s,a){var c=null;if(e._appId||(c=(0,A.L)(a))&&c.appId&&(e._appId=c.appId),(t<200||t>=300)&&0!==t){if((301===t||307===t||308===t)&&!st(o))return void e[Re](n,s);!z&&mt(t)?(ht(n),(0,_.kP)(e[de](),2,40,". Response code "+t+". Will retry to send "+n[$]+" items.")):e[Re](n,s)}else y&&!y.isOnline()?z||(ht(n,10),(0,_.kP)(e[de](),2,40,". Offline - Response Code: ".concat(t,". Offline status: ").concat(!y.isOnline(),". Will retry to send ").concat(n.length," items."))):(st(o),206===t?(c||(c=(0,A.L)(a)),c&&!z?e[xe](n,c):e[Re](n,s)):(r=0,e[ke](n,i)))}function st(e){return!(u>=10||(0,E.lep)(e)||""===e||e===x||(x=e,++u,0))}function at(e,t){if(!p)return Ye($e&&$e[Pe]([3],!0),e,t);p(e,!1)}function pt(e){try{if(e&&e[$])return(0,E.HD0)(e[0])}catch(e){}return null}function ft(t,r){var n=null;if((0,E.kJL)(t)){for(var o=t[$],i=0;i<t[$];i++)o+=t[i].item[$];return $e.getSyncFetchPayload()+o<=65e3?n=2:(0,I.MF)()?n=3:(n=1,(0,_.kP)(e[de](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender.")),Ye($e&&$e[Pe]([n],!0),t,r)}return null}function ht(t,n){if(void 0===n&&(n=1),t&&0!==t[$]){var i=e[Ee];i[oe](t),r++;for(var s=0,a=t;s<a.length;s++){var c=a[s];c.cnt=c.cnt||0,c.cnt++,i[X](c)}!function(e){var t;if(r<=1)t=10;else{var n=(Math.pow(2,r)-1)/2,i=Math.floor(Math.random()*n*10)+1;i*=e,t=Math.max(Math.min(i,3600),10)}var s=(0,E.Ggd)()+1e3*t;o=s}(n),gt()}}function gt(){if(!a&&!s){var t=o?Math.max(0,o-(0,E.Ggd)()):0,r=Math.max(G,t);a=(0,E.tXR)((function(){a=null,e[le](!0,null,1)}),r)}}function vt(){a&&a.cancel(),a=null,o=null}function mt(e){return(0,E.lep)(He)?401===e||408===e||429===e||500===e||502===e||503===e||504===e:He[$]&&He.indexOf(e)>-1}function yt(){e[fe]=null,e[Ee]=null,e._appId=null,e._sample=null,l={},y=null,r=0,o=null,s=!1,a=null,c=null,u=0,qe=0,p=null,R=null,x=null,k=null,D=0,M=!1,B=null,V=!1,H=null,q=ut,z=!1,W=null,Q=ut,ae=!1,ce=!1,Ve=!1,ue=null,Be=null,$e=null,(0,E.g$V)(e,"_senderConfig",{g:function(){return(0,S.mm)({},dt)}})}yt(),e.pause=function(){vt(),s=!0},e.resume=function(){s&&(s=!1,o=null,rt(),gt())},e.flush=function(t,r,n){if(void 0===t&&(t=!0),!s){vt();try{return e[le](t,null,n||1)}catch(t){(0,_.kP)(e[de](),1,22,"flush failed, telemetry will not be collected: "+(0,S.jj)(t),{exception:(0,E.eUe)(t)})}}},e.onunloadFlush=function(){if(!s)if(M||se)try{return e[le](!0,at,2)}catch(t){(0,_.kP)(e[de](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+(0,S.jj)(t),{exception:(0,E.eUe)(t)})}else e.flush(!1)},e.addHeader=function(e,t){l[e]=t},e[pe]=function(t,i,s,a){e.isInitialized()&&(0,_.kP)(e[de](),1,28,"Sender is already initialized"),n[pe](t,i,s,a);var m=e.identifier;c=new ot(i.logger),r=0,o=null,e[fe]=null,u=0;var N=e[de]();R=(0,w.jU)((0,b.J)("Sender"),i.evtNamespace&&i.evtNamespace()),y=(0,h.g)(R),e._addHook((0,T.k)(t,(function(t){var r=t.cfg;r.storagePrefix&&(0,g.mh)(r.storagePrefix);var n=(0,C.CD)(null,r,i).getExtCfg(m,dt);(0,E.g$V)(e,"_senderConfig",{g:function(){return n}}),i.activeStatus()===P.t.PENDING?e.pause():i.activeStatus()===P.t.ACTIVE&&e.resume(),k!==n.endpointUrl&&(x=k=n.endpointUrl),B&&B!==n[he]&&(0,E.tOU)(B,(function(e){delete l[e.header]})),D=n[ge],M=(!1===n[ve]||!1===n[me])&&(0,I.MF)(),j=!1===n[ve]&&(0,I.MF)(),F=!1===n[me]&&(0,I.MF)(),se=n[ye],ae=!!n[_e],He=n.retryCodes;var o=n[ie],s=!!n[Se]&&(!!o||(0,g.D3)()),a=n.namePrefix,c=s!==W||s&&Q!==a||s&&K!==o;if(e[Ee]){if(c)try{e._buffer=e._buffer[re](N,n,s)}catch(t){(0,_.kP)(e[de](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+(0,S.jj)(t),{exception:(0,E.eUe)(t)})}rt()}else e[Ee]=s?new nt(N,n):new tt(N,n);Q=a,W=s,K=o,ce=!n[we]&&(0,I.JO)(!0),Ve=!!n[be],e._sample=new ct(n.samplingPercentage,N),function(e,t){var r=t.disableInstrumentationKeyValidation;return!((0,E.lep)(r)||!r)||new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e)}(H=n[Te],r)||(0,_.kP)(N,1,100,"Invalid Instrumentation key "+H),B=n[he],(0,E.HD0)(x)&&!(0,v.EX)(x)&&B&&B[$]>0?(0,E.tOU)(B,(function(e){d.addHeader(e.header,e.value)})):B=null,ee=n[Ce];var u=function(){var t;try{var r={xdrOnComplete:function(e,t,r){var n=Ge(r);if(n)return f(e,n)},fetchOnComplete:function(e,t,r,n){var o=Ge(n);if(o)return it(e.status,o,e.url,o[$],e.statusText,r||"")},xhrOnComplete:function(e,t,r){var n=Ge(r);if(n)return ze(e,n,n[$])},beaconOnRetry:function(t,r,n){return function(t,r,n){var o=t&&t[je];if(Ve)Be&&Be(o,!0),(0,_.kP)(e[de](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var i=[],s=0;s<o[$];s++){var a=o[s],c=[a];n(Ze(c),r)?e._onSuccess(c,c[$]):i[Y](a)}i[$]>0&&(Be&&Be(i,!0),(0,_.kP)(e[de](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}(t,r,n)}};return(t={})[Ce]=ee,t.isOneDs=!1,t.disableCredentials=!1,t[_e]=ae,t.disableBeacon=!F,t.disableBeaconSync=!j,t.senderOnCompleteCallBack=r,t}catch(e){}return null}();$e?$e.SetConfig(u):($e=new O.s)[pe](u,N);var h=n.httpXHROverride,y=null,w=null,b=(0,S.fM)([3,1,2],n.transports);y=$e&&$e[Pe](b,!1);var T=$e&&$e.getFallbackInst();ue=function(e,t){return Ye(T,e,t)},Be=function(e,t){return Ye(T,e,t,!1)},y=se?h:y||h||T,e[fe]=function(e,t){return Ye(y,e,t)},ce&&(p=ft);var A=(0,S.fM)([3,1],n[Ie]);ce||(A=A.filter((function(e){return 2!==e}))),w=$e&&$e[Pe](A,!0),w=se?h:w||h,(se||n[Ie]||!p)&&w&&(p=function(e,t){return Ye(w,e,t)}),p||(p=ue),V=n.disableTelemetry,q=n[Oe]||ut,z=n.isRetryDisabled,G=n[Ne]})))},e.processTelemetry=function(t,r){var n,o=(r=e._getTelCtx(r))[de]();try{if(!We(t,o))return;var i=Ke(t,o);if(!i)return;var s=c[Ae](i),a=e[Ee];rt(s);var u=((n={})[Z]=s,n.cnt=0,n);a[X](u),gt()}catch(e){(0,_.kP)(o,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+(0,S.jj)(e),{exception:(0,E.eUe)(e)})}e.processNext(t,r)},e.isCompletelyIdle=function(){return!s&&0===qe&&0===e._buffer[J]()},e._xhrReadyStateChange=function(e,t,r){if(!pt(t))return ze(e,t,r)},e[le]=function(t,r,n){var o;if(void 0===t&&(t=!0),!s)try{var i=e[Ee];if(V)i[te]();else{if(i[J]()>0){var a=i.getItems();!function(t,r){var n,o=(n="getNotifyMgr",e.core[n]?e.core[n]():e.core._notificationManager);if(o&&o[Ue])try{o[Ue](t,r)}catch(t){(0,_.kP)(e[de](),1,74,"send request notification failed: "+(0,S.jj)(t),{exception:(0,E.eUe)(t)})}}(n||0,t),o=r?r.call(e,a,t):e[fe](a,t)}new Date}vt()}catch(t){var c=(0,I.sA)();(!c||c>9)&&(0,_.kP)(e[de](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+(0,S.jj)(t),{exception:(0,E.eUe)(t)})}return o},e.getOfflineSupport=function(){var e;return(e={getUrl:function(){return x},createPayload:Qe})[Ae]=Xe,e.batch=Je,e.shouldProcess=function(e){return!!We(e)},e},e._doTeardown=function(t,r){e.onunloadFlush(),(0,N.e)(y,!1),yt()},e[Re]=function(t,r,n){if(!pt(t))return function(t,r,n){(0,_.kP)(e[de](),2,26,"Failed to send telemetry.",{message:r}),e._buffer&&e._buffer[oe](t)}(t,r)},e[xe]=function(t,r){if(!pt(t))return function(t,r){for(var n=[],o=[],i=0,s=r.errors.reverse();i<s.length;i++){var a=s[i],c=t.splice(a.index,1)[0];mt(a.statusCode)?o[Y](c):n[Y](c)}t[$]>0&&e[ke](t,r[Me]),n[$]>0&&e[Re](n,(0,S.An)(null,["partial success",r[Me],"of",r.itemsReceived].join(" "))),o[$]>0&&(ht(o),(0,_.kP)(e[de](),2,40,"Partial success. Delivered: "+t[$]+", Failed: "+n[$]+". Will retry to send "+o[$]+" our of "+r[De]+" items"))}(t,r)},e[ke]=function(t,r){if(!pt(t))return function(t,r){e._buffer&&e._buffer[oe](t)}(t)},e._xdrOnLoad=function(e,t){if(!pt(t))return f(e,t)}})),d}return(0,o.ne)(t,e),t.constructEnvelope=function(e,t,r,n){var i;return i=t===e.iKey||(0,E.lep)(t)?e:(0,o.uc)((0,o.uc)({},e),{iKey:t}),(pt[i.baseType]||Qe)(r,i,n)},t}(R.i),ht=r(673),gt=r(9451),vt=r(862),mt="instrumentationKey",yt="connectionString",_t="instrumentationkey",St="endpointUrl",Et="ingestionendpoint",wt="userOverrideEndpointUrl",bt=r(8967),Tt={diagnosticLogInterval:(0,y.gI)((function(e){return e&&e>0}),1e4)},Ct=function(){function e(t){var r,o=new gt.F;function s(e){e&&(e.baseData=e.baseData||{},e.baseType=e.baseType||"EventData"),o.track(e)}((0,E.lep)(t)||(0,E.lep)(t[mt])&&(0,E.lep)(t[yt]))&&(0,E._yM)("Invalid input configuration"),(0,n.Z)(e,this,(function(e){function n(){var e=(0,T.o)(t||{},Tt);r=e.cfg,o.addUnloadHook((0,T.k)(e,(function(){var e=r[yt];if((0,E.y8_)(e)){var t=(0,vt.PC)((function(t,n){(0,vt.Zm)(e,(function(e){var n=e.value,o=r[mt];!e.rejected&&n&&(r[yt]=n,o=(0,ht.X)(n)[_t]||o),t(o)}))})),n=(0,vt.PC)((function(t,n){(0,vt.Zm)(e,(function(e){var n=e.value,o=r[St];if(!e.rejected&&n){var s=(0,ht.X)(n)[Et];o=s?s+i.qp:o}t(o)}))}));r[mt]=t,r[St]=r[wt]||n}if((0,E.HD0)(e)){var o=(0,ht.X)(e),s=o[Et];r[St]=r[wt]?r[wt]:s+i.qp,r[mt]=o[_t]||r[mt]}r[St]=r[wt]?r[wt]:r[St]}))),o.initialize(r,[new ft])}(0,E.g$V)(e,"config",{g:function(){return r}}),n(),e.initialize=n,e.track=s,(0,S.Vb)(e,o,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange"])}))}return e.__ieDyn=1,e}()},5677:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionController=void 0;const n=r(2535),o=r(8959),i=r(8388),s=r(1528);t.CollectionController=class{_context;_serviceBroker;_logger;_telemetryService;_sessionsData=new Map;_collectionService;constructor(e,t,r,n){this._context=e,this._serviceBroker=t,this._logger=r,this._telemetryService=n}async initialize(){const e=await this._serviceBroker.getProxy(n.Descriptors.collectionService);e?(this._collectionService=e,this._context.subscriptions.push(this._collectionService)):this._logger.log("CodeCoverage: Unable to get report service")}dispose(){this._collectionService?.dispose()}async setupCoverageProfile(e){let t=await(0,i.getReportController)();e.loadDetailedCoverage=(e,r,n)=>t.loadDetailedCoverage(r)}async start(e,t,r,n,i){if(!this._collectionService)return this._logger.log("CodeCoverage: Collection service not initialized"),t;if(this._sessionsData.has(e))return this._logger.log("CodeCoverage: Session already started"),t;try{this._sessionsData.set(e,new o.SessionData(e,i,n,r));const s={sessionId:e,runSettings:t,sourceDirectories:n,sourceFiles:i};return await this._collectionService.start(s)}catch(r){return this._logger.log(`CodeCoverage: Error starting coverage collection: ${r}`),this._sessionsData.delete(e),t}}async stop(e){if(!this._collectionService)return void this._logger.log("CodeCoverage: Collection service not initialized");const t=this._sessionsData.get(e);if(!t)return void this._logger.log("CodeCoverage: Active run not initialized");const r=await this._collectionService.stop(e);if(this._telemetryService.sendTelemetryEvent(s.TelemetryEventNames.CoverageCollectionServerEvent,{},{[s.TelemetryEventNames.SourceDirectoriesCountProperty]:t.sourceDirectories?.length||0,[s.TelemetryEventNames.SourceFilesCountProperty]:t.sourceFiles?.length||0,[s.TelemetryEventNames.ReportsCountProperty]:r.length,[s.TelemetryEventNames.TimeProperty]:performance.now()-t.startTime}),0===r.length)return void this._logger.log("CodeCoverage: No reports generated");let n=await(0,i.getReportController)();for(const e of r)this._logger.log(`CodeCoverage: Report generated: ${e}`),t.testRun?await n.showCoverageReport(e,t.testRun):await n.openCoverageReport(e);this._sessionsData.delete(e)}}},1965:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CODE_COVERAGE_DISPLAY_NAME=t.COVERAGE_CONTROLLER_ID=t.CODE_COVERAGE_ID=void 0,t.CODE_COVERAGE_ID="csdevkit-code-coverage",t.COVERAGE_CONTROLLER_ID="csdevkit-coverage-controller",t.CODE_COVERAGE_DISPLAY_NAME="C# Dev Kit - Code Coverage"},8959:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionData=t.CollectionServerData=void 0,t.CollectionServerData=class{sessionId="";runSettings="";sourceDirectories=[];sourceFiles=[]},t.SessionData=class{sessionId="";sourceFiles=[];sourceDirectories=[];testRun;startTime=0;constructor(e,t,r,n){this.sessionId=e,this.sourceFiles=t,this.sourceDirectories=r,this.testRun=n,this.startTime=performance.now()}}},2535:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Descriptors=void 0;const n=r(9679);class o{static reportService=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.CodeCoverage.VSCode.ReportService","1.0"),n.Formatters.MessagePack,n.MessageDelimiters.BigEndianInt32LengthHeader,{protocolMajorVersion:3}));static collectionService=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.CodeCoverage.VSCode.CollectionService","1.0"),n.Formatters.MessagePack,n.MessageDelimiters.BigEndianInt32LengthHeader,{protocolMajorVersion:3}))}t.Descriptors=o},5508:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CoverageStatus=t.LineCoverageData=t.CoverageFileData=t.CoverageRunData=void 0,t.CoverageRunData=class{fileCoverageData=[]},t.CoverageFileData=class{path="";linesCovered=0;linesNotCovered=0;linesPartiallyCovered=0;linesCoverageData=[]},t.LineCoverageData=class{coverageStatus=r.notCovered;startLine=0;endLine=0;startColumn=0;endColumn=0;blocksCovered=0;blocksNotCovered=0},function(e){e[e.covered=0]="covered",e[e.notCovered=1]="notCovered",e[e.partiallyCovered=2]="partiallyCovered"}(r=t.CoverageStatus||(t.CoverageStatus={}))},477:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CoverageController=void 0;const n=r(9588),o=r(5677),i=r(8641);t.CoverageController=class{_reportController;_collectionController;_telemetryService;constructor(e,t,r){this._telemetryService=new i.TelemetryService(e,r),this._reportController=new n.ReportController(e,t,r,this._telemetryService),this._collectionController=new o.CollectionController(e,t,r,this._telemetryService)}async initialize(){await this._reportController.initialize(),await this._collectionController.initialize()}dispose(){this._reportController.dispose(),this._collectionController.dispose(),this._telemetryService.dispose()}async getReportController(){return this._reportController}async getCollectionController(){return this._collectionController}}},8429:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.openCoverageFile=void 0;const s=i(r(9496)),a={canSelectMany:!1,openLabel:"Open coverage file",canSelectFolders:!1,filters:{"Coverage files":["coverage"],"Cobertura files":["cobertura.xml"],"Xml files":["xml"],"All files":["*"]}};t.openCoverageFile=async function(){return await s.window.showOpenDialog(a).then((e=>{if(e&&e[0])return e[0].fsPath}))}},8388:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getCollectionController=t.getReportController=t.createCoverageControllers=void 0;const s=i(r(9496)),a=r(8352),c=r(477),u=r(1559),l=new s.EventEmitter,d=new Promise((e=>l.event(e)));t.createCoverageControllers=async function(e,t,r){const n=new a.Logger;try{u.Strings.initialize(r);const o=new c.CoverageController(e,t,n);n.log("Created Coverage Controller"),await o.initialize(),l.fire(o),e.subscriptions.push(o)}catch(e){n.log(`unable to create coverage controller for c# extension: ${e}`)}},t.getReportController=async function(){const e=await d;return await e.getReportController()},t.getCollectionController=async function(){const e=await d;return await e.getCollectionController()}},8352:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;const n=r(9496),o=r(1965);t.Logger=class{outputChannel;constructor(){this.outputChannel=n.window.createOutputChannel(o.CODE_COVERAGE_DISPLAY_NAME)}log(e){this.outputChannel.appendLine(e)}logAndThrow(e){throw this.log(e),new Error(e)}}},9588:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReportController=void 0;const s=i(r(9496)),a=r(5508),c=r(2535),u=r(1559),l=r(8429),d=r(1965),p=r(1528);t.ReportController=class{_context;_serviceBroker;_logger;_telemetryService;_controller;_runProfile;_coverageData=new WeakMap;_reportService;constructor(e,t,r,n){this._context=e,this._serviceBroker=t,this._logger=r,this._telemetryService=n,this._controller=s.tests.createTestController(d.COVERAGE_CONTROLLER_ID,d.CODE_COVERAGE_DISPLAY_NAME),this._runProfile=this._controller.createRunProfile("Coverage",s.TestRunProfileKind.Coverage,((e,t)=>{})),this._runProfile.loadDetailedCoverage=(e,t,r)=>this.loadDetailedCoverage(t)}async initialize(){const e=await this._serviceBroker.getProxy(c.Descriptors.reportService);e?(this._reportService=e,this._context.subscriptions.push(this._reportService)):this._logger.logAndThrow("Unable to get report service")}dispose(){this._runProfile.dispose(),this._controller.dispose(),this._reportService?.dispose()}async loadDetailedCoverage(e){return this._coverageData.get(e)||[]}async openCoverageReport(e){if(!this._reportService)return void this._logger.log("Report service not available");if(!e&&!(e=await(0,l.openCoverageFile)()))return;var t=new s.TestRunRequest(void 0,void 0,this._runProfile);const r=this._controller.createTestRun(t,"Coverage",!1);await this.showCoverageReport(e,r),r.end()}async showCoverageReport(e,t){if(this._reportService)try{const r=performance.now(),n=await this._reportService.getReport(e);for(let e of n.fileCoverageData){const r=new s.FileCoverage(s.Uri.file(e.path),new s.TestCoverageCount(e.linesCovered+e.linesPartiallyCovered,e.linesCovered+e.linesNotCovered+e.linesPartiallyCovered));this._coverageData.set(r,this.getLines(e)),t.addCoverage(r)}this._telemetryService.sendTelemetryEvent(p.TelemetryEventNames.LoadReportEvent,{},{[p.TelemetryEventNames.ModulesCountProperty]:n.fileCoverageData.length,[p.TelemetryEventNames.TimeProperty]:performance.now()-r})}catch(e){s.window.showErrorMessage(u.Strings.get("invalidCoverageFile"))}else this._logger.log("Report service not available")}getLines(e){let t=new Array;for(let r of e.linesCoverageData){const e=r.coverageStatus===a.CoverageStatus.covered,n=this.getRangeOrPosition(r);if(1===r.blocksCovered+r.blocksNotCovered){const r=new s.StatementCoverage(e,n);t.push(r)}else{const o=new Array;for(let e=0;e<r.blocksCovered;e++)o.push(new s.BranchCoverage(!0,n));for(let e=0;e<r.blocksNotCovered;e++)o.push(new s.BranchCoverage(!1,n));const i=new s.StatementCoverage(e,n,o);t.push(i)}}return t}getRangeOrPosition(e){let t=e.startLine-1,r=e.endLine-1,n=0===e.startColumn?0:e.startColumn-1,o=0===e.endColumn?0:e.endColumn-1;return t===r&&n===o&&0===n?new s.Position(t,n):new s.Range(t,n,r,o)}}},1559:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Strings=void 0;class r{static _strings;static initialize(e){r._strings=e}static get(e){if(!r._strings)return"<< Error loading localized string >>";return r._strings[e]||"<< Error loading localized string >>"}}t.Strings=r},1528:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryEventNames=void 0,t.TelemetryEventNames=class{static LoadReportEvent="vs/codecoverage/vscode/report/load";static CoverageCollectionServerEvent="vs/codecoverage/vscode/collection";static ModulesCountProperty="vs.codecoverage.vscode.modulesCount";static ReportsCountProperty="vs.codecoverage.vscode.reportsCount";static SourceFilesCountProperty="vs.codecoverage.vscode.sourceFilesCount";static SourceDirectoriesCountProperty="vs.codecoverage.vscode.sourceDirectoriesCount";static TimeProperty="vs.codecoverage.vscode.time"}},8641:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryService=void 0;const o=n(r(2291));t.TelemetryService=class{_telemetryReporter;_telemetryLogger;_loggingEnabled;constructor(e,t,r=!1){this._loggingEnabled=r,this._telemetryLogger=t;try{this._telemetryReporter=new o.default(e.extension.packageJSON.aiKey),e.subscriptions.push(this._telemetryReporter)}catch(e){this._loggingEnabled&&this._telemetryLogger.log(`Failed to create TelemetryReporter due to ${e}`),this._telemetryReporter=void 0}}sendTelemetryEvent(e,t,r){this.outputTelemetryToLog(e,t,r),this._telemetryReporter?.sendTelemetryEvent(e,t,r)}sendTelemetryErrorEvent(e,t,r){this._telemetryReporter?.sendTelemetryErrorEvent(e,t,r)}outputTelemetryToLog(e,t,r){if(this._loggingEnabled){if(this._telemetryLogger.log(`Event: ${e}`),void 0!==t){this._telemetryLogger.log("Properties");for(const e in t)this._telemetryLogger.log(`  ${e}: ${t[e]}`)}if(void 0!==r){this._telemetryLogger.log("Measurements");for(const e in r)this._telemetryLogger.log(`  ${e}: ${r[e]}`)}this._telemetryLogger.log("")}}async dispose(){if(void 0!==this._telemetryReporter)return await this._telemetryReporter.dispose()}}},4635:(e,t,r)=>{"use strict";r.d(t,{Z:()=>j});var n,o=r(2631),i="constructor",s="prototype",a="function",c="_dynInstFuncs",u="_isDynProxy",l="_dynClass",d="_dynCls$",p="_dynInstChk",f=p,h="_dfOpts",g="_unknown_",v="__proto__",m="_dyn"+v,y="__dynProto$Gbl",_="_dynInstProto",S="useBaseInst",E="setInstFuncs",w=Object,b=w.getPrototypeOf,T=w.getOwnPropertyNames,C=(0,o.Rdr)(),P=C[y]||(C[y]={o:(n={},n[E]=!0,n[S]=!0,n),n:1e3});function I(e){return e&&(e===w[s]||e===Array[s])}function O(e){return I(e)||e===Function[s]}function N(e){var t;if(e){if(b)return b(e);var r=e[v]||e[s]||(e[i]?e[i][s]:null);t=e[m]||r,(0,o.aE6)(e,m)||(delete e[_],t=e[m]=e[_]||e[m],e[_]=r)}return t}function A(e,t){var r=[];if(T)r=T(e);else for(var n in e)"string"==typeof n&&(0,o.aE6)(e,n)&&r.push(n);if(r&&r.length>0)for(var i=0;i<r.length;i++)t(r[i])}function R(e,t,r){return t!==i&&typeof e[t]===a&&(r||(0,o.aE6)(e,t))&&t!==v&&t!==s}function x(e){(0,o.ZU2)("DynamicProto: "+e)}function k(e,t){for(var r=e.length-1;r>=0;r--)if(e[r]===t)return!0;return!1}function D(e,t,r,n,i){if(!I(e)){var s=r[c]=r[c]||(0,o.rkD)(null);if(!I(s)){var d=s[t]=s[t]||(0,o.rkD)(null);!1!==s[f]&&(s[f]=!!i),I(d)||A(r,(function(t){R(r,t,!1)&&r[t]!==n[t]&&(d[t]=r[t],delete r[t],(!(0,o.aE6)(e,t)||e[t]&&!e[t][u])&&(e[t]=function(e,t){var r=function(){var n=function(e,t,r,n){var i=null;if(e&&(0,o.aE6)(r,l)){var s=e[c]||(0,o.rkD)(null);if((i=(s[r[l]]||(0,o.rkD)(null))[t])||x("Missing ["+t+"] "+a),!i[p]&&!1!==s[f]){for(var u=!(0,o.aE6)(e,t),d=N(e),h=[];u&&d&&!O(d)&&!k(h,d);){var g=d[t];if(g){u=g===n;break}h.push(d),d=N(d)}try{u&&(e[t]=i),i[p]=1}catch(e){s[f]=!1}}}return i}(this,t,e,r)||function(e,t,r){var n=t[e];return n===r&&(n=N(t)[e]),typeof n!==a&&x("["+e+"] is not a "+a),n}(t,e,r);return n.apply(this,arguments)};return r[u]=1,r}(e,t)))}))}}}function M(e,t){return(0,o.aE6)(e,s)?e.name||t||g:((e||{})[i]||{}).name||t||g}function j(e,t,r,n){(0,o.aE6)(e,s)||x("theClass is an invalid class definition.");var i=e[s];(function(e,t){if(b){for(var r=[],n=N(t);n&&!O(n)&&!k(r,n);){if(n===e)return!0;r.push(n),n=N(n)}return!1}return!0})(i,t)||x("["+M(e)+"] not in hierarchy of ["+M(t)+"]");var a=null;(0,o.aE6)(i,l)?a=i[l]:(a=d+M(e,"_")+"$"+P.n,P.n++,i[l]=a);var p=j[h],g=!!p[S];g&&n&&void 0!==n[S]&&(g=!!n[S]);var v=function(e){var t=(0,o.rkD)(null);return A(e,(function(r){!t[r]&&R(e,r,!1)&&(t[r]=e[r])})),t}(t),m=function(e,t,r,n){function i(e,t,r){var o=t[r];if(o[u]&&n){var i=e[c]||{};!1!==i[f]&&(o=(i[t[l]]||{})[r]||o)}return function(){return o.apply(e,arguments)}}var s=(0,o.rkD)(null);A(r,(function(e){s[e]=i(t,r,e)}));for(var a=N(e),d=[];a&&!O(a)&&!k(d,a);)A(a,(function(e){!s[e]&&R(a,e,!b)&&(s[e]=i(t,a,e))})),d.push(a),a=N(a);return s}(i,t,v,g);r(t,m);var y=!!b&&!!p[E];y&&n&&(y=!!n[E]),D(i,a,t,v,!1!==y)}j[h]=P.o},1570:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationServiceClient=void 0;const o=n(r(9491)),i=n(r(9593));t.AuthorizationServiceClient=class{authService;ownsAuthService;isDisposed=!1;constructor(e,t=!0){this.authService=e,this.ownsAuthService=t,(0,o.default)(e),this.authService=e}async getCredentials(e=i.default.CONTINUE){if(this.isDisposed)throw new Error("Object is disposed");return await this.authService.getCredentials(e)}async checkAuthorization(e,t=i.default.CONTINUE){if((0,o.default)(e),this.isDisposed)throw new Error("Object is disposed");return await this.authService.checkAuthorization(e,t)}dispose(){this.isDisposed=!0,this.ownsAuthService&&this.authService.dispose()}}},7129:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BE32MessageWriter=t.BE32MessageReader=void 0;const o=r(4389),i=n(r(9593)),s=r(2781),a=r(4017),c=r(7850);class u extends o.AbstractMessageReader{readable;decoder;constructor(e,t){super(),this.readable=e,this.decoder=t}listen(e){this.readable.on("error",(e=>this.fireError(e)));const t=i.default.create();return(async()=>{try{for(;;){const r=await(0,c.getBufferFrom)(this.readable,4,!0,t.token);if(!r)return void this.fireClose();const n=r.readInt32BE(0),o=await(0,c.getBufferFrom)(this.readable,n,!1,t.token),i=await this.decoder(o);e(i)}}catch(e){this.fireError(e)}})(),o.Disposable.create((()=>t.cancel()))}}t.BE32MessageReader=u;class l extends o.AbstractMessageWriter{writable;encoder;semaphore=new a.Semaphore(1);headerBuffer=Buffer.alloc(4);errorCount=0;constructor(e,t){super(),this.writable=e,this.encoder=t,e.on("error",(e=>this.fireError([e,void 0,void 0]))),e.once("close",(()=>this.fireClose()))}async write(e){await this.semaphore.use((async()=>{try{const t=await this.encoder(e);this.headerBuffer.writeInt32BE(t.byteLength,0),this.writable instanceof s.Writable&&this.writable.cork();const r=Promise.all([(0,c.writeAsync)(this.writable,this.headerBuffer),(0,c.writeAsync)(this.writable,t)]);this.writable instanceof s.Writable&&this.writable.uncork(),await r}catch(e){this.errorCount++,this.fireError([d(e),void 0,this.errorCount])}}))}end(){this.writable.end()}}function d(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${"string"==typeof e.message?e.message:"unknown"}`)}t.BE32MessageWriter=l},3736:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationTokenAdapters=void 0;const o=n(r(9593)),i=r(4389);t.CancellationTokenAdapters=class{static isVSCode(e){return i.CancellationToken.is(e)}static isCancellationToken(e){return e&&!function(e){return e&&void 0!==e.ImAProxy}(e)&&"function"==typeof e.throwIfCancelled&&"function"==typeof e.onCancelled&&void 0!==e.isCancelled&&void 0!==e.canBeCancelled}static vscodeToCancellationToken(e){if(e.isCancellationRequested)return o.default.CANCELLED;if(e===i.CancellationToken.None)return o.default.CONTINUE;{const t=o.default.create();return e.onCancellationRequested((e=>t.cancel())),t.token}}static cancellationTokenToVSCode(e){if(e.isCancelled)return i.CancellationToken.Cancelled;if(e.canBeCancelled){const t=new i.CancellationTokenSource;return e.onCancelled((e=>t.cancel())),t.token}return i.CancellationToken.None}}},1911:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameworkServices=void 0;const n=r(8952),o=r(8743),i=r(8055);class s{static remoteServiceBroker=Object.freeze(new o.ServiceJsonRpcDescriptor(i.ServiceMoniker.create("RemoteServiceBroker"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders));static authorization=Object.freeze(new o.ServiceJsonRpcDescriptor(i.ServiceMoniker.create("Microsoft.ServiceHub.Framework.AuthorizationService"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders))}t.FrameworkServices=s},7957:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.IDisposable=void 0,function(e){e.is=function(e){return"function"==typeof e.dispose}}(r||(t.IDisposable=r={}))},5408:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IpcRelayServiceBroker=void 0;const n=r(8952),o=r(2361),i=r(2600),s=r(1808),a=r(1017);class c extends o{serviceBroker;static _rpcEventNames=Object.freeze(["availabilityChanged"]);rpcEventNames=c._rpcEventNames;completion;channelsOfferedToClient={};disposed;constructor(e){super(),this.serviceBroker=e,e.on("availabilityChanged",this.onAvailabilityChanged.bind(this)),this.completion=new Promise((e=>this.disposed=e))}handshake(e,t){if(!n.RemoteServiceConnections.contains(e.supportedConnections,n.RemoteServiceConnections.IpcPipe))throw new Error("The client must support IpcPipe to use this service broker.");return Promise.resolve()}async requestServiceChannel(e,t,r){const o=await this.serviceBroker.getPipe(e,t,r);if(!o)return{};const c=(0,i.v4)(),u=a.join(n.PIPE_NAME_PREFIX,(0,i.v4)()),l=(0,s.createServer)((e=>{delete this.channelsOfferedToClient[c],e.pipe(o),o.pipe(e)}));return l.listen(u),this.channelsOfferedToClient[c]=l,{requestId:c,pipeName:u}}cancelServiceRequest(e,t){const r=this.channelsOfferedToClient[e];return r?(delete this.channelsOfferedToClient[e],r.close(),Promise.resolve()):Promise.reject("Request to cancel a channel that is not awaiting acceptance.")}dispose(){this.serviceBroker.off("availabilityChanged",this.onAvailabilityChanged.bind(this));for(const e in this.channelsOfferedToClient)this.channelsOfferedToClient[e].close(),delete this.channelsOfferedToClient[e];this.disposed&&this.disposed()}onAvailabilityChanged(e){this.emit("availabilityChanged",e)}}t.IpcRelayServiceBroker=c},1529:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MultiplexingRelayServiceBroker=void 0;const o=r(8952),i=r(2361),s=r(3543),a=r(1911),c=n(r(5458)),u=r(2600);class l extends i{serviceBroker;multiplexingStreamWithClient;multiplexingStreamWithRemoteClientOwned;static _rpcEventNames=Object.freeze(["availabilityChanged"]);channelsOfferedToClient={};completion;rpcEventNames=l._rpcEventNames;disposed;constructor(e,t,r){super(),this.serviceBroker=e,this.multiplexingStreamWithClient=t,this.multiplexingStreamWithRemoteClientOwned=r,e.on("availabilityChanged",this.onAvailabilityChanged.bind(this)),this.completion=new Promise((e=>this.disposed=e))}static async connectToServer(e,t,r){try{const n=await s.MultiplexingStream.CreateAsync(t,void 0,r),o=await n.offerChannelAsync("",void 0,r),i=new l(e,n,!0);return a.FrameworkServices.remoteServiceBroker.constructRpc(i,o),i}catch(e){throw t.end(),e}}handshake(e,t){if(!o.RemoteServiceConnections.contains(e.supportedConnections,o.RemoteServiceConnections.Multiplexing))throw new Error("The client must support multiplexing to use this service broker.");return Promise.resolve()}async requestServiceChannel(e,t,r){const n=(0,u.v4)();(t=t?{...t}:{}).multiplexingStream=this.multiplexingStreamWithClient;const o=await this.serviceBroker.getPipe(e,t,r);if(!o)return{};const i=this.multiplexingStreamWithClient.createChannel();return i.stream.pipe(o),o.pipe(i.stream),this.channelsOfferedToClient[n]=i,(0,c.default)(i.acceptance.finally((()=>delete this.channelsOfferedToClient[n]))),{requestId:n,multiplexingChannelId:i.qualifiedId.id}}async cancelServiceRequest(e,t){const r=this.channelsOfferedToClient[e];return r?(r.dispose(),Promise.resolve()):Promise.reject("Request to cancel a channel that is not awaiting acceptance.")}dispose(){this.serviceBroker.off("availabilityChanged",this.onAvailabilityChanged.bind(this)),this.multiplexingStreamWithRemoteClientOwned&&this.multiplexingStreamWithClient.dispose(),this.disposed&&this.disposed()}onAvailabilityChanged(e){this.emit("availabilityChanged",e)}}t.MultiplexingRelayServiceBroker=l},3169:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStreamMessageWriter=t.NodeStreamMessageReader=void 0;const n=r(4389);class o extends n.ReadableStreamMessageReader{constructor(e,t){super(new s(e),t)}}t.NodeStreamMessageReader=o;class i extends n.WriteableStreamMessageWriter{constructor(e,t){super(new a(e),t)}}t.NodeStreamMessageWriter=i;class s{stream;constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),n.Disposable.create((()=>this.stream.off("close",e)))}onError(e){return this.stream.on("error",e),n.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){return this.stream.on("end",e),n.Disposable.create((()=>this.stream.off("end",e)))}onData(e){return this.stream.on("data",e),n.Disposable.create((()=>this.stream.off("data",e)))}}class a{stream;constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),n.Disposable.create((()=>this.stream.off("close",e)))}onError(e){return this.stream.on("error",e),n.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){return this.stream.on("end",e),n.Disposable.create((()=>this.stream.off("end",e)))}write(e,t){return new Promise(((r,n)=>{const o=e=>{null==e?r():n(e)};"string"==typeof e?this.stream.write(e,t,o):this.stream.write(e,o)}))}end(){this.stream.end()}}},3515:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProtectedOperation=void 0;const o=n(r(9491));var i;!function(e){e.create=function(e,t){return Object.freeze({operationMoniker:e,requiredTrustLevel:t})},e.isSupersetOf=function(e,t){return(0,o.default)(e),(0,o.default)(t),e.operationMoniker===t.operationMoniker&&(e.requiredTrustLevel===t.requiredTrustLevel||!!e.requiredTrustLevel&&!!t.requiredTrustLevel&&e.requiredTrustLevel>t.requiredTrustLevel)},e.equals=function(e,t){return e===t||!(!e||!t)&&e.operationMoniker===t.operationMoniker&&e.requiredTrustLevel===t.requiredTrustLevel}}(i||(t.ProtectedOperation=i={}))},3257:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteServiceBroker=void 0;const o=n(r(9491)),i=n(r(9593)),s=r(2361),a=r(3543),c=r(1570),u=r(8952),l=r(7464),d=r(5447),p=r(1808),f=r(1911);class h extends s.EventEmitter{serviceBroker;multiplexingStream;static fullConnectionSupport=u.RemoteServiceConnections.Multiplexing|u.RemoteServiceConnections.IpcPipe;static async connectToDuplex(e,t=i.default.CONTINUE){(0,o.default)(e);const r=f.FrameworkServices.remoteServiceBroker.constructRpc(e);return await h.initializeBrokerConnection(r,t)}static async connectToRemoteServiceBroker(e,t=i.default.CONTINUE){return(0,o.default)(e),await h.initializeBrokerConnection(e,t)}static async connectToMultiplexingDuplex(e,t,r=i.default.CONTINUE){(0,o.default)(e);const n=await a.MultiplexingStream.CreateAsync(e,t,r),s=await n.acceptChannelAsync("",void 0,r),c=f.FrameworkServices.remoteServiceBroker.constructRpc(s.stream),u=await this.connectToMultiplexingRemoteServiceBroker(c,n,r);return u.ownsMxStream=!0,u}static async connectToMultiplexingRemoteServiceBroker(e,t,r=i.default.CONTINUE){(0,o.default)(e),(0,o.default)(t);const n={supportedConnections:h.fullConnectionSupport},s=await h.initializeBrokerConnection(e,r,n,t);return s.ownsMxStream=!1,s}static async initializeBrokerConnection(e,t=i.default.CONTINUE,r,n){if(!r){let e=this.fullConnectionSupport;n||(e&=~u.RemoteServiceConnections.Multiplexing),r={supportedConnections:e}}try{await e.handshake(r,t)}catch(t){const r=e;throw"function"==typeof r.dispose&&r.dispose(),t}return new h(e,r,n)}isDisposed=!1;ownsMxStream=!1;defaultClientCulture="en-US";defaultClientUICulture="en-US";authorizationClient;constructor(e,t,r){super(),this.serviceBroker=e,this.multiplexingStream=r,(0,o.default)(e),(0,o.default)(t),u.RemoteServiceConnections.contains(t.supportedConnections,u.RemoteServiceConnections.Multiplexing)&&(0,o.default)(r),this.serviceBroker.on("availabilityChanged",(e=>{this.emit("availabilityChanged",e)}))}setAuthorizationService(e){(0,o.default)(e),this.authorizationClient?.dispose(),this.authorizationClient=new c.AuthorizationServiceClient(e)}async getProxy(e,t,r=i.default.CONTINUE){let n;(0,o.default)(e),t=t||{clientCulture:this.defaultClientCulture,clientUICulture:this.defaultClientUICulture},t=await this.applyAuthorization(t,r);let s={};try{if(s=await this.serviceBroker.requestServiceChannel(e.moniker,t,r),!s||l.RemoteServiceConnectionInfo.isEmpty(s))return null;if(s.multiplexingChannelId&&this.multiplexingStream)n=await this.multiplexingStream.acceptChannel(s.multiplexingChannelId);else{if(!s.pipeName)throw new Error("Unsupported connection type");{const e="win32"!==process.platform||s.pipeName.startsWith(u.PIPE_NAME_PREFIX)?s.pipeName:u.PIPE_NAME_PREFIX+s.pipeName;n=(0,p.createConnection)(e)}}}catch(e){throw(0,d.isReadWriteStream)(n)?n.end():(0,d.isChannel)(n)&&n.dispose(),s?.requestId&&await this.serviceBroker.cancelServiceRequest(s.requestId,r),e}return e.constructRpc(t?.clientRpcTarget,n)}async getPipe(e,t,r=i.default.CONTINUE){if((0,o.default)(e),t=t||{clientCulture:this.defaultClientCulture,clientUICulture:this.defaultClientUICulture},(t=await this.applyAuthorization(t,r)).clientRpcTarget)throw new Error("Cannot connect pipe to service with client RPC target");let n={},s=null,a=null;try{if(n=await this.serviceBroker.requestServiceChannel(e,t,r),!n||l.RemoteServiceConnectionInfo.isEmpty(n))return null;if(!n.multiplexingChannelId||!this.multiplexingStream)throw n.pipeName?new Error("Cannot connect to named pipe"):new Error("Unsupported connection type");return a=await this.multiplexingStream.acceptChannel(n.multiplexingChannelId),s=a.stream,s}catch(e){throw a?.dispose(),s?.end(),!s&&n?.requestId&&await this.serviceBroker.cancelServiceRequest(n.requestId,r),e}}dispose(){this.isDisposed=!0,this.serviceBroker.removeAllListeners(u.availabilityChangedEvent);const e=this.serviceBroker;"function"==typeof e.dispose&&e.dispose(),this.authorizationClient?.dispose(),this.multiplexingStream&&this.ownsMxStream&&this.multiplexingStream.dispose()}async applyAuthorization(e,t){return this.authorizationClient&&!e.clientCredentials&&(e.clientCredentials=await this.authorizationClient.getCredentials(t)),e}}t.RemoteServiceBroker=h},7464:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteServiceConnectionInfo=void 0,function(e){e.isEmpty=function(e){return!e.multiplexingChannelId&&!e.requestId&&!e.pipeName},e.isOneOf=function(e,t){return!!e.multiplexingChannelId&&t.indexOf("multiplexing")>-1}}(r||(t.RemoteServiceConnectionInfo=r={}))},8743:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcConnection=t.ServiceJsonRpcDescriptor=void 0;const s=r(5028),a=r(8952),c=r(8055),u=r(4815),l=r(5447),d=r(7129),p=i(r(7323)),f=r(3543),h=r(2781),g=r(3169),v=r(7188);class m extends u.ServiceRpcDescriptor{formatter;messageDelimiter;protocol="json-rpc";multiplexingStreamOptions;connectionFactory;constructor(e,t,r,n){let o,i;switch(super(e),this.formatter=t,this.messageDelimiter=r,t){case a.Formatters.Utf8:o=e=>Promise.resolve(Buffer.from(JSON.stringify(e))),i=e=>JSON.parse(e.toString());break;case a.Formatters.MessagePack:o=e=>Promise.resolve(p.encode(e)),i=e=>p.decode(e);break;default:throw new Error(`Unsupported formatter: ${t}.`)}if(this.multiplexingStreamOptions=void 0===n?void 0:Object.freeze(n),r===a.MessageDelimiters.HttpLikeHeaders){if(t!==a.Formatters.Utf8)throw new Error("Utf8 is the only formatter supported while using HttpLikeHeaders.");this.connectionFactory=e=>(0,s.createMessageConnection)(new g.NodeStreamMessageReader(e),new g.NodeStreamMessageWriter(e))}else{if(r!==a.MessageDelimiters.BigEndianInt32LengthHeader)throw new Error(`Unsupported message delimiter: ${r}.`);this.connectionFactory=e=>(0,s.createMessageConnection)(new d.BE32MessageReader(e,i),new d.BE32MessageWriter(e,o))}}constructRpcConnection(e){if(this.multiplexingStreamOptions){const t=this.createSeedChannels();let r=(0,l.isChannel)(e)?e.stream:e;const n=f.MultiplexingStream.Create(r,t),o=n.acceptChannel(0);return o.completion.finally((()=>n.dispose())),new _((0,l.constructMessageConnection)(o,this.connectionFactory))}return new _((0,l.constructMessageConnection)(e,this.connectionFactory))}equals(e){return!!(e&&e instanceof m)&&!!c.ServiceMoniker.equals(e.moniker,this.moniker)&&this.formatter===e.formatter&&this.messageDelimiter===e.messageDelimiter}createSeedChannels(){if(void 0===this.multiplexingStreamOptions)throw new Error("multiplexingStreamOptions unset.");if(void 0===this.multiplexingStreamOptions.seededChannels||0===this.multiplexingStreamOptions.seededChannels.length){const e=(0,l.clone)(this.multiplexingStreamOptions);return e.seededChannels=[{}],e.protocolMajorVersion=3,e}return this.multiplexingStreamOptions}}t.ServiceJsonRpcDescriptor=m;const y={get:(e,t)=>{switch(t.toString()){case"dispose":return function(){e.messageConnection.dispose()};case"_jsonRpc":return e.messageConnection;case"then":return;case"on":return function(t,r){return e.eventEmitter.on(t,r),e};case"once":return function(t,r){return e.eventEmitter.once(t,r),e};case"prependListener":return function(t,r){return e.eventEmitter.prependListener(t,r),e};case"prependOnceListener":return function(t,r){return e.eventEmitter.prependOnceListener(t,r),e};case"addListener":return function(t,r){return e.eventEmitter.addListener(t,r),e};case"rawListeners":return e.eventEmitter.rawListeners;case"removeAllListeners":return function(t){return e.eventEmitter.removeAllListeners(t),e};case"removeListener":return function(t,r){return e.eventEmitter.removeListener(t,r),e};case"off":return function(t,r){return e.eventEmitter.off(t,r),e};case"listenerCount":return e.eventEmitter.listenerCount;case"getMaxListeners":return e.eventEmitter.getMaxListeners;case"setMaxListeners":return function(t){return e.eventEmitter.setMaxListeners(t),e};case"eventNames":return function(){return e.eventEmitter.eventNames(),e};case"emit":return function(t,r){return e.eventEmitter.emit(t,r),e};default:return function(){const r=t.toString();return(0,v.invokeRpc)(r,arguments,e.messageConnection)}}}};class _ extends u.RpcConnection{messageConnection;constructor(e){super(),this.messageConnection=e}addLocalRpcTarget(e){if((0,v.registerInstanceMethodsAsRpcTargets)(e,this.messageConnection),u.RpcConnection.IsRpcEventServer(e))for(let t of e.rpcEventNames)e.on(t,((...e)=>{this.messageConnection.sendNotification(t,s.ParameterStructures.byPosition,...e)}));"function"==typeof e.dispose&&this.messageConnection.onDispose((()=>e.dispose()))}constructRpcClient(){const e={messageConnection:this.messageConnection,eventEmitter:new h.EventEmitter};return this.messageConnection.onNotification(((t,r)=>Array.isArray(r)?e.eventEmitter.emit(t,...r):e.eventEmitter.emit(t,r))),new Proxy(e,y)}startListening(){this.messageConnection?.listen()}dispose(){}}t.JsonRpcConnection=_},8055:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceMoniker=void 0,function(e){function t(e){return e.version?`${e.name} (${e.version})`:e.name}function r(){return t(this)}e.create=function(e,t){if(!e||""===e)throw new Error("name cannot be empty.");return Object.freeze({name:e,version:t,toString:r})},e.equals=function(e,t){return e===t||!(!e||!t)&&e.name===t.name&&e.version===t.version},e.toString=t}(r||(t.ServiceMoniker=r={}))},4815:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RpcConnection=t.ServiceRpcDescriptor=void 0;const o=n(r(9491));t.ServiceRpcDescriptor=class{moniker;constructor(e){this.moniker=e,(0,o.default)(e)}constructRpc(e,t){let r;if(t?r=e:t=e,void 0===t)throw new Error("No pipe supplied.");const n=this.constructRpcConnection(t);void 0!==r&&n.addLocalRpcTarget(r);const o=n.constructRpcClient();return n.startListening(),o}},t.RpcConnection=class{static IsRpcEventServer(e){return e.rpcEventNames&&e.on}}},8952:(e,t)=>{"use strict";var r,n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.PIPE_NAME_PREFIX=t.availabilityChangedEvent=t.RemoteServiceConnections=t.MessageDelimiters=t.Formatters=void 0,function(e){e[e.Utf8=0]="Utf8",e[e.MessagePack=1]="MessagePack"}(r||(t.Formatters=r={})),function(e){e[e.HttpLikeHeaders=0]="HttpLikeHeaders",e[e.BigEndianInt32LengthHeader=1]="BigEndianInt32LengthHeader"}(n||(t.MessageDelimiters=n={})),function(e){e[e.None=0]="None",e[e.Multiplexing=1]="Multiplexing",e[e.IpcPipe=2]="IpcPipe",e[e.ClrActivation=8]="ClrActivation"}(o||(t.RemoteServiceConnections=o={})),function(e){function t(t){let r=e.None;for(const n of t.split(","))switch(n.trim()){case"None":break;case"Multiplexing":r|=e.Multiplexing;break;case"IpcPipe":r|=e.IpcPipe;break;case"ClrActivation":r|=e.ClrActivation;break;default:throw new Error(`unrecognized element '${n.trim()}'.`)}return r}e.contains=function(e,r){return"string"==typeof e&&(e=t(e)),(e&r)===r},e.parse=t}(o||(t.RemoteServiceConnections=o={})),t.availabilityChangedEvent="availabilityChanged",t.PIPE_NAME_PREFIX="win32"===process.platform?"\\\\.\\pipe\\":"/tmp/"},4245:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ClientCredentialsPolicy=void 0,function(e){e[e.requestOverridesDefault=0]="requestOverridesDefault",e[e.filterOverridesRequest=1]="filterOverridesRequest"}(r||(t.ClientCredentialsPolicy=r={}))},1349:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalBrokeredServiceContainer=void 0;const s=i(r(5369)),a=r(5083),c=r(1067),u=r(9080),l=r(7993),d=r(707),p=r(4245),f=r(989),h=r(9793),g=r(7327),v=r(8055);class m{static preferredSourceOrderForRemoteServices=[a.ServiceSource.trustedServer,a.ServiceSource.untrustedServer];static preferredSourceOrderForLocalServices=[a.ServiceSource.sameProcess,a.ServiceSource.otherProcessOnSameMachine];remoteSources=s.Map();profferedServiceIndex=s.Map();registeredServices=s.Map();localUserCredentials=s.Map();constructor(){}register(e){let t=this.registeredServices;const r=e.map((e=>({moniker:g.ServiceMonikerValue.from(e.moniker),registration:e.registration})));r.forEach((e=>{if(this.registeredServices.has(e.moniker))throw new Error(`${v.ServiceMoniker.toString(e.moniker)} is already registered.`);t=t.set(e.moniker,e.registration)})),this.registeredServices=t;let n=!1;return{dispose:()=>{n||(r.forEach((e=>this.registeredServices=this.registeredServices.delete(e.moniker))),n=!0)}}}profferServiceFactory(e,t){return this.profferInternal(new u.ProfferedServiceFactory(this,e,t))}profferServiceBroker(e,t){return this.profferInternal(new h.ProfferedServiceBroker(this,e,a.ServiceSource.sameProcess,t))}profferRemoteServiceBroker(e,t,r,n){if(r===a.ServiceSource.sameProcess)throw new Error("Use the proffer method for local services when they are in the same process.");return this.profferInternal(new f.ProfferedRemoteServiceBroker(this,e,t,r,this.getAllowedMonikers(r,n?.map(g.ServiceMonikerValue.from)??null)))}getFullAccessServiceBroker(){return new c.View(this,l.ServiceAudience.process,this.localUserCredentials,p.ClientCredentialsPolicy.requestOverridesDefault)}getLimitedAccessServiceBroker(e,t,r){return new c.View(this,e,t,r)}static isLocalConsumer(e){return(e&~l.ServiceAudience.local)===l.ServiceAudience.none}getSecureServiceBroker(e){return new c.View(this,l.ServiceAudience.process,e?.clientCredentials?s.Map(e.clientCredentials):s.Map(),p.ClientCredentialsPolicy.requestOverridesDefault)}getServiceRegistration(e){let t=this.registeredServices.get(e);if(t)return{registration:t,matchingMoniker:e};if(e.version){const t=new g.ServiceMonikerValue(e.name);return this.getServiceRegistration(t)}return null}async getProfferingSource(e,t){const r=g.ServiceMonikerValue.from(e),{registration:n,matchingMoniker:o}=this.getServiceRegistration(r)||{};if(!n||!o)return{errorCode:d.MissingBrokeredServiceErrorCode.notLocallyRegistered};if(m.isLocalConsumer(t),!n.isExposedTo(t))return{errorCode:d.MissingBrokeredServiceErrorCode.serviceAudienceMismatch};if(n.profferCallback){if("function"==typeof n.profferCallback){const t=n.profferCallback(this,e);n.profferCallback=t||void 0}await n.profferCallback}for(const e of m.preferredSourceOrderForLocalServices){const t=this.profferedServiceIndex.get(e);if(t){const e=t.get(o);if(e)return{proffered:e,errorCode:d.MissingBrokeredServiceErrorCode.noExplanation}}}return{errorCode:d.MissingBrokeredServiceErrorCode.serviceFactoryNotProffered}}removeRegistrations(e){const t=this.profferedServiceIndex;switch(e.source){case a.ServiceSource.sameProcess:case a.ServiceSource.otherProcessOnSameMachine:let t=this.profferedServiceIndex.get(e.source);t&&(t=t.removeAll(e.monikers),this.profferedServiceIndex=this.profferedServiceIndex.set(e.source,t));break;default:this.profferedServiceIndex=this.profferedServiceIndex.remove(e.source),this.remoteSources=this.remoteSources.remove(e.source)}this.onAvailabilityChanged(t,e)}onAvailabilityChanged(e,t,r){}getAllowedMonikers(e,t){const r=m.convertRemoteSourceToLocalAudience(e),n=[];if(null===t)for(let[t,o]of this.registeredServices)(o.audience&r)!==r&&e!==a.ServiceSource.otherProcessOnSameMachine||n.push(t);else for(let o of t){const t=this.registeredServices.get(o);!t||(t.audience&r)!==r&&e!==a.ServiceSource.otherProcessOnSameMachine||n.push(o)}return n}static convertRemoteSourceToLocalAudience(e){switch(e){case a.ServiceSource.otherProcessOnSameMachine:return l.ServiceAudience.local;case a.ServiceSource.trustedServer:case a.ServiceSource.untrustedServer:return l.ServiceAudience.liveShareGuest;default:throw new Error(`Source not recognized: ${e}`)}}profferInternal(e){const t=this.profferedServiceIndex;e.source>a.ServiceSource.otherProcessOnSameMachine&&this.remoteSources.set(e.source,e);let r=this.profferedServiceIndex.get(e.source)??s.Map();const n=[];if(e.monikers.forEach((t=>{if(this.registeredServices.has(t)||n.push(t),r.has(t))throw new Error(`${v.ServiceMoniker.toString(t)} is already proffered.`);r=r.set(t,e)})),n.length>0)throw new Error(`Cannot proffer unregistered service(s): ${n.map((e=>v.ServiceMoniker.toString(e))).join(", ")}`);return this.profferedServiceIndex=this.profferedServiceIndex.set(e.source,r),this.onAvailabilityChanged(t,e),e}}t.GlobalBrokeredServiceContainer=m},707:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MissingBrokeredServiceErrorCode=void 0,function(e){e[e.noExplanation=0]="noExplanation",e[e.notLocallyRegistered=1]="notLocallyRegistered",e[e.chaosConfigurationDeniedRequest=2]="chaosConfigurationDeniedRequest",e[e.serviceAudienceMismatch=3]="serviceAudienceMismatch",e[e.serviceFactoryNotProffered=4]="serviceFactoryNotProffered",e[e.serviceFactoryReturnedNull=5]="serviceFactoryReturnedNull",e[e.serviceFactoryFault=6]="serviceFactoryFault",e[e.localServiceHiddenOnRemoteClient=7]="localServiceHiddenOnRemoteClient"}(r||(t.MissingBrokeredServiceErrorCode=r={}))},989:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProfferedRemoteServiceBroker=void 0;const n=r(2361),o=r(3257),i=r(7327);class s extends n.EventEmitter{container;remoteServiceBroker;multiplexingStream;source;serviceBroker;monikers;constructor(e,t,r,n,s){super(),this.container=e,this.remoteServiceBroker=t,this.multiplexingStream=r,this.source=n,this.monikers=s.map(i.ServiceMonikerValue.from),this.serviceBroker=new Promise((async(e,n)=>{try{e(r?await o.RemoteServiceBroker.connectToMultiplexingRemoteServiceBroker(t,r):await o.RemoteServiceBroker.connectToRemoteServiceBroker(t))}catch(e){n(e)}})),this.remoteServiceBroker.on("availabilityChanged",this.onAvailabilityChanged)}async getProxy(e,t,r){const n=await this.serviceBroker;return await n.getProxy(e,t,r)}async getPipe(e,t,r){const n=await this.serviceBroker;return await n.getPipe(e,t,r)}handshake(e,t){return this.remoteServiceBroker.handshake(e,t)}requestServiceChannel(e,t,r){return this.remoteServiceBroker.requestServiceChannel(e,t,r)}cancelServiceRequest(e,t){return this.remoteServiceBroker.cancelServiceRequest(e,t)}dispose(){this.remoteServiceBroker.off("availabilityChanged",this.onAvailabilityChanged),this.container.removeRegistrations(this)}onAvailabilityChanged(e){this.container.onAvailabilityChanged(null,this,e.impactedServices),this.emit("availabilityChanged",e)}}t.ProfferedRemoteServiceBroker=s},9793:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProfferedServiceBroker=void 0;const n=r(2361),o=r(5653),i=r(7327);class s extends n.EventEmitter{container;serviceBroker;source;monikers;remoteServiceBrokerWrapper;constructor(e,t,r,n){super(),this.container=e,this.serviceBroker=t,this.source=r,this.monikers=n.map(i.ServiceMonikerValue.from),this.serviceBroker.on("availabilityChanged",this.onAvailabilityChanged),this.remoteServiceBrokerWrapper=new o.RemoteServiceBrokerWrapper(this)}getProxy(e,t,r){return this.serviceBroker.getProxy(e,t,r)}getPipe(e,t,r){return this.serviceBroker.getPipe(e,t,r)}handshake(e,t){return this.remoteServiceBrokerWrapper.handshake(e,t)}requestServiceChannel(e,t,r){return this.remoteServiceBrokerWrapper.requestServiceChannel(e,t,r)}cancelServiceRequest(e,t){return this.remoteServiceBrokerWrapper.cancelServiceRequest(e,t)}dispose(){this.serviceBroker.off("availabilityChanged",this.onAvailabilityChanged),this.container.removeRegistrations(this)}onAvailabilityChanged(e){this.container.onAvailabilityChanged(null,this,e.impactedServices),this.emit("availabilityChanged",e)}}t.ProfferedServiceBroker=s},9080:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProfferedServiceFactory=void 0;const o=n(r(9593)),i=r(2361),s=r(3543),a=r(5653),c=r(7327),u=r(5083);class l extends i.EventEmitter{container;descriptor;factory;source=u.ServiceSource.sameProcess;monikers;remoteServiceBrokerWrapper;constructor(e,t,r){super(),this.container=e,this.descriptor=t,this.factory=r,this.monikers=Object.freeze([new c.ServiceMonikerValue(t.moniker)]),this.remoteServiceBrokerWrapper=new a.RemoteServiceBrokerWrapper(this)}async getProxy(e,t,r){r?.throwIfCancelled();const n=this.container.getSecureServiceBroker(t),i=await this.invokeFactory(n,e.moniker,t??{},r??o.default.CONTINUE);if(!i)return null;switch(typeof i.dispose){case"undefined":i.dispose=function(){};break;case"function":break;default:throw new Error(`Service has a dispose property of type ${typeof i.dispose} instead of a function.`)}return i}async getPipe(e,t,r){r?.throwIfCancelled();const n=s.FullDuplexStream.CreatePair(),i=this.container.getSecureServiceBroker(t),a=this.descriptor.constructRpcConnection(n.first),c=await this.invokeFactory(i,e,t??{},r??o.default.CONTINUE);try{return c?(a.addLocalRpcTarget(c),a.startListening(),n.second):(a.dispose(),null)}catch(e){throw"function"==typeof c?.dispose&&c.dispose(),e}}handshake(e,t){return this.remoteServiceBrokerWrapper.handshake(e,t)}requestServiceChannel(e,t,r){return this.remoteServiceBrokerWrapper.requestServiceChannel(e,t,r)}cancelServiceRequest(e,t){return this.remoteServiceBrokerWrapper.cancelServiceRequest(e,t)}dispose(){this.container.removeRegistrations(this)}invokeFactory(e,t,r,n){return this.container.getServiceRegistration(c.ServiceMonikerValue.from(t))?.registration.allowGuestClients,this.factory(t,r,e,n)}}t.ProfferedServiceFactory=l},5653:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteServiceBrokerWrapper=void 0;const n=r(5408);class o extends n.IpcRelayServiceBroker{}t.RemoteServiceBrokerWrapper=o},7993:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceAudience=void 0,function(e){e[e.none=0]="none",e[e.process=1]="process",e[e.local=3]="local",e[e.liveShareGuest=1024]="liveShareGuest",e[e.allClientsIncludingGuests=1027]="allClientsIncludingGuests"}(r||(t.ServiceAudience=r={}))},7327:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceMonikerValue=void 0;const o=n(r(9887));class i{name;version;hash;constructor(e,t){"string"==typeof e?(this.name=e,this.version=t):(this.name=e.name,this.version=e.version)}equals(e){return e&&e.name===this.name&&e.version===this.version}hashCode(){return this.hash??=(0,o.default)(this.name)+(0,o.default)(this.version??""),this.hash}static from(e){return e instanceof i?e:new i(e)}}t.ServiceMonikerValue=i},9022:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceRegistration=void 0;const n=r(7993);t.ServiceRegistration=class{audience;allowGuestClients;profferCallback;constructor(e,t,r){this.audience=e,this.allowGuestClients=t,this.profferCallback=r}get isExposedLocally(){return(this.audience&n.ServiceAudience.local)!==n.ServiceAudience.none}get isExposedRemotely(){return(this.audience&n.ServiceAudience.liveShareGuest)!==n.ServiceAudience.none}isExposedTo(e){return(e&this.audience)===e}}},5083:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceSource=void 0,function(e){e[e.sameProcess=0]="sameProcess",e[e.otherProcessOnSameMachine=1]="otherProcessOnSameMachine",e[e.trustedServer=2]="trustedServer",e[e.untrustedServer=3]="untrustedServer"}(r||(t.ServiceSource=r={}))},1067:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;const n=r(2361),o=r(8952),i=r(4245);class s extends n.EventEmitter{container;audience;clientCredentials;clientCredentialsPolicy;clientCulture;clientUICulture;constructor(e,t,r,n,o,i){super(),this.container=e,this.audience=t,this.clientCredentials=r,this.clientCredentialsPolicy=n,this.clientCulture=o,this.clientUICulture=i}async getProxy(e,t,r){r?.throwIfCancelled(),t=this.applyOptionsFilter(t);const n=await this.container.getProfferingSource(e.moniker,this.audience);return n?.proffered?await n.proffered.getProxy(e,t,r):null}async getPipe(e,t,r){r?.throwIfCancelled(),t=this.applyOptionsFilter(t);const n=await this.container.getProfferingSource(e,this.audience);return n?.proffered?await n.proffered.getPipe(e,t,r):null}handshake(e,t){if(!o.RemoteServiceConnections.contains(e.supportedConnections,o.RemoteServiceConnections.IpcPipe))throw new Error("We only support pipes.");return Promise.resolve()}async requestServiceChannel(e,t,r){r?.throwIfCancelled(),t=this.applyOptionsFilter(t);const n=await this.container.getProfferingSource(e,this.audience);return n?.proffered?n.proffered.requestServiceChannel(e,t,r):Promise.resolve({})}cancelServiceRequest(e,t){throw new Error("Not yet implemented.")}applyOptionsFilter(e){const{...t}=e??{};return this.clientCredentialsPolicy!==i.ClientCredentialsPolicy.filterOverridesRequest&&0!==(t.clientCredentials?.length??0)||(t.clientCredentials=this.clientCredentials.toObject()),t.clientCulture=this.clientCulture,t.clientUICulture=this.clientUICulture,t}}t.View=s},6333:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientCredentialsPolicy=t.ServiceSource=t.ServiceRegistration=t.ServiceAudience=t.GlobalBrokeredServiceContainer=void 0;var n=r(1349);Object.defineProperty(t,"GlobalBrokeredServiceContainer",{enumerable:!0,get:function(){return n.GlobalBrokeredServiceContainer}});var o=r(7993);Object.defineProperty(t,"ServiceAudience",{enumerable:!0,get:function(){return o.ServiceAudience}});var i=r(9022);Object.defineProperty(t,"ServiceRegistration",{enumerable:!0,get:function(){return i.ServiceRegistration}});var s=r(5083);Object.defineProperty(t,"ServiceSource",{enumerable:!0,get:function(){return s.ServiceSource}});var a=r(4245);Object.defineProperty(t,"ClientCredentialsPolicy",{enumerable:!0,get:function(){return a.ClientCredentialsPolicy}})},9679:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.Observer=t.ServiceRpcDescriptor=t.ServiceMoniker=t.JsonRpcConnection=t.ServiceJsonRpcDescriptor=t.RemoteServiceConnectionInfo=t.RemoteServiceBroker=t.ProtectedOperation=t.MultiplexingRelayServiceBroker=t.RpcMarshalable=t.IpcRelayServiceBroker=t.IDisposable=t.AuthorizationServiceClient=t.RemoteServiceConnections=t.MessageDelimiters=t.Formatters=void 0;var i=r(8952);Object.defineProperty(t,"Formatters",{enumerable:!0,get:function(){return i.Formatters}}),Object.defineProperty(t,"MessageDelimiters",{enumerable:!0,get:function(){return i.MessageDelimiters}}),Object.defineProperty(t,"RemoteServiceConnections",{enumerable:!0,get:function(){return i.RemoteServiceConnections}}),o(r(1911),t);var s=r(1570);Object.defineProperty(t,"AuthorizationServiceClient",{enumerable:!0,get:function(){return s.AuthorizationServiceClient}});var a=r(7957);Object.defineProperty(t,"IDisposable",{enumerable:!0,get:function(){return a.IDisposable}});var c=r(5408);Object.defineProperty(t,"IpcRelayServiceBroker",{enumerable:!0,get:function(){return c.IpcRelayServiceBroker}});var u=r(4008);Object.defineProperty(t,"RpcMarshalable",{enumerable:!0,get:function(){return u.RpcMarshalable}});var l=r(1529);Object.defineProperty(t,"MultiplexingRelayServiceBroker",{enumerable:!0,get:function(){return l.MultiplexingRelayServiceBroker}});var d=r(3515);Object.defineProperty(t,"ProtectedOperation",{enumerable:!0,get:function(){return d.ProtectedOperation}});var p=r(3257);Object.defineProperty(t,"RemoteServiceBroker",{enumerable:!0,get:function(){return p.RemoteServiceBroker}});var f=r(7464);Object.defineProperty(t,"RemoteServiceConnectionInfo",{enumerable:!0,get:function(){return f.RemoteServiceConnectionInfo}});var h=r(8743);Object.defineProperty(t,"ServiceJsonRpcDescriptor",{enumerable:!0,get:function(){return h.ServiceJsonRpcDescriptor}}),Object.defineProperty(t,"JsonRpcConnection",{enumerable:!0,get:function(){return h.JsonRpcConnection}});var g=r(8055);Object.defineProperty(t,"ServiceMoniker",{enumerable:!0,get:function(){return g.ServiceMoniker}});var v=r(4815);Object.defineProperty(t,"ServiceRpcDescriptor",{enumerable:!0,get:function(){return v.ServiceRpcDescriptor}});var m=r(3187);Object.defineProperty(t,"Observer",{enumerable:!0,get:function(){return m.Observer}}),o(r(6333),t)},4008:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IJsonRpcMarshaledObject=t.MarshaledObjectProxy=t.RpcMarshalable=t.registerReleaseMarshaledObjectCallback=void 0;const n=r(4389),o=r(7188),i="$/releaseMarshaledObject";function s(e,t,r){return void 0===r?`$/invokeProxy/${e}/${t}`:`$/invokeProxy/${e}/${r}.${t}`}var a,c;t.registerReleaseMarshaledObjectCallback=function(e){e.onNotification(i,(t=>{const r=Array.isArray(t)?{handle:t[0],ownedBySender:t[1]}:t,n=e;if(n._marshaledObjectTracker){const e=r.ownedBySender?n._marshaledObjectTracker.theirsByHandle:n._marshaledObjectTracker.ownByHandle;e[r.handle]?.dispose()}}))},function(e){e.is=function(e){const t=e;return"string"==typeof t?._jsonRpcMarshalableLifetime}}(a||(t.RpcMarshalable=a={})),function(e){e.is=function(e){const t=e;return"number"==typeof t?._jsonrpcMarshaledHandle}}(c||(t.MarshaledObjectProxy=c={}));const u={get:(e,t)=>{switch(t.toString()){case"dispose":return e.dispose;case"_jsonrpcMarshaledHandle":return e._jsonrpcMarshaledHandle;case"then":case"toJSON":return;default:return function(){const r=s(e._jsonrpcMarshaledHandle,t.toString());return(0,o.invokeRpc)(r,arguments,e.messageConnection)}}}};function l(e){const t=e;return t._marshaledObjectTracker??={counter:0,ownByHandle:{},theirsByHandle:{},ownTrackedObjectHandles:new WeakMap},t._marshaledObjectTracker}var d;!function(e){e.is=function(e){const t=e;return"number"==typeof t?.__jsonrpc_marshaled&&"number"==typeof t.handle},e.wrap=function(e,t){const r=l(t);if(c.is(e))return{__jsonrpc_marshaled:0,handle:e._jsonrpcMarshaledHandle};{if("call"===e._jsonRpcMarshalableLifetime)throw new Error("Receiving marshaled objects scoped to the lifetime of a single RPC request is not yet supported.");const n=r.ownTrackedObjectHandles.has(e),i=n?r.ownTrackedObjectHandles.get(e):++r.counter;if(!n){r.ownTrackedObjectHandles.set(e,i);const n=(0,o.registerInstanceMethodsAsRpcTargets)(e,t,(e=>s(i,e)));r.ownByHandle[i]={target:e,dispose:()=>{n.dispose(),delete r.ownByHandle[i],r.ownTrackedObjectHandles.delete(e),"dispose"in e&&"function"==typeof e.dispose&&e.dispose()}}}return{__jsonrpc_marshaled:1,handle:i,lifetime:e._jsonRpcMarshalableLifetime,optionalInterfaces:e._jsonRpcOptionalInterfaces}}},e.cancelWrap=function(e,t){const r=l(t).ownByHandle[e.handle];r?.dispose()},e.unwrap=function(e,t){if("call"===e.lifetime)throw new Error("Receiving marshaled objects scoped to the lifetime of a single RPC request is not yet supported.");const r=l(t);switch(e.__jsonrpc_marshaled){case 1:let o=r.theirsByHandle[e.handle]?.proxy;if(!o){const s={messageConnection:t,_jsonrpcMarshaledHandle:e.handle,dispose:()=>{if(r.theirsByHandle[e.handle]){delete r.theirsByHandle[e.handle];const o={handle:e.handle,ownedBySender:!1};t.sendNotification(i,n.ParameterStructures.byName,o)}}};o=new Proxy(s,u),r.theirsByHandle[e.handle]={proxy:o,dispose:()=>{delete r.theirsByHandle[e.handle]}}}return o;case 0:const s=r.ownByHandle[e.handle];if(!s)throw new Error(`Unrecognized handle ${e.handle}`);return s.target;default:throw new Error(`Unsupported value for __jsonrpc_marshaled: ${e.__jsonrpc_marshaled}.`)}}}(d||(t.IJsonRpcMarshaledObject=d={}))},3187:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Observer=void 0,t.Observer=class{next;completion;_jsonRpcMarshalableLifetime="explicit";error;get completed(){return void 0!==this.error}constructor(e,t){this.next=e,this.completion=t}onNext(e){this.next(e)}onCompleted(){this.error=null,this.completion&&this.completion(null)}onError(e){this.error=e,this.completion&&this.completion(e)}}},7188:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerInstanceMethodsAsRpcTargets=t.invokeRpc=void 0;const n=r(4389),o=r(3736),i=r(4008);function s(e,t){return function(e){for(let t=0;t<e.length;t++)if(void 0===e[t])throw new Error(`Argument at 0-based index ${t} is set as undefined, which is not a valid JSON value.`);return e}(t).map((t=>a(e,t)))}function a(e,t){return i.RpcMarshalable.is(t)||i.MarshaledObjectProxy.is(t)?i.IJsonRpcMarshaledObject.wrap(t,e):t}function c(e,t){const r=Object.getOwnPropertyDescriptor(e,t);return!!r&&"function"==typeof r.value}function u(e,t){return function(e,t){return i.IJsonRpcMarshaledObject.is(t)?i.IJsonRpcMarshaledObject.unwrap(t,e):t}(e,t)}function l(e,t){return function(e){if(e.length>0&&o.CancellationTokenAdapters.isVSCode(e[e.length-1])){const t=o.CancellationTokenAdapters.vscodeToCancellationToken(e[e.length-1]);e[e.length-1]=t}return e}(t).map((t=>u(e,t)))}t.invokeRpc=async function(e,t,r){if(t.length>0){if(n.CancellationToken.is(t[t.length-1])){const o=t[t.length-1],i=s(r,Array.prototype.slice.call(t,0,t.length-1));return r.sendRequest(e,n.ParameterStructures.byPosition,...i,o)}if(o.CancellationTokenAdapters.isCancellationToken(t[t.length-1])){const i=o.CancellationTokenAdapters.cancellationTokenToVSCode(t[t.length-1]),a=s(r,Array.prototype.slice.call(t,0,t.length-1));return r.sendRequest(e,n.ParameterStructures.byPosition,...a,i)}if(void 0===t[t.length-1]){const o=s(r,Array.prototype.slice.call(t,0,t.length-1));return r.sendRequest(e,n.ParameterStructures.byPosition,...o)}}const a=s(r,Array.prototype.slice.call(t));try{const t=await r.sendRequest(e,n.ParameterStructures.byPosition,...a);return u(r,t)}catch(e){for(const e of a)i.IJsonRpcMarshaledObject.is(e)&&i.IJsonRpcMarshaledObject.cancelWrap(e,r);throw e}},t.registerInstanceMethodsAsRpcTargets=function(e,t,r){const o=[];function i(n,i){const s=r?r(n):n;o.push(t.onRequest(s,((...r)=>async function(e,t){return a(e,await t)}(t,i.apply(e,l(t,r)))))),o.push(t.onNotification(s,((...r)=>i.apply(e,l(t,r)))))}return function(e,t){const r=[];let n=Object.getPrototypeOf(e);for(;n&&n!==t;)Object.getOwnPropertyNames(n).forEach((e=>{"constructor"!==e&&c(n,e)&&r.push(e)})),n=Object.getPrototypeOf(n);return r}(e,Object.prototype).forEach((t=>{if("dispose"!==t){const r=e[t];i(t,r);const n="Async";i(t.endsWith(n)?t.substring(0,t.length-n.length):`${t}${n}`,r)}})),n.Disposable.create((()=>o.forEach((e=>e.dispose()))))}},5447:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isChannel=t.clone=t.isReadWriteStream=t.constructMessageConnection=void 0;const o=n(r(9491)),i=r(4008);function s(e){return e&&"unshift"in e}t.constructMessageConnection=function(e,t){let r;return(0,o.default)(e),s(e)?(r=t(e),e.on("close",(()=>{r?.dispose()})),r.onDispose((()=>e.end())),r.onClose((()=>e.end()))):(r=t(e.stream),e.completion.then((()=>{r?.dispose()})),r.onDispose((()=>e.dispose())),r.onClose((()=>e.dispose()))),(0,i.registerReleaseMarshaledObjectCallback)(r),r},t.isReadWriteStream=s,t.clone=function(e){var t=e.constructor();for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},t.isChannel=function(e){return e&&"stream"in e&&"acceptance"in e&&"completion"in e&&"dispose"in e}},460:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.autoDiscoveryIsDisabled=void 0;const s=i(r(9496));t.autoDiscoveryIsDisabled=()=>s.workspace.getConfiguration("dotnet.testWindow").get("disableAutoDiscovery",!1)},4135:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_RUN_SETTINGS=t.TEST_EXPLORER_DISPLAY_NAME=t.TEST_CONTROLLER_ID=t.VERSIONED_NODE_ID_EXPAND_CHILDREN_VERSION=void 0,t.VERSIONED_NODE_ID_EXPAND_CHILDREN_VERSION=-1,t.TEST_CONTROLLER_ID="csdevkit-test-controller",t.TEST_EXPLORER_DISPLAY_NAME="C# Dev Kit - Test Explorer",t.DEFAULT_RUN_SETTINGS='<?xml version="1.0" encoding="utf-8"?>\n<RunSettings>\n  <RunConfiguration>\n    <CollectSourceInformation>true</CollectSourceInformation>\n  </RunConfiguration>\n  <DataCollectionRunSettings>\n    <DataCollectors/>\n  </DataCollectionRunSettings>\n</RunSettings>'},5880:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoverageManager=void 0;const o=n(r(1017));t.CoverageManager=class{_collectionController;constructor(e){this._collectionController=e}setupCoverageProfile(e){this._collectionController.setupCoverageProfile(e)}startCoverageCollection(e,t,r,n){let i=n.map((e=>o.default.dirname(e.outputPath)));return this._collectionController.start(e,t.runSettings,r,i,[])}stopCoverageCollection(e){return this._collectionController.stop(e)}}},3865:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugRefresh=t.debugTestItems=t.debugTestItem=t.debugTestMeta=t.debugTestStructure=t.debugTestNodeNesting=t.debugVersionedId=t.debugTestNodes=t.debugTestNode=void 0,t.debugTestNode=e=>`${e.id}:${e.nodeVersion} ${e.displayName} ${e.isExpandable?"expandable":""} ${e.testCaseRecordId}`,t.debugTestNodes=e=>`\n{${e.map((e=>(0,t.debugTestNode)(e))).join("}\n{")}}`,t.debugVersionedId=e=>`${e.nodeId}:${e.nodeVersion}:${e.collectionVersion}`,t.debugTestNodeNesting=e=>`[${(0,t.debugVersionedId)(e.parentNodeId)}]--${"".concat(...e.childNodeIds.map((e=>`[${(0,t.debugVersionedId)(e)}];`)))}`,t.debugTestStructure=e=>`\n${e.map((e=>(0,t.debugTestNodeNesting)(e))).join("\n")}`,t.debugTestMeta=e=>{let r="";return e.forEach(((e,n)=>{r+=` \n${n} => ${(0,t.debugTestNodeNesting)(e)}`})),r},t.debugTestItem=e=>`${e.id}: '${e.label}' (${e.children.size})`,t.debugTestItems=e=>{let r="";return e.forEach(((e,n)=>{r+=`  \n${n} => ${(0,t.debugTestItem)(e)}`})),r},t.debugRefresh=(e,r)=>`req: ${e.viewId}:${e.viewVersion}\nnodes: [${e.parentNodes.map((e=>(0,t.debugVersionedId)(e))).join(",")}]\nresp: ${r.viewId}:${r.viewVersion}\nstruct: ${(0,t.debugTestStructure)(r.structure)}\nnodes: ${(0,t.debugTestNodes)(r.tests)}`},6474:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InternalDescriptors=void 0;const n=r(9679);class o{static testWindowVSCodeServer=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.TestWindow.VSCode.Service","0.1"),n.Formatters.MessagePack,n.MessageDelimiters.BigEndianInt32LengthHeader,{protocolMajorVersion:3}));static projectSystemProviderServer=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.TestWindow.VSCode.ProjectSystemProvider.Service","0.1"),n.Formatters.MessagePack,n.MessageDelimiters.BigEndianInt32LengthHeader,{protocolMajorVersion:3}))}t.InternalDescriptors=o},4388:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;const n=r(9496),o=r(4135);t.Logger=class{outputChannel;constructor(){this.outputChannel=n.window.createOutputChannel(o.TEST_EXPLORER_DISPLAY_NAME)}log(e){this.outputChannel.appendLine(e)}logAndThrow(e){throw this.log(e),new Error(e)}}},4558:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectSystemMonitor=void 0;const n=r(2361),o=r(6474);t.ProjectSystemMonitor=class{emitter=new n.EventEmitter;logger;constructor(e){this.logger=e}notifyProjectsChanged(e){return this.emitter.emit("projectChanged",e),Promise.resolve()}async start(e,t,r){const n=await t.getProxy(o.InternalDescriptors.projectSystemProviderServer,{clientRpcTarget:this});n?(e.subscriptions.push(n),this.emitter.on("projectChanged",r),await n.initialize(),this.logger.log("Initialized project system provider.")):this.logger.logAndThrow("Error connecting to the project system provider service.")}}},4379:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Strings=void 0;class r{static _strings;static initialize(e){r._strings=e}static get(e){if(!r._strings)return"<< Error loading localized string >>";return r._strings[e]||"<< Error loading localized string >>"}}t.Strings=r},5853:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TaskQueue=void 0;class r{last=Promise.resolve();enqueue(e){return this.last=r.runAfter(this.last,e),this.last}static async runAfter(e,t){return await e,await t()}}t.TaskQueue=r},3578:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryEventNames=void 0,t.TelemetryEventNames=class{static TimeToPrepareTestRunEvent="vs/unittest/testwindow/timetopreparetestrun";static TestPreparationTimeProperty="vs.unittest.testwindow.preparationtimeinms";static TestBuildKindProperty="vs.unittest.testwindow.buildkind";static IntegrationTestTimeToDiscoverAllTestsEvent="vs/unittest/testwindow/integrationtesttimetodiscoveralltests";static IntegrationTestTimeToRunAllTestsEvent="vs/unittest/testwindow/integrationtesttimetorunalltests";static IntegrationTestKindProperty="vs.unittest.testwindow.integrationtestkind";static IntegrationTestTimeToRunAllTestsProperty="vs.unittest.testwindow.IntegrationTestTimeToRunAllTestsinms";static IntegrationTestTimeToDiscoverAllTestsProperty="vs.unittest.testwindow.IntegrationTestTimeToDiscoverAllTestsinms";static TimeToDiscoverTestsEvent="vs/unittest/testwindow/timetodiscovertests";static DiscoveryTimeProperty="vs.unittest.testwindow.discoverytimeinms";static NumberOfTestProjectsProperty="vs.unittest.testwindow.numtestprojects";static NumberOfTestsProperty="vs.unittest.testwindow.numtests";static IsAbortedProperty="vs.unittest.testwindow.isaborted";static FirstDiscoveryProperty="vs.unittest.testwindow.firstdiscovery"}},3815:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TestOperationScheduler=void 0;const s=i(r(9496)),a=r(5853);class c{_taskQueue;_logger;discoveryInProgress=new Map;testBuildOrExecutionInProgress=!1;constructor(e){this._logger=e,this._taskQueue=new a.TaskQueue}static async fileStat(e){try{return await s.workspace.fs.stat(e)}catch{return}}static async getTimestampedProjects(e){var t=[];for(const r of e){const e=s.Uri.file(r.outputPath),n=await c.fileStat(e);t.push({mtime:n?.mtime??0,...r})}return t}static async getModifiedProjects(e){var t=[];for(const r of e){const e=s.Uri.file(r.outputPath),n=await c.fileStat(e);n&&n.mtime>r.mtime&&t.push(r)}return t}tryScheduleDiscovery(e){const t=this.discoveryInProgress.get(e.outputPath.toLowerCase());return t&&e.mtime<=t?(this._logger.log(`Skipping discovery, already scheduled: ${e.outputPath} [${e.mtime}]`),!1):(this.discoveryInProgress.set(e.outputPath.toLowerCase(),e.mtime),!0)}async discoverProjects(e,t){if(!this.testBuildOrExecutionInProgress){var r=[];for(const t of e){const e=s.Uri.file(t.outputPath),n=await c.fileStat(e);if(n){const e={...t,mtime:n.mtime};this.tryScheduleDiscovery(e)&&r.push(e)}else r.push({...t,mtime:0})}if(0!=r.length){for(const e of r)this._logger.log(`Scheduling discovery: ${e.outputPath} [${e.mtime}]`);try{return await this._taskQueue.enqueue((()=>t(r)))}finally{for(const e of r)this.discoveryInProgress.delete(e.outputPath.toLowerCase())}}}}async enqueueOperation(e){try{return this.testBuildOrExecutionInProgress=!0,await this._taskQueue.enqueue((()=>e()))}finally{this.testBuildOrExecutionInProgress=!1}}}t.TestOperationScheduler=c},8998:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TestViewManager=t.RootNodeId=void 0;const s=i(r(9496)),a=i(r(1017)),c=i(r(7147)),u=r(6578),l=r(4135),d=r(3865),p=r(3815),f=r(1585),h=r(3578),g=r(4379),v=r(5853),m=r(460);t.RootNodeId=0;const y=()=>Math.trunc(Math.random()*Math.pow(2,31)),_=e=>({parentNodeId:{nodeId:e,nodeVersion:0,collectionVersion:0},childNodeIds:[]});t.TestViewManager=class{_service;_testController;_logger;_runProfile;_debugProfile;_coverageProfile;_testOperationScheduler;_serviceBroker;_discoverBeforeRunHandler;viewId;viewVersion=0;testItems;testItemsByTestCaseRecordId;testMeta;_telemetryService;_coverageManager;constructor(e,r,n,o,i,a,c,u){this.viewId=y(),this._service=e,this._testOperationScheduler=r,this._logger=o,this._serviceBroker=i,this._telemetryService=a,this._discoverBeforeRunHandler=c,this._coverageManager=u,this._testController=n,this._testController.refreshHandler=this.refreshHandler,this._testController.resolveHandler=this.resolveHandler,this._runProfile=this._testController.createRunProfile("Run",s.TestRunProfileKind.Run,this.runHandler,!0),s.extensions.getExtension("ms-dotnettools.csharp")?this._debugProfile=this._testController.createRunProfile("Debug",s.TestRunProfileKind.Debug,this.debugHandler,!0):this._logger.log("Please install the C# tools extension, which is required for debugging tests."),this._coverageProfile=this._testController.createRunProfile("Coverage",s.TestRunProfileKind.Coverage,this.coverageHandler,!0),this._coverageManager.setupCoverageProfile(this._coverageProfile),this.testItems=new Map,this.testItemsByTestCaseRecordId=new Map,this.testMeta=new Map,this.testMeta.set(t.RootNodeId,_(t.RootNodeId))}debugHandler=async(e,t)=>{await this.runTestsHelper(e,t,this._service.debugTests,!1)};runHandler=async(e,t)=>{await this.runTestsHelper(e,t,this._service.runTests,!1)};coverageHandler=async(e,t)=>{await this.runTestsHelper(e,t,this._service.runTests,!0)};async runTestsHelper(e,t,r,n){let o={viewId:this.viewId,testNodes:[],runSettings:await this.getRunSettings()};if(e.include){const r=[];for(const t of e.include){const e=parseInt(t.id);r.push(e)}o.testNodes=r,await this.expandNodes(r,t)}else await this.expandAllNodes(t);let i=y().toString();try{this.beforeTestRun(e),await this._testOperationScheduler.enqueueOperation((async()=>{const e=await this.buildTestsIfNeeded(o,t);if(!e.success)return this._logger.log("Error building your test projects. Please correct the build errors and try again."),void s.window.showErrorMessage(g.Strings.get("buildFailed"));e.changedProjects.length>0&&await this._discoverBeforeRunHandler(e.changedProjects),n&&(o.runSettings=await this._coverageManager.startCoverageCollection(i,o,this.activeTestRun,e.allProjects)),await r(o,t)}))}finally{n&&await this._coverageManager.stopCoverageCollection(i),await this.afterTestRun()}}buildTestsIfNeeded=async(e,t)=>{const r=performance.now(),n=await this._serviceBroker.getProxy(f.Descriptors.buildService);if(!n)return this._logger.log("Error connecting to the build service."),{changedProjects:[],allProjects:[],success:!0};let o="";try{const r=await this._service.getProjectsForTests(e,t),i=await p.TestOperationScheduler.getTimestampedProjects(r),s=new Set(r.map((e=>e.projectPath)));if(1===s.size){o="project";const e=[...s.values()][0],t=await n.build(e);return(0,m.autoDiscoveryIsDisabled)()?{changedProjects:i,allProjects:r,success:t}:{changedProjects:await p.TestOperationScheduler.getModifiedProjects(i),allProjects:r,success:t}}{o="solution";const e=await n.build("");return(0,m.autoDiscoveryIsDisabled)()?{changedProjects:i,allProjects:r,success:e}:{changedProjects:await p.TestOperationScheduler.getModifiedProjects(i),allProjects:r,success:e}}}finally{this._telemetryService.sendTelemetryEvent(h.TelemetryEventNames.TimeToPrepareTestRunEvent,{[h.TelemetryEventNames.TestBuildKindProperty]:o},{[h.TelemetryEventNames.TestPreparationTimeProperty]:performance.now()-r}),n.dispose()}};refreshHandler=async e=>{await this._testOperationScheduler.enqueueOperation((async()=>{let t={viewId:this.viewId,testNodes:[],runSettings:await this.getRunSettings()};const r=await this.buildTestsIfNeeded(t,e);if(!r.success)return this._logger.log("Error building your test projects. Please correct the build errors and try again."),void s.window.showErrorMessage(g.Strings.get("buildFailed"));r.changedProjects.length>0&&await this._discoverBeforeRunHandler(r.changedProjects)}))};resolveHandler=async e=>{if(!e)return;const t=parseInt(e.parent?.id??"0"),r=this.testMeta.get(t);if(!r)return;for(const e of r.childNodeIds)this.testMeta.set(e.nodeId,_(e.nodeId));const n=new s.CancellationTokenSource;try{await this.refresh(n.token)}catch(e){this._logger.log(`Error during resolve: ${e}`)}finally{n.dispose()}};addTestItem(e,t){const r=e.sourceFile?s.Uri.file(e.sourceFile):void 0,n=this._testController.createTestItem(e.id.toString(),e.displayName,r);return e.sourceFileLineNumber>0&&(n.range=new s.Range(e.sourceFileLineNumber-1,0,e.sourceFileLineNumber,0)),n.canResolveChildren=e.isExpandable,this.testItems.set(e.id,n),e.testCaseRecordId&&this.testItemsByTestCaseRecordId.set(e.testCaseRecordId,n),t.add(n),n}updateTestItem(e){const t=this.testItems.get(e.id);if(!t)throw new Error("Cannot update find testItem to update");return e.sourceFileLineNumber>0&&(t.range=new s.Range(e.sourceFileLineNumber-1,0,e.sourceFileLineNumber,0)),t.label=e.displayName,t.canResolveChildren=e.isExpandable,t}activeTestRun;beforeTestRun(e){if(this.activeTestRun=this._testController.createTestRun(e,void 0,!0),e.include&&e.include.length>0)for(const t of e.include)this.activeTestRun.enqueued(t);else for(const e of this.testItems.values())this.activeTestRun.enqueued(e)}_testResultNotificationInProgress=Promise.resolve();async notifyTestResult(e,t){this._testResultNotificationInProgress=this.notifyTestResultImpl(e,t),await this._testResultNotificationInProgress}async notifyTestResultImpl(e,t){const r=this.activeTestRun;if(r){for(const e of t){const t=this.testItemsByTestCaseRecordId.get(e);t&&r.started(t)}for(const t of e){const e=this.testItemsByTestCaseRecordId.get(t.testCaseRecordId);if(e){switch(t.outcome){case u.TestOutcome.Failed:const n=new s.TestMessage(`${t.errorMessage??"Test Failed."}\r\n${t.errorStackTrace}`),o=await this.tryParseStackLocation(e,t.errorStackTrace);o&&(n.location=o),r.failed(e,n,t.duration);break;case u.TestOutcome.Passed:r.passed(e,t.duration);break;case u.TestOutcome.Skipped:r.skipped(e);break;case u.TestOutcome.NotFound:r.errored(e,new s.TestMessage("Test could not be found."),t.duration);break;default:r.errored(e,new s.TestMessage("Test could not be run."),t.duration)}t.standardOutput&&r.appendOutput(t.standardOutput,void 0,e),t.standardError&&r.appendOutput(t.standardError,void 0,e)}else this._logger.log(`Unable to find a test case with id ${t.testCaseRecordId}`)}}else this._logger.log("No active test run.")}async tryParseStackLocation(e,t){let r;if(t&&null!=(r=/at (.*) in (.*):line (\d*)$/m.exec(t))){const e=r[2],t=r[3],n=s.Uri.file(e);if(await p.TestOperationScheduler.fileStat(n))return new s.Location(n,new s.Position(parseInt(t)-1,0))}}async afterTestRun(){await this._testResultNotificationInProgress,this.activeTestRun?.end(),this.activeTestRun=void 0}testNodesToQuery(){return Array.from(this.testMeta.values()).map((e=>e.parentNodeId))}updateChildItems(e,t,r){t.parentNodeId.collectionVersion;const n=new Set;e.forEach((e=>n.add(parseInt(e.id))));for(const o of t.childNodeIds){const t=r.get(o.nodeId);if(!t)throw new Error(`test node data for ${o.nodeId}:${o.nodeVersion}:${o.collectionVersion} expected but not provided.`);if(e.get(o.nodeId.toString())){let e=this.testMeta.get(o.nodeId);e||(e={parentNodeId:o,childNodeIds:[]},this.testMeta.set(o.nodeId,e)),(o.nodeVersion>e.parentNodeId.nodeVersion||o.collectionVersion>e.parentNodeId.collectionVersion)&&this.updateTestItem(t)}else this.addTestItem(t,e);n.delete(o.nodeId)}for(const t of n)e.delete(t.toString()),this.recursivelyRemoveTestMeta(t)}recursivelyRemoveTestMeta(e){const t=this.testMeta.get(e);if(t)for(const e of t.childNodeIds)this.recursivelyRemoveTestMeta(e.nodeId);this.testMeta.delete(e)}applyTestNodeChanges(e){try{const t=new Map(e.tests.map((e=>[e.id,e])));for(const r of e.structure){const e=this.testItems.get(r.parentNodeId.nodeId),n=e?e.children:this._testController.items;this.updateChildItems(n,r,t),this.testMeta.set(r.parentNodeId.nodeId,r)}for(const t of e.structure)for(const e of t.childNodeIds){const t=this.testMeta.get(e.nodeId);(!t||t.parentNodeId.nodeVersion<e.nodeVersion||t.parentNodeId.collectionVersion<e.collectionVersion)&&this.testMeta.set(e.nodeId,{parentNodeId:e,childNodeIds:[]})}this.viewVersion=e.viewVersion}catch(e){throw this._logger.log(`Error applying test node updates: ${e}`),e}}debugState(){return`items:  ${(0,d.debugTestItems)(this.testItems)}\nstruct: ${(0,d.debugTestMeta)(this.testMeta)}`}refreshQueue=new v.TaskQueue;refresh(e){return this.refreshQueue.enqueue((async()=>{const t={viewId:this.viewId,viewVersion:this.viewVersion,parentNodes:this.testNodesToQuery()},r=await this._service.updateView(t,e);this.applyTestNodeChanges(r)}))}expandNodes(e,t){for(const t of e){const e=this.testMeta.get(t);e?e.parentNodeId.collectionVersion=l.VERSIONED_NODE_ID_EXPAND_CHILDREN_VERSION:this._logger.log(`Cannot expand node with of ${t} as it is not found.`)}return this.refresh(t)}expandAllNodes(e){const r=this.testMeta.get(t.RootNodeId);return r?r.parentNodeId.collectionVersion=l.VERSIONED_NODE_ID_EXPAND_CHILDREN_VERSION:this._logger.log("Cannot find the root node to expand it."),this.refresh(e)}async runAllTests(){const e=performance.now(),t={include:Array.from(this.testItems.values()),exclude:void 0,profile:void 0,preserveFocus:!1},r=new s.CancellationTokenSource;await this.runTestsHelper(t,r.token,this._service.runTests,!1),this._telemetryService.sendTelemetryEvent(h.TelemetryEventNames.IntegrationTestTimeToRunAllTestsEvent,{[h.TelemetryEventNames.TestBuildKindProperty]:"runAllTests"},{[h.TelemetryEventNames.IntegrationTestTimeToRunAllTestsProperty]:performance.now()-e})}dispose(){this.testItems.clear(),this.testItemsByTestCaseRecordId.clear(),this.testMeta.clear(),this._service.closeStore().then((()=>{this._runProfile.dispose(),this._debugProfile&&this._debugProfile.dispose(),this._testController.dispose(),this._coverageProfile.dispose()}))}async getRunSettings(){const e=s.workspace.getConfiguration().get("dotnet.unitTests.runSettingsPath");if(!e)return l.DEFAULT_RUN_SETTINGS;let t=e;if(!a.isAbsolute(e)&&s.workspace.workspaceFolders){const e=s.workspace.workspaceFolders[0];t=a.join(e.uri.fsPath,t)}if(!c.existsSync(t))return this._logger.log(`Cannot read runsettings file at: ${t}`),l.DEFAULT_RUN_SETTINGS;try{this._logger.log(`Using custom runsettings file at: ${t}`);const e=await s.workspace.fs.readFile(s.Uri.file(t));return(new TextDecoder).decode(e)}catch(e){return this._logger.log(`Error reading runsettings file. ${e}`),l.DEFAULT_RUN_SETTINGS}}}},6341:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestWindowTestController=void 0;const a=i(r(9496)),c=r(4135),u=r(7690),l=r(6474),d=r(4558),p=r(3815),f=r(5246),h=r(8998),g=r(149),v=r(3578),m=s(r(1017)),y=r(460),_=r(5880);class S{_context;_controller;_serviceBroker;_testOperationScheduler;_logger;_coverageCollectionController;_callback;_projectSystemMonitor;_testWindowService;_testViewManager;_telemetryService;_testControllerInitialized=!1;_totalDiscoveredSources=0;_discoverProjectsCount=0;_nullDiscoveryResultsCount=0;_totalDiscoveredTests=-1;_totalTestDiscoveredReady=new a.EventEmitter;_firstDiscovery=!0;_startTime=performance.now();constructor(e,t,r,n){this._context=e,this._controller=a.tests.createTestController(c.TEST_CONTROLLER_ID,c.TEST_EXPLORER_DISPLAY_NAME),this._serviceBroker=t,this._logger=r,this._coverageCollectionController=n,this._testOperationScheduler=new p.TestOperationScheduler(r),this._projectSystemMonitor=new d.ProjectSystemMonitor(r),this._callback=new g.TestWindowVSCodeServerCallbackService(this._logger),this._telemetryService=new f.TelemetryService(this._context,this._logger)}async initialize(){const e=await this._serviceBroker.getProxy(l.InternalDescriptors.testWindowVSCodeServer,{clientRpcTarget:this._callback});if(!e)return void this._logger.log("Error connecting to the test window service.");this._testWindowService=e,this._context.subscriptions.push(e),this._testViewManager=new h.TestViewManager(e,this._testOperationScheduler,this._controller,this._logger,this._serviceBroker,this._telemetryService,this.internalInvokeDiscovery,new _.CoverageManager(await this._coverageCollectionController)),this._callback.setTestViewManager(this._testViewManager);const t=!0===a.workspace.getConfiguration("dotnet.testWindow").get("useTestingPlatformProtocol",!0),r=a.workspace.getConfiguration().get("dotnet.dotnetPath"),n=a.workspace?.workspaceFolders??[],o=n[0]?.uri.fsPath??"";await e.initialize({workingDirectory:o,messageLevel:u.MessageLevel.Informational,useTestingPlatformProtocol:t,dotnetPath:r});const i=this._context.storageUri;if(!i)return void this._logger.log("Workspace storage folder is not available.");await a.workspace.fs.createDirectory(i);const s=i.fsPath;this._logger.log(`Test Store Folder: ${s}`),await e.openStore(s),this._projectSystemMonitor.start(this._context,this._serviceBroker,(e=>{this._logger.log(`${e.addedProjects.length} projects added, ${e.changedProjects.length} changed, ${e.removedProjects.length} removed.`),e.addedProjects.length>0&&this.discoverProjects(e.addedProjects),e.changedProjects.length>0&&this.discoverProjects(e.changedProjects),e.removedProjects.length>0&&this.removeProjects(Array.from(e.removedProjects.map((e=>a.Uri.file(e.outputPath)))))})),this._testControllerInitialized=!0}watchers=new Map;static relativePattern(e){const t=a.workspace.getWorkspaceFolder(e);if(!t){const t=m.default.dirname(e.fsPath),r=m.default.basename(e.fsPath);return new a.RelativePattern(a.Uri.file(t),r)}const r=a.workspace.asRelativePath(e,!1);return new a.RelativePattern(t,r)}watchTestSource(e){const t=a.Uri.file(e.outputPath),r=t.toString(!0);if((0,y.autoDiscoveryIsDisabled)())return void this._logger.log(`Skipping test auto discovery (dotnet.testWindow.disableAutoDiscovery=true): ${e.outputPath}`);if(this.watchers.has(r))return;const n=S.relativePattern(t),o=a.workspace.createFileSystemWatcher(n);this._context.subscriptions.push(o),o.onDidChange((t=>{this._logger.log(`Tests changed, running test discovery: ${e.outputPath}`),this.discoverProjects([e])})),o.onDidCreate((t=>{this._logger.log(`Tests are available, running test discovery: ${e.outputPath}`),this.discoverProjects([e])})),o.onDidDelete((e=>{this._logger.log(`Tests removed: ${t.fsPath}`),this._testOperationScheduler.testBuildOrExecutionInProgress||this.removeTestSources([t])})),this.watchers.set(r,o)}internalInvokeDiscovery=async e=>{if(!this._testWindowService||!this._testViewManager||0===e.length)return;const t={sources:e,discoverySettings:await this._testViewManager.getRunSettings()};return await this._testWindowService.discoverTests(t)};discoverProjects(e){return this._testOperationScheduler.discoverProjects(e,(async e=>{const t=this._firstDiscovery;this._firstDiscovery=!1,this._discoverProjectsCount++;const r=performance.now(),n=[];for(const t of e)this.watchTestSource(t),t.mtime>0&&n.push(t);const o=await this.internalInvokeDiscovery(n);if(!o)return void this._nullDiscoveryResultsCount++;this._telemetryService.sendTelemetryEvent(v.TelemetryEventNames.TimeToDiscoverTestsEvent,{[v.TelemetryEventNames.IsAbortedProperty]:o.isAborted.toString(),[v.TelemetryEventNames.FirstDiscoveryProperty]:t.toString()},{[v.TelemetryEventNames.DiscoveryTimeProperty]:performance.now()-r,[v.TelemetryEventNames.NumberOfTestProjectsProperty]:o.discoveredSources.length,[v.TelemetryEventNames.NumberOfTestsProperty]:o.totalTests}),this._totalDiscoveredSources=o.discoveredSources.length,this._totalDiscoveredTests=o.totalTests,this._totalTestDiscoveredReady.fire(o.totalTests),this._logger.log(`${o.totalTests} tests discovered from ${o.discoveredSources.join(";")} in ${o.elapsedTimeInMs} ms`);const i=new a.CancellationTokenSource;try{this._testViewManager?.expandAllNodes(i.token)}finally{i.dispose()}t&&this.pruneTestSources()}))}async pruneTestSources(){const e=await(this._testWindowService?.getOrphanedTestSources())??[];for(const t of e)this._logger.log(`Pruning orphaned tests: ${t}`);await(this._testWindowService?.removeTestSources(e))}removeTestSources(e){const t=e.map((e=>e.fsPath));return this._testWindowService?.removeTestSources(t)??Promise.resolve()}removeProjects(e){for(const t of e){const e=t.toString(!0),r=this.watchers.get(e);r&&(this.watchers.delete(e),r.dispose())}return this.removeTestSources(e)}dispose(){this._testViewManager?.dispose(),this._controller.dispose(),this._telemetryService.dispose()}isTestControllerInitialized(){return this._testControllerInitialized}totalDiscoveredTestsAsync(){return this._totalDiscoveredTests<0?new Promise((e=>this._totalTestDiscoveredReady.event(e))):(this._telemetryService.sendTelemetryEvent(v.TelemetryEventNames.IntegrationTestTimeToDiscoverAllTestsEvent,{[v.TelemetryEventNames.TestBuildKindProperty]:"discoverAllTests"},{[v.TelemetryEventNames.IntegrationTestTimeToDiscoverAllTestsProperty]:performance.now()-this._startTime}),Promise.resolve(this._totalDiscoveredTests))}totalDiscoveredProjects(){return this._totalDiscoveredSources}totalExecutionsOfDiscoverProjectsCount(){return this._discoverProjectsCount}getWatchedPaths(){return Array.from(this.watchers.keys())}isTestWindowServiceAvailable(){return!!this._testWindowService}isTestViewManagerAvailable(){return!!this._testViewManager}getNullDiscoveryResultsCount(){return this._nullDiscoveryResultsCount}getControllerItems(){return this._controller.items}runAllTests(){return this._testViewManager?.runAllTests()??Promise.resolve()}async expandAllNodesInTestExplorer(){const e=(new a.CancellationTokenSource).token;await(this._testViewManager?.expandAllNodes(e))}}t.TestWindowTestController=S},149:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TestWindowVSCodeServerCallbackService=void 0;const s=i(r(9496)),a=r(6113);t.TestWindowVSCodeServerCallbackService=class{logger;testViewManager;constructor(e){this.logger=e}buildDebugConfiguration(e){const t=s.workspace.getConfiguration().get("dotnet.unitTestDebuggingOptions");return{...t,type:t?.type||"coreclr",name:".NET Test Attach",request:"attach",processId:e}}async attachDebuggerToProcess(e,t){let r=this.buildDebugConfiguration(e);r.attachRequestId=(0,a.randomUUID)();let n=this.waitForDebuggerAttachComplete(r.attachRequestId);try{await s.debug.startDebugging(void 0,r)||this.logger.log("Unable to start debugging session.")}catch(e){return this.logger.log(`Error starting debugging session: ${e}`),!1}return await n}waitForDebuggerAttachComplete(e){return new Promise((t=>{let r=null,n=null,o=!1;const i=e=>{!1===o&&(o=!0,r?.dispose(),n?.dispose(),t(e))};r=s.debug.onDidTerminateDebugSession((t=>{t.configuration.attachRequestId===e&&(this.logger.log("Debug session terminated"),i(!1))})),n=s.debug.onDidReceiveDebugSessionCustomEvent((t=>{t.session.configuration.attachRequestId===e&&"attachComplete"===t.event&&(this.logger.log("Debugger attached"),i(!0))}))}))}setTestViewManager(e){this.testViewManager=e}log(e){return new Promise((t=>{this.logger.log(e.message),t()}))}notifyTestsChanged(e,t){return this.testViewManager?this.testViewManager.refresh(t):Promise.resolve()}notifyNewTestResults(e,t,r){return this.testViewManager?.notifyTestResult(e,t)??Promise.resolve()}}},6578:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TestOutcome=void 0,(r=t.TestOutcome||(t.TestOutcome={}))[r.None=0]="None",r[r.Passed=1]="Passed",r[r.Failed=2]="Failed",r[r.Skipped=3]="Skipped",r[r.NotFound=4]="NotFound"},7690:(e,t)=>{"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.LogVisibility=t.MessageLevel=void 0,(n=t.MessageLevel||(t.MessageLevel={}))[n.None=0]="None",n[n.Error=1]="Error",n[n.Warning=2]="Warning",n[n.Informational=3]="Informational",n[n.Diagnostic=4]="Diagnostic",n[n.Trace=5]="Trace",(r=t.LogVisibility||(t.LogVisibility={}))[r.All=0]="All",r[r.UserOnly=1]="UserOnly",r[r.DevOnly=2]="DevOnly"},1585:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Descriptors=void 0;const n=r(9679);class o{static buildService=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.BuildService","0.1"),n.Formatters.MessagePack,n.MessageDelimiters.BigEndianInt32LengthHeader,{protocolMajorVersion:3}));static environmentService=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.NoDelay.EnvironmentService","0.1"),n.Formatters.MessagePack,n.MessageDelimiters.BigEndianInt32LengthHeader,{protocolMajorVersion:3}));static projectQueryExecutionService=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.ProjectSystem.Query.Remoting.QueryExecutionService","0.2"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders))}t.Descriptors=o},5246:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryService=void 0;const o=n(r(2291));t.TelemetryService=class{_telemetryReporter;_telemetryLogger;_loggingEnabled;constructor(e,t,r=!1){this._loggingEnabled=r,this._telemetryLogger=t;try{this._telemetryReporter=new o.default(e.extension.packageJSON.aiKey),e.subscriptions.push(this._telemetryReporter)}catch(e){this._loggingEnabled&&this._telemetryLogger.log(`Failed to create TelemetryReporter due to ${e}`),this._telemetryReporter=void 0}}sendTelemetryEvent(e,t,r){this.outputTelemetryToLog(e,t,r),this._telemetryReporter?.sendTelemetryEvent(e,t,r)}sendTelemetryErrorEvent(e,t,r){this._telemetryReporter?.sendTelemetryErrorEvent(e,t,r)}outputTelemetryToLog(e,t,r){if(this._loggingEnabled){if(this._telemetryLogger.log(`Event: ${e}`),void 0!==t){this._telemetryLogger.log("Properties");for(const e in t)this._telemetryLogger.log(`  ${e}: ${t[e]}`)}if(void 0!==r){this._telemetryLogger.log("Measurements");for(const e in r)this._telemetryLogger.log(`  ${e}: ${r[e]}`)}this._telemetryLogger.log("")}}async dispose(){if(void 0!==this._telemetryReporter)return await this._telemetryReporter.dispose()}}},9244:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getTestController=t.createAndRegisterTestController=void 0;const s=i(r(9496)),a=r(4388),c=r(6341),u=r(4379),l=new s.EventEmitter,d=new Promise((e=>l.event(e)));t.createAndRegisterTestController=async function(e,t,r,n){const o=new a.Logger;try{u.Strings.initialize(n);const i=new c.TestWindowTestController(e,t,o,r);o.log("Created Test Controller"),await i.initialize(),l.fire(i),e.subscriptions.push(i)}catch(e){o.log(`unable to create test controller for c# extension: ${e}`)}},t.getTestController=function(){return d}},862:(e,t,r)=>{"use strict";r.d(t,{PC:()=>O,Tp:()=>R,Zm:()=>u,Zu:()=>x,wv:()=>A});var n,o,i,s=r(2631),a="Promise",c="rejected";function u(e,t){return l(e,(function(e){return t?t({status:"fulfilled",rejected:!1,value:e}):e}),(function(e){return t?t({status:c,rejected:!0,reason:e}):e}))}function l(e,t,r,n){var o=e;try{if((0,s.y8_)(e))(t||r)&&(o=e.then(t,r));else try{t&&(o=t(e))}catch(e){if(!r)throw e;o=r(e)}}finally{n&&function(e,t){var r=e;t&&((0,s.y8_)(e)?r=e.finally?e.finally(t):e.then((function(e){return t(),e}),(function(e){throw t(),e})):t())}(o,n)}return o}var d,p=!1,f=["pending","resolving","resolved",c],h="dispatchEvent";function g(e){var t;return e&&e.createEvent&&(t=e.createEvent("Event")),!!t&&t.initEvent}var v,m,y,_,S="unhandledRejection",E=S.toLowerCase(),w=[],b=0,T=10;function C(e){return(0,s.mf2)(e)?e.toString():(0,s.eUe)(e)}function P(e,t,r){var c,u,l=(0,s.K7g)(arguments,3),m=0,y=!1,_=[],P=b++,I=w.length>0?w[w.length-1]:void 0,O=!1,N=null;function A(t,r){try{return w.push(P),O=!0,N&&N.cancel(),N=null,e((function(e,n){_.push((function(){try{var o=2===m?t:r,i=(0,s.o8e)(o)?c:(0,s.mf2)(o)?o(c):o;(0,s.y8_)(i)?i.then(e,n):o?e(i):3===m?n(i):e(i)}catch(e){n(e)}})),y&&x()}),l)}finally{w.pop()}}function R(){return f[m]}function x(){if(_.length>0){var e=_.slice();_=[],O=!0,N&&N.cancel(),N=null,t(e)}}function k(e,t){return function(r){if(m===t){if(2===e&&(0,s.y8_)(r))return m=1,void r.then(k(2,1),k(3,1));m=e,y=!0,c=r,x(),O||3!==e||N||(N=(0,s.tXR)(D,T))}}}function D(){if(!O)if(O=!0,(0,s.UGU)())process.emit(S,c,u);else{var e=(0,s.Jj3)()||(0,s.Rdr)();!v&&(v=(0,s.mPP)((0,s.TwK)(s.vsb,[a+"RejectionEvent"]).v)),function(e,t,r,n){var o=(0,s.MeC)();!d&&(d=(0,s.mPP)(!!(0,s.TwK)(g,[o]).v));var i=d.v?o.createEvent("Event"):n?new Event(t):{};if(r&&r(i),d.v&&i.initEvent(t,!1,!0),i&&e[h])e[h](i);else{var a=e["on"+t];if(a)a(i);else{var c=(0,s.vsb)("console");c&&(c.error||c.log)(t,(0,s.eUe)(i))}}}(e,E,(function(e){return(0,s.g$V)(e,"promise",{g:function(){return u}}),e.reason=c,e}),!!v.v)}}return u={then:A,catch:function(e){return A(void 0,e)},finally:function(e){var t=e,r=e;return(0,s.mf2)(e)&&(t=function(t){return e&&e(),t},r=function(t){throw e&&e(),t}),A(t,r)}},(0,s.iUz)(u,"state",{get:R}),p&&function(e,t,r,a){o=o||{toString:function(){return"[[PromiseResult]]"}},i=i||{toString:function(){return"[[PromiseIsHandled]]"}};var u={};u[n=n||{toString:function(){return"[[PromiseState]]"}}]={get:t},u[o]={get:function(){return(0,s.MuE)(c)}},u[i]={get:function(){return O}},(0,s.HMQ)(e,u)}(u,R),(0,s.xBc)()&&(u[(0,s.Wb9)(11)]="IPromise"),u.toString=function(){return"IPromise"+(p?"["+P+((0,s.o8e)(I)?"":":"+I)+"]":"")+" "+R()+(y?" - "+C(c):"")},function(){(0,s.mf2)(r)||(0,s.ZU2)(a+": executor is not a function - "+C(r));var e=k(3,0);try{r.call(u,k(2,0),e)}catch(t){e(t)}}(),u}function I(e){return function(t){var r=(0,s.K7g)(arguments,1);return e((function(e,r){try{var n=[],o=1;(0,s.lbl)(t,(function(t,i){t&&(o++,l(t,(function(t){n[i]=t,0==--o&&e(n)}),r))})),0==--o&&e(n)}catch(e){r(e)}}),r)}}function O(e,t){return P(O,function(e){var t=(0,s.hj$)(e)?e:0;return function(e){(0,s.tXR)((function(){!function(e){(0,s.tOU)(e,(function(e){try{e()}catch(e){}}))}(e)}),t)}}(t),e,t)}function N(e,t){!m&&(m=(0,s.mPP)((0,s.TwK)(s.vsb,[a]).v||null));var r=m.v;if(!r)return O(e);(0,s.mf2)(e)||(0,s.ZU2)(a+": executor is not a function - "+(0,s.eUe)(e));var n=0,o=new r((function(t,r){e((function(e){n=2,t(e)}),(function(e){n=3,r(e)}))}));return(0,s.iUz)(o,"state",{get:function(){return f[n]}}),o}function A(e,t){return!y&&(y=(0,s.mPP)(N)),y.v.call(this,e,t)}var R=I(A);function x(e,t){return!_&&(r=A,_=(0,s.mPP)((function(e){var t=(0,s.K7g)(arguments,1);return r((function(t,r){var n=[],o=1;function i(e,r){o++,u(e,(function(e){e.rejected?n[r]={status:c,reason:e.reason}:n[r]={status:"fulfilled",value:e.value},0==--o&&t(n)}))}try{(0,s.kJL)(e)?(0,s.tOU)(e,i):(0,s.TWG)(e)?(0,s.lbl)(e,i):(0,s.ZU2)("Input is not an iterable"),0==--o&&t(n)}catch(e){r(e)}}),t)}))),_.v(e,t);var r}(0,s.Wb9)(11)},2631:(e,t,r)=>{"use strict";function n(e,t){return e||t}function o(e,t){return e[t]}r.d(t,{$KD:()=>j,$S8:()=>Se,FL5:()=>me,FYL:()=>ge,Faf:()=>G,FkI:()=>It,Ggd:()=>Dt,HD0:()=>L,HMQ:()=>re,Hef:()=>ve,IdH:()=>Yt,J_U:()=>V,Jj3:()=>et,Jjf:()=>Qt,K7g:()=>Tt,Kn2:()=>U,MLb:()=>er,MeC:()=>Ye,Mrq:()=>bt,MuE:()=>x,Nvg:()=>Qe,Oz1:()=>we,POo:()=>Vt,Rdr:()=>Xe,Sn2:()=>K,TWG:()=>mt,TwK:()=>N,UAM:()=>wt,UGU:()=>ct,VZO:()=>q,W5k:()=>St,Wb9:()=>ft,XCJ:()=>ae,Xiq:()=>ye,XzL:()=>Ot,YmZ:()=>k,Ymo:()=>Ze,ZBL:()=>Wt,ZU2:()=>de,_HB:()=>ur,_w8:()=>lr,_yM:()=>le,aE6:()=>X,cHs:()=>kt,d$o:()=>qe,d6F:()=>tt,dvW:()=>gt,eML:()=>ht,eUe:()=>ue,fEe:()=>nt,fQg:()=>W,g$V:()=>oe,hj$:()=>$,iUz:()=>te,jWD:()=>rt,jnD:()=>H,k4L:()=>ke,kJL:()=>B,lH9:()=>je,l_T:()=>ne,lbl:()=>yt,lep:()=>M,mPP:()=>ze,mf2:()=>F,ndY:()=>Bt,o8e:()=>D,rWU:()=>Y,ra_:()=>Jt,rkD:()=>Nt,s1E:()=>De,s1z:()=>at,tOU:()=>Et,tXR:()=>cr,vsb:()=>Je,wj3:()=>J,xAH:()=>Xt,xBc:()=>dt,xee:()=>tr,y8_:()=>z});var i,s=void 0,a=null,c="",u="function",l="object",d="prototype",p="__proto__",f="undefined",h="constructor",g="Symbol",v="_polyfill",m="length",y="name",_="call",S="toString",E=n(Object),w=o(E,d),b=n(String),T=o(b,d),C=n(Math),P=n(Array),I=o(P,d),O=o(I,"slice");function N(e,t){try{return{v:e.apply(this,t)}}catch(e){return{e}}}function A(e){return function(t){return typeof t===e}}function R(e){var t="[object "+e+"]";return function(e){return!(!e||x(e)!==t)}}function x(e){return w[S].call(e)}function k(e,t){return typeof e===t}function D(e){return typeof e===f||e===f}function M(e){return e===a||D(e)}function j(e){return!!e||e!==s}var L=A("string"),F=A(u);function U(e){return!(!e&&M(e)||!e||typeof e!==l)}var B=o(P,"isArray"),V=R("Date"),$=A("number"),H=A("boolean"),q=R("Error");function z(e){return!!(e&&e.then&&F(e.then))}function G(e){return!e||!W(e)}function W(e){return!(!e||(t=function(){return!(e&&0+e)},r=!e,n=N(t),n.e?r:n.v));var t,r,n}var K=o(E,"getOwnPropertyDescriptor");function X(e,t){return!!e&&w.hasOwnProperty[_](e,t)}var J=n(o(E,"hasOwn"),Q);function Q(e,t){return X(e,t)||!!K(e,t)}function Y(e,t,r){if(e&&U(e))for(var n in e)if(J(e,n)&&-1===t[_](r||e,n,e[n]))break}var Z={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function ee(e){var t={};if(t[Z.c]=!0,t[Z.e]=!0,e.l){t.get=function(){return e.l.v};var r=K(e.l,"v");r&&r.set&&(t.set=function(t){e.l.v=t})}return Y(e,(function(e,r){t[Z[e]]=D(r)?t[Z[e]]:r})),t}var te=o(E,"defineProperty"),re=o(E,"defineProperties");function ne(e,t,r,n,o,i){var s={e:i,c:o};return r&&(s.g=r),n&&(s.s=n),te(e,t,ee(s))}function oe(e,t,r){return te(e,t,ee(r))}function ie(e,t,r,n,o){var i={};return Y(e,(function(e,n){se(i,e,t?n:e,o),se(i,n,r?n:e,o)})),n?n(i):i}function se(e,t,r,n){te(e,t,{value:r,enumerable:!0,writable:!!n})}var ae=n(b),ce="[object Error]";function ue(e,t){var r=c,n=w[S][_](e);n===ce&&(e={stack:ae(e.stack),message:ae(e.message),name:ae(e.name)});try{r=(r=JSON.stringify(e,a,t?"number"==typeof t?t:4:s))&&r.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: ")||ae(e)}catch(e){r=" - "+ue(e,t)}return n+": "+r}function le(e){throw new Error(e)}function de(e){throw new TypeError(e)}var pe=o(E,"freeze");function fe(e){return e}function he(e){return e[p]||a}var ge=o(E,"keys");function ve(e){return pe&&Y(e,(function(e,t){(B(t)||U(t))&&ve(t)})),me(e)}var me=n(pe,fe),ye=n(o(E,"seal"),fe),_e=n(o(E,"getPrototypeOf"),he);function Se(e){return ie(e,1,0,me)}function Ee(e){return ie(e,0,0,me)}function we(e){return function(e){var t={};return Y(e,(function(e,r){se(t,e,r[1]),se(t,r[0],r[1])})),me(t)}(e)}var be,Te=Ee({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Ce="__tsUtils$gblCfg";function Pe(){var e;return typeof globalThis!==f&&(e=globalThis),e||typeof self===f||(e=self),e||typeof window===f||(e=window),e||typeof global===f||(e=global),e}function Ie(){if(!be){var e=N(Pe).v||{};be=e[Ce]=e[Ce]||{}}return be}var Oe=Ne;function Ne(e,t,r){var n=t&&t[e];return function(t){var o=t&&t[e]||n;if(o||r){var i=arguments;return(o||r).apply(t,o?O[_](i,1):i)}de('"'+ae(e)+'" not defined for '+ue(t))}}function Ae(e){return function(t){return t[e]}}var Re=o(C,"max"),xe=Oe("slice",T),ke=Oe("substring",T),De=Ne("substr",T,Me);function Me(e,t,r){return M(e)&&de("Invalid "+ue(e)),r<0?c:((t=t||0)<0&&(t=Re(t+e[m],0)),D(r)?xe(e,t):xe(e,t,t+r))}function je(e,t){return ke(e,0,t)}var Le,Fe,Ue,Be="_urid";function Ve(e){var t={description:ae(e),toString:function(){return g+"("+e+")"}};return t[v]=!0,t}function $e(e){var t=function(){if(!Le){var e=Ie();Le=e.gblSym=e.gblSym||{k:{},s:{}}}return Le}();if(!J(t.k,e)){var r=Ve(e),n=ge(t.s).length;r[Be]=function(){return n+"_"+r[S]()},t.k[e]=r,t.s[r[Be]()]=ae(e)}return t.k[e]}function He(){Ue=Ie()}function qe(e){var t={};return!Ue&&He(),t.b=Ue.lzy,te(t,"v",{configurable:!0,get:function(){var r=e();return Ue.lzy||te(t,"v",{value:r}),t.b=Ue.lzy,r}}),t}function ze(e){return te({toJSON:function(){return e}},"v",{value:e})}var Ge,We="window";function Ke(e,t){var r;return function(){return!Ue&&He(),(!r||Ue.lzy)&&(r=ze(N(e,t).v)),r.v}}function Xe(e){return!Ue&&He(),(!Ge||!1===e||Ue.lzy)&&(Ge=ze(N(Pe).v||a)),Ge.v}function Je(e,t){var r=Ge&&!1!==t?Ge.v:Xe(t);return r&&r[e]?r[e]:e===We?et():a}function Qe(){return!!Ye()}var Ye=Ke(Je,["document"]);function Ze(){return!!et()}var et=Ke(Je,[We]);function tt(){return!!rt()}var rt=Ke(Je,["navigator"]);function nt(){return!!at()}var ot,it,st,at=Ke(Je,["history"]),ct=Ke((function(){return!!N((function(){return process&&(process.versions||{}).node})).v}));function ut(){return ot=ze(N(Je,[g]).v)}function lt(e){var t=(Ue.lzy?0:ot)||ut();return t.v?t.v[e]:s}function dt(){return!!pt()}function pt(){return!Ue&&He(),((Ue.lzy?0:ot)||ut()).v}function ft(e,t){var r=Te[e];!Ue&&He();var n=(Ue.lzy?0:ot)||ut();return n.v?n.v[r||e]:t?s:function(e){var t;!Fe&&(Fe={});var r=Te[e];return r&&(t=Fe[r]=Fe[r]||Ve(g+"."+r)),t}(e)}function ht(e,t){!Ue&&He();var r=(Ue.lzy?0:ot)||ut();return r.v?r.v(e):t?a:Ve(e)}function gt(e){return!Ue&&He(),((it=(Ue.lzy?0:it)||ze(N(lt,["for"]).v)).v||$e)(e)}function vt(e){return!!e&&F(e.next)}function mt(e){return!function(e){return e===a||!j(e)}(e)&&F(e[ft(3)])}function yt(e,t,r){if(e&&(vt(e)||(!st&&(st=ze(ft(3))),e=e[st.v]?e[st.v]():null),vt(e))){var n=s,o=s;try{for(var i=0;!(o=e.next()).done&&-1!==t[_](r||e,o.value,i,e);)i++}catch(t){n={e:t},e.throw&&(o=a,e.throw(n))}finally{try{o&&!o.done&&e.return&&e.return(o)}finally{if(n)throw n.e}}}}function _t(e,t,r){return e.apply(t,r)}function St(e,t){return!D(t)&&e&&(B(t)?_t(e.push,e,t):vt(t)||mt(t)?yt(t,(function(t){e.push(t)})):e.push(t)),e}function Et(e,t,r){if(e)for(var n=e[m]>>>0,o=0;o<n&&(!(o in e)||-1!==t[_](r||e,e[o],o,e));o++);}var wt=Oe("indexOf",I),bt=Oe("map",I);function Tt(e,t,r){return(e&&e.slice||O).apply(e,O[_](arguments,1))}function Ct(e,t,r){return-1!==wt(e,t,r)}var Pt,It=Ne("includes",I,Ct),Ot=Oe("reduce",I),Nt=n(o(E,"create"),At);function At(e){if(!e)return{};var t=typeof e;function r(){}return t!==l&&t!==u&&de("Prototype must be an Object or function: "+ue(e)),r[d]=e,new r}function Rt(e,t){return(E.setPrototypeOf||function(e,t){var r;!Pt&&(Pt=ze(((r={})[p]=[],r instanceof Array))),Pt.v?e[p]=t:Y(t,(function(t,r){return e[t]=r}))})(e,t)}function xt(e,t){t&&(e[y]=t)}function kt(e,t,r){var n=r||Error,o=n[d][y],i=Error.captureStackTrace;return function(e,t,r){function n(){this[h]=t,N(oe,[this,y,{v:e,c:!0,e:!1}])}return N(oe,[t,y,{v:e,c:!0,e:!1}]),(t=Rt(t,r))[d]=r===a?Nt(r):(n[d]=r[d],new n),t}(e,(function(){var r=this,s=arguments;try{N(xt,[n,e]);var a=_t(n,r,O[_](s))||r;if(a!==r){var c=_e(r);c!==_e(a)&&Rt(a,c)}return i&&i(a,r[h]),t&&t(a,s),a}finally{N(xt,[n,o])}}),n)}function Dt(){return(Date.now||Mt)()}function Mt(){return(new Date).getTime()}function jt(e){return function(t){return M(t)&&de("strTrim called ["+ue(t)+"]"),t&&t.replace&&(t=t.replace(e,c)),t}}var Lt,Ft,Ut,Bt=Ne("trim",T,jt(/^\s+|(?=\s)\s+$/g));function Vt(e){if(!e||typeof e!==l)return!1;Ut||(Ut=!Ze()||et());var t=!1;if(e!==Ut){Ft||(Lt=Function[d][S],Ft=Lt[_](E));try{var r=_e(e);(t=!r)||(X(r,h)&&(r=r[h]),t=r&&typeof r===u&&Lt[_](r)===Ft)}catch(e){}}return t}function $t(e){return e.value&&Gt(e),!0}var Ht=[function(e){var t=e.value;if(B(t)){var r=e.result=[];return r.length=t.length,e.copyTo(r,t),!0}return!1},Gt,function(e){return e.type===u},function(e){var t=e.value;return!!V(t)&&(e.result=new Date(t.getTime()),!0)}];function qt(e,t,r,n){var o=r.handler,s=r.path?n?r.path.concat(n):r.path:[],c={handler:r.handler,src:r.src,path:s},u=typeof t,d=!1,p=!1;t&&u===l?d=Vt(t):p=t===a||function(e){return!i&&(i=["string","number","boolean",f,"symbol","bigint"]),e!==l&&-1!==i.indexOf(e)}(u);var h={type:u,isPrim:p,isPlain:d,value:t,result:t,path:s,origin:r.src,copy:function(t,n){return qt(e,t,n?c:r,n)},copyTo:function(t,r){return zt(e,t,r,c)}};return h.isPrim?o&&o[_](r,h)?h.result:t:function(e,t,n,i){var s;return Et(e,(function(e){if(e.k===t)return s=e,-1})),s||(s={k:t,v:t},e.push(s),function(e){oe(h,"result",{g:function(){return e.v},s:function(t){e.v=t}});for(var t=0,n=o;!(n||(t<Ht.length?Ht[t++]:$t))[_](r,h);)n=a}(s)),s.v}(e,t)}function zt(e,t,r,n){if(!M(r))for(var o in r)t[o]=qt(e,r[o],n,o);return t}function Gt(e){var t=e.value;if(t&&e.isPlain){var r=e.result={};return e.copyTo(r,t),!0}return!1}function Wt(e,t,r,n,o,i,s){return function(e,t){return Et(t,(function(t){!function(e,t,r){zt([],e,t,{handler:void 0,src:t,path:[]})}(e,t)})),e}(qt([],a=e,{handler:undefined,src:a})||{},O[_](arguments));var a}var Kt,Xt=Ae(m);function Jt(){return!Ue&&He(),(!Kt||Ue.lzy)&&(Kt=ze(N(Je,["performance"]).v)),Kt.v}function Qt(){var e=Jt();return e&&e.now?e.now():Dt()}dt();var Yt=Ne("endsWith",T,Zt);function Zt(e,t,r){L(e)||de("'"+ue(e)+"' is not a string");var n=L(t)?t:ae(t),o=!D(r)&&r<e[m]?r:e[m];return ke(e,o-n[m],o)===n}var er=Oe("indexOf",T),tr=Ne("startsWith",T,rr);function rr(e,t,r){L(e)||de("'"+ue(e)+"' is not a string");var n=L(t)?t:ae(t),o=r>0?r:0;return ke(e,o,o+n[m])===n}var nr="ref",or="unref",ir="hasRef",sr="enabled";function ar(e,t,r){var n=B(t),o=n?t.length:0,i=(o>0?t[0]:n?s:t)||setTimeout,c=(o>1?t[1]:s)||clearTimeout,u=r[0];r[0]=function(){l.dn(),_t(u,s,O[_](arguments))};var l=function(e,t,r){var n,o=!0,i=e?t(a):a;function s(){return o=!1,i&&i[or]&&i[or](),n}function c(){i&&r(i),i=a}function u(){return i=t(i),o||s(),n}return(n={cancel:c,refresh:u})[ir]=function(){return i&&i[ir]?i[ir]():o},n[nr]=function(){return o=!0,i&&i[nr]&&i[nr](),n},n[or]=s,{h:n=te(n,sr,{get:function(){return!!i},set:function(e){!e&&i&&c(),e&&!i&&u()}}),dn:function(){i=a}}}(e,(function(e){if(e){if(e.refresh)return e.refresh(),e;_t(c,s,[e])}return _t(i,s,r)}),(function(e){_t(c,s,[e])}));return l.h}function cr(e,t){return ar(!0,s,O[_](arguments))}function ur(e,t,r){return ar(!0,e,O[_](arguments,1))}function lr(e,t){return ar(!1,s,O[_](arguments))}},725:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.oneDataSystemClientFactory=void 0,t.oneDataSystemClientFactory=async(e,t,n)=>{let o=await(async(e,t,n)=>{const o=await Promise.resolve().then((()=>i(r(2303)))),s=await Promise.resolve().then((()=>i(r(7453)))),a=new o.AppInsightsCore,c=new s.PostChannel,u={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[c]]};if(n){u.extensionConfig={};const e={alwaysUseXhrOverride:!0,httpXHROverride:n};u.extensionConfig[c.identifier]=e}const l=t.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(u,[]),a.addTelemetryInitializer((e=>{e.ext=e.ext??{},e.ext.web=e.ext.web??{},e.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',l&&(e.ext.utc=e.ext.utc??{},e.ext.utc.flags=8462029)})),a})(e,t,n);return{logEvent:(e,t)=>{try{o?.track({name:e,baseData:{name:e,properties:t?.properties,measurements:t?.measurements}})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},flush:async()=>{try{return new Promise(((e,t)=>{o?o.flush(!0,(e=>{e||t("Failed to flush app 1DS!")})):e()}))}catch(e){throw new Error("Failed to flush 1DS!\n"+e.message)}},dispose:async()=>new Promise((e=>{o?o.unload(!1,(()=>{e(),o=void 0}),1e3):e()}))}}},3959:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.appInsightsClientFactory=void 0;const s=r(3238),a=r(5888);t.appInsightsClientFactory=async(e,t,n)=>{let o;try{const n=await Promise.resolve().then((()=>i(r(4843)))),a={};if(t){const e={alwaysUseXhrOverride:!0,httpXHROverride:t};a[s.BreezeChannelIdentifier]=e}o=new n.ApplicationInsights({instrumentationKey:e,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:a})}catch(e){return Promise.reject(e)}return{logEvent:(e,t)=>{const r={...t?.properties,...t?.measurements};n?.length&&a.TelemetryUtil.applyReplacements(r,n),o?.track({name:e,data:r,baseType:"EventData",baseData:{name:e,properties:t?.properties,measurements:t?.measurements}})},flush:async()=>{o?.flush(!1)},dispose:async()=>new Promise((e=>{o?.unload(!0,(()=>{e(),o=void 0}),1e3)}))}}},3456:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTelemetryReporter=void 0,t.BaseTelemetryReporter=class{constructor(e,t,r){this.telemetrySender=e,this.vscodeAPI=t,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,r),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates((()=>{this.updateUserOptIn()}))}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,t,r,n){n?this.telemetrySender.sendEventData(e,{properties:t,measurements:r}):this.telemetryLogger.logUsage(e,{properties:t,measurements:r})}sendTelemetryEvent(e,t,r){this.internalSendTelemetryEvent(e,t,r,!1)}sendRawTelemetryEvent(e,t,r){const n={...t};for(const e of Object.keys(n??{})){const t=n[e];"string"==typeof e&&void 0!==t&&(n[e]=new this.vscodeAPI.TelemetryTrustedValue("string"==typeof t?t:t.value))}this.sendTelemetryEvent(e,n,r)}sendDangerousTelemetryEvent(e,t,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,t,r,!0)}internalSendTelemetryErrorEvent(e,t,r,n){n?this.telemetrySender.sendEventData(e,{properties:t,measurements:r}):this.telemetryLogger.logError(e,{properties:t,measurements:r})}sendTelemetryErrorEvent(e,t,r){this.internalSendTelemetryErrorEvent(e,t,r,!1)}sendDangerousTelemetryErrorEvent(e,t,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,t,r,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map((e=>e.dispose())))}}},2015:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTelemetrySender=void 0,function(e){e[e.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",e[e.INSTANTIATING=1]="INSTANTIATING",e[e.INSTANTIATED=2]="INSTANTIATED"}(r||(r={})),t.BaseTelemetrySender=class{constructor(e,t){this._instantiationStatus=r.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e}sendEventData(e,t){this._telemetryClient?this._telemetryClient.logEvent(e,t):this._instantiationStatus!==r.INSTANTIATED&&this._eventQueue.push({eventName:e,data:t})}sendErrorData(e,t){if(!this._telemetryClient)return void(this._instantiationStatus!==r.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:t}));const n={stack:e.stack,message:e.message,name:e.name};if(t){const e=t.properties||t;t.properties={...e,...n}}else t={properties:n};this._telemetryClient.logEvent("unhandlederror",t)}async flush(){return this._telemetryClient?.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach((({eventName:e,data:t})=>this.sendEventData(e,t))),this._eventQueue=[],this._exceptionQueue.forEach((({exception:e,data:t})=>this.sendErrorData(e,t))),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===r.NOT_INSTANTIATED&&(this._instantiationStatus=r.INSTANTIATING,this._clientFactory(this._key).then((e=>{this._telemetryClient=e,this._instantiationStatus=r.INSTANTIATED,this._flushQueues()})).catch((e=>{console.error(e),this._instantiationStatus=r.INSTANTIATED})))}}},5888:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryUtil=void 0;class r{static applyReplacements(e,t){for(const r of Object.keys(e))for(const n of t)n.lookup.test(r)&&(void 0!==n.replacementString?e[r]=n.replacementString:delete e[r])}static shouldUseOneDataSystemSDK(e){return 74===e.length&&"-"===e[32]&&"-"===e[41]&&"-"===e[46]&&"-"===e[51]&&"-"===e[56]&&"-"===e[69]}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.9.6"}}static getInstance(){return r._instance||(r._instance=new r),r._instance}}t.TelemetryUtil=r},2291:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const s=i(r(2037)),a=i(r(9496)),c=i(r(5687)),u=r(3456),l=r(2015),d=r(5888),p=r(725),f=r(3959);function h(){return{sendPOST:(e,t)=>{const r={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{const n=c.request(e.urlString,r,(e=>{e.on("data",(function(r){t(e.statusCode??200,e.headers,r.toString())})),e.on("error",(function(){t(0,{})}))}));n.write(e.data,(e=>{e&&t(0,{})})),n.end()}catch{t(0,{})}}}}class g extends u.BaseTelemetryReporter{constructor(e,t){let r=e=>(0,f.appInsightsClientFactory)(e,h(),t);d.TelemetryUtil.shouldUseOneDataSystemSDK(e)&&(r=e=>(0,p.oneDataSystemClientFactory)(e,a,h()));const n={release:s.release(),platform:s.platform(),architecture:s.arch()},o=new l.BaseTelemetrySender(e,r);if(e&&0===e.indexOf("AIF-"))throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(o,a,{additionalCommonProperties:d.TelemetryUtil.getAdditionalCommonProperties(n)})}}t.default=g},2303:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AppInsightsCore:()=>oe,BaseTelemetryPlugin:()=>ge.i,DiagnosticLogger:()=>u.AQ,EventLatency:()=>ae,EventPersistence:()=>ue,EventPropertyType:()=>ce,EventsDiscardedReason:()=>me.h,FullVersionString:()=>R,InternalAppInsightsCore:()=>l.F,LoggingSeverity:()=>fe,MinChannelPriorty:()=>pe,NotificationManager:()=>he.f,PerfEvent:()=>a.zn,PerfManager:()=>a.Jk,ProcessTelemetryContext:()=>ve.Vi,SenderPostManager:()=>Ie.s,TraceLevel:()=>le,Undefined:()=>v.jA,ValueKind:()=>se,ValueSanitizer:()=>de,Version:()=>A,_InternalLogMessage:()=>u.lQ,__getRegisteredEvents:()=>ye.um,_appendHeader:()=>_e.F3,_getAllResponseHeaders:()=>_e.Fz,_logInternalMessage:()=>u.L4,_testHookMaxUnloadHooksCb:()=>Ne.f,_throwInternal:()=>u.kP,_warnToConsole:()=>u.jV,addEventHandler:()=>ye.Ib,addEventListeners:()=>ye.yw,addPageHideEventListener:()=>ye.TJ,addPageShowEventListener:()=>ye.nD,addPageUnloadEventListener:()=>ye.c9,areCookiesSupported:()=>we.p7,arrForEach:()=>s.tOU,arrIndexOf:()=>s.UAM,arrMap:()=>s.Mrq,arrReduce:()=>s.XzL,attachEvent:()=>ye.pZ,blockDynamicConversion:()=>Pe.qx,convertAllHeadersToMap:()=>_e.XE,cookieAvailable:()=>we.p7,createCookieMgr:()=>we.Nz,createDynamicConfig:()=>c.o,createEnumStyle:()=>ie.B,createGuid:()=>W,createProcessTelemetryContext:()=>ve.CD,createTraceParent:()=>Ce.SU,createUniqueNamespace:()=>be.J,createUnloadHandlerContainer:()=>Te.Y,dateNow:()=>s.Ggd,detachEvent:()=>ye.pD,disallowsSameSiteNone:()=>we.UY,doPerf:()=>a.Lm,dumpObj:()=>s.eUe,eventOff:()=>ye.QY,eventOn:()=>ye.XO,extend:()=>K,findW3cTraceParent:()=>Ce.lq,forceDynamicConversion:()=>Pe.sP,formatErrorMessageXdr:()=>_e.Np,formatErrorMessageXhr:()=>_e.An,formatTraceParent:()=>Ce.aR,generateW3CId:()=>g.DO,getCommonSchemaMetaData:()=>z,getConsole:()=>h.dr,getCookieValue:()=>G,getCrypto:()=>h.MX,getDocument:()=>s.MeC,getDynamicConfigHandler:()=>Pe.Rw,getExceptionName:()=>_e.jj,getFieldValueType:()=>Z,getGlobal:()=>Ee.Rd,getGlobalInst:()=>s.vsb,getHistory:()=>s.s1z,getIEVersion:()=>h.sA,getISOString:()=>_e.Y6,getJSON:()=>h.xA,getLocation:()=>h.k$,getMsCrypto:()=>h.gz,getNavigator:()=>s.jWD,getPerformance:()=>s.ra_,getResponseText:()=>_e.tV,getSetValue:()=>_e.qK,getTenantId:()=>V,getTime:()=>X,getWindow:()=>s.Jj3,hasDocument:()=>s.Nvg,hasHistory:()=>s.fEe,hasJSON:()=>h.nS,hasNavigator:()=>s.d6F,hasOwnProperty:()=>s.aE6,hasWindow:()=>s.Ymo,isArray:()=>s.kJL,isArrayValid:()=>Q,isBeaconsSupported:()=>h.MF,isBoolean:()=>s.jnD,isChromium:()=>ee,isDate:()=>s.J_U,isDocumentObjectAvailable:()=>F,isError:()=>s.VZO,isFetchSupported:()=>h.JO,isFunction:()=>s.mf2,isGreaterThanZero:()=>re,isIE:()=>h.w1,isLatency:()=>H,isNotTruthy:()=>s.Faf,isNullOrUndefined:()=>s.lep,isNumber:()=>s.hj$,isObject:()=>s.Kn2,isReactNative:()=>h.b$,isSampledFlag:()=>Ce.Pn,isString:()=>s.HD0,isTruthy:()=>s.fQg,isTypeof:()=>s.YmZ,isUint8ArrayAvailable:()=>$,isUndefined:()=>s.o8e,isValidSpanId:()=>Ce.Lc,isValidTraceId:()=>Ce.jN,isValidTraceParent:()=>Ce.J6,isValueAssigned:()=>B,isValueKind:()=>J,isWindowObjectAvailable:()=>U,isXhrSupported:()=>h.Z3,mergeEvtNamespace:()=>ye.jU,newGuid:()=>g.GW,newId:()=>Se.pZ,normalizeJsName:()=>_e.Gf,objDefineAccessors:()=>s.l_T,objForEachKey:()=>s.rWU,objFreeze:()=>s.FL5,objKeys:()=>s.FYL,objSeal:()=>s.Xiq,onConfigChange:()=>c.k,openXhr:()=>te,optimizeObject:()=>_e.Ax,parseResponse:()=>Oe.L,parseTraceParent:()=>Ce.j_,perfNow:()=>s.Jjf,prependTransports:()=>_e.fM,proxyAssign:()=>_e.cf,proxyFunctionAs:()=>_e.Oi,proxyFunctions:()=>_e.Vb,random32:()=>Se._l,randomValue:()=>Se.az,removeEventHandler:()=>ye.C1,removeEventListeners:()=>ye.nJ,removePageHideEventListener:()=>ye.C9,removePageShowEventListener:()=>ye.Yl,removePageUnloadEventListener:()=>ye.JA,safeGetCookieMgr:()=>we.JP,safeGetLogger:()=>u.vH,sanitizeProperty:()=>q,setEnableEnvMocks:()=>h.dI,setProcessTelemetryTimings:()=>Y,setValue:()=>_e.sO,strContains:()=>_e._Q,strEndsWith:()=>s.IdH,strFunction:()=>v.cb,strObject:()=>v.fK,strPrototype:()=>v.hB,strStartsWith:()=>s.xee,strTrim:()=>s.ndY,strUndefined:()=>v.jA,throwError:()=>s._yM,toISOString:()=>_e.Y6,useXDomainRequest:()=>h.cp});var n,o=r(2012),i=r(4635),s=r(2631),a=r(7019),c=r(1328),u=r(8942),l=r(9451),d="",p="version",f="properties",h=r(9233),g=r(9187),v=r(3107),m="initialize",y="logger",_="indexOf",S="timings",E="pollInternalLogs",w="value",b="kind",T="length",C="processTelemetryStart",P="handleField",I="rmSanitizer",O="rmFieldSanitizer",N="canHandle",A="4.3.0",R="1DS-Web-JS-"+A,x=v.V4.hasOwnProperty,k="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",D="withCredentials",M="timeout",j=((n={})[0]=0,n[2]=6,n[1]=1,n[3]=7,n[4098]=6,n[4097]=1,n[4099]=7,n),L=null,F=(0,s.Nvg)(),U=(0,s.Ymo)();function B(e){return!(e===d||(0,s.lep)(e))}function V(e){if(e){var t=(0,s.MLb)(e,"-");if(t>-1)return(0,s.lH9)(e,t)}return d}function $(){return null===L&&(L=!(0,s.o8e)(Uint8Array)&&!function(){var e=(0,s.jWD)();if(!(0,s.o8e)(e)&&e.userAgent){var t=e.userAgent.toLowerCase();if((t[_]("safari")>=0||t[_]("firefox")>=0)&&t[_]("chrome")<0)return!0}return!1}()&&!(0,h.b$)()),L}function H(e){return!!(e&&(0,s.hj$)(e)&&e>=1&&e<=4)}function q(e,t,r){if(!t&&!B(t)||"string"!=typeof e)return null;var n=typeof t;if("string"===n||"number"===n||"boolean"===n||(0,s.kJL)(t))t={value:t};else if("object"!==n||x.call(t,"value")){if((0,s.lep)(t[w])||t[w]===d||!(0,s.HD0)(t[w])&&!(0,s.hj$)(t[w])&&!(0,s.jnD)(t[w])&&!(0,s.kJL)(t[w]))return null}else t={value:r?JSON.stringify(t):t};if((0,s.kJL)(t[w])&&!Q(t[w]))return null;if(!(0,s.lep)(t[b])){if((0,s.kJL)(t[w])||!J(t[b]))return null;t[w]=t[w].toString()}return t}function z(e,t,r){var n=-1;if(!(0,s.o8e)(e))if(t>0&&(32===t?n=8192:t<=13&&(n=t<<5)),function(e){return e>=0&&e<=9}(r))-1===n&&(n=0),n|=r;else{var o=j[Z(e)]||-1;-1!==n&&-1!==o?n|=o:6===o&&(n=o)}return n}function G(e,t,r){var n;return void 0===r&&(r=!0),e&&(n=e.get(t),r&&n&&decodeURIComponent&&(n=decodeURIComponent(n))),n||d}function W(e){void 0===e&&(e="D");var t=(0,g.GW)();return"B"===e?t="{"+t+"}":"P"===e?t="("+t+")":"N"===e&&(t=t.replace(/-/g,d)),t}function K(e,t,r,n,o){var i={},a=!1,c=0,u=arguments[T],l=arguments;for((0,s.jnD)(l[0])&&(a=l[0],c++);c<u;c++)e=l[c],(0,s.rWU)(e,(function(e,t){a&&t&&(0,s.Kn2)(t)?(0,s.kJL)(t)?(i[e]=i[e]||[],(0,s.tOU)(t,(function(t,r){t&&(0,s.Kn2)(t)?i[e][r]=K(!0,i[e][r],t):i[e][r]=t}))):i[e]=K(!0,i[e],t):i[e]=t}));return i}var X=s.Jjf;function J(e){return 0===e||e>0&&e<=13||32===e}function Q(e){return e[T]>0}function Y(e,t){var r=e;r[S]=r[S]||{},r[S][C]=r[S][C]||{},r[S][C][t]=X()}function Z(e){var t=0;if(null!=e){var r=typeof e;"string"===r?t=1:"number"===r?t=2:"boolean"===r?t=3:r===v.fK&&(t=4,(0,s.kJL)(e)?(t=4096,e[T]>0&&(t|=Z(e[0]))):x.call(e,"value")&&(t=8192|Z(e[w])))}return t}function ee(){return!!(0,s.vsb)("chrome")}function te(e,t,r,n,o,i){function s(e,t,r){try{e[t]=r}catch(e){}}void 0===n&&(n=!1),void 0===o&&(o=!1);var a=new XMLHttpRequest;return n&&s(a,k,n),r&&s(a,D,r),a.open(e,t,!o),r&&s(a,D,r),!o&&i&&s(a,M,i),a}function re(e){return e>0}var ne=(0,s.Hef)({endpointUrl:"https://browser.events.data.microsoft.com/OneCollector/1.0/",propertyStorageOverride:{isVal:function(e){return!e||e.getProperty&&e.setProperty||(0,s._yM)("Invalid property storage override passed."),!0}}}),oe=function(e){function t(){var r=e.call(this)||this;return(0,i.Z)(t,r,(function(e,t){e[m]=function(r,n,o,i){(0,a.Lm)(e,(function(){return"AppInsightsCore.initialize"}),(function(){try{t[m]((0,c.o)(r,ne,o||e[y],!1).cfg,n,o,i)}catch(t){var a=e[y],l=(0,s.eUe)(t);-1!==l[_]("channels")&&(l+="\n - Channels must be provided through config.channels only!"),(0,u.kP)(a,1,514,"SDK Initialization Failed - no telemetry will be sent: "+l)}}),(function(){return{config:r,extensions:n,logger:o,notificationManager:i}}))},e.track=function(r){(0,a.Lm)(e,(function(){return"AppInsightsCore.track"}),(function(){var n=r;if(n){n[S]=n[S]||{},n[S].trackStart=X(),H(n.latency)||(n.latency=1);var o=n.ext=n.ext||{};o.sdk=o.sdk||{},o.sdk.ver=R;var i=n.baseData=n.baseData||{};i[f]=i[f]||{};var s=i[f];s[p]=s[p]||e.pluginVersionString||d}t.track(n)}),(function(){return{item:r}}),!r.sync)},e[E]=function(e){return t[E](e||"InternalLog")}})),r}return(0,o.ne)(t,e),t.__ieDyn=1,t}(l.F),ie=r(488),se=(0,ie.B)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,Pii_IPv6ScrubLastHextets:14,Pii_DropValue:15,CustomerContent_GenericContent:32}),ae=(0,ie.B)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),ce=(0,ie.B)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),ue=(0,ie.B)({Normal:1,Critical:2}),le=(0,ie.B)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),de=function(){function e(e){var t=this,r={},n=[],o=[];function i(e,t){var i,a=r[e];if(a&&(i=a[t]),!i&&null!==i){if((0,s.HD0)(e)&&(0,s.HD0)(t))if(o[T]>0){for(var c=0;c<o[T];c++)if(o[c][P](e,t)){i={canHandle:!0,fieldHandler:o[c]};break}}else 0===n[T]&&(i={canHandle:!0});if(!i&&null!==i)for(i=null,c=0;c<n[T];c++)if(n[c][P](e,t)){i={canHandle:!0,handler:n[c],fieldHandler:null};break}a||(a=r[e]={}),a[t]=i}return i}function a(e,t,r,n,o,i){if(e.handler)return e.handler.property(t,r,o,i);if(!(0,s.lep)(o[b])){if(4096==(4096&n)||!J(o[b]))return null;o[w]=o[w].toString()}return u(e.fieldHandler,t,r,n,o)}function c(e,t,r){return B(r)?{value:r}:null}function u(e,r,n,o,i){if(i&&e){var a=e.getSanitizer(r,n,o,i[b],i.propertyType);if(a)if(4===o){var l={},d=i[w];(0,s.rWU)(d,(function(t,o){var i=r+"."+n;if(B(o)){var s=c(0,0,o);(s=u(e,i,t,Z(o),s))&&(l[t]=s[w])}})),i[w]=l}else{var p={path:r,name:n,type:o,prop:i,sanitizer:t};i=a.call(t,p)}}return i}e&&o.push(e),t.clearCache=function(){r={}},t.addSanitizer=function(e){e&&((0,s.FkI)(n,e)||n.push(e),r={})},t.addFieldSanitizer=function(e){e&&((0,s.FkI)(o,e)||o.push(e),r={})},t[I]=function(e){if(e){var t=(0,s.UAM)(n,e);-1!==t&&(n.splice(t,1),r={}),(0,s.tOU)(n,(function(t){t&&t[I]&&t[I](e)}))}},t[O]=function(e){if(e){var t=(0,s.UAM)(o,e);-1!==t&&(o.splice(t,1),r={}),(0,s.tOU)(n,(function(t){t&&t[O]&&t[O](e)}))}},t.isEmpty=function(){return(0,s.xAH)(n)+(0,s.xAH)(o)===0},t[P]=function(e,t){var r=i(e,t);return!!r&&r[N]},t[w]=function(e,t,r,n){var o=i(e,t);if(o&&o[N]){if(!o||!o[N])return null;if(o.handler)return o.handler[w](e,t,r,n);if(!(0,s.HD0)(t)||(0,s.lep)(r)||r===d)return null;var u=null,l=Z(r);if(8192==(8192&l)){var p=-8193&l;if(!B((u=r)[w])||1!==p&&2!==p&&3!==p&&4096!=(4096&p))return null}else 1===l||2===l||3===l||4096==(4096&l)?u=c(0,0,r):4===l&&(u=c(0,0,n?JSON.stringify(r):r));if(u)return a(o,e,t,l,u,n)}return null},t.property=function(e,t,r,n){var o=i(e,t);if(!o||!o[N])return null;if(!(0,s.HD0)(t)||(0,s.lep)(r)||!B(r[w]))return null;var c=Z(r[w]);return 0===c?null:a(o,e,t,c,r,n)}}return e.getFieldType=Z,e}(),pe=100,fe=(0,ie.B)({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3}),he=r(1016),ge=r(8264),ve=r(8570),me=r(3657),ye=r(3668),_e=r(8769),Se=r(5778),Ee=r(8363),we=r(2450),be=r(3831),Te=r(6096),Ce=r(3866),Pe=r(388),Ie=r(8224),Oe=r(7781),Ne=r(9925)},579:(e,t,r)=>{"use strict";var n=r(9134),o=[];function i(){this.task=null,this.domain=null}e.exports=function(e){var t;(t=o.length?o.pop():new i).task=e,t.domain=process.domain,n(t)},i.prototype.call=function(){this.domain&&this.domain.enter();var e=!0;try{this.task.call(),e=!1,this.domain&&this.domain.exit()}finally{e&&n.requestFlush(),this.task=null,this.domain=null,o.push(this)}}},9134:(e,t,r)=>{"use strict";var n,o="function"==typeof setImmediate;function i(e){s.length||(d(),a=!0),s[s.length]=e}e.exports=i;var s=[],a=!1,c=0,u=1024;function l(){for(;c<s.length;){var e=c;if(c+=1,s[e].call(),c>u){for(var t=0,r=s.length-c;t<r;t++)s[t]=s[t+c];s.length-=c,c=0}}s.length=0,c=0,a=!1}function d(){var e=process.domain;e&&(n||(n=r(3639)),n.active=process.domain=null),a&&o?setImmediate(l):process.nextTick(l),e&&(n.active=process.domain=e)}i.requestFlush=d},4017:(e,t)=>{"use strict";class r{constructor(e){this.tasks=[],this.count=e}sched(){if(this.count>0&&this.tasks.length>0){this.count--;let e=this.tasks.shift();if(void 0===e)throw"Unexpected undefined value in tasks list";e()}}acquire(){return new Promise(((e,t)=>{this.tasks.push((()=>{var t=!1;e((()=>{t||(t=!0,this.count++,this.sched())}))})),process&&process.nextTick?process.nextTick(this.sched.bind(this)):setImmediate(this.sched.bind(this))}))}use(e){return this.acquire().then((t=>e().then((e=>(t(),e))).catch((e=>{throw t(),e}))))}}t.Semaphore=r,t.Mutex=class extends r{constructor(){super(1)}}},144:function(e,t){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(){},i=function(){function e(e,t){this._isCancelled=e,this.canBeCancelled=t,this._callbacks=new Set}return Object.defineProperty(e.prototype,"isCancelled",{get:function(){return this._isCancelled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){if(this.isCancelled)return this._reason;throw new Error("This token is not cancelled.")},enumerable:!1,configurable:!0}),e.prototype.racePromise=function(t){var r=this;return this.canBeCancelled?new Promise((function(n,o){var i=r.onCancelled((function(t){return o(new e.CancellationError(t))}));t.then((function(e){n(e),i()}),(function(e){o(e),i()}))})):t},e.prototype.throwIfCancelled=function(){if(this._isCancelled)throw new e.CancellationError(this._reason)},e.prototype.onCancelled=function(e){var t,r=this;return this.canBeCancelled?this.isCancelled?(e(this.reason),o):(null===(t=this._callbacks)||void 0===t||t.add(e),function(){var t;return null===(t=r._callbacks)||void 0===t?void 0:t.delete(e)}):o},e.create=function(){var t=new e(!1,!0);return{token:t,cancel:function(e){var r;t._isCancelled||(t._isCancelled=!0,t._reason=e,null===(r=t._callbacks)||void 0===r||r.forEach((function(t){return t(e)})),delete t._callbacks)}}},e.timeout=function(t){var r=e.create(),n=r.token,o=r.cancel,i=setTimeout((function(){return o(e.timeout)}),t);return{token:n,cancel:function(e){n._isCancelled||(clearTimeout(i),o(e))}}},e.all=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.some((function(e){return!e.canBeCancelled})))return e.CONTINUE;var n=e.create(),o=t.length,i=function(){if(0==--o){var e=t.map((function(e){return e._reason}));n.cancel(e)}};return t.forEach((function(e){return e.onCancelled(i)})),n.token},e.race=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=0,o=t;n<o.length;n++){var i=o[n];if(i._isCancelled)return i}var s,a=e.create(),c=function(e){s.forEach((function(e){return e()})),a.cancel(e)};return s=t.map((function(e){return e.onCancelled(c)})),a.token},e.CANCELLED=new e(!0,!0),e.CONTINUE=new e(!1,!1),e}();!function(e){var t=function(e){function t(r){var n=e.call(this,"Operation cancelled")||this;return n.reason=r,Object.setPrototypeOf(n,t.prototype),n}return n(t,e),t}(Error);e.CancellationError=t}(i||(i={})),t.default=i},9593:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(144);t.default=n.default},5458:e=>{"use strict";var t;e.exports=(t=()=>{},e=>(e.catch(t),e))},3258:e=>{!function(t){e.exports=t;var r="listeners",n={on:function(e,t){return s(this,e).push(t),this},once:function(e,t){var r=this;return n.originalListener=t,s(r,e).push(n),r;function n(){i.call(r,e,n),t.apply(this,arguments)}},off:i,emit:function(e,t){var r=this,n=s(r,e,!0);if(!n)return!1;var o=arguments.length;if(1===o)n.forEach((function(e){e.call(r)}));else if(2===o)n.forEach((function(e){e.call(r,t)}));else{var i=Array.prototype.slice.call(arguments,1);n.forEach((function(e){e.apply(r,i)}))}return!!n.length}};function o(e){for(var t in n)e[t]=n[t];return e}function i(e,t){var n,o=this;if(arguments.length){if(t){if(n=s(o,e,!0)){if(!(n=n.filter((function(e){return e!==t&&e.originalListener!==t}))).length)return i.call(o,e);o[r][e]=n}}else if((n=o[r])&&(delete n[e],!Object.keys(n).length))return i.call(o)}else delete o[r];return o}function s(e,t,n){if(!n||e[r]){var o=e[r]||(e[r]={});return o[t]||(o[t]=[])}}o(t.prototype),t.mixin=o}((function e(){if(!(this instanceof e))return new e}))},645:(e,t)=>{t.read=function(e,t,r,n,o){var i,s,a=8*o-n-1,c=(1<<a)-1,u=c>>1,l=-7,d=r?o-1:0,p=r?-1:1,f=e[t+d];for(d+=p,i=f&(1<<-l)-1,f>>=-l,l+=a;l>0;i=256*i+e[t+d],d+=p,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=n;l>0;s=256*s+e[t+d],d+=p,l-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,n),i-=u}return(f?-1:1)*s*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var s,a,c,u=8*i-o-1,l=(1<<u)-1,d=l>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:i-1,h=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?p/c:p*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=l?(a=0,s=l):s+d>=1?(a=(t*c-1)*Math.pow(2,o),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,o),s=0));o>=8;e[r+f]=255&a,f+=h,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;e[r+f]=255&s,f+=h,s/=256,u-=8);e[r+f-h]|=128*g}},5369:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Collection:()=>C,Iterable:()=>On,List:()=>cr,Map:()=>Ft,OrderedMap:()=>wr,OrderedSet:()=>ln,PairSorting:()=>gn,Range:()=>Gr,Record:()=>vn,Repeat:()=>bn,Seq:()=>Q,Set:()=>Ur,Stack:()=>Or,default:()=>Nn,fromJS:()=>Tn,get:()=>ct,getIn:()=>Wr,has:()=>at,hasIn:()=>Xr,hash:()=>me,is:()=>fe,isAssociative:()=>T,isCollection:()=>_,isImmutable:()=>k,isIndexed:()=>b,isKeyed:()=>E,isList:()=>ar,isMap:()=>le,isOrdered:()=>M,isOrderedMap:()=>de,isOrderedSet:()=>Mr,isPlainObject:()=>ot,isRecord:()=>x,isSeq:()=>A,isSet:()=>Dr,isStack:()=>Ir,isValueObject:()=>pe,merge:()=>Tt,mergeDeep:()=>Pt,mergeDeepWith:()=>It,mergeWith:()=>Ct,remove:()=>lt,removeIn:()=>vt,set:()=>dt,setIn:()=>ht,update:()=>yt,updateIn:()=>pt,version:()=>In});var n="delete",o=5,i=1<<o,s=i-1,a={};function c(e){e&&(e.value=!0)}function u(){}function l(e){return void 0===e.size&&(e.size=e.__iterate(p)),e.size}function d(e,t){if("number"!=typeof t){var r=t>>>0;if(""+r!==t||4294967295===r)return NaN;t=r}return t<0?l(e)+t:t}function p(){return!0}function f(e,t,r){return(0===e&&!m(e)||void 0!==r&&e<=-r)&&(void 0===t||void 0!==r&&t>=r)}function h(e,t){return v(e,t,0)}function g(e,t){return v(e,t,t)}function v(e,t,r){return void 0===e?r:m(e)?t===1/0?t:0|Math.max(0,t+e):void 0===t||t===e?e:0|Math.min(t,e)}function m(e){return e<0||0===e&&1/e==-1/0}var y="@@__IMMUTABLE_ITERABLE__@@";function _(e){return Boolean(e&&e[y])}var S="@@__IMMUTABLE_KEYED__@@";function E(e){return Boolean(e&&e[S])}var w="@@__IMMUTABLE_INDEXED__@@";function b(e){return Boolean(e&&e[w])}function T(e){return E(e)||b(e)}var C=function(e){return _(e)?e:Q(e)},P=function(e){function t(e){return E(e)?e:Y(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(C),I=function(e){function t(e){return b(e)?e:Z(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(C),O=function(e){function t(e){return _(e)&&!T(e)?e:ee(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(C);C.Keyed=P,C.Indexed=I,C.Set=O;var N="@@__IMMUTABLE_SEQ__@@";function A(e){return Boolean(e&&e[N])}var R="@@__IMMUTABLE_RECORD__@@";function x(e){return Boolean(e&&e[R])}function k(e){return _(e)||x(e)}var D="@@__IMMUTABLE_ORDERED__@@";function M(e){return Boolean(e&&e[D])}var j=0,L=1,F=2,U="function"==typeof Symbol&&Symbol.iterator,B="@@iterator",V=U||B,$=function(e){this.next=e};function H(e,t,r,n){var o=0===e?t:1===e?r:[t,r];return n?n.value=o:n={value:o,done:!1},n}function q(){return{value:void 0,done:!0}}function z(e){return!!Array.isArray(e)||!!K(e)}function G(e){return e&&"function"==typeof e.next}function W(e){var t=K(e);return t&&t.call(e)}function K(e){var t=e&&(U&&e[U]||e[B]);if("function"==typeof t)return t}$.prototype.toString=function(){return"[Iterator]"},$.KEYS=j,$.VALUES=L,$.ENTRIES=F,$.prototype.inspect=$.prototype.toSource=function(){return this.toString()},$.prototype[V]=function(){return this};var X=Object.prototype.hasOwnProperty;function J(e){return!(!Array.isArray(e)&&"string"!=typeof e)||e&&"object"==typeof e&&Number.isInteger(e.length)&&e.length>=0&&(0===e.length?1===Object.keys(e).length:e.hasOwnProperty(e.length-1))}var Q=function(e){function t(e){return null==e?ie():k(e)?e.toSeq():function(e){var t,r,n=ce(e);if(n)return(r=K(t=e))&&r===t.entries?n.fromEntrySeq():function(e){var t=K(e);return t&&t===e.keys}(e)?n.toSetSeq():n;if("object"==typeof e)return new re(e);throw new TypeError("Expected Array or collection object of values, or keyed object: "+e)}(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq {","}")},t.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},t.prototype.__iterate=function(e,t){var r=this._cache;if(r){for(var n=r.length,o=0;o!==n;){var i=r[t?n-++o:o++];if(!1===e(i[1],i[0],this))break}return o}return this.__iterateUncached(e,t)},t.prototype.__iterator=function(e,t){var r=this._cache;if(r){var n=r.length,o=0;return new $((function(){if(o===n)return{value:void 0,done:!0};var i=r[t?n-++o:o++];return H(e,i[0],i[1])}))}return this.__iteratorUncached(e,t)},t}(C),Y=function(e){function t(e){return null==e?ie().toKeyedSeq():_(e)?E(e)?e.toSeq():e.fromEntrySeq():x(e)?e.toSeq():se(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toKeyedSeq=function(){return this},t}(Q),Z=function(e){function t(e){return null==e?ie():_(e)?E(e)?e.entrySeq():e.toIndexedSeq():x(e)?e.toSeq().entrySeq():ae(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toIndexedSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq [","]")},t}(Q),ee=function(e){function t(e){return(_(e)&&!T(e)?e:Z(e)).toSetSeq()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toSetSeq=function(){return this},t}(Q);Q.isSeq=A,Q.Keyed=Y,Q.Set=ee,Q.Indexed=Z,Q.prototype[N]=!0;var te=function(e){function t(e){this._array=e,this.size=e.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this.has(e)?this._array[d(this,e)]:t},t.prototype.__iterate=function(e,t){for(var r=this._array,n=r.length,o=0;o!==n;){var i=t?n-++o:o++;if(!1===e(r[i],i,this))break}return o},t.prototype.__iterator=function(e,t){var r=this._array,n=r.length,o=0;return new $((function(){if(o===n)return{value:void 0,done:!0};var i=t?n-++o:o++;return H(e,i,r[i])}))},t}(Z),re=function(e){function t(e){var t=Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]);this._object=e,this._keys=t,this.size=t.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},t.prototype.has=function(e){return X.call(this._object,e)},t.prototype.__iterate=function(e,t){for(var r=this._object,n=this._keys,o=n.length,i=0;i!==o;){var s=n[t?o-++i:i++];if(!1===e(r[s],s,this))break}return i},t.prototype.__iterator=function(e,t){var r=this._object,n=this._keys,o=n.length,i=0;return new $((function(){if(i===o)return{value:void 0,done:!0};var s=n[t?o-++i:i++];return H(e,s,r[s])}))},t}(Y);re.prototype[D]=!0;var ne,oe=function(e){function t(e){this._collection=e,this.size=e.length||e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var r=W(this._collection),n=0;if(G(r))for(var o;!(o=r.next()).done&&!1!==e(o.value,n++,this););return n},t.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=W(this._collection);if(!G(r))return new $(q);var n=0;return new $((function(){var t=r.next();return t.done?t:H(e,n++,t.value)}))},t}(Z);function ie(){return ne||(ne=new te([]))}function se(e){var t=ce(e);if(t)return t.fromEntrySeq();if("object"==typeof e)return new re(e);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+e)}function ae(e){var t=ce(e);if(t)return t;throw new TypeError("Expected Array or collection object of values: "+e)}function ce(e){return J(e)?new te(e):z(e)?new oe(e):void 0}var ue="@@__IMMUTABLE_MAP__@@";function le(e){return Boolean(e&&e[ue])}function de(e){return le(e)&&M(e)}function pe(e){return Boolean(e&&"function"==typeof e.equals&&"function"==typeof e.hashCode)}function fe(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if((e=e.valueOf())===(t=t.valueOf())||e!=e&&t!=t)return!0;if(!e||!t)return!1}return!!(pe(e)&&pe(t)&&e.equals(t))}var he="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var r=65535&(e|=0),n=65535&(t|=0);return r*n+((e>>>16)*n+r*(t>>>16)<<16>>>0)|0};function ge(e){return e>>>1&1073741824|3221225471&e}var ve=Object.prototype.valueOf;function me(e){if(null==e)return ye(e);if("function"==typeof e.hashCode)return ge(e.hashCode(e));var t,r,n,o=(t=e).valueOf!==ve&&"function"==typeof t.valueOf?t.valueOf(t):t;if(null==o)return ye(o);switch(typeof o){case"boolean":return o?1108378657:1108378656;case"number":return function(e){if(e!=e||e===1/0)return 0;var t=0|e;for(t!==e&&(t^=4294967295*e);e>4294967295;)t^=e/=4294967295;return ge(t)}(o);case"string":return o.length>Oe?(void 0===(n=Re[r=o])&&(n=_e(r),Ae===Ne&&(Ae=0,Re={}),Ae++,Re[r]=n),n):_e(o);case"object":case"function":return function(e){var t;if(Te&&void 0!==(t=be.get(e)))return t;if(void 0!==(t=e[Ie]))return t;if(!Ee){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Ie]))return t;if(void 0!==(t=function(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}(e)))return t}if(t=we(),Te)be.set(e,t);else{if(void 0!==Se&&!1===Se(e))throw new Error("Non-extensible objects are not allowed as keys.");if(Ee)Object.defineProperty(e,Ie,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Ie]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[Ie]=t}}return t}(o);case"symbol":return function(e){var t=Ce[e];return void 0!==t||(t=we(),Ce[e]=t),t}(o);default:if("function"==typeof o.toString)return _e(o.toString());throw new Error("Value type "+typeof o+" cannot be hashed.")}}function ye(e){return null===e?1108378658:1108378659}function _e(e){for(var t=0,r=0;r<e.length;r++)t=31*t+e.charCodeAt(r)|0;return ge(t)}var Se=Object.isExtensible,Ee=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}();function we(){var e=++Pe;return 1073741824&Pe&&(Pe=0),e}var be,Te="function"==typeof WeakMap;Te&&(be=new WeakMap);var Ce=Object.create(null),Pe=0,Ie="__immutablehash__";"function"==typeof Symbol&&(Ie=Symbol(Ie));var Oe=16,Ne=255,Ae=0,Re={},xe=function(e){function t(e,t){this._iter=e,this._useKeys=t,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this._iter.get(e,t)},t.prototype.has=function(e){return this._iter.has(e)},t.prototype.valueSeq=function(){return this._iter.valueSeq()},t.prototype.reverse=function(){var e=this,t=Fe(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},t.prototype.map=function(e,t){var r=this,n=Le(this,e,t);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(e,t)}),n},t.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate((function(t,n){return e(t,n,r)}),t)},t.prototype.__iterator=function(e,t){return this._iter.__iterator(e,t)},t}(Y);xe.prototype[D]=!0;var ke=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.includes=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var r=this,n=0;return t&&l(this),this._iter.__iterate((function(o){return e(o,t?r.size-++n:n++,r)}),t)},t.prototype.__iterator=function(e,t){var r=this,n=this._iter.__iterator(L,t),o=0;return t&&l(this),new $((function(){var i=n.next();return i.done?i:H(e,t?r.size-++o:o++,i.value,i)}))},t}(Z),De=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.has=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate((function(t){return e(t,t,r)}),t)},t.prototype.__iterator=function(e,t){var r=this._iter.__iterator(L,t);return new $((function(){var t=r.next();return t.done?t:H(e,t.value,t.value,t)}))},t}(ee),Me=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.entrySeq=function(){return this._iter.toSeq()},t.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate((function(t){if(t){Ke(t);var n=_(t);return e(n?t.get(1):t[1],n?t.get(0):t[0],r)}}),t)},t.prototype.__iterator=function(e,t){var r=this._iter.__iterator(L,t);return new $((function(){for(;;){var t=r.next();if(t.done)return t;var n=t.value;if(n){Ke(n);var o=_(n);return H(e,o?n.get(0):n[0],o?n.get(1):n[1],t)}}}))},t}(Y);function je(e){var t=Je(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=Qe,t.__iterateUncached=function(t,r){var n=this;return e.__iterate((function(e,r){return!1!==t(r,e,n)}),r)},t.__iteratorUncached=function(t,r){if(t===F){var n=e.__iterator(t,r);return new $((function(){var e=n.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e}))}return e.__iterator(t===L?j:L,r)},t}function Le(e,t,r){var n=Je(e);return n.size=e.size,n.has=function(t){return e.has(t)},n.get=function(n,o){var i=e.get(n,a);return i===a?o:t.call(r,i,n,e)},n.__iterateUncached=function(n,o){var i=this;return e.__iterate((function(e,o,s){return!1!==n(t.call(r,e,o,s),o,i)}),o)},n.__iteratorUncached=function(n,o){var i=e.__iterator(F,o);return new $((function(){var o=i.next();if(o.done)return o;var s=o.value,a=s[0];return H(n,a,t.call(r,s[1],a,e),o)}))},n}function Fe(e,t){var r=this,n=Je(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=je(e);return t.reverse=function(){return e.flip()},t}),n.get=function(r,n){return e.get(t?r:-1-r,n)},n.has=function(r){return e.has(t?r:-1-r)},n.includes=function(t){return e.includes(t)},n.cacheResult=Qe,n.__iterate=function(r,n){var o=this,i=0;return n&&l(e),e.__iterate((function(e,s){return r(e,t?s:n?o.size-++i:i++,o)}),!n)},n.__iterator=function(n,o){var i=0;o&&l(e);var s=e.__iterator(F,!o);return new $((function(){var e=s.next();if(e.done)return e;var a=e.value;return H(n,t?a[0]:o?r.size-++i:i++,a[1],e)}))},n}function Ue(e,t,r,n){var o=Je(e);return n&&(o.has=function(n){var o=e.get(n,a);return o!==a&&!!t.call(r,o,n,e)},o.get=function(n,o){var i=e.get(n,a);return i!==a&&t.call(r,i,n,e)?i:o}),o.__iterateUncached=function(o,i){var s=this,a=0;return e.__iterate((function(e,i,c){if(t.call(r,e,i,c))return a++,o(e,n?i:a-1,s)}),i),a},o.__iteratorUncached=function(o,i){var s=e.__iterator(F,i),a=0;return new $((function(){for(;;){var i=s.next();if(i.done)return i;var c=i.value,u=c[0],l=c[1];if(t.call(r,l,u,e))return H(o,n?u:a++,l,i)}}))},o}function Be(e,t,r,n){var o=e.size;if(f(t,r,o))return e;var i=h(t,o),s=g(r,o);if(i!=i||s!=s)return Be(e.toSeq().cacheResult(),t,r,n);var a,c=s-i;c==c&&(a=c<0?0:c);var u=Je(e);return u.size=0===a?a:e.size&&a||void 0,!n&&A(e)&&a>=0&&(u.get=function(t,r){return(t=d(this,t))>=0&&t<a?e.get(t+i,r):r}),u.__iterateUncached=function(t,r){var o=this;if(0===a)return 0;if(r)return this.cacheResult().__iterate(t,r);var s=0,c=!0,u=0;return e.__iterate((function(e,r){if(!c||!(c=s++<i))return u++,!1!==t(e,n?r:u-1,o)&&u!==a})),u},u.__iteratorUncached=function(t,r){if(0!==a&&r)return this.cacheResult().__iterator(t,r);if(0===a)return new $(q);var o=e.__iterator(t,r),s=0,c=0;return new $((function(){for(;s++<i;)o.next();if(++c>a)return{value:void 0,done:!0};var e=o.next();return n||t===L||e.done?e:H(t,c-1,t===j?void 0:e.value[1],e)}))},u}function Ve(e,t,r,n){var o=Je(e);return o.__iterateUncached=function(o,i){var s=this;if(i)return this.cacheResult().__iterate(o,i);var a=!0,c=0;return e.__iterate((function(e,i,u){if(!a||!(a=t.call(r,e,i,u)))return c++,o(e,n?i:c-1,s)})),c},o.__iteratorUncached=function(o,i){var s=this;if(i)return this.cacheResult().__iterator(o,i);var a=e.__iterator(F,i),c=!0,u=0;return new $((function(){var e,i,l;do{if((e=a.next()).done)return n||o===L?e:H(o,u++,o===j?void 0:e.value[1],e);var d=e.value;i=d[0],l=d[1],c&&(c=t.call(r,l,i,s))}while(c);return o===F?e:H(o,i,l,e)}))},o}function $e(e,t,r){var n=Je(e);return n.__iterateUncached=function(o,i){if(i)return this.cacheResult().__iterate(o,i);var s=0,a=!1;return function e(c,u){c.__iterate((function(i,c){return(!t||u<t)&&_(i)?e(i,u+1):(s++,!1===o(i,r?c:s-1,n)&&(a=!0)),!a}),i)}(e,0),s},n.__iteratorUncached=function(n,o){if(o)return this.cacheResult().__iterator(n,o);var i=e.__iterator(n,o),s=[],a=0;return new $((function(){for(;i;){var e=i.next();if(!1===e.done){var c=e.value;if(n===F&&(c=c[1]),t&&!(s.length<t)||!_(c))return r?e:H(n,a++,c,e);s.push(i),i=c.__iterator(n,o)}else i=s.pop()}return{value:void 0,done:!0}}))},n}function He(e,t,r){t||(t=Ye);var n=E(e),o=0,i=e.toSeq().map((function(t,n){return[n,t,o++,r?r(t,n,e):t]})).valueSeq().toArray();return i.sort((function(e,r){return t(e[3],r[3])||e[2]-r[2]})).forEach(n?function(e,t){i[t].length=2}:function(e,t){i[t]=e[1]}),n?Y(i):b(e)?Z(i):ee(i)}function qe(e,t,r){if(t||(t=Ye),r){var n=e.toSeq().map((function(t,n){return[t,r(t,n,e)]})).reduce((function(e,r){return ze(t,e[1],r[1])?r:e}));return n&&n[0]}return e.reduce((function(e,r){return ze(t,e,r)?r:e}))}function ze(e,t,r){var n=e(r,t);return 0===n&&r!==t&&(null==r||r!=r)||n>0}function Ge(e,t,r,n){var o=Je(e),i=new te(r).map((function(e){return e.size}));return o.size=n?i.max():i.min(),o.__iterate=function(e,t){for(var r,n=this.__iterator(L,t),o=0;!(r=n.next()).done&&!1!==e(r.value,o++,this););return o},o.__iteratorUncached=function(e,o){var i=r.map((function(e){return e=C(e),W(o?e.reverse():e)})),s=0,a=!1;return new $((function(){var r;return a||(r=i.map((function(e){return e.next()})),a=n?r.every((function(e){return e.done})):r.some((function(e){return e.done}))),a?{value:void 0,done:!0}:H(e,s++,t.apply(null,r.map((function(e){return e.value}))))}))},o}function We(e,t){return e===t?e:A(e)?t:e.constructor(t)}function Ke(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function Xe(e){return E(e)?P:b(e)?I:O}function Je(e){return Object.create((E(e)?Y:b(e)?Z:ee).prototype)}function Qe(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Q.prototype.cacheResult.call(this)}function Ye(e,t){return void 0===e&&void 0===t?0:void 0===e?1:void 0===t?-1:e>t?1:e<t?-1:0}function Ze(e,t){t=t||0;for(var r=Math.max(0,e.length-t),n=new Array(r),o=0;o<r;o++)n[o]=e[o+t];return n}function et(e,t){if(!e)throw new Error(t)}function tt(e){et(e!==1/0,"Cannot perform this action with an infinite size.")}function rt(e){if(J(e)&&"string"!=typeof e)return e;if(M(e))return e.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+e)}ke.prototype.cacheResult=xe.prototype.cacheResult=De.prototype.cacheResult=Me.prototype.cacheResult=Qe;var nt=Object.prototype.toString;function ot(e){if(!e||"object"!=typeof e||"[object Object]"!==nt.call(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var r=t,n=Object.getPrototypeOf(t);null!==n;)r=n,n=Object.getPrototypeOf(r);return r===t}function it(e){return"object"==typeof e&&(k(e)||Array.isArray(e)||ot(e))}function st(e){try{return"string"==typeof e?JSON.stringify(e):String(e)}catch(t){return JSON.stringify(e)}}function at(e,t){return k(e)?e.has(t):it(e)&&X.call(e,t)}function ct(e,t,r){return k(e)?e.get(t,r):at(e,t)?"function"==typeof e.get?e.get(t):e[t]:r}function ut(e){if(Array.isArray(e))return Ze(e);var t={};for(var r in e)X.call(e,r)&&(t[r]=e[r]);return t}function lt(e,t){if(!it(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(k(e)){if(!e.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+e);return e.remove(t)}if(!X.call(e,t))return e;var r=ut(e);return Array.isArray(r)?r.splice(t,1):delete r[t],r}function dt(e,t,r){if(!it(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(k(e)){if(!e.set)throw new TypeError("Cannot update immutable value without .set() method: "+e);return e.set(t,r)}if(X.call(e,t)&&r===e[t])return e;var n=ut(e);return n[t]=r,n}function pt(e,t,r,n){n||(n=r,r=void 0);var o=ft(k(e),e,rt(t),0,r,n);return o===a?r:o}function ft(e,t,r,n,o,i){var s=t===a;if(n===r.length){var c=s?o:t,u=i(c);return u===c?t:u}if(!s&&!it(t))throw new TypeError("Cannot update within non-data-structure value in path ["+r.slice(0,n).map(st)+"]: "+t);var l=r[n],d=s?a:ct(t,l,a),p=ft(d===a?e:k(d),d,r,n+1,o,i);return p===d?t:p===a?lt(t,l):dt(s?e?Jt():{}:t,l,p)}function ht(e,t,r){return pt(e,t,a,(function(){return r}))}function gt(e,t){return ht(this,e,t)}function vt(e,t){return pt(e,t,(function(){return a}))}function mt(e){return vt(this,e)}function yt(e,t,r,n){return pt(e,[t],r,n)}function _t(e,t,r){return 1===arguments.length?e(this):yt(this,e,t,r)}function St(e,t,r){return pt(this,e,t,r)}function Et(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return bt(this,e)}function wt(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];if("function"!=typeof e)throw new TypeError("Invalid merger function: "+e);return bt(this,t,e)}function bt(e,t,r){for(var n=[],o=0;o<t.length;o++){var i=P(t[o]);0!==i.size&&n.push(i)}return 0===n.length?e:0!==e.toSeq().size||e.__ownerID||1!==n.length?e.withMutations((function(e){for(var t=r?function(t,n){yt(e,n,a,(function(e){return e===a?t:r(e,t,n)}))}:function(t,r){e.set(r,t)},o=0;o<n.length;o++)n[o].forEach(t)})):e.constructor(n[0])}function Tt(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return Nt(e,t)}function Ct(e,t){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return Nt(t,r,e)}function Pt(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return Ot(e,t)}function It(e,t){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return Ot(t,r,e)}function Ot(e,t,r){return Nt(e,t,function(e){return function t(r,n,o){return it(r)&&it(n)&&(i=n,s=Q(r),a=Q(i),b(s)===b(a)&&E(s)===E(a))?Nt(r,[n],t):e?e(r,n,o):n;var i,s,a}}(r))}function Nt(e,t,r){if(!it(e))throw new TypeError("Cannot merge into non-data-structure value: "+e);if(k(e))return"function"==typeof r&&e.mergeWith?e.mergeWith.apply(e,[r].concat(t)):e.merge?e.merge.apply(e,t):e.concat.apply(e,t);for(var n=Array.isArray(e),o=e,i=n?I:P,s=n?function(t){o===e&&(o=ut(o)),o.push(t)}:function(t,n){var i=X.call(o,n),s=i&&r?r(o[n],t,n):t;i&&s===o[n]||(o===e&&(o=ut(o)),o[n]=s)},a=0;a<t.length;a++)i(t[a]).forEach(s);return o}function At(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return Ot(this,e)}function Rt(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return Ot(this,t,e)}function xt(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return pt(this,e,Jt(),(function(e){return Nt(e,t)}))}function kt(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return pt(this,e,Jt(),(function(e){return Ot(e,t)}))}function Dt(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this}function Mt(){return this.__ownerID?this:this.__ensureOwner(new u)}function jt(){return this.__ensureOwner()}function Lt(){return this.__altered}var Ft=function(e){function t(t){return null==t?Jt():le(t)&&!M(t)?t:Jt().withMutations((function(r){var n=e(t);tt(n.size),n.forEach((function(e,t){return r.set(t,e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return Jt().withMutations((function(t){for(var r=0;r<e.length;r+=2){if(r+1>=e.length)throw new Error("Missing value for key: "+e[r]);t.set(e[r],e[r+1])}}))},t.prototype.toString=function(){return this.__toString("Map {","}")},t.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},t.prototype.set=function(e,t){return Qt(this,e,t)},t.prototype.remove=function(e){return Qt(this,e,a)},t.prototype.deleteAll=function(e){var t=C(e);return 0===t.size?this:this.withMutations((function(e){t.forEach((function(t){return e.remove(t)}))}))},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Jt()},t.prototype.sort=function(e){return wr(He(this,e))},t.prototype.sortBy=function(e,t){return wr(He(this,t,e))},t.prototype.map=function(e,t){var r=this;return this.withMutations((function(n){n.forEach((function(o,i){n.set(i,e.call(t,o,i,r))}))}))},t.prototype.__iterator=function(e,t){return new Gt(this,e,t)},t.prototype.__iterate=function(e,t){var r=this,n=0;return this._root&&this._root.iterate((function(t){return n++,e(t[1],t[0],r)}),t),n},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Xt(this.size,this._root,e,this.__hash):0===this.size?Jt():(this.__ownerID=e,this.__altered=!1,this)},t}(P);Ft.isMap=le;var Ut=Ft.prototype;Ut[ue]=!0,Ut[n]=Ut.remove,Ut.removeAll=Ut.deleteAll,Ut.setIn=gt,Ut.removeIn=Ut.deleteIn=mt,Ut.update=_t,Ut.updateIn=St,Ut.merge=Ut.concat=Et,Ut.mergeWith=wt,Ut.mergeDeep=At,Ut.mergeDeepWith=Rt,Ut.mergeIn=xt,Ut.mergeDeepIn=kt,Ut.withMutations=Dt,Ut.wasAltered=Lt,Ut.asImmutable=jt,Ut["@@transducer/init"]=Ut.asMutable=Mt,Ut["@@transducer/step"]=function(e,t){return e.set(t[0],t[1])},Ut["@@transducer/result"]=function(e){return e.asImmutable()};var Bt=function(e,t){this.ownerID=e,this.entries=t};Bt.prototype.get=function(e,t,r,n){for(var o=this.entries,i=0,s=o.length;i<s;i++)if(fe(r,o[i][0]))return o[i][1];return n},Bt.prototype.update=function(e,t,r,n,o,i,s){for(var l=o===a,d=this.entries,p=0,f=d.length;p<f&&!fe(n,d[p][0]);p++);var h=p<f;if(h?d[p][1]===o:l)return this;if(c(s),(l||!h)&&c(i),!l||1!==d.length){if(!h&&!l&&d.length>=nr)return function(e,t,r,n){e||(e=new u);for(var o=new qt(e,me(r),[r,n]),i=0;i<t.length;i++){var s=t[i];o=o.update(e,0,void 0,s[0],s[1])}return o}(e,d,n,o);var g=e&&e===this.ownerID,v=g?d:Ze(d);return h?l?p===f-1?v.pop():v[p]=v.pop():v[p]=[n,o]:v.push([n,o]),g?(this.entries=v,this):new Bt(e,v)}};var Vt=function(e,t,r){this.ownerID=e,this.bitmap=t,this.nodes=r};Vt.prototype.get=function(e,t,r,n){void 0===t&&(t=me(r));var i=1<<((0===e?t:t>>>e)&s),a=this.bitmap;return 0==(a&i)?n:this.nodes[tr(a&i-1)].get(e+o,t,r,n)},Vt.prototype.update=function(e,t,r,n,c,u,l){void 0===r&&(r=me(n));var d=(0===t?r:r>>>t)&s,p=1<<d,f=this.bitmap,h=0!=(f&p);if(!h&&c===a)return this;var g=tr(f&p-1),v=this.nodes,m=h?v[g]:void 0,y=Yt(m,e,t+o,r,n,c,u,l);if(y===m)return this;if(!h&&y&&v.length>=or)return function(e,t,r,n,o){for(var s=0,a=new Array(i),c=0;0!==r;c++,r>>>=1)a[c]=1&r?t[s++]:void 0;return a[n]=o,new $t(e,s+1,a)}(e,v,f,d,y);if(h&&!y&&2===v.length&&Zt(v[1^g]))return v[1^g];if(h&&y&&1===v.length&&Zt(y))return y;var _=e&&e===this.ownerID,S=h?y?f:f^p:f|p,E=h?y?rr(v,g,y,_):function(e,t,r){var n=e.length-1;if(r&&t===n)return e.pop(),e;for(var o=new Array(n),i=0,s=0;s<n;s++)s===t&&(i=1),o[s]=e[s+i];return o}(v,g,_):function(e,t,r,n){var o=e.length+1;if(n&&t+1===o)return e[t]=r,e;for(var i=new Array(o),s=0,a=0;a<o;a++)a===t?(i[a]=r,s=-1):i[a]=e[a+s];return i}(v,g,y,_);return _?(this.bitmap=S,this.nodes=E,this):new Vt(e,S,E)};var $t=function(e,t,r){this.ownerID=e,this.count=t,this.nodes=r};$t.prototype.get=function(e,t,r,n){void 0===t&&(t=me(r));var i=(0===e?t:t>>>e)&s,a=this.nodes[i];return a?a.get(e+o,t,r,n):n},$t.prototype.update=function(e,t,r,n,i,c,u){void 0===r&&(r=me(n));var l=(0===t?r:r>>>t)&s,d=i===a,p=this.nodes,f=p[l];if(d&&!f)return this;var h=Yt(f,e,t+o,r,n,i,c,u);if(h===f)return this;var g=this.count;if(f){if(!h&&--g<ir)return function(e,t,r,n){for(var o=0,i=0,s=new Array(r),a=0,c=1,u=t.length;a<u;a++,c<<=1){var l=t[a];void 0!==l&&a!==n&&(o|=c,s[i++]=l)}return new Vt(e,o,s)}(e,p,g,l)}else g++;var v=e&&e===this.ownerID,m=rr(p,l,h,v);return v?(this.count=g,this.nodes=m,this):new $t(e,g,m)};var Ht=function(e,t,r){this.ownerID=e,this.keyHash=t,this.entries=r};Ht.prototype.get=function(e,t,r,n){for(var o=this.entries,i=0,s=o.length;i<s;i++)if(fe(r,o[i][0]))return o[i][1];return n},Ht.prototype.update=function(e,t,r,n,o,i,s){void 0===r&&(r=me(n));var u=o===a;if(r!==this.keyHash)return u?this:(c(s),c(i),er(this,e,t,r,[n,o]));for(var l=this.entries,d=0,p=l.length;d<p&&!fe(n,l[d][0]);d++);var f=d<p;if(f?l[d][1]===o:u)return this;if(c(s),(u||!f)&&c(i),u&&2===p)return new qt(e,this.keyHash,l[1^d]);var h=e&&e===this.ownerID,g=h?l:Ze(l);return f?u?d===p-1?g.pop():g[d]=g.pop():g[d]=[n,o]:g.push([n,o]),h?(this.entries=g,this):new Ht(e,this.keyHash,g)};var qt=function(e,t,r){this.ownerID=e,this.keyHash=t,this.entry=r};qt.prototype.get=function(e,t,r,n){return fe(r,this.entry[0])?this.entry[1]:n},qt.prototype.update=function(e,t,r,n,o,i,s){var u=o===a,l=fe(n,this.entry[0]);return(l?o===this.entry[1]:u)?this:(c(s),u?void c(i):l?e&&e===this.ownerID?(this.entry[1]=o,this):new qt(e,this.keyHash,[n,o]):(c(i),er(this,e,t,me(n),[n,o])))},Bt.prototype.iterate=Ht.prototype.iterate=function(e,t){for(var r=this.entries,n=0,o=r.length-1;n<=o;n++)if(!1===e(r[t?o-n:n]))return!1},Vt.prototype.iterate=$t.prototype.iterate=function(e,t){for(var r=this.nodes,n=0,o=r.length-1;n<=o;n++){var i=r[t?o-n:n];if(i&&!1===i.iterate(e,t))return!1}},qt.prototype.iterate=function(e,t){return e(this.entry)};var zt,Gt=function(e){function t(e,t,r){this._type=t,this._reverse=r,this._stack=e._root&&Kt(e._root)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var r=t.node,n=t.index++,o=void 0;if(r.entry){if(0===n)return Wt(e,r.entry)}else if(r.entries){if(n<=(o=r.entries.length-1))return Wt(e,r.entries[this._reverse?o-n:n])}else if(n<=(o=r.nodes.length-1)){var i=r.nodes[this._reverse?o-n:n];if(i){if(i.entry)return Wt(e,i.entry);t=this._stack=Kt(i,t)}continue}t=this._stack=this._stack.__prev}return{value:void 0,done:!0}},t}($);function Wt(e,t){return H(e,t[0],t[1])}function Kt(e,t){return{node:e,index:0,__prev:t}}function Xt(e,t,r,n){var o=Object.create(Ut);return o.size=e,o._root=t,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function Jt(){return zt||(zt=Xt(0))}function Qt(e,t,r){var n,o;if(e._root){var i={value:!1},s={value:!1};if(n=Yt(e._root,e.__ownerID,0,void 0,t,r,i,s),!s.value)return e;o=e.size+(i.value?r===a?-1:1:0)}else{if(r===a)return e;o=1,n=new Bt(e.__ownerID,[[t,r]])}return e.__ownerID?(e.size=o,e._root=n,e.__hash=void 0,e.__altered=!0,e):n?Xt(o,n):Jt()}function Yt(e,t,r,n,o,i,s,u){return e?e.update(t,r,n,o,i,s,u):i===a?e:(c(u),c(s),new qt(t,n,[o,i]))}function Zt(e){return e.constructor===qt||e.constructor===Ht}function er(e,t,r,n,i){if(e.keyHash===n)return new Ht(t,n,[e.entry,i]);var a,c=(0===r?e.keyHash:e.keyHash>>>r)&s,u=(0===r?n:n>>>r)&s,l=c===u?[er(e,t,r+o,n,i)]:(a=new qt(t,n,i),c<u?[e,a]:[a,e]);return new Vt(t,1<<c|1<<u,l)}function tr(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,127&(e+=e>>8)+(e>>16)}function rr(e,t,r,n){var o=n?e:Ze(e);return o[t]=r,o}var nr=i/4,or=i/2,ir=i/4,sr="@@__IMMUTABLE_LIST__@@";function ar(e){return Boolean(e&&e[sr])}var cr=function(e){function t(t){var r=gr();if(null==t)return r;if(ar(t))return t;var n=e(t),s=n.size;return 0===s?r:(tt(s),s>0&&s<i?hr(0,s,o,null,new lr(n.toArray())):r.withMutations((function(e){e.setSize(s),n.forEach((function(t,r){return e.set(r,t)}))})))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("List [","]")},t.prototype.get=function(e,t){if((e=d(this,e))>=0&&e<this.size){var r=yr(this,e+=this._origin);return r&&r.array[e&s]}return t},t.prototype.set=function(e,t){return function(e,t,r){if((t=d(e,t))!=t)return e;if(t>=e.size||t<0)return e.withMutations((function(e){t<0?_r(e,t).set(0,r):_r(e,0,t+1).set(t,r)}));t+=e._origin;var n=e._tail,o=e._root,i={value:!1};return t>=Sr(e._capacity)?n=vr(n,e.__ownerID,0,t,r,i):o=vr(o,e.__ownerID,e._level,t,r,i),i.value?e.__ownerID?(e._root=o,e._tail=n,e.__hash=void 0,e.__altered=!0,e):hr(e._origin,e._capacity,e._level,o,n):e}(this,e,t)},t.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},t.prototype.insert=function(e,t){return this.splice(e,0,t)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=o,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):gr()},t.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations((function(r){_r(r,0,t+e.length);for(var n=0;n<e.length;n++)r.set(t+n,e[n])}))},t.prototype.pop=function(){return _r(this,0,-1)},t.prototype.unshift=function(){var e=arguments;return this.withMutations((function(t){_r(t,-e.length);for(var r=0;r<e.length;r++)t.set(r,e[r])}))},t.prototype.shift=function(){return _r(this,1)},t.prototype.concat=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++){var o=t[n],i=e("string"!=typeof o&&z(o)?o:[o]);0!==i.size&&r.push(i)}return 0===r.length?this:0!==this.size||this.__ownerID||1!==r.length?this.withMutations((function(e){r.forEach((function(t){return t.forEach((function(t){return e.push(t)}))}))})):this.constructor(r[0])},t.prototype.setSize=function(e){return _r(this,0,e)},t.prototype.map=function(e,t){var r=this;return this.withMutations((function(n){for(var o=0;o<r.size;o++)n.set(o,e.call(t,n.get(o),o,r))}))},t.prototype.slice=function(e,t){var r=this.size;return f(e,t,r)?this:_r(this,h(e,r),g(t,r))},t.prototype.__iterator=function(e,t){var r=t?this.size:0,n=fr(this,t);return new $((function(){var o=n();return o===pr?{value:void 0,done:!0}:H(e,t?--r:r++,o)}))},t.prototype.__iterate=function(e,t){for(var r,n=t?this.size:0,o=fr(this,t);(r=o())!==pr&&!1!==e(r,t?--n:n++,this););return n},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?hr(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):0===this.size?gr():(this.__ownerID=e,this.__altered=!1,this)},t}(I);cr.isList=ar;var ur=cr.prototype;ur[sr]=!0,ur[n]=ur.remove,ur.merge=ur.concat,ur.setIn=gt,ur.deleteIn=ur.removeIn=mt,ur.update=_t,ur.updateIn=St,ur.mergeIn=xt,ur.mergeDeepIn=kt,ur.withMutations=Dt,ur.wasAltered=Lt,ur.asImmutable=jt,ur["@@transducer/init"]=ur.asMutable=Mt,ur["@@transducer/step"]=function(e,t){return e.push(t)},ur["@@transducer/result"]=function(e){return e.asImmutable()};var lr=function(e,t){this.array=e,this.ownerID=t};lr.prototype.removeBefore=function(e,t,r){if(r===t?1<<t:0===this.array.length)return this;var n=r>>>t&s;if(n>=this.array.length)return new lr([],e);var i,a=0===n;if(t>0){var c=this.array[n];if((i=c&&c.removeBefore(e,t-o,r))===c&&a)return this}if(a&&!i)return this;var u=mr(this,e);if(!a)for(var l=0;l<n;l++)u.array[l]=void 0;return i&&(u.array[n]=i),u},lr.prototype.removeAfter=function(e,t,r){if(r===(t?1<<t:0)||0===this.array.length)return this;var n,i=r-1>>>t&s;if(i>=this.array.length)return this;if(t>0){var a=this.array[i];if((n=a&&a.removeAfter(e,t-o,r))===a&&i===this.array.length-1)return this}var c=mr(this,e);return c.array.splice(i+1),n&&(c.array[i]=n),c};var dr,pr={};function fr(e,t){var r=e._origin,n=e._capacity,s=Sr(n),a=e._tail;return function e(c,u,l){return 0===u?function(e,o){var c=o===s?a&&a.array:e&&e.array,u=o>r?0:r-o,l=n-o;return l>i&&(l=i),function(){if(u===l)return pr;var e=t?--l:u++;return c&&c[e]}}(c,l):function(s,a,c){var u,l=s&&s.array,d=c>r?0:r-c>>a,p=1+(n-c>>a);return p>i&&(p=i),function(){for(;;){if(u){var r=u();if(r!==pr)return r;u=null}if(d===p)return pr;var n=t?--p:d++;u=e(l&&l[n],a-o,c+(n<<a))}}}(c,u,l)}(e._root,e._level,0)}function hr(e,t,r,n,o,i,s){var a=Object.create(ur);return a.size=t-e,a._origin=e,a._capacity=t,a._level=r,a._root=n,a._tail=o,a.__ownerID=i,a.__hash=s,a.__altered=!1,a}function gr(){return dr||(dr=hr(0,0,o))}function vr(e,t,r,n,i,a){var u,l=n>>>r&s,d=e&&l<e.array.length;if(!d&&void 0===i)return e;if(r>0){var p=e&&e.array[l],f=vr(p,t,r-o,n,i,a);return f===p?e:((u=mr(e,t)).array[l]=f,u)}return d&&e.array[l]===i?e:(a&&c(a),u=mr(e,t),void 0===i&&l===u.array.length-1?u.array.pop():u.array[l]=i,u)}function mr(e,t){return t&&e&&t===e.ownerID?e:new lr(e?e.array.slice():[],t)}function yr(e,t){if(t>=Sr(e._capacity))return e._tail;if(t<1<<e._level+o){for(var r=e._root,n=e._level;r&&n>0;)r=r.array[t>>>n&s],n-=o;return r}}function _r(e,t,r){void 0!==t&&(t|=0),void 0!==r&&(r|=0);var n=e.__ownerID||new u,i=e._origin,a=e._capacity,c=i+t,l=void 0===r?a:r<0?a+r:i+r;if(c===i&&l===a)return e;if(c>=l)return e.clear();for(var d=e._level,p=e._root,f=0;c+f<0;)p=new lr(p&&p.array.length?[void 0,p]:[],n),f+=1<<(d+=o);f&&(c+=f,i+=f,l+=f,a+=f);for(var h=Sr(a),g=Sr(l);g>=1<<d+o;)p=new lr(p&&p.array.length?[p]:[],n),d+=o;var v=e._tail,m=g<h?yr(e,l-1):g>h?new lr([],n):v;if(v&&g>h&&c<a&&v.array.length){for(var y=p=mr(p,n),_=d;_>o;_-=o){var S=h>>>_&s;y=y.array[S]=mr(y.array[S],n)}y.array[h>>>o&s]=v}if(l<a&&(m=m&&m.removeAfter(n,0,l)),c>=g)c-=g,l-=g,d=o,p=null,m=m&&m.removeBefore(n,0,c);else if(c>i||g<h){for(f=0;p;){var E=c>>>d&s;if(E!==g>>>d&s)break;E&&(f+=(1<<d)*E),d-=o,p=p.array[E]}p&&c>i&&(p=p.removeBefore(n,d,c-f)),p&&g<h&&(p=p.removeAfter(n,d,g-f)),f&&(c-=f,l-=f)}return e.__ownerID?(e.size=l-c,e._origin=c,e._capacity=l,e._level=d,e._root=p,e._tail=m,e.__hash=void 0,e.__altered=!0,e):hr(c,l,d,p,m)}function Sr(e){return e<i?0:e-1>>>o<<o}var Er,wr=function(e){function t(e){return null==e?Tr():de(e)?e:Tr().withMutations((function(t){var r=P(e);tt(r.size),r.forEach((function(e,r){return t.set(r,e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("OrderedMap {","}")},t.prototype.get=function(e,t){var r=this._map.get(e);return void 0!==r?this._list.get(r)[1]:t},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):Tr()},t.prototype.set=function(e,t){return Cr(this,e,t)},t.prototype.remove=function(e){return Cr(this,e,a)},t.prototype.__iterate=function(e,t){var r=this;return this._list.__iterate((function(t){return t&&e(t[1],t[0],r)}),t)},t.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),r=this._list.__ensureOwner(e);return e?br(t,r,e,this.__hash):0===this.size?Tr():(this.__ownerID=e,this.__altered=!1,this._map=t,this._list=r,this)},t}(Ft);function br(e,t,r,n){var o=Object.create(wr.prototype);return o.size=e?e.size:0,o._map=e,o._list=t,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function Tr(){return Er||(Er=br(Jt(),gr()))}function Cr(e,t,r){var n,o,s=e._map,c=e._list,u=s.get(t),l=void 0!==u;if(r===a){if(!l)return e;c.size>=i&&c.size>=2*s.size?(n=(o=c.filter((function(e,t){return void 0!==e&&u!==t}))).toKeyedSeq().map((function(e){return e[0]})).flip().toMap(),e.__ownerID&&(n.__ownerID=o.__ownerID=e.__ownerID)):(n=s.remove(t),o=u===c.size-1?c.pop():c.set(u,void 0))}else if(l){if(r===c.get(u)[1])return e;n=s,o=c.set(u,[t,r])}else n=s.set(t,c.size),o=c.set(c.size,[t,r]);return e.__ownerID?(e.size=n.size,e._map=n,e._list=o,e.__hash=void 0,e.__altered=!0,e):br(n,o)}wr.isOrderedMap=de,wr.prototype[D]=!0,wr.prototype[n]=wr.prototype.remove;var Pr="@@__IMMUTABLE_STACK__@@";function Ir(e){return Boolean(e&&e[Pr])}var Or=function(e){function t(e){return null==e?xr():Ir(e)?e:xr().pushAll(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("Stack [","]")},t.prototype.get=function(e,t){var r=this._head;for(e=d(this,e);r&&e--;)r=r.next;return r?r.value:t},t.prototype.peek=function(){return this._head&&this._head.value},t.prototype.push=function(){var e=arguments;if(0===arguments.length)return this;for(var t=this.size+arguments.length,r=this._head,n=arguments.length-1;n>=0;n--)r={value:e[n],next:r};return this.__ownerID?(this.size=t,this._head=r,this.__hash=void 0,this.__altered=!0,this):Rr(t,r)},t.prototype.pushAll=function(t){if(0===(t=e(t)).size)return this;if(0===this.size&&Ir(t))return t;tt(t.size);var r=this.size,n=this._head;return t.__iterate((function(e){r++,n={value:e,next:n}}),!0),this.__ownerID?(this.size=r,this._head=n,this.__hash=void 0,this.__altered=!0,this):Rr(r,n)},t.prototype.pop=function(){return this.slice(1)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):xr()},t.prototype.slice=function(t,r){if(f(t,r,this.size))return this;var n=h(t,this.size);if(g(r,this.size)!==this.size)return e.prototype.slice.call(this,t,r);for(var o=this.size-n,i=this._head;n--;)i=i.next;return this.__ownerID?(this.size=o,this._head=i,this.__hash=void 0,this.__altered=!0,this):Rr(o,i)},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Rr(this.size,this._head,e,this.__hash):0===this.size?xr():(this.__ownerID=e,this.__altered=!1,this)},t.prototype.__iterate=function(e,t){var r=this;if(t)return new te(this.toArray()).__iterate((function(t,n){return e(t,n,r)}),t);for(var n=0,o=this._head;o&&!1!==e(o.value,n++,this);)o=o.next;return n},t.prototype.__iterator=function(e,t){if(t)return new te(this.toArray()).__iterator(e,t);var r=0,n=this._head;return new $((function(){if(n){var t=n.value;return n=n.next,H(e,r++,t)}return{value:void 0,done:!0}}))},t}(I);Or.isStack=Ir;var Nr,Ar=Or.prototype;function Rr(e,t,r,n){var o=Object.create(Ar);return o.size=e,o._head=t,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function xr(){return Nr||(Nr=Rr(0))}Ar[Pr]=!0,Ar.shift=Ar.pop,Ar.unshift=Ar.push,Ar.unshiftAll=Ar.pushAll,Ar.withMutations=Dt,Ar.wasAltered=Lt,Ar.asImmutable=jt,Ar["@@transducer/init"]=Ar.asMutable=Mt,Ar["@@transducer/step"]=function(e,t){return e.unshift(t)},Ar["@@transducer/result"]=function(e){return e.asImmutable()};var kr="@@__IMMUTABLE_SET__@@";function Dr(e){return Boolean(e&&e[kr])}function Mr(e){return Dr(e)&&M(e)}function jr(e,t){if(e===t)return!0;if(!_(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||E(e)!==E(t)||b(e)!==b(t)||M(e)!==M(t))return!1;if(0===e.size&&0===t.size)return!0;var r=!T(e);if(M(e)){var n=e.entries();return t.every((function(e,t){var o=n.next().value;return o&&fe(o[1],e)&&(r||fe(o[0],t))}))&&n.next().done}var o=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{o=!0;var i=e;e=t,t=i}var s=!0,c=t.__iterate((function(t,n){if(r?!e.has(t):o?!fe(t,e.get(n,a)):!fe(e.get(n,a),t))return s=!1,!1}));return s&&e.size===c}function Lr(e,t){var r=function(r){e.prototype[r]=t[r]};return Object.keys(t).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(r),e}function Fr(e){if(!e||"object"!=typeof e)return e;if(!_(e)){if(!it(e))return e;e=Q(e)}if(E(e)){var t={};return e.__iterate((function(e,r){t[r]=Fr(e)})),t}var r=[];return e.__iterate((function(e){r.push(Fr(e))})),r}var Ur=function(e){function t(t){return null==t?qr():Dr(t)&&!M(t)?t:qr().withMutations((function(r){var n=e(t);tt(n.size),n.forEach((function(e){return r.add(e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(P(e).keySeq())},t.intersect=function(e){return(e=C(e).toArray()).length?Vr.intersect.apply(t(e.pop()),e):qr()},t.union=function(e){return(e=C(e).toArray()).length?Vr.union.apply(t(e.pop()),e):qr()},t.prototype.toString=function(){return this.__toString("Set {","}")},t.prototype.has=function(e){return this._map.has(e)},t.prototype.add=function(e){return $r(this,this._map.set(e,e))},t.prototype.remove=function(e){return $r(this,this._map.remove(e))},t.prototype.clear=function(){return $r(this,this._map.clear())},t.prototype.map=function(e,t){var r=this,n=!1,o=$r(this,this._map.mapEntries((function(o){var i=o[1],s=e.call(t,i,i,r);return s!==i&&(n=!0),[s,s]}),t));return n?o:this},t.prototype.union=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return 0===(t=t.filter((function(e){return 0!==e.size}))).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations((function(r){for(var n=0;n<t.length;n++)"string"==typeof t[n]?r.add(t[n]):e(t[n]).forEach((function(e){return r.add(e)}))})):this.constructor(t[0])},t.prototype.intersect=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(0===t.length)return this;t=t.map((function(t){return e(t)}));var n=[];return this.forEach((function(e){t.every((function(t){return t.includes(e)}))||n.push(e)})),this.withMutations((function(e){n.forEach((function(t){e.remove(t)}))}))},t.prototype.subtract=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(0===t.length)return this;t=t.map((function(t){return e(t)}));var n=[];return this.forEach((function(e){t.some((function(t){return t.includes(e)}))&&n.push(e)})),this.withMutations((function(e){n.forEach((function(t){e.remove(t)}))}))},t.prototype.sort=function(e){return ln(He(this,e))},t.prototype.sortBy=function(e,t){return ln(He(this,t,e))},t.prototype.wasAltered=function(){return this._map.wasAltered()},t.prototype.__iterate=function(e,t){var r=this;return this._map.__iterate((function(t){return e(t,t,r)}),t)},t.prototype.__iterator=function(e,t){return this._map.__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):0===this.size?this.__empty():(this.__ownerID=e,this._map=t,this)},t}(O);Ur.isSet=Dr;var Br,Vr=Ur.prototype;function $r(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function Hr(e,t){var r=Object.create(Vr);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function qr(){return Br||(Br=Hr(Jt()))}Vr[kr]=!0,Vr[n]=Vr.remove,Vr.merge=Vr.concat=Vr.union,Vr.withMutations=Dt,Vr.asImmutable=jt,Vr["@@transducer/init"]=Vr.asMutable=Mt,Vr["@@transducer/step"]=function(e,t){return e.add(t)},Vr["@@transducer/result"]=function(e){return e.asImmutable()},Vr.__empty=qr,Vr.__make=Hr;var zr,Gr=function(e){function t(e,r,n){if(!(this instanceof t))return new t(e,r,n);if(et(0!==n,"Cannot step a Range by 0"),e=e||0,void 0===r&&(r=1/0),n=void 0===n?1:Math.abs(n),r<e&&(n=-n),this._start=e,this._end=r,this._step=n,this.size=Math.max(0,Math.ceil((r-e)/n-1)+1),0===this.size){if(zr)return zr;zr=this}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},t.prototype.get=function(e,t){return this.has(e)?this._start+d(this,e)*this._step:t},t.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},t.prototype.slice=function(e,r){return f(e,r,this.size)?this:(e=h(e,this.size),(r=g(r,this.size))<=e?new t(0,0):new t(this.get(e,this._end),this.get(r,this._end),this._step))},t.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var r=t/this._step;if(r>=0&&r<this.size)return r}return-1},t.prototype.lastIndexOf=function(e){return this.indexOf(e)},t.prototype.__iterate=function(e,t){for(var r=this.size,n=this._step,o=t?this._start+(r-1)*n:this._start,i=0;i!==r&&!1!==e(o,t?r-++i:i++,this);)o+=t?-n:n;return i},t.prototype.__iterator=function(e,t){var r=this.size,n=this._step,o=t?this._start+(r-1)*n:this._start,i=0;return new $((function(){if(i===r)return{value:void 0,done:!0};var s=o;return o+=t?-n:n,H(e,t?r-++i:i++,s)}))},t.prototype.equals=function(e){return e instanceof t?this._start===e._start&&this._end===e._end&&this._step===e._step:jr(this,e)},t}(Z);function Wr(e,t,r){for(var n=rt(t),o=0;o!==n.length;)if((e=ct(e,n[o++],a))===a)return r;return e}function Kr(e,t){return Wr(this,e,t)}function Xr(e,t){return Wr(e,t,a)!==a}function Jr(){tt(this.size);var e={};return this.__iterate((function(t,r){e[r]=t})),e}C.isIterable=_,C.isKeyed=E,C.isIndexed=b,C.isAssociative=T,C.isOrdered=M,C.Iterator=$,Lr(C,{toArray:function(){tt(this.size);var e=new Array(this.size||0),t=E(this),r=0;return this.__iterate((function(n,o){e[r++]=t?[o,n]:n})),e},toIndexedSeq:function(){return new ke(this)},toJS:function(){return Fr(this)},toKeyedSeq:function(){return new xe(this,!0)},toMap:function(){return Ft(this.toKeyedSeq())},toObject:Jr,toOrderedMap:function(){return wr(this.toKeyedSeq())},toOrderedSet:function(){return ln(E(this)?this.valueSeq():this)},toSet:function(){return Ur(E(this)?this.valueSeq():this)},toSetSeq:function(){return new De(this)},toSeq:function(){return b(this)?this.toIndexedSeq():E(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Or(E(this)?this.valueSeq():this)},toList:function(){return cr(E(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return We(this,function(e,t){var r=E(e),n=[e].concat(t).map((function(e){return _(e)?r&&(e=P(e)):e=r?se(e):ae(Array.isArray(e)?e:[e]),e})).filter((function(e){return 0!==e.size}));if(0===n.length)return e;if(1===n.length){var o=n[0];if(o===e||r&&E(o)||b(e)&&b(o))return o}var i=new te(n);return r?i=i.toKeyedSeq():b(e)||(i=i.toSetSeq()),(i=i.flatten(!0)).size=n.reduce((function(e,t){if(void 0!==e){var r=t.size;if(void 0!==r)return e+r}}),0),i}(this,e))},includes:function(e){return this.some((function(t){return fe(t,e)}))},entries:function(){return this.__iterator(F)},every:function(e,t){tt(this.size);var r=!0;return this.__iterate((function(n,o,i){if(!e.call(t,n,o,i))return r=!1,!1})),r},filter:function(e,t){return We(this,Ue(this,e,t,!0))},partition:function(e,t){return function(e,t,r){var n=E(e),o=[[],[]];e.__iterate((function(i,s){o[t.call(r,i,s,e)?1:0].push(n?[s,i]:i)}));var i=Xe(e);return o.map((function(t){return We(e,i(t))}))}(this,e,t)},find:function(e,t,r){var n=this.findEntry(e,t);return n?n[1]:r},forEach:function(e,t){return tt(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){tt(this.size),e=void 0!==e?""+e:",";var t="",r=!0;return this.__iterate((function(n){r?r=!1:t+=e,t+=null!=n?n.toString():""})),t},keys:function(){return this.__iterator(j)},map:function(e,t){return We(this,Le(this,e,t))},reduce:function(e,t,r){return tn(this,e,t,r,arguments.length<2,!1)},reduceRight:function(e,t,r){return tn(this,e,t,r,arguments.length<2,!0)},reverse:function(){return We(this,Fe(this,!0))},slice:function(e,t){return We(this,Be(this,e,t,!0))},some:function(e,t){tt(this.size);var r=!1;return this.__iterate((function(n,o,i){if(e.call(t,n,o,i))return r=!0,!1})),r},sort:function(e){return We(this,He(this,e))},values:function(){return this.__iterator(L)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(e,t){return l(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return function(e,t,r){var n=Ft().asMutable();return e.__iterate((function(o,i){n.update(t.call(r,o,i,e),0,(function(e){return e+1}))})),n.asImmutable()}(this,e,t)},equals:function(e){return jr(this,e)},entrySeq:function(){var e=this;if(e._cache)return new te(e._cache);var t=e.toSeq().map(nn).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(on(e),t)},findEntry:function(e,t,r){var n=r;return this.__iterate((function(r,o,i){if(e.call(t,r,o,i))return n=[o,r],!1})),n},findKey:function(e,t){var r=this.findEntry(e,t);return r&&r[0]},findLast:function(e,t,r){return this.toKeyedSeq().reverse().find(e,t,r)},findLastEntry:function(e,t,r){return this.toKeyedSeq().reverse().findEntry(e,t,r)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(e){return this.find(p,null,e)},flatMap:function(e,t){return We(this,function(e,t,r){var n=Xe(e);return e.toSeq().map((function(o,i){return n(t.call(r,o,i,e))})).flatten(!0)}(this,e,t))},flatten:function(e){return We(this,$e(this,e,!0))},fromEntrySeq:function(){return new Me(this)},get:function(e,t){return this.find((function(t,r){return fe(r,e)}),void 0,t)},getIn:Kr,groupBy:function(e,t){return function(e,t,r){var n=E(e),o=(M(e)?wr():Ft()).asMutable();e.__iterate((function(i,s){o.update(t.call(r,i,s,e),(function(e){return(e=e||[]).push(n?[s,i]:i),e}))}));var i=Xe(e);return o.map((function(t){return We(e,i(t))})).asImmutable()}(this,e,t)},has:function(e){return this.get(e,a)!==a},hasIn:function(e){return Xr(this,e)},isSubset:function(e){return e="function"==typeof e.includes?e:C(e),this.every((function(t){return e.includes(t)}))},isSuperset:function(e){return(e="function"==typeof e.isSubset?e:C(e)).isSubset(this)},keyOf:function(e){return this.findKey((function(t){return fe(t,e)}))},keySeq:function(){return this.toSeq().map(rn).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return qe(this,e)},maxBy:function(e,t){return qe(this,t,e)},min:function(e){return qe(this,e?sn(e):cn)},minBy:function(e,t){return qe(this,t?sn(t):cn,e)},rest:function(){return this.slice(1)},skip:function(e){return 0===e?this:this.slice(Math.max(0,e))},skipLast:function(e){return 0===e?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,t){return We(this,Ve(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(on(e),t)},sortBy:function(e,t){return We(this,He(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,t){return We(this,function(e,t,r){var n=Je(e);return n.__iterateUncached=function(n,o){var i=this;if(o)return this.cacheResult().__iterate(n,o);var s=0;return e.__iterate((function(e,o,a){return t.call(r,e,o,a)&&++s&&n(e,o,i)})),s},n.__iteratorUncached=function(n,o){var i=this;if(o)return this.cacheResult().__iterator(n,o);var s=e.__iterator(F,o),a=!0;return new $((function(){if(!a)return{value:void 0,done:!0};var e=s.next();if(e.done)return e;var o=e.value,c=o[0],u=o[1];return t.call(r,u,c,i)?n===F?e:H(n,c,u,e):(a=!1,{value:void 0,done:!0})}))},n}(this,e,t))},takeUntil:function(e,t){return this.takeWhile(on(e),t)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(e){if(e.size===1/0)return 0;var t=M(e),r=E(e),n=t?1:0;return function(e,t){return t=he(t,3432918353),t=he(t<<15|t>>>-15,461845907),t=he(t<<13|t>>>-13,5),t=he((t=(t+3864292196|0)^e)^t>>>16,2246822507),t=ge((t=he(t^t>>>13,3266489909))^t>>>16)}(e.__iterate(r?t?function(e,t){n=31*n+un(me(e),me(t))|0}:function(e,t){n=n+un(me(e),me(t))|0}:t?function(e){n=31*n+me(e)|0}:function(e){n=n+me(e)|0}),n)}(this))}});var Qr=C.prototype;Qr[y]=!0,Qr[V]=Qr.values,Qr.toJSON=Qr.toArray,Qr.__toStringMapper=st,Qr.inspect=Qr.toSource=function(){return this.toString()},Qr.chain=Qr.flatMap,Qr.contains=Qr.includes,Lr(P,{flip:function(){return We(this,je(this))},mapEntries:function(e,t){var r=this,n=0;return We(this,this.toSeq().map((function(o,i){return e.call(t,[i,o],n++,r)})).fromEntrySeq())},mapKeys:function(e,t){var r=this;return We(this,this.toSeq().flip().map((function(n,o){return e.call(t,n,o,r)})).flip())}});var Yr=P.prototype;Yr[S]=!0,Yr[V]=Qr.entries,Yr.toJSON=Jr,Yr.__toStringMapper=function(e,t){return st(t)+": "+st(e)},Lr(I,{toKeyedSeq:function(){return new xe(this,!1)},filter:function(e,t){return We(this,Ue(this,e,t,!1))},findIndex:function(e,t){var r=this.findEntry(e,t);return r?r[0]:-1},indexOf:function(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return We(this,Fe(this,!1))},slice:function(e,t){return We(this,Be(this,e,t,!1))},splice:function(e,t){var r=arguments.length;if(t=Math.max(t||0,0),0===r||2===r&&!t)return this;e=h(e,e<0?this.count():this.size);var n=this.slice(0,e);return We(this,1===r?n:n.concat(Ze(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var r=this.findLastEntry(e,t);return r?r[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return We(this,$e(this,e,!1))},get:function(e,t){return(e=d(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find((function(t,r){return r===e}),void 0,t)},has:function(e){return(e=d(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return We(this,function(e,t){var r=Je(e);return r.size=e.size&&2*e.size-1,r.__iterateUncached=function(r,n){var o=this,i=0;return e.__iterate((function(e){return(!i||!1!==r(t,i++,o))&&!1!==r(e,i++,o)}),n),i},r.__iteratorUncached=function(r,n){var o,i=e.__iterator(L,n),s=0;return new $((function(){return(!o||s%2)&&(o=i.next()).done?o:s%2?H(r,s++,t):H(r,s++,o.value,o)}))},r}(this,e))},interleave:function(){var e=[this].concat(Ze(arguments)),t=Ge(this.toSeq(),Z.of,e),r=t.flatten(!0);return t.size&&(r.size=t.size*e.length),We(this,r)},keySeq:function(){return Gr(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,t){return We(this,Ve(this,e,t,!1))},zip:function(){return We(this,Ge(this,an,[this].concat(Ze(arguments))))},zipAll:function(){return We(this,Ge(this,an,[this].concat(Ze(arguments)),!0))},zipWith:function(e){var t=Ze(arguments);return t[0]=this,We(this,Ge(this,e,t))}});var Zr=I.prototype;Zr[w]=!0,Zr[D]=!0,Lr(O,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}});var en=O.prototype;function tn(e,t,r,n,o,i){return tt(e.size),e.__iterate((function(e,i,s){o?(o=!1,r=e):r=t.call(n,r,e,i,s)}),i),r}function rn(e,t){return t}function nn(e,t){return[t,e]}function on(e){return function(){return!e.apply(this,arguments)}}function sn(e){return function(){return-e.apply(this,arguments)}}function an(){return Ze(arguments)}function cn(e,t){return e<t?1:e>t?-1:0}function un(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}en.has=Qr.includes,en.contains=en.includes,en.keys=en.values,Lr(Y,Yr),Lr(Z,Zr),Lr(ee,en);var ln=function(e){function t(e){return null==e?hn():Mr(e)?e:hn().withMutations((function(t){var r=O(e);tt(r.size),r.forEach((function(e){return t.add(e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(P(e).keySeq())},t.prototype.toString=function(){return this.__toString("OrderedSet {","}")},t}(Ur);ln.isOrderedSet=Mr;var dn,pn=ln.prototype;function fn(e,t){var r=Object.create(pn);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function hn(){return dn||(dn=fn(Tr()))}pn[D]=!0,pn.zip=Zr.zip,pn.zipWith=Zr.zipWith,pn.zipAll=Zr.zipAll,pn.__empty=hn,pn.__make=fn;var gn={LeftThenRight:-1,RightThenLeft:1},vn=function(e,t){var r;!function(e){if(x(e))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(k(e))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(null===e||"object"!=typeof e)throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}(e);var n=function(i){var s=this;if(i instanceof n)return i;if(!(this instanceof n))return new n(i);if(!r){r=!0;var a=Object.keys(e),c=o._indices={};o._name=t,o._keys=a,o._defaultValues=e;for(var u=0;u<a.length;u++){var l=a[u];c[l]=u,o[l]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+_n(this)+' with property "'+l+'" since that property name is part of the Record API.'):En(o,l)}}return this.__ownerID=void 0,this._values=cr().withMutations((function(e){e.setSize(s._keys.length),P(i).forEach((function(t,r){e.set(s._indices[r],t===s._defaultValues[r]?void 0:t)}))})),this},o=n.prototype=Object.create(mn);return o.constructor=n,t&&(n.displayName=t),n};vn.prototype.toString=function(){for(var e,t=_n(this)+" { ",r=this._keys,n=0,o=r.length;n!==o;n++)t+=(n?", ":"")+(e=r[n])+": "+st(this.get(e));return t+" }"},vn.prototype.equals=function(e){return this===e||x(e)&&Sn(this).equals(Sn(e))},vn.prototype.hashCode=function(){return Sn(this).hashCode()},vn.prototype.has=function(e){return this._indices.hasOwnProperty(e)},vn.prototype.get=function(e,t){if(!this.has(e))return t;var r=this._indices[e],n=this._values.get(r);return void 0===n?this._defaultValues[e]:n},vn.prototype.set=function(e,t){if(this.has(e)){var r=this._values.set(this._indices[e],t===this._defaultValues[e]?void 0:t);if(r!==this._values&&!this.__ownerID)return yn(this,r)}return this},vn.prototype.remove=function(e){return this.set(e)},vn.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:yn(this,e)},vn.prototype.wasAltered=function(){return this._values.wasAltered()},vn.prototype.toSeq=function(){return Sn(this)},vn.prototype.toJS=function(){return Fr(this)},vn.prototype.entries=function(){return this.__iterator(F)},vn.prototype.__iterator=function(e,t){return Sn(this).__iterator(e,t)},vn.prototype.__iterate=function(e,t){return Sn(this).__iterate(e,t)},vn.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._values.__ensureOwner(e);return e?yn(this,t,e):(this.__ownerID=e,this._values=t,this)},vn.isRecord=x,vn.getDescriptiveName=_n;var mn=vn.prototype;function yn(e,t,r){var n=Object.create(Object.getPrototypeOf(e));return n._values=t,n.__ownerID=r,n}function _n(e){return e.constructor.displayName||e.constructor.name||"Record"}function Sn(e){return se(e._keys.map((function(t){return[t,e.get(t)]})))}function En(e,t){try{Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){et(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}catch(e){}}mn[R]=!0,mn[n]=mn.remove,mn.deleteIn=mn.removeIn=mt,mn.getIn=Kr,mn.hasIn=Qr.hasIn,mn.merge=Et,mn.mergeWith=wt,mn.mergeIn=xt,mn.mergeDeep=At,mn.mergeDeepWith=Rt,mn.mergeDeepIn=kt,mn.setIn=gt,mn.update=_t,mn.updateIn=St,mn.withMutations=Dt,mn.asMutable=Mt,mn.asImmutable=jt,mn[V]=mn.entries,mn.toJSON=mn.toObject=Qr.toObject,mn.inspect=mn.toSource=function(){return this.toString()};var wn,bn=function(e){function t(e,r){if(!(this instanceof t))return new t(e,r);if(this._value=e,this.size=void 0===r?1/0:Math.max(0,r),0===this.size){if(wn)return wn;wn=this}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},t.prototype.get=function(e,t){return this.has(e)?this._value:t},t.prototype.includes=function(e){return fe(this._value,e)},t.prototype.slice=function(e,r){var n=this.size;return f(e,r,n)?this:new t(this._value,g(r,n)-h(e,n))},t.prototype.reverse=function(){return this},t.prototype.indexOf=function(e){return fe(this._value,e)?0:-1},t.prototype.lastIndexOf=function(e){return fe(this._value,e)?this.size:-1},t.prototype.__iterate=function(e,t){for(var r=this.size,n=0;n!==r&&!1!==e(this._value,t?r-++n:n++,this););return n},t.prototype.__iterator=function(e,t){var r=this,n=this.size,o=0;return new $((function(){return o===n?{value:void 0,done:!0}:H(e,t?n-++o:o++,r._value)}))},t.prototype.equals=function(e){return e instanceof t?fe(this._value,e._value):jr(e)},t}(Z);function Tn(e,t){return Cn([],t||Pn,e,"",t&&t.length>2?[]:void 0,{"":e})}function Cn(e,t,r,n,o,i){if("string"!=typeof r&&!k(r)&&(J(r)||z(r)||ot(r))){if(~e.indexOf(r))throw new TypeError("Cannot convert circular structure to Immutable");e.push(r),o&&""!==n&&o.push(n);var s=t.call(i,n,Q(r).map((function(n,i){return Cn(e,t,n,i,o,r)})),o&&o.slice());return e.pop(),o&&o.pop(),s}return r}function Pn(e,t){return b(t)?t.toList():E(t)?t.toMap():t.toSet()}var In="4.3.4",On=C;const Nn={version:In,Collection:C,Iterable:C,Seq:Q,Map:Ft,OrderedMap:wr,List:cr,Stack:Or,Set:Ur,OrderedSet:ln,PairSorting:gn,Record:vn,Range:Gr,Repeat:bn,is:fe,fromJS:Tn,hash:me,isImmutable:k,isCollection:_,isKeyed:E,isIndexed:b,isAssociative:T,isOrdered:M,isValueObject:pe,isPlainObject:ot,isSeq:A,isList:ar,isMap:le,isOrderedMap:de,isStack:Ir,isSet:Dr,isOrderedSet:Mr,isRecord:x,get:ct,getIn:Wr,has:at,hasIn:Xr,merge:Tt,mergeDeep:Pt,mergeWith:Ct,mergeDeepWith:It,remove:lt,removeIn:vt,set:dt,setIn:ht,update:yt,updateIn:pt}},1166:function(e,t){!function(e){var t,r="undefined",n=r!==typeof Buffer&&Buffer,o=r!==typeof Uint8Array&&Uint8Array,i=r!==typeof ArrayBuffer&&ArrayBuffer,s=[0,0,0,0,0,0,0,0],a=Array.isArray||function(e){return!!e&&"[object Array]"==Object.prototype.toString.call(e)},c=4294967296;function u(a,u,S){var E=u?0:4,w=u?4:0,b=u?0:3,T=u?1:2,C=u?2:1,P=u?3:0,I=u?v:y,O=u?m:_,N=x.prototype,A="is"+a,R="_"+A;return N.buffer=void 0,N.offset=0,N[R]=!0,N.toNumber=k,N.toString=function(e){var t=this.buffer,r=this.offset,n=M(t,r+E),o=M(t,r+w),i="",s=!S&&2147483648&n;for(s&&(n=~n,o=c-o),e=e||10;;){var a=n%e*c+o;if(n=Math.floor(n/e),o=Math.floor(a/e),i=(a%e).toString(e)+i,!n&&!o)break}return s&&(i="-"+i),i},N.toJSON=k,N.toArray=l,n&&(N.toBuffer=d),o&&(N.toArrayBuffer=p),x[A]=function(e){return!(!e||!e[R])},e[a]=x,x;function x(e,n,a,u){return this instanceof x?function(e,n,a,u,l){o&&i&&(n instanceof i&&(n=new o(n)),u instanceof i&&(u=new o(u))),n||a||u||t?(f(n,a)||(l=a,u=n,a=0,n=new(t||Array)(8)),e.buffer=n,e.offset=a|=0,r!==typeof u&&("string"==typeof u?function(e,t,r,n){var o=0,i=r.length,s=0,a=0;"-"===r[0]&&o++;for(var u=o;o<i;){var l=parseInt(r[o++],n);if(!(l>=0))break;a=a*n+l,s=s*n+Math.floor(a/c),a%=c}u&&(s=~s,a?a=c-a:s++),D(e,t+E,s),D(e,t+w,a)}(n,a,u,l||10):f(u,l)?h(n,a,u,l):"number"==typeof l?(D(n,a+E,u),D(n,a+w,l)):u>0?I(n,a,u):u<0?O(n,a,u):h(n,a,s,0))):e.buffer=g(s,0)}(this,e,n,a,u):new x(e,n,a,u)}function k(){var e=this.buffer,t=this.offset,r=M(e,t+E),n=M(e,t+w);return S||(r|=0),r?r*c+n:n}function D(e,t,r){e[t+P]=255&r,r>>=8,e[t+C]=255&r,r>>=8,e[t+T]=255&r,r>>=8,e[t+b]=255&r}function M(e,t){return 16777216*e[t+b]+(e[t+T]<<16)+(e[t+C]<<8)+e[t+P]}}function l(e){var r=this.buffer,n=this.offset;return t=null,!1!==e&&0===n&&8===r.length&&a(r)?r:g(r,n)}function d(e){var r=this.buffer,o=this.offset;if(t=n,!1!==e&&0===o&&8===r.length&&Buffer.isBuffer(r))return r;var i=new n(8);return h(i,0,r,o),i}function p(e){var r=this.buffer,n=this.offset,s=r.buffer;if(t=o,!1!==e&&0===n&&s instanceof i&&8===s.byteLength)return s;var a=new o(8);return h(a,0,r,n),a.buffer}function f(e,t){var r=e&&e.length;return t|=0,r&&t+8<=r&&"string"!=typeof e[t]}function h(e,t,r,n){t|=0,n|=0;for(var o=0;o<8;o++)e[t++]=255&r[n++]}function g(e,t){return Array.prototype.slice.call(e,t,t+8)}function v(e,t,r){for(var n=t+8;n>t;)e[--n]=255&r,r/=256}function m(e,t,r){var n=t+8;for(r++;n>t;)e[--n]=255&-r^255,r/=256}function y(e,t,r){for(var n=t+8;t<n;)e[t++]=255&r,r/=256}function _(e,t,r){var n=t+8;for(r++;t<n;)e[t++]=255&-r^255,r/=256}u("Uint64BE",!0,!0),u("Int64BE",!0,!1),u("Uint64LE",!1,!0),u("Int64LE",!1,!1)}("string"!=typeof t.nodeName?t:this||{})},7031:(e,t,r)=>{"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r(579),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._executor=t}return n(e,[{key:"then",value:function(e,t){var r=this;return this._result||(this._result=new Promise((function(e,t){o((function(){try{r._executor(e,t)}catch(e){t(e)}}))}))),this._result.then(e,t)}},{key:"catch",value:function(e){return this.then(void 0,e)}}]),e}();t.default=i,Object.setPrototypeOf?(Object.setPrototypeOf(i.prototype,Promise.prototype),Object.setPrototypeOf(i,Promise)):(i.prototype.__proto__=Promise.prototype,i.__proto__=Promise),e.exports=i,e.exports.default=i},8486:(e,t,r)=>{"use strict";const n=r(4411),o=Symbol("max"),i=Symbol("length"),s=Symbol("lengthCalculator"),a=Symbol("allowStale"),c=Symbol("maxAge"),u=Symbol("dispose"),l=Symbol("noDisposeOnSet"),d=Symbol("lruList"),p=Symbol("cache"),f=Symbol("updateAgeOnGet"),h=()=>1,g=(e,t,r)=>{const n=e[p].get(t);if(n){const t=n.value;if(v(e,t)){if(y(e,n),!e[a])return}else r&&(e[f]&&(n.value.now=Date.now()),e[d].unshiftNode(n));return t.value}},v=(e,t)=>{if(!t||!t.maxAge&&!e[c])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[c]&&r>e[c]},m=e=>{if(e[i]>e[o])for(let t=e[d].tail;e[i]>e[o]&&null!==t;){const r=t.prev;y(e,t),t=r}},y=(e,t)=>{if(t){const r=t.value;e[u]&&e[u](r.key,r.value),e[i]-=r.length,e[p].delete(r.key),e[d].removeNode(t)}};class _{constructor(e,t,r,n,o){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=o||0}}const S=(e,t,r,n)=>{let o=r.value;v(e,o)&&(y(e,r),e[a]||(o=void 0)),o&&t.call(n,o.value,o.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[o]=e.max||1/0;const t=e.length||h;if(this[s]="function"!=typeof t?h:t,this[a]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[c]=e.maxAge||0,this[u]=e.dispose,this[l]=e.noDisposeOnSet||!1,this[f]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[o]=e||1/0,m(this)}get max(){return this[o]}set allowStale(e){this[a]=!!e}get allowStale(){return this[a]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[c]=e,m(this)}get maxAge(){return this[c]}set lengthCalculator(e){"function"!=typeof e&&(e=h),e!==this[s]&&(this[s]=e,this[i]=0,this[d].forEach((e=>{e.length=this[s](e.value,e.key),this[i]+=e.length}))),m(this)}get lengthCalculator(){return this[s]}get length(){return this[i]}get itemCount(){return this[d].length}rforEach(e,t){t=t||this;for(let r=this[d].tail;null!==r;){const n=r.prev;S(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[d].head;null!==r;){const n=r.next;S(this,e,r,t),r=n}}keys(){return this[d].toArray().map((e=>e.key))}values(){return this[d].toArray().map((e=>e.value))}reset(){this[u]&&this[d]&&this[d].length&&this[d].forEach((e=>this[u](e.key,e.value))),this[p]=new Map,this[d]=new n,this[i]=0}dump(){return this[d].map((e=>!v(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[d]}set(e,t,r){if((r=r||this[c])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const n=r?Date.now():0,a=this[s](t,e);if(this[p].has(e)){if(a>this[o])return y(this,this[p].get(e)),!1;const s=this[p].get(e).value;return this[u]&&(this[l]||this[u](e,s.value)),s.now=n,s.maxAge=r,s.value=t,this[i]+=a-s.length,s.length=a,this.get(e),m(this),!0}const f=new _(e,t,a,n,r);return f.length>this[o]?(this[u]&&this[u](e,t),!1):(this[i]+=f.length,this[d].unshift(f),this[p].set(e,this[d].head),m(this),!0)}has(e){if(!this[p].has(e))return!1;const t=this[p].get(e).value;return!v(this,t)}get(e){return g(this,e,!0)}peek(e){return g(this,e,!1)}pop(){const e=this[d].tail;return e?(y(this,e),e.value):null}del(e){y(this,this[p].get(e))}load(e){this.reset();const t=Date.now();for(let r=e.length-1;r>=0;r--){const n=e[r],o=n.e||0;if(0===o)this.set(n.k,n.v);else{const e=o-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[p].forEach(((e,t)=>g(this,t,!1)))}}},7323:(e,t,r)=>{t.encode=r(1764).encode,t.decode=r(5299).decode,t.Encoder=r(2883).Encoder,t.Decoder=r(7441).Decoder,t.createEncodeStream=r(7621).createEncodeStream,t.createDecodeStream=r(5636).createDecodeStream,t.createCodec=r(7832).createCodec,t.codec=r(5766).codec},8990:function(e){function t(e){return e&&e.isBuffer&&e}e.exports=t("undefined"!=typeof Buffer&&Buffer)||t(this.Buffer)||t("undefined"!=typeof window&&window.Buffer)||this.Buffer},1947:(e,t)=>{t.copy=function(e,t,r,n){var o;r||(r=0),n||0===n||(n=this.length),t||(t=0);var i=n-r;if(e===this&&r<t&&t<n)for(o=i-1;o>=0;o--)e[o+t]=this[o+r];else for(o=0;o<i;o++)e[o+t]=this[o+r];return i},t.toString=function(e,t,r){var n=this,o=0|t;r||(r=n.length);for(var i="",s=0;o<r;)(s=n[o++])<128?i+=String.fromCharCode(s):(192==(224&s)?s=(31&s)<<6|63&n[o++]:224==(240&s)?s=(15&s)<<12|(63&n[o++])<<6|63&n[o++]:240==(248&s)&&(s=(7&s)<<18|(63&n[o++])<<12|(63&n[o++])<<6|63&n[o++]),s>=65536?(s-=65536,i+=String.fromCharCode(55296+(s>>>10),56320+(1023&s))):i+=String.fromCharCode(s));return i},t.write=function(e,t){for(var r=this,n=t||(t|=0),o=e.length,i=0,s=0;s<o;)(i=e.charCodeAt(s++))<128?r[n++]=i:i<2048?(r[n++]=192|i>>>6,r[n++]=128|63&i):i<55296||i>57343?(r[n++]=224|i>>>12,r[n++]=128|i>>>6&63,r[n++]=128|63&i):(i=65536+(i-55296<<10|e.charCodeAt(s++)-56320),r[n++]=240|i>>>18,r[n++]=128|i>>>12&63,r[n++]=128|i>>>6&63,r[n++]=128|63&i);return n-t}},2683:(e,t,r)=>{var n=r(6895),o=e.exports=i(0);function i(e){return new Array(e)}o.alloc=i,o.concat=n.concat,o.from=function(e){if(!n.isBuffer(e)&&n.isView(e))e=n.Uint8Array.from(e);else if(n.isArrayBuffer(e))e=new Uint8Array(e);else{if("string"==typeof e)return n.from.call(o,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(e)}},4580:(e,t,r)=>{var n=r(6895),o=n.global,i=e.exports=n.hasBuffer?s(0):[];function s(e){return new o(e)}i.alloc=n.hasBuffer&&o.alloc||s,i.concat=n.concat,i.from=function(e){if(!n.isBuffer(e)&&n.isView(e))e=n.Uint8Array.from(e);else if(n.isArrayBuffer(e))e=new Uint8Array(e);else{if("string"==typeof e)return n.from.call(i,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return o.from&&1!==o.from.length?o.from(e):new o(e)}},3190:(e,t,r)=>{var n,o=r(1947);t.copy=u,t.slice=l,t.toString=function(e,t,r){return(!a&&i.isBuffer(this)?this.toString:o.toString).apply(this,arguments)},t.write=(n="write",function(){return(this[n]||o[n]).apply(this,arguments)});var i=r(6895),s=i.global,a=i.hasBuffer&&"TYPED_ARRAY_SUPPORT"in s,c=a&&!s.TYPED_ARRAY_SUPPORT;function u(e,t,r,n){var s=i.isBuffer(this),a=i.isBuffer(e);if(s&&a)return this.copy(e,t,r,n);if(c||s||a||!i.isView(this)||!i.isView(e))return o.copy.call(this,e,t,r,n);var u=r||null!=n?l.call(this,r,n):this;return e.set(u,t),u.length}function l(e,t){var r=this.slice||!c&&this.subarray;if(r)return r.call(this,e,t);var n=i.alloc.call(this,t-e);return u.call(this,n,0,e,t),n}},8553:(e,t,r)=>{var n=r(6895),o=e.exports=n.hasArrayBuffer?i(0):[];function i(e){return new Uint8Array(e)}o.alloc=i,o.concat=n.concat,o.from=function(e){if(n.isView(e)){var t=e.byteOffset,r=e.byteLength;(e=e.buffer).byteLength!==r&&(e.slice?e=e.slice(t,t+r):(e=new Uint8Array(e)).byteLength!==r&&(e=Array.prototype.slice.call(e,t,t+r)))}else{if("string"==typeof e)return n.from.call(o,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return new Uint8Array(e)}},6895:(e,t,r)=>{var n=t.global=r(8990),o=t.hasBuffer=n&&!!n.isBuffer,i=t.hasArrayBuffer="undefined"!=typeof ArrayBuffer,s=t.isArray=r(7732);t.isArrayBuffer=i?function(e){return e instanceof ArrayBuffer||h(e)}:m;var a=t.isBuffer=o?n.isBuffer:m,c=t.isView=i?ArrayBuffer.isView||y("ArrayBuffer","buffer"):m;t.alloc=f,t.concat=function(e,r){r||(r=0,Array.prototype.forEach.call(e,(function(e){r+=e.length})));var n=this!==t&&this||e[0],o=f.call(n,r),i=0;return Array.prototype.forEach.call(e,(function(e){i+=p.copy.call(e,o,i)})),o},t.from=function(e){return"string"==typeof e?g.call(this,e):v(this).from(e)};var u=t.Array=r(2683),l=t.Buffer=r(4580),d=t.Uint8Array=r(8553),p=t.prototype=r(3190);function f(e){return v(this).alloc(e)}var h=y("ArrayBuffer");function g(e){var t=3*e.length,r=f.call(this,t),n=p.write.call(r,e);return t!==n&&(r=p.slice.call(r,0,n)),r}function v(e){return a(e)?l:c(e)?d:s(e)?u:o?l:i?d:u}function m(){return!1}function y(e,t){return e="[object "+e+"]",function(r){return null!=r&&{}.toString.call(t?r[t]:r)===e}}},1877:(e,t,r)=>{var n=r(7732);t.createCodec=a,t.install=function(e){for(var t in e)i.prototype[t]=s(i.prototype[t],e[t])},t.filter=function(e){return n(e)?function(e){return e=e.slice(),function(r){return e.reduce(t,r)};function t(e,t){return t(e)}}(e):e};var o=r(6895);function i(e){if(!(this instanceof i))return new i(e);this.options=e,this.init()}function s(e,t){return e&&t?function(){return e.apply(this,arguments),t.apply(this,arguments)}:e||t}function a(e){return new i(e)}i.prototype.init=function(){var e=this.options;return e&&e.uint8array&&(this.bufferish=o.Uint8Array),this},t.preset=a({preset:!0})},5766:(e,t,r)=>{r(7350),r(5312),t.codec={preset:r(1877).preset}},8170:(e,t,r)=>{t.T=o;var n=r(7350).preset;function o(e){if(!(this instanceof o))return new o(e);if(e&&(this.options=e,e.codec)){var t=this.codec=e.codec;t.bufferish&&(this.bufferish=t.bufferish)}}r(6822).k.mixin(o.prototype),o.prototype.codec=n,o.prototype.fetch=function(){return this.codec.decode(this)}},5636:(e,t,r)=>{t.createDecodeStream=a;var n=r(3837),o=r(2781).Transform,i=r(8170).T;n.inherits(a,o);var s={objectMode:!0};function a(e){if(!(this instanceof a))return new a(e);e?e.objectMode=!0:e=s,o.call(this,e);var t=this;(this.decoder=new i(e)).push=function(e){t.push(e)}}a.prototype._transform=function(e,t,r){this.decoder.write(e),this.decoder.flush(),r&&r()}},5299:(e,t,r)=>{t.decode=function(e,t){var r=new n(t);return r.write(e),r.read()};var n=r(8170).T},7441:(e,t,r)=>{t.Decoder=i;var n=r(3258),o=r(8170).T;function i(e){if(!(this instanceof i))return new i(e);o.call(this,e)}i.prototype=new o,n.mixin(i.prototype),i.prototype.decode=function(e){arguments.length&&this.write(e),this.flush()},i.prototype.push=function(e){this.emit("data",e)},i.prototype.end=function(e){this.decode(e),this.emit("end")}},2517:(e,t,r)=>{t.F=o;var n=r(5312).preset;function o(e){if(!(this instanceof o))return new o(e);if(e&&(this.options=e,e.codec)){var t=this.codec=e.codec;t.bufferish&&(this.bufferish=t.bufferish)}}r(6822).I.mixin(o.prototype),o.prototype.codec=n,o.prototype.write=function(e){this.codec.encode(this,e)}},7621:(e,t,r)=>{t.createEncodeStream=a;var n=r(3837),o=r(2781).Transform,i=r(2517).F;n.inherits(a,o);var s={objectMode:!0};function a(e){if(!(this instanceof a))return new a(e);e?e.objectMode=!0:e=s,o.call(this,e);var t=this;(this.encoder=new i(e)).push=function(e){t.push(e)}}a.prototype._transform=function(e,t,r){this.encoder.write(e),r&&r()},a.prototype._flush=function(e){this.encoder.flush(),e&&e()}},1764:(e,t,r)=>{t.encode=function(e,t){var r=new n(t);return r.write(e),r.read()};var n=r(2517).F},2883:(e,t,r)=>{t.Encoder=i;var n=r(3258),o=r(2517).F;function i(e){if(!(this instanceof i))return new i(e);o.call(this,e)}i.prototype=new o,n.mixin(i.prototype),i.prototype.encode=function(e){this.write(e),this.emit("data",this.read())},i.prototype.end=function(e){arguments.length&&this.encode(e),this.flush(),this.emit("end")}},6083:(e,t,r)=>{t.S=function e(t,r){if(!(this instanceof e))return new e(t,r);this.buffer=n.from(t),this.type=r};var n=r(6895)},9431:(e,t,r)=>{t.setExtPackers=function(e){e.addExtPacker(14,Error,[d,c]),e.addExtPacker(1,EvalError,[d,c]),e.addExtPacker(2,RangeError,[d,c]),e.addExtPacker(3,ReferenceError,[d,c]),e.addExtPacker(4,SyntaxError,[d,c]),e.addExtPacker(5,TypeError,[d,c]),e.addExtPacker(6,URIError,[d,c]),e.addExtPacker(10,RegExp,[l,c]),e.addExtPacker(11,Boolean,[u,c]),e.addExtPacker(12,String,[u,c]),e.addExtPacker(13,Date,[Number,c]),e.addExtPacker(15,Number,[u,c]),"undefined"!=typeof Uint8Array&&(e.addExtPacker(17,Int8Array,s),e.addExtPacker(18,Uint8Array,s),e.addExtPacker(19,Int16Array,s),e.addExtPacker(20,Uint16Array,s),e.addExtPacker(21,Int32Array,s),e.addExtPacker(22,Uint32Array,s),e.addExtPacker(23,Float32Array,s),"undefined"!=typeof Float64Array&&e.addExtPacker(24,Float64Array,s),"undefined"!=typeof Uint8ClampedArray&&e.addExtPacker(25,Uint8ClampedArray,s),e.addExtPacker(26,ArrayBuffer,s),e.addExtPacker(29,DataView,s)),o.hasBuffer&&e.addExtPacker(27,i,o.from)};var n,o=r(6895),i=o.global,s=o.Uint8Array.from,a={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function c(e){return n||(n=r(1764).encode),n(e)}function u(e){return e.valueOf()}function l(e){(e=RegExp.prototype.toString.call(e).split("/")).shift();var t=[e.pop()];return t.unshift(e.join("/")),t}function d(e){var t={};for(var r in a)t[r]=e[r];return t}},6600:(e,t,r)=>{t.setExtUnpackers=function(e){e.addExtUnpacker(14,[a,u(Error)]),e.addExtUnpacker(1,[a,u(EvalError)]),e.addExtUnpacker(2,[a,u(RangeError)]),e.addExtUnpacker(3,[a,u(ReferenceError)]),e.addExtUnpacker(4,[a,u(SyntaxError)]),e.addExtUnpacker(5,[a,u(TypeError)]),e.addExtUnpacker(6,[a,u(URIError)]),e.addExtUnpacker(10,[a,c]),e.addExtUnpacker(11,[a,l(Boolean)]),e.addExtUnpacker(12,[a,l(String)]),e.addExtUnpacker(13,[a,l(Date)]),e.addExtUnpacker(15,[a,l(Number)]),"undefined"!=typeof Uint8Array&&(e.addExtUnpacker(17,l(Int8Array)),e.addExtUnpacker(18,l(Uint8Array)),e.addExtUnpacker(19,[d,l(Int16Array)]),e.addExtUnpacker(20,[d,l(Uint16Array)]),e.addExtUnpacker(21,[d,l(Int32Array)]),e.addExtUnpacker(22,[d,l(Uint32Array)]),e.addExtUnpacker(23,[d,l(Float32Array)]),"undefined"!=typeof Float64Array&&e.addExtUnpacker(24,[d,l(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&e.addExtUnpacker(25,l(Uint8ClampedArray)),e.addExtUnpacker(26,d),e.addExtUnpacker(29,[d,l(DataView)])),o.hasBuffer&&e.addExtUnpacker(27,l(i))};var n,o=r(6895),i=o.global,s={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function a(e){return n||(n=r(5299).decode),n(e)}function c(e){return RegExp.apply(null,e)}function u(e){return function(t){var r=new e;for(var n in s)r[n]=t[n];return r}}function l(e){return function(t){return new e(t)}}function d(e){return new Uint8Array(e).buffer}},7832:(e,t,r)=>{r(7350),r(5312),t.createCodec=r(1877).createCodec},6822:(e,t,r)=>{t.k=i,t.I=s;var n=r(6895),o="BUFFER_SHORTAGE";function i(){if(!(this instanceof i))return new i}function s(){if(!(this instanceof s))return new s}function a(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function c(e){(this.buffers||(this.buffers=[])).push(e)}function u(e){return function(t){for(var r in e)t[r]=e[r];return t}}i.mixin=u({bufferish:n,write:function(e){var t=this.offset?n.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=t?e?this.bufferish.concat([t,e]):t:e,this.offset=0},fetch:function(){throw new Error("method not implemented: fetch()")},flush:function(){for(;this.offset<this.buffer.length;){var e,t=this.offset;try{e=this.fetch()}catch(e){if(e&&e.message!=o)throw e;this.offset=t;break}this.push(e)}},push:c,pull:function(){return(this.buffers||(this.buffers=[])).shift()},read:a,reserve:function(e){var t=this.offset,r=t+e;if(r>this.buffer.length)throw new Error(o);return this.offset=r,t},offset:0}),i.mixin(i.prototype),s.mixin=u({bufferish:n,write:function(){throw new Error("method not implemented: write()")},fetch:function(){var e=this.start;if(e<this.offset){var t=this.start=this.offset;return n.prototype.slice.call(this.buffer,e,t)}},flush:function(){for(;this.start<this.offset;){var e=this.fetch();e&&this.push(e)}},push:c,pull:function(){var e=this.buffers||(this.buffers=[]),t=e.length>1?this.bufferish.concat(e):e[0];return e.length=0,t},read:a,reserve:function(e){var t=0|e;if(this.buffer){var r=this.buffer.length,n=0|this.offset,o=n+t;if(o<r)return this.offset=o,n;this.flush(),e=Math.max(e,Math.min(2*r,this.maxBufferSize))}return e=Math.max(e,this.minBufferSize),this.buffer=this.bufferish.alloc(e),this.start=0,this.offset=t,0},send:function(e){var t=e.length;if(t>this.minBufferSize)this.flush(),this.push(e);else{var r=this.reserve(t);n.prototype.copy.call(e,this.buffer,r)}},maxBufferSize:65536,minBufferSize:2048,offset:0,start:0}),s.mixin(s.prototype)},7350:(e,t,r)=>{var n=r(6083).S,o=r(6600),i=r(6076).readUint8,s=r(5738),a=r(1877);function c(){var e=this.options;return this.decode=function(e){var t=s.getReadToken(e);return function(e){var r=i(e),n=t[r];if(!n)throw new Error("Invalid type: "+(r?"0x"+r.toString(16):r));return n(e)}}(e),e&&e.preset&&o.setExtUnpackers(this),this}a.install({addExtUnpacker:function(e,t){(this.extUnpackers||(this.extUnpackers=[]))[e]=a.filter(t)},getExtUnpacker:function(e){return(this.extUnpackers||(this.extUnpackers=[]))[e]||function(t){return new n(t,e)}},init:c}),t.preset=c.call(a.preset)},6076:(e,t,r)=>{var n=r(645),o=r(1166),i=o.Uint64BE,s=o.Int64BE;t.getReadFormat=function(e){var t=a.hasArrayBuffer&&e&&e.binarraybuffer,r=e&&e.int64;return{map:u&&e&&e.usemap?p:d,array:f,str:h,bin:t?v:g,ext:m,uint8:y,uint16:S,uint32:w,uint64:T(8,r?I:C),int8:_,int16:E,int32:b,int64:T(8,r?O:P),float32:T(4,N),float64:T(8,A)}},t.readUint8=y;var a=r(6895),c=r(3190),u="undefined"!=typeof Map,l=!0;function d(e,t){var r,n={},o=new Array(t),i=new Array(t),s=e.codec.decode;for(r=0;r<t;r++)o[r]=s(e),i[r]=s(e);for(r=0;r<t;r++)n[o[r]]=i[r];return n}function p(e,t){var r,n=new Map,o=new Array(t),i=new Array(t),s=e.codec.decode;for(r=0;r<t;r++)o[r]=s(e),i[r]=s(e);for(r=0;r<t;r++)n.set(o[r],i[r]);return n}function f(e,t){for(var r=new Array(t),n=e.codec.decode,o=0;o<t;o++)r[o]=n(e);return r}function h(e,t){var r=e.reserve(t),n=r+t;return c.toString.call(e.buffer,"utf-8",r,n)}function g(e,t){var r=e.reserve(t),n=r+t,o=c.slice.call(e.buffer,r,n);return a.from(o)}function v(e,t){var r=e.reserve(t),n=r+t,o=c.slice.call(e.buffer,r,n);return a.Uint8Array.from(o).buffer}function m(e,t){var r=e.reserve(t+1),n=e.buffer[r++],o=r+t,i=e.codec.getExtUnpacker(n);if(!i)throw new Error("Invalid ext type: "+(n?"0x"+n.toString(16):n));return i(c.slice.call(e.buffer,r,o))}function y(e){var t=e.reserve(1);return e.buffer[t]}function _(e){var t=e.reserve(1),r=e.buffer[t];return 128&r?r-256:r}function S(e){var t=e.reserve(2),r=e.buffer;return r[t++]<<8|r[t]}function E(e){var t=e.reserve(2),r=e.buffer,n=r[t++]<<8|r[t];return 32768&n?n-65536:n}function w(e){var t=e.reserve(4),r=e.buffer;return 16777216*r[t++]+(r[t++]<<16)+(r[t++]<<8)+r[t]}function b(e){var t=e.reserve(4),r=e.buffer;return r[t++]<<24|r[t++]<<16|r[t++]<<8|r[t]}function T(e,t){return function(r){var n=r.reserve(e);return t.call(r.buffer,n,l)}}function C(e){return new i(this,e).toNumber()}function P(e){return new s(this,e).toNumber()}function I(e){return new i(this,e)}function O(e){return new s(this,e)}function N(e){return n.read(this,e,!1,23,4)}function A(e){return n.read(this,e,!1,52,8)}},5738:(e,t,r)=>{var n=r(6076);function o(e){var t,r=new Array(256);for(t=0;t<=127;t++)r[t]=i(t);for(t=128;t<=143;t++)r[t]=a(t-128,e.map);for(t=144;t<=159;t++)r[t]=a(t-144,e.array);for(t=160;t<=191;t++)r[t]=a(t-160,e.str);for(r[192]=i(null),r[193]=null,r[194]=i(!1),r[195]=i(!0),r[196]=s(e.uint8,e.bin),r[197]=s(e.uint16,e.bin),r[198]=s(e.uint32,e.bin),r[199]=s(e.uint8,e.ext),r[200]=s(e.uint16,e.ext),r[201]=s(e.uint32,e.ext),r[202]=e.float32,r[203]=e.float64,r[204]=e.uint8,r[205]=e.uint16,r[206]=e.uint32,r[207]=e.uint64,r[208]=e.int8,r[209]=e.int16,r[210]=e.int32,r[211]=e.int64,r[212]=a(1,e.ext),r[213]=a(2,e.ext),r[214]=a(4,e.ext),r[215]=a(8,e.ext),r[216]=a(16,e.ext),r[217]=s(e.uint8,e.str),r[218]=s(e.uint16,e.str),r[219]=s(e.uint32,e.str),r[220]=s(e.uint16,e.array),r[221]=s(e.uint32,e.array),r[222]=s(e.uint16,e.map),r[223]=s(e.uint32,e.map),t=224;t<=255;t++)r[t]=i(t-256);return r}function i(e){return function(){return e}}function s(e,t){return function(r){var n=e(r);return t(r,n)}}function a(e,t){return function(r){return t(r,e)}}t.getReadToken=function(e){var t=n.getReadFormat(e);return e&&e.useraw?function(e){var t,r=o(e).slice();for(r[217]=r[196],r[218]=r[197],r[219]=r[198],t=160;t<=191;t++)r[t]=a(t-160,e.bin);return r}(t):o(t)}},5312:(e,t,r)=>{var n=r(6083).S,o=r(9431),i=r(5943),s=r(1877);function a(){var e=this.options;return this.encode=function(e){var t=i.getWriteType(e);return function(e,r){var n=t[typeof r];if(!n)throw new Error('Unsupported type "'+typeof r+'": '+r);n(e,r)}}(e),e&&e.preset&&o.setExtPackers(this),this}s.install({addExtPacker:function(e,t,r){r=s.filter(r);var o=t.name;function i(t){return r&&(t=r(t)),new n(t,e)}o&&"Object"!==o?(this.extPackers||(this.extPackers={}))[o]=i:(this.extEncoderList||(this.extEncoderList=[])).unshift([t,i])},getExtPacker:function(e){var t=this.extPackers||(this.extPackers={}),r=e.constructor,n=r&&r.name&&t[r.name];if(n)return n;for(var o=this.extEncoderList||(this.extEncoderList=[]),i=o.length,s=0;s<i;s++){var a=o[s];if(r===a[0])return a[1]}},init:a}),t.preset=a.call(s.preset)},1598:(e,t,r)=>{var n=r(645),o=r(1166),i=o.Uint64BE,s=o.Int64BE,a=r(9370).w,c=r(6895),u=c.global,l=c.hasBuffer&&"TYPED_ARRAY_SUPPORT"in u&&!u.TYPED_ARRAY_SUPPORT,d=c.hasBuffer&&u.prototype||{};function p(){var e=a.slice();return e[196]=f(196),e[197]=h(197),e[198]=g(198),e[199]=f(199),e[200]=h(200),e[201]=g(201),e[202]=v(202,4,d.writeFloatBE||_,!0),e[203]=v(203,8,d.writeDoubleBE||S,!0),e[204]=f(204),e[205]=h(205),e[206]=g(206),e[207]=v(207,8,m),e[208]=f(208),e[209]=h(209),e[210]=g(210),e[211]=v(211,8,y),e[217]=f(217),e[218]=h(218),e[219]=g(219),e[220]=h(220),e[221]=g(221),e[222]=h(222),e[223]=g(223),e}function f(e){return function(t,r){var n=t.reserve(2),o=t.buffer;o[n++]=e,o[n]=r}}function h(e){return function(t,r){var n=t.reserve(3),o=t.buffer;o[n++]=e,o[n++]=r>>>8,o[n]=r}}function g(e){return function(t,r){var n=t.reserve(5),o=t.buffer;o[n++]=e,o[n++]=r>>>24,o[n++]=r>>>16,o[n++]=r>>>8,o[n]=r}}function v(e,t,r,n){return function(o,i){var s=o.reserve(t+1);o.buffer[s++]=e,r.call(o.buffer,i,s,n)}}function m(e,t){new i(this,t,e)}function y(e,t){new s(this,t,e)}function _(e,t){n.write(this,e,t,!1,23,4)}function S(e,t){n.write(this,e,t,!1,52,8)}t.getWriteToken=function(e){return e&&e.uint8array?((t=p())[202]=v(202,4,_),t[203]=v(203,8,S),t):l||c.hasBuffer&&e&&e.safe?function(){var e=a.slice();return e[196]=v(196,1,u.prototype.writeUInt8),e[197]=v(197,2,u.prototype.writeUInt16BE),e[198]=v(198,4,u.prototype.writeUInt32BE),e[199]=v(199,1,u.prototype.writeUInt8),e[200]=v(200,2,u.prototype.writeUInt16BE),e[201]=v(201,4,u.prototype.writeUInt32BE),e[202]=v(202,4,u.prototype.writeFloatBE),e[203]=v(203,8,u.prototype.writeDoubleBE),e[204]=v(204,1,u.prototype.writeUInt8),e[205]=v(205,2,u.prototype.writeUInt16BE),e[206]=v(206,4,u.prototype.writeUInt32BE),e[207]=v(207,8,m),e[208]=v(208,1,u.prototype.writeInt8),e[209]=v(209,2,u.prototype.writeInt16BE),e[210]=v(210,4,u.prototype.writeInt32BE),e[211]=v(211,8,y),e[217]=v(217,1,u.prototype.writeUInt8),e[218]=v(218,2,u.prototype.writeUInt16BE),e[219]=v(219,4,u.prototype.writeUInt32BE),e[220]=v(220,2,u.prototype.writeUInt16BE),e[221]=v(221,4,u.prototype.writeUInt32BE),e[222]=v(222,2,u.prototype.writeUInt16BE),e[223]=v(223,4,u.prototype.writeUInt32BE),e}():p();var t}},5943:(e,t,r)=>{var n=r(7732),o=r(1166),i=o.Uint64BE,s=o.Int64BE,a=r(6895),c=r(3190),u=r(1598),l=r(9370).w,d=r(6083).S,p="undefined"!=typeof Uint8Array,f="undefined"!=typeof Map,h=[];h[1]=212,h[2]=213,h[4]=214,h[8]=215,h[16]=216,t.getWriteType=function(e){var t,r=u.getWriteToken(e),o=e&&e.useraw,g=p&&e&&e.binarraybuffer,v=g?a.isArrayBuffer:a.isBuffer,m=g?function(e,t){E(e,new Uint8Array(t))}:E,y=f&&e&&e.usemap?function(e,t){if(!(t instanceof Map))return w(e,t);var n=t.size;r[n<16?128+n:n<=65535?222:223](e,n);var o=e.codec.encode;t.forEach((function(t,r,n){o(e,r),o(e,t)}))}:w;return{boolean:function(e,t){r[t?195:194](e,t)},function:S,number:function(e,t){var n=0|t;t===n?r[-32<=n&&n<=127?255&n:0<=n?n<=255?204:n<=65535?205:206:-128<=n?208:-32768<=n?209:210](e,n):r[203](e,t)},object:o?function(e,t){if(v(t))return function(e,t){var n=t.length;r[n<32?160+n:n<=65535?218:219](e,n),e.send(t)}(e,t);_(e,t)}:_,string:(t=o?function(e){return e<32?1:e<=65535?3:5}:function(e){return e<32?1:e<=255?2:e<=65535?3:5},function(e,n){var o=n.length,i=5+3*o;e.offset=e.reserve(i);var s=e.buffer,a=t(o),u=e.offset+a;o=c.write.call(s,n,u);var l=t(o);if(a!==l){var d=u+l-a,p=u+o;c.copy.call(s,s,d,u,p)}r[1===l?160+o:l<=3?215+l:219](e,o),e.offset+=o}),symbol:S,undefined:S};function _(e,t){if(null===t)return S(e,t);if(v(t))return m(e,t);if(n(t))return function(e,t){var n=t.length;r[n<16?144+n:n<=65535?220:221](e,n);for(var o=e.codec.encode,i=0;i<n;i++)o(e,t[i])}(e,t);if(i.isUint64BE(t))return function(e,t){r[207](e,t.toArray())}(e,t);if(s.isInt64BE(t))return function(e,t){r[211](e,t.toArray())}(e,t);var o=e.codec.getExtPacker(t);if(o&&(t=o(t)),t instanceof d)return function(e,t){var n=t.buffer,o=n.length,i=h[o]||(o<255?199:o<=65535?200:201);r[i](e,o),l[t.type](e),e.send(n)}(e,t);y(e,t)}function S(e,t){r[192](e,t)}function E(e,t){var n=t.length;r[n<255?196:n<=65535?197:198](e,n),e.send(t)}function w(e,t){var n=Object.keys(t),o=n.length;r[o<16?128+o:o<=65535?222:223](e,o);var i=e.codec.encode;n.forEach((function(r){i(e,r),i(e,t[r])}))}}},9370:(e,t)=>{for(var r=t.w=new Array(256),n=0;n<=255;n++)r[n]=o(n);function o(e){return function(t){var r=t.reserve(1);t.buffer[r]=e}}},7732:e=>{var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},1588:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelClass=t.Channel=void 0;const n=r(9593),o=r(2781),i=r(5011),s=r(1216),a=r(9454),c=r(7312),u=r(7528),l=r(5458);class d{get id(){return this.qualifiedId.id}constructor(e){this._isDisposed=!1,this.qualifiedId=e}get isDisposed(){return this._isDisposed}dispose(e){this._isDisposed=!0}}t.Channel=d,t.ChannelClass=class extends d{constructor(e,t,r){super(t),this._acceptance=new s.Deferred,this._completion=new s.Deferred,this.remoteWindowFilled=0;const n=this;switch(this.name=r.name,t.source){case u.ChannelSource.Local:this.localWindowSize=r.remoteWindowSize;break;case u.ChannelSource.Remote:this.remoteWindowSize=r.remoteWindowSize;break;case u.ChannelSource.Seeded:this.remoteWindowSize=r.remoteWindowSize,this.localWindowSize=r.remoteWindowSize;break;default:throw new Error("Channel source not recognized.")}this._multiplexingStream=e,this.remoteWindowHasCapacity=new s.Deferred,this._multiplexingStream.backpressureSupportEnabled&&!this.remoteWindowSize||this.remoteWindowHasCapacity.resolve(),this._duplex=new o.Duplex({async write(r,o,s){let u;try{let o=Buffer.from(r);for(;o.length>0;){let r=Math.min(o.length,c.MultiplexingStream.framePayloadMaxLength);if(n._multiplexingStream.backpressureSupportEnabled){if(await n.remoteWindowHasCapacity.promise,!n.remoteWindowSize)throw new Error("Remote window size unknown.");r=Math.min(n.remoteWindowSize-n.remoteWindowFilled,r)}n.onTransmittingBytes(r);const s=new a.FrameHeader(i.ControlCode.content,t);await e.sendFrameAsync(s,o.slice(0,r)),o=o.slice(r)}}catch(e){u=e}s&&s(u)},async final(t){let r;try{await e.onChannelWritingCompleted(n)}catch(e){r=e}t&&t(r)},read(){}})}get stream(){return this._duplex}get acceptance(){return this._acceptance.promise}get isAccepted(){return this._acceptance.isResolved}get isRejectedOrCanceled(){return this._acceptance.isRejected}get completion(){return this._completion.promise}tryAcceptOffer(e){return!!this._acceptance.resolve()&&(this.localWindowSize=void 0!==(null==e?void 0:e.channelReceivingWindowSize)?Math.max(this._multiplexingStream.defaultChannelReceivingWindowSize,null==e?void 0:e.channelReceivingWindowSize):this._multiplexingStream.defaultChannelReceivingWindowSize,!0)}tryCancelOffer(e){const t=new n.default.CancellationError(e);this._acceptance.reject(t),this._completion.reject(t),l(this._completion.promise),this.dispose()}onAccepted(e){return this._multiplexingStream.backpressureSupportEnabled&&(this.remoteWindowSize=e.remoteWindowSize,this.remoteWindowHasCapacity.resolve()),this._acceptance.resolve()}onContent(e){this._duplex.push(e),this._multiplexingStream.backpressureSupportEnabled&&e&&this._multiplexingStream.localContentExamined(this,e.length)}onContentProcessed(e){if(e<0)throw new Error("A non-negative number is required.");if(e>this.remoteWindowFilled)throw new Error("More bytes processed than we thought were in the window.");if(void 0===this.remoteWindowSize)throw new Error("Unexpected content processed message given we don't know the remote window size.");this.remoteWindowFilled-=e,this.remoteWindowFilled<this.remoteWindowSize&&this.remoteWindowHasCapacity.resolve()}dispose(e){this.isDisposed||(super.dispose(),this._acceptance.reject(new n.default.CancellationError("disposed"))&&l(this.acceptance),this._duplex.end(),this._duplex.push(null),e?this._completion.reject(e):this._completion.resolve(),l(this._multiplexingStream.onChannelDisposed(this,null!=e?e:null)))}onTransmittingBytes(e){if(this._multiplexingStream.backpressureSupportEnabled){if(e<0)throw new Error("Negative byte count transmitted.");this.remoteWindowFilled+=e,this.remoteWindowFilled===this.remoteWindowSize&&(this.remoteWindowHasCapacity=new s.Deferred)}}}},5011:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ControlCode=void 0,function(e){e[e.offer=0]="offer",e[e.offerAccepted=1]="offerAccepted",e[e.content=2]="content",e[e.contentWritingCompleted=3]="contentWritingCompleted",e[e.channelTerminated=4]="channelTerminated",e[e.contentProcessed=5]="contentProcessed"}(r||(t.ControlCode=r={}))},1216:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Deferred=void 0,t.Deferred=class{constructor(e){this.state=e,this._isResolved=!1,this._isRejected=!1,this.promise=new Promise(((e,t)=>{this.resolvePromise=e,this.rejectPromise=t}))}get isCompleted(){return this._isResolved||this._isRejected}get isResolved(){return this._isResolved}get isRejected(){return this._isRejected}get error(){return this._error}resolve(e){return!this.isCompleted&&(this.resolvePromise(e),this._isResolved=!0,!0)}reject(e){return!this.isCompleted&&(this.rejectPromise(e),this._error=e,this._isRejected=!0,!0)}}},9454:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameHeader=void 0;const n=r(7850);t.FrameHeader=class{constructor(e,t){this.code=e,t&&(0,n.requireInteger)("channelId",t.id,4,"signed"),this.code=e,this._channel=t}get channel(){return this._channel}get requiredChannel(){if(this.channel)return this.channel;throw new Error("Expected channel not present in frame header.")}flipChannelPerspective(){this._channel&&(this._channel={id:this._channel.id,source:-1*this._channel.source})}}},7900:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FullDuplexStream=void 0;const n=r(2781);class o{static CreatePair(){const e=new n.PassThrough,t=new n.PassThrough;return{first:o.Splice(e,t),second:o.Splice(t,e)}}static Splice(e,t){const r=new n.Duplex({write(e,r,n){t.write(e,r,n)},final(e){t.end(e)}});return r.read=e.read.bind(e),r.on=e.on.bind(e),r}}t.FullDuplexStream=o},7312:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiplexingStreamClass=t.MultiplexingStream=void 0;const n=r(4017),o=r(9593),i=r(2361),s=r(1588),a=r(5011),c=r(1216),u=r(9454),l=r(9574);r(3527);const d=r(7528),p=r(7850),f=r(5458);class h{get disposalToken(){return this.disposalTokenSource.token}get completion(){return this._completionSource.promise}get isDisposed(){return this.disposalTokenSource.token.isCancelled}static async CreateAsync(e,t,r=o.default.CONTINUE){var n;if(!e)throw new Error("stream must be specified.");if(null!==(n=(t=t||{}).protocolMajorVersion)&&void 0!==n||(t.protocolMajorVersion=1),t.defaultChannelReceivingWindowSize=t.defaultChannelReceivingWindowSize||h.recommendedDefaultChannelReceivingWindowSize,t.protocolMajorVersion<3&&t.seededChannels&&t.seededChannels.length>0)throw new Error("Seeded channels require v3 of the protocol at least.");const i=1===t.protocolMajorVersion?new l.MultiplexingStreamV1Formatter(e):2===t.protocolMajorVersion?new l.MultiplexingStreamV2Formatter(e):3===t.protocolMajorVersion?new l.MultiplexingStreamV3Formatter(e):void 0;if(!i)throw new Error(`Protocol major version ${t.protocolMajorVersion} is not supported.`);const s=await i.writeHandshakeAsync(),a=await i.readHandshakeAsync(s,r);return i.isOdd=a.isOdd,new g(i,a.isOdd,t)}static Create(e,t){var r;null!=t||(t={protocolMajorVersion:3}),null!==(r=t.protocolMajorVersion)&&void 0!==r||(t.protocolMajorVersion=3);const n=3===t.protocolMajorVersion?new l.MultiplexingStreamV3Formatter(e):void 0;if(!n)throw new Error(`Protocol major version ${t.protocolMajorVersion} is not supported. Try CreateAsync instead.`);return new g(n,void 0,t)}constructor(e,t,r){var n,a,u;if(this.formatter=e,this.isOdd=t,this._completionSource=new c.Deferred,this.seededOpenChannels={},this.locallyOfferedOpenChannels={},this.remotelyOfferedOpenChannels={},this.channelsOfferedByThemByName={},this.acceptingChannels={},this.eventEmitter=new i.EventEmitter,this.disposalTokenSource=o.default.create(),this.defaultChannelReceivingWindowSize=null!==(n=r.defaultChannelReceivingWindowSize)&&void 0!==n?n:h.recommendedDefaultChannelReceivingWindowSize,this.protocolMajorVersion=null!==(a=r.protocolMajorVersion)&&void 0!==a?a:1,r.seededChannels)for(let e=0;e<r.seededChannels.length;e++){const t=r.seededChannels[e],n={id:e,source:d.ChannelSource.Seeded};this.setOpenChannel(new s.ChannelClass(this,n,{name:"",remoteWindowSize:null!==(u=t.channelReceivingWindowSize)&&void 0!==u?u:this.defaultChannelReceivingWindowSize}))}}createChannel(e){var t;const r={name:"",remoteWindowSize:null!==(t=null==e?void 0:e.channelReceivingWindowSize)&&void 0!==t?t:this.defaultChannelReceivingWindowSize},n=this.formatter.serializeOfferParameters(r),o=new s.ChannelClass(this,{id:this.getUnusedChannelId(),source:d.ChannelSource.Local},r);return this.setOpenChannel(o),this.rejectOnFailure(this.sendFrameAsync(new u.FrameHeader(a.ControlCode.offer,o.qualifiedId),n,this.disposalToken)),o}acceptChannel(e,t){const r=this.remotelyOfferedOpenChannels[e]||this.seededOpenChannels[e];if(!r)throw new Error("No channel with ID "+e);return this.removeChannelFromOfferedQueue(r),this.acceptChannelOrThrow(r,t),r}rejectChannel(e){const t=this.remotelyOfferedOpenChannels[e];if(!t)throw new Error("No channel with that ID found.");(0,p.removeFromQueue)(t,this.channelsOfferedByThemByName[t.name]),f(t.acceptance),f(t.completion),t.dispose()}async offerChannelAsync(e,t,r=o.default.CONTINUE){var n;if(null==e)throw new Error("Name must be specified (but may be empty).");r.throwIfCancelled(),(0,p.throwIfDisposed)(this);const i={name:e,remoteWindowSize:null!==(n=null==t?void 0:t.channelReceivingWindowSize)&&void 0!==n?n:this.defaultChannelReceivingWindowSize},c=this.formatter.serializeOfferParameters(i),l=new s.ChannelClass(this,{id:this.getUnusedChannelId(),source:d.ChannelSource.Local},i);this.setOpenChannel(l);const h=new u.FrameHeader(a.ControlCode.offer,l.qualifiedId),g=r.onCancelled((e=>this.offerChannelCanceled(l,e)));try{return f(l.acceptance),await this.sendFrameAsync(h,c,r),await l.acceptance,l}finally{g()}}async acceptChannelAsync(e,t,r=o.default.CONTINUE){if(null==e)throw new Error("Name must be specified (but may be empty).");let n,i;r.throwIfCancelled(),(0,p.throwIfDisposed)(this);const s=this.channelsOfferedByThemByName[e];if(s)for(;void 0===n&&s.length>0;)n=s.shift(),(n.isAccepted||n.isRejectedOrCanceled)&&(n=void 0);if(void 0===n){let r=this.acceptingChannels[e];r||(this.acceptingChannels[e]=r=[]),i=new c.Deferred(t),r.push(i)}if(void 0!==n)return this.acceptChannelOrThrow(n,t),n;{const t=r.onCancelled((t=>this.acceptChannelCanceled(i,e,t)));try{return await i.promise}finally{t()}}}dispose(){this.disposeCore(!1)}disposeCore(e){this.disposalTokenSource.cancel(),this._completionSource.resolve(),this.formatter.end(),[this.locallyOfferedOpenChannels,this.remotelyOfferedOpenChannels].forEach((e=>{for(const t in e)if(e.hasOwnProperty(t)){const r=e[t];f(r.acceptance),r.dispose()}}));const t=e?"The remote party has disconnected.":"The stream is being disposed locally.";for(const e in this.acceptingChannels)if(this.acceptingChannels.hasOwnProperty(e)){const r=this.acceptingChannels[e];for(const e of r)e.reject(new Error(t));delete this.acceptingChannels[e]}}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}once(e,t){this.eventEmitter.once(e,t)}raiseChannelOffered(e,t,r){const n={id:e,isAccepted:r,name:t};try{this.eventEmitter.emit("channelOffered",n)}catch(e){this._completionSource.reject(e)}}acceptChannelOrThrow(e,t){var r,n;if(!e.tryAcceptOffer(t))throw e.isAccepted?new Error("Channel is already accepted."):e.isRejectedOrCanceled?new Error("Channel is no longer available for acceptance."):new Error("Channel could not be accepted.");{const o={remoteWindowSize:null!==(n=null!==(r=null==t?void 0:t.channelReceivingWindowSize)&&void 0!==r?r:e.localWindowSize)&&void 0!==n?n:this.defaultChannelReceivingWindowSize};if(o.remoteWindowSize<this.defaultChannelReceivingWindowSize&&(o.remoteWindowSize=this.defaultChannelReceivingWindowSize),e.qualifiedId.source!==d.ChannelSource.Seeded){const t=this.formatter.serializeAcceptanceParameters(o);this.rejectOnFailure(this.sendFrameAsync(new u.FrameHeader(a.ControlCode.offerAccepted,e.qualifiedId),t,this.disposalToken))}}}async rejectOnFailure(e){try{await e}catch(e){this._completionSource.reject(e)}}removeChannelFromOfferedQueue(e){e.name&&(0,p.removeFromQueue)(e,this.channelsOfferedByThemByName[e.name])}getOpenChannel(e){return this.getChannelCollection(e.source)[e.id]}setOpenChannel(e){this.getChannelCollection(e.qualifiedId.source)[e.qualifiedId.id]=e}deleteOpenChannel(e){delete this.getChannelCollection(e.source)[e.id]}getChannelCollection(e){switch(e){case d.ChannelSource.Local:return this.locallyOfferedOpenChannels;case d.ChannelSource.Remote:return this.remotelyOfferedOpenChannels;case d.ChannelSource.Seeded:return this.seededOpenChannels}}acceptChannelCanceled(e,t,r){e.reject(new o.default.CancellationError(r))&&(0,p.removeFromQueue)(e,this.acceptingChannels[t])}offerChannelCanceled(e,t){e.tryCancelOffer(t)}getUnusedChannelId(){return this.lastOfferedChannelId+=void 0!==this.isOdd?2:1}}t.MultiplexingStream=h,h.framePayloadMaxLength=20480,h.recommendedDefaultChannelReceivingWindowSize=5*h.framePayloadMaxLength,h.defaultChannelOptions={},h.ControlFrameEncoding="utf-8";class g extends h{constructor(e,t,r){var o,i;super(e,t,r),this.sendingSemaphore=new n.Semaphore(1),this.lastOfferedChannelId=t?-1:0,this.lastOfferedChannelId+=null!==(i=null===(o=r.seededChannels)||void 0===o?void 0:o.length)&&void 0!==i?i:0,this.readFromStream(this.disposalToken).catch((e=>this._completionSource.reject(e)))}get backpressureSupportEnabled(){return this.protocolMajorVersion>1}async sendFrameAsync(e,t,r=o.default.CONTINUE){if(!e)throw new Error("Header is required.");await this.sendingSemaphore.use((async()=>{r.throwIfCancelled(),(0,p.throwIfDisposed)(this),await this.formatter.writeFrameAsync(e,t)}))}async sendFrame(e,t){try{if(this._completionSource.isCompleted)return;const r=new u.FrameHeader(e,t);await this.sendFrameAsync(r)}catch(e){this._completionSource.reject(e)}}onChannelWritingCompleted(e){!e.isDisposed&&this.getOpenChannel(e.qualifiedId)&&this.sendFrame(a.ControlCode.contentWritingCompleted,e.qualifiedId)}async onChannelDisposed(e,t){if(!this._completionSource.isCompleted)try{const r=this.protocolMajorVersion>1&&t?this.formatter.serializeException(t):Buffer.alloc(0),n=new u.FrameHeader(a.ControlCode.channelTerminated,e.qualifiedId);await this.sendFrameAsync(n,r)}catch(e){if(this.isDisposed)return;throw e}}localContentExamined(e,t){const r=this.formatter.serializeContentProcessed(t);this.rejectOnFailure(this.sendFrameAsync(new u.FrameHeader(a.ControlCode.contentProcessed,e.qualifiedId),r))}async readFromStream(e){for(;!this.isDisposed;){const t=await this.formatter.readFrameAsync(e);if(null===t)break;switch(t.header.flipChannelPerspective(),t.header.code){case a.ControlCode.offer:this.onOffer(t.header.requiredChannel,t.payload);break;case a.ControlCode.offerAccepted:this.onOfferAccepted(t.header.requiredChannel,t.payload);break;case a.ControlCode.content:this.onContent(t.header.requiredChannel,t.payload);break;case a.ControlCode.contentProcessed:this.onContentProcessed(t.header.requiredChannel,t.payload);break;case a.ControlCode.contentWritingCompleted:this.onContentWritingCompleted(t.header.requiredChannel);break;case a.ControlCode.channelTerminated:this.onChannelTerminated(t.header.requiredChannel,t.payload)}}this.disposeCore(!0)}onOffer(e,t){const r=this.formatter.deserializeOfferParameters(t),n=new s.ChannelClass(this,e,r);let o,i,a=!1;if(void 0!==(i=this.acceptingChannels[r.name]))for(;i.length>0;){const e=i.shift();if(e.resolve(n)){a=!0,o=e.state;break}}if(!a&&r.name){let e;(e=this.channelsOfferedByThemByName[r.name])||(this.channelsOfferedByThemByName[r.name]=e=[]),e.push(n)}this.setOpenChannel(n),a&&this.acceptChannelOrThrow(n,o),this.raiseChannelOffered(n.id,n.name,a)}onOfferAccepted(e,t){if(e.source!==d.ChannelSource.Local)throw new Error("Remote party tried to accept a channel that they offered.");const r=this.formatter.deserializeAcceptanceParameters(t),n=this.getOpenChannel(e);if(!n)throw new Error(`Unexpected channel created with ID ${d.QualifiedChannelId.toString(e)}`);n.onAccepted(r)}onContent(e,t){const r=this.getOpenChannel(e);if(!r)throw new Error(`No channel with id ${e} found.`);r.onContent(t)}onContentProcessed(e,t){const r=this.getOpenChannel(e);if(!r)throw new Error(`No channel with id ${e} found.`);const n=this.formatter.deserializeContentProcessed(t);r.onContentProcessed(n)}onContentWritingCompleted(e){const t=this.getOpenChannel(e);if(!t)throw new Error(`No channel with id ${e} found.`);t.onContent(null)}onChannelTerminated(e,t){const r=this.getOpenChannel(e);if(r){this.deleteOpenChannel(e),this.removeChannelFromOfferedQueue(r);const n=this.protocolMajorVersion>1?this.formatter.deserializeException(t):null;r.dispose(n)}}}t.MultiplexingStreamClass=g},9574:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiplexingStreamV3Formatter=t.MultiplexingStreamV2Formatter=t.MultiplexingStreamV1Formatter=t.MultiplexingStreamFormatter=void 0;const n=r(7312),o=r(6113),i=r(7850),s=r(7323),a=r(1216),c=r(9454),u=r(7528);class l{static getIsOddRandomData(){return(0,o.randomBytes)(16)}static isOdd(e,t){let r;for(let n=0;n<e.length;n++){const o=e[n],i=t[n];if(o>i){r=!0;break}if(o<i){r=!1;break}}if(void 0===r)throw new Error("Unable to determine even/odd party.");return r}createFrameHeader(e,t){if(!t)return new c.FrameHeader(e);const r=t%2==1===this.isOdd?u.ChannelSource.Remote:u.ChannelSource.Local;return new c.FrameHeader(e,{id:t,source:r})}}t.MultiplexingStreamFormatter=l;class d extends l{constructor(e){super(),this.stream=e}end(){this.stream.end()}async writeHandshakeAsync(){const e=l.getIsOddRandomData(),t=Buffer.concat([d.protocolMagicNumber,e]);return await(0,i.writeAsync)(this.stream,t),e}async readHandshakeAsync(e,t){const r=e,n=await(0,i.getBufferFrom)(this.stream,d.protocolMagicNumber.length+16,!1,t);for(let e=0;e<d.protocolMagicNumber.length;e++){const t=d.protocolMagicNumber[e],r=n.readUInt8(e);if(t!==r)throw new Error(`Protocol magic number mismatch. Expected ${t} but was ${r}.`)}return{isOdd:l.isOdd(r,n.slice(d.protocolMagicNumber.length)),protocolVersion:{major:1,minor:0}}}async writeFrameAsync(e,t){var r;const n=Buffer.alloc(7);n.writeInt8(e.code,0),n.writeUInt32BE((null===(r=e.channel)||void 0===r?void 0:r.id)||0,1),n.writeUInt16BE((null==t?void 0:t.length)||0,5),await(0,i.writeAsync)(this.stream,n),t&&t.length>0&&await(0,i.writeAsync)(this.stream,t)}async readFrameAsync(e){if(void 0===this.isOdd)throw new Error("isOdd must be set first.");const t=await(0,i.getBufferFrom)(this.stream,7,!0,e);if(null===t)return null;const r=this.createFrameHeader(t.readInt8(0),t.readUInt32BE(1)),n=t.readUInt16BE(5);return{header:r,payload:await(0,i.getBufferFrom)(this.stream,n)}}serializeOfferParameters(e){const t=Buffer.from(e.name,n.MultiplexingStream.ControlFrameEncoding);if(t.length>n.MultiplexingStream.framePayloadMaxLength)throw new Error("Name is too long.");return t}deserializeOfferParameters(e){return{name:e.toString(n.MultiplexingStream.ControlFrameEncoding)}}serializeAcceptanceParameters(e){return Buffer.from([])}deserializeAcceptanceParameters(e){return{}}serializeContentProcessed(e){throw new Error("Not supported in the V1 protocol.")}deserializeContentProcessed(e){throw new Error("Not supported in the V1 protocol.")}}t.MultiplexingStreamV1Formatter=d,d.protocolMagicNumber=Buffer.from([47,223,29,80]);class p extends l{constructor(e){super(),this.reader=s.createDecodeStream(),e.pipe(this.reader),this.writer=e}end(){this.writer.end()}async writeHandshakeAsync(){const e=l.getIsOddRandomData(),t=[[p.protocolVersion.major,p.protocolVersion.minor],e];return await(0,i.writeAsync)(this.writer,s.encode(t)),e}async readHandshakeAsync(e,t){if(!e)throw new Error("Provide the result of writeHandshakeAsync as a first argument.");const r=await this.readMessagePackAsync(t);if(null===r)throw new Error("No data received during handshake.");return{isOdd:l.isOdd(e,r[1]),protocolVersion:{major:r[0][0],minor:r[0][1]}}}async writeFrameAsync(e,t){var r;const n=[e.code];if(null===(r=e.channel)||void 0===r?void 0:r.id)n.push(e.channel.id),t&&t.length>0&&n.push(t);else if(t&&t.length>0)throw new Error("A frame may not contain payload without a channel ID.");await(0,i.writeAsync)(this.writer,s.encode(n))}async readFrameAsync(e){if(void 0===this.isOdd)throw new Error("isOdd must be set first.");const t=await this.readMessagePackAsync(e);return null===t?null:{header:this.createFrameHeader(t[0],t[1]),payload:t[2]||Buffer.from([])}}serializeOfferParameters(e){const t=[e.name];return e.remoteWindowSize&&t.push(e.remoteWindowSize),s.encode(t)}deserializeOfferParameters(e){const t=s.decode(e);return{name:t[0],remoteWindowSize:t[1]}}serializeAcceptanceParameters(e){const t=[];return e.remoteWindowSize&&t.push(e.remoteWindowSize),s.encode(t)}deserializeAcceptanceParameters(e){return{remoteWindowSize:s.decode(e)[0]}}serializeContentProcessed(e){return s.encode([e])}deserializeContentProcessed(e){return s.decode(e)[0]}serializeException(e){if(!e)return Buffer.alloc(0);const t=[`${e.name}: ${e.message}`];return s.encode(t)}deserializeException(e){if(0===e.length)return null;const t=s.decode(e);if(!t||0===t.length)return null;let r=s.decode(e)[0];return r=`Received error from remote side: ${r}`,new Error(r)}async readMessagePackAsync(e){const t=new a.Deferred;for(;;){const r=this.reader.read();if(null===r){const r=new a.Deferred,n=r.resolve.bind(r),o=t.resolve.bind(t);this.reader.once("readable",n),this.reader.once("end",o);const i=Promise.race([r.promise,t.promise]);if(await(e?e.racePromise(i):i),this.reader.removeListener("readable",n),this.reader.removeListener("end",o),r.isCompleted)continue;return null}return r}}}t.MultiplexingStreamV2Formatter=p,p.protocolVersion={major:2,minor:0};class f extends p{writeHandshakeAsync(){return Promise.resolve(null)}readHandshakeAsync(){return Promise.resolve({protocolVersion:f.protocolV3Version})}async writeFrameAsync(e,t){const r=[e.code];if(e.channel)r.push(e.channel.id),r.push(e.channel.source),t&&t.length>0&&r.push(t);else if(t&&t.length>0)throw new Error("A frame may not contain payload without a channel ID.");await(0,i.writeAsync)(this.writer,s.encode(r))}async readFrameAsync(e){const t=await this.readMessagePackAsync(e);return null===t?null:{header:new c.FrameHeader(t[0],t.length>1?{id:t[1],source:t[2]}:void 0),payload:t[3]||Buffer.from([])}}}t.MultiplexingStreamV3Formatter=f,f.protocolV3Version={major:2,minor:0}},3527:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7528:(e,t)=>{"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.QualifiedChannelId=t.ChannelSource=void 0,function(e){e[e.Local=1]="Local",e[e.Remote=-1]="Remote",e[e.Seeded=0]="Seeded"}(r||(t.ChannelSource=r={})),function(e){e.toString=function(e){const t=e.source===r.Local?"local":e.source===r.Remote?"remote":e.source===r.Seeded?"seeded":"unknown";return`${e.id} (${t})`}}(n||(t.QualifiedChannelId=n={}))},7850:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeFromQueue=t.requireInteger=t.throwIfDisposed=t.getBufferFrom=t.readSubstream=t.writeSubstream=t.writeAsync=void 0;const n=r(2781),o=r(1216);async function i(e,t){return new Promise(((r,n)=>{e.write(t,(e=>{e?n(e):r()}))}))}async function s(e,t,r=!1,n){const i=new o.Deferred;if(0===t)return Buffer.from([]);let s=null,a=0;for(;t>0;){null==n||n.throwIfCancelled();let c=e.readableLength;if(c)c>t&&(c=t);else{if(e.readableEnded||i.isCompleted){if(!r)throw new Error("Stream terminated before required bytes were read.");return null===s?null:s.subarray(0,a)}c=t}const u=e.read(c);if(u){if(u.length<c&&!r)throw new Error("Stream terminated before required bytes were read.");if(null===s){if(c===t||u.length<c)return u;s=Buffer.alloc(t)}u.copy(s,a),t-=u.length,a+=u.length}if(t>0){const t=new o.Deferred,r=t.resolve.bind(t),s=i.resolve.bind(i);e.once("readable",r),e.once("end",s);try{const e=Promise.race([t.promise,i.promise]);await(n?n.racePromise(e):e)}finally{e.removeListener("readable",r),e.removeListener("end",s)}}}return s}t.writeAsync=i,t.writeSubstream=function(e){return new n.Writable({async write(t,r,n){try{const r=new DataView(new ArrayBuffer(4));r.setUint32(0,t.length,!1),await i(e,Buffer.from(r.buffer)),await i(e,t),n()}catch(e){n(e)}},final(t){e.write(new Uint8Array(4),t)}})},t.readSubstream=function(e){return new n.Readable({async read(t){const r=await s(e,4),n=new DataView(r.buffer,r.byteOffset,r.length).getUint32(0,!1);if(0===n)return void this.push(null);const o=await s(e,n);this.push(o)}})},t.getBufferFrom=s,t.throwIfDisposed=function(e){if(e.isDisposed)throw new Error("disposed")},t.requireInteger=function(e,t,r,n="signed"){if(!Number.isInteger(t))throw new Error(`${e} must be an integer.`);let o=8*r;"signed"===n&&o--;const i=Math.pow(2,o)-1,s="signed"===n?-Math.pow(2,o):0;if(t>i||t<s)throw new Error(`${e} must be in the range ${s}-${i}.`)},t.removeFromQueue=function(e,t){if(t){const r=t.indexOf(e);r>=0&&t.splice(r,1)}}},3543:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelSource=t.QualifiedChannelId=t.readSubstream=t.writeSubstream=t.MultiplexingStream=t.FullDuplexStream=t.Channel=void 0;var n=r(1588);Object.defineProperty(t,"Channel",{enumerable:!0,get:function(){return n.Channel}});var o=r(7900);Object.defineProperty(t,"FullDuplexStream",{enumerable:!0,get:function(){return o.FullDuplexStream}});var i=r(7312);Object.defineProperty(t,"MultiplexingStream",{enumerable:!0,get:function(){return i.MultiplexingStream}});var s=r(7850);Object.defineProperty(t,"writeSubstream",{enumerable:!0,get:function(){return s.writeSubstream}}),Object.defineProperty(t,"readSubstream",{enumerable:!0,get:function(){return s.readSubstream}});var a=r(7528);Object.defineProperty(t,"QualifiedChannelId",{enumerable:!0,get:function(){return a.QualifiedChannelId}}),Object.defineProperty(t,"ChannelSource",{enumerable:!0,get:function(){return a.ChannelSource}})},2257:(e,t,r)=>{const n=Symbol("SemVer ANY");class o{static get ANY(){return n}constructor(e,t){if(t=i(t),e instanceof o){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?s[a.COMPARATORLOOSE]:s[a.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new l(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new l(e,this.options)}catch(e){return!1}return c(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof o))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):!((t=i(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!e.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!e.operator.startsWith("<"))&&(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))&&!(c(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))&&!(c(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}}e.exports=o;const i=r(2893),{safeRe:s,t:a}=r(5765),c=r(7539),u=r(4225),l=r(6376),d=r(6902)},6902:(e,t,r)=>{class n{constructor(e,t){if(t=i(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof s)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!v(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&m(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&h)|(this.options.loose&&g))+":"+e,r=o.get(t);if(r)return r;const n=this.options.loose,i=n?u[l.HYPHENRANGELOOSE]:u[l.HYPHENRANGE];e=e.replace(i,N(this.options.includePrerelease)),a("hyphen replace",e),e=e.replace(u[l.COMPARATORTRIM],d),a("comparator trim",e),e=e.replace(u[l.TILDETRIM],p),a("tilde trim",e),e=e.replace(u[l.CARETTRIM],f),a("caret trim",e);let c=e.split(" ").map((e=>_(e,this.options))).join(" ").split(/\s+/).map((e=>O(e,this.options)));n&&(c=c.filter((e=>(a("loose invalid filter",e,this.options),!!e.match(u[l.COMPARATORLOOSE]))))),a("range list",c);const m=new Map,y=c.map((e=>new s(e,this.options)));for(const e of y){if(v(e))return[e];m.set(e.value,e)}m.size>1&&m.has("")&&m.delete("");const S=[...m.values()];return o.set(t,S),S}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some((r=>y(r,t)&&e.set.some((e=>y(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(A(this.set[t],e,this.options))return!0;return!1}}e.exports=n;const o=new(r(8486))({max:1e3}),i=r(2893),s=r(2257),a=r(4225),c=r(6376),{safeRe:u,t:l,comparatorTrimReplace:d,tildeTrimReplace:p,caretTrimReplace:f}=r(5765),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:g}=r(3295),v=e=>"<0.0.0-0"===e.value,m=e=>""===e.value,y=(e,t)=>{let r=!0;const n=e.slice();let o=n.pop();for(;r&&n.length;)r=n.every((e=>o.intersects(e,t))),o=n.pop();return r},_=(e,t)=>(a("comp",e,t),e=b(e,t),a("caret",e),e=E(e,t),a("tildes",e),e=C(e,t),a("xrange",e),e=I(e,t),a("stars",e),e),S=e=>!e||"x"===e.toLowerCase()||"*"===e,E=(e,t)=>e.trim().split(/\s+/).map((e=>w(e,t))).join(" "),w=(e,t)=>{const r=t.loose?u[l.TILDELOOSE]:u[l.TILDE];return e.replace(r,((t,r,n,o,i)=>{let s;return a("tilde",e,t,r,n,o,i),S(r)?s="":S(n)?s=`>=${r}.0.0 <${+r+1}.0.0-0`:S(o)?s=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:i?(a("replaceTilde pr",i),s=`>=${r}.${n}.${o}-${i} <${r}.${+n+1}.0-0`):s=`>=${r}.${n}.${o} <${r}.${+n+1}.0-0`,a("tilde return",s),s}))},b=(e,t)=>e.trim().split(/\s+/).map((e=>T(e,t))).join(" "),T=(e,t)=>{a("caret",e,t);const r=t.loose?u[l.CARETLOOSE]:u[l.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,o,i,s)=>{let c;return a("caret",e,t,r,o,i,s),S(r)?c="":S(o)?c=`>=${r}.0.0${n} <${+r+1}.0.0-0`:S(i)?c="0"===r?`>=${r}.${o}.0${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.0${n} <${+r+1}.0.0-0`:s?(a("replaceCaret pr",s),c="0"===r?"0"===o?`>=${r}.${o}.${i}-${s} <${r}.${o}.${+i+1}-0`:`>=${r}.${o}.${i}-${s} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${i}-${s} <${+r+1}.0.0-0`):(a("no pr"),c="0"===r?"0"===o?`>=${r}.${o}.${i}${n} <${r}.${o}.${+i+1}-0`:`>=${r}.${o}.${i}${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${i} <${+r+1}.0.0-0`),a("caret return",c),c}))},C=(e,t)=>(a("replaceXRanges",e,t),e.split(/\s+/).map((e=>P(e,t))).join(" ")),P=(e,t)=>{e=e.trim();const r=t.loose?u[l.XRANGELOOSE]:u[l.XRANGE];return e.replace(r,((r,n,o,i,s,c)=>{a("xRange",e,r,n,o,i,s,c);const u=S(o),l=u||S(i),d=l||S(s),p=d;return"="===n&&p&&(n=""),c=t.includePrerelease?"-0":"",u?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&p?(l&&(i=0),s=0,">"===n?(n=">=",l?(o=+o+1,i=0,s=0):(i=+i+1,s=0)):"<="===n&&(n="<",l?o=+o+1:i=+i+1),"<"===n&&(c="-0"),r=`${n+o}.${i}.${s}${c}`):l?r=`>=${o}.0.0${c} <${+o+1}.0.0-0`:d&&(r=`>=${o}.${i}.0${c} <${o}.${+i+1}.0-0`),a("xRange return",r),r}))},I=(e,t)=>(a("replaceStars",e,t),e.trim().replace(u[l.STAR],"")),O=(e,t)=>(a("replaceGTE0",e,t),e.trim().replace(u[t.includePrerelease?l.GTE0PRE:l.GTE0],"")),N=e=>(t,r,n,o,i,s,a,c,u,l,d,p,f)=>`${r=S(n)?"":S(o)?`>=${n}.0.0${e?"-0":""}`:S(i)?`>=${n}.${o}.0${e?"-0":""}`:s?`>=${r}`:`>=${r}${e?"-0":""}`} ${c=S(u)?"":S(l)?`<${+u+1}.0.0-0`:S(d)?`<${u}.${+l+1}.0-0`:p?`<=${u}.${l}.${d}-${p}`:e?`<${u}.${l}.${+d+1}-0`:`<=${c}`}`.trim(),A=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(a(e[r].semver),e[r].semver!==s.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},6376:(e,t,r)=>{const n=r(4225),{MAX_LENGTH:o,MAX_SAFE_INTEGER:i}=r(3295),{safeRe:s,t:a}=r(5765),c=r(2893),{compareIdentifiers:u}=r(6742);class l{constructor(e,t){if(t=c(t),e instanceof l){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>o)throw new TypeError(`version is longer than ${o} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?s[a.LOOSE]:s[a.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof l)){if("string"==typeof e&&e===this.version)return 0;e=new l(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof l||(e=new l(e,this.options)),u(this.major,e.major)||u(this.minor,e.minor)||u(this.patch,e.patch)}comparePre(e){if(e instanceof l||(e=new l(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],o=e.prerelease[t];if(n("prerelease compare",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return u(r,o)}while(++t)}compareBuild(e){e instanceof l||(e=new l(e,this.options));let t=0;do{const r=this.build[t],o=e.build[t];if(n("prerelease compare",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return u(r,o)}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===u(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=l},3507:(e,t,r)=>{const n=r(2459);e.exports=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},7539:(e,t,r)=>{const n=r(8718),o=r(1194),i=r(1312),s=r(5903),a=r(1544),c=r(2056);e.exports=(e,t,r,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,u);case"!=":return o(e,r,u);case">":return i(e,r,u);case">=":return s(e,r,u);case"<":return a(e,r,u);case"<=":return c(e,r,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},9038:(e,t,r)=>{const n=r(6376),o=r(2459),{safeRe:i,t:s}=r(5765);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let t;for(;(t=i[s.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&t.index+t[0].length===r.index+r[0].length||(r=t),i[s.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;i[s.COERCERTL].lastIndex=-1}else r=e.match(i[s.COERCE]);return null===r?null:o(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)}},8880:(e,t,r)=>{const n=r(6376);e.exports=(e,t,r)=>{const o=new n(e,r),i=new n(t,r);return o.compare(i)||o.compareBuild(i)}},7880:(e,t,r)=>{const n=r(6269);e.exports=(e,t)=>n(e,t,!0)},6269:(e,t,r)=>{const n=r(6376);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},2378:(e,t,r)=>{const n=r(2459);e.exports=(e,t)=>{const r=n(e,null,!0),o=n(t,null,!0),i=r.compare(o);if(0===i)return null;const s=i>0,a=s?r:o,c=s?o:r,u=!!a.prerelease.length;if(c.prerelease.length&&!u)return c.patch||c.minor?a.patch?"patch":a.minor?"minor":"major":"major";const l=u?"pre":"";return r.major!==o.major?l+"major":r.minor!==o.minor?l+"minor":r.patch!==o.patch?l+"patch":"prerelease"}},8718:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>0===n(e,t,r)},1312:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(e,t,r)>0},5903:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(e,t,r)>=0},253:(e,t,r)=>{const n=r(6376);e.exports=(e,t,r,o,i)=>{"string"==typeof r&&(i=o,o=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,o,i).version}catch(e){return null}}},1544:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(e,t,r)<0},2056:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(e,t,r)<=0},8679:(e,t,r)=>{const n=r(6376);e.exports=(e,t)=>new n(e,t).major},7789:(e,t,r)=>{const n=r(6376);e.exports=(e,t)=>new n(e,t).minor},1194:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>0!==n(e,t,r)},2459:(e,t,r)=>{const n=r(6376);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},2358:(e,t,r)=>{const n=r(6376);e.exports=(e,t)=>new n(e,t).patch},7559:(e,t,r)=>{const n=r(2459);e.exports=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},9795:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(t,e,r)},9484:(e,t,r)=>{const n=r(8880);e.exports=(e,t)=>e.sort(((e,r)=>n(r,e,t)))},5712:(e,t,r)=>{const n=r(6902);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},1100:(e,t,r)=>{const n=r(8880);e.exports=(e,t)=>e.sort(((e,r)=>n(e,r,t)))},6397:(e,t,r)=>{const n=r(2459);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},1249:(e,t,r)=>{const n=r(5765),o=r(3295),i=r(6376),s=r(6742),a=r(2459),c=r(6397),u=r(3507),l=r(253),d=r(2378),p=r(8679),f=r(7789),h=r(2358),g=r(7559),v=r(6269),m=r(9795),y=r(7880),_=r(8880),S=r(1100),E=r(9484),w=r(1312),b=r(1544),T=r(8718),C=r(1194),P=r(5903),I=r(2056),O=r(7539),N=r(9038),A=r(2257),R=r(6902),x=r(5712),k=r(1042),D=r(5775),M=r(1657),j=r(5316),L=r(9042),F=r(6826),U=r(7606),B=r(32),V=r(2937),$=r(7908),H=r(799);e.exports={parse:a,valid:c,clean:u,inc:l,diff:d,major:p,minor:f,patch:h,prerelease:g,compare:v,rcompare:m,compareLoose:y,compareBuild:_,sort:S,rsort:E,gt:w,lt:b,eq:T,neq:C,gte:P,lte:I,cmp:O,coerce:N,Comparator:A,Range:R,satisfies:x,toComparators:k,maxSatisfying:D,minSatisfying:M,minVersion:j,validRange:L,outside:F,gtr:U,ltr:B,intersects:V,simplifyRange:$,subset:H,SemVer:i,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:o.SEMVER_SPEC_VERSION,RELEASE_TYPES:o.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers}},3295:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},4225:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},6742:e=>{const t=/^[0-9]+$/,r=(e,r)=>{const n=t.test(e),o=t.test(r);return n&&o&&(e=+e,r=+r),e===r?0:n&&!o?-1:o&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},2893:e=>{const t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},5765:(e,t,r)=>{const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:o,MAX_LENGTH:i}=r(3295),s=r(4225),a=(t=e.exports={}).re=[],c=t.safeRe=[],u=t.src=[],l=t.t={};let d=0;const p="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",i],[p,o]],h=(e,t,r)=>{const n=(e=>{for(const[t,r]of f)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),o=d++;s(e,o,t),l[e]=o,u[o]=t,a[o]=new RegExp(t,r?"g":void 0),c[o]=new RegExp(n,r?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),h("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${p}+`),h("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),h("FULL",`^${u[l.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),h("LOOSE",`^${u[l.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),h("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),h("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),h("COERCERTL",u[l.COERCE],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},7606:(e,t,r)=>{const n=r(6826);e.exports=(e,t,r)=>n(e,t,">",r)},2937:(e,t,r)=>{const n=r(6902);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},32:(e,t,r)=>{const n=r(6826);e.exports=(e,t,r)=>n(e,t,"<",r)},5775:(e,t,r)=>{const n=r(6376),o=r(6902);e.exports=(e,t,r)=>{let i=null,s=null,a=null;try{a=new o(t,r)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(i&&-1!==s.compare(e)||(i=e,s=new n(i,r)))})),i}},1657:(e,t,r)=>{const n=r(6376),o=r(6902);e.exports=(e,t,r)=>{let i=null,s=null,a=null;try{a=new o(t,r)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(i&&1!==s.compare(e)||(i=e,s=new n(i,r)))})),i}},5316:(e,t,r)=>{const n=r(6376),o=r(6902),i=r(1312);e.exports=(e,t)=>{e=new o(e,t);let r=new n("0.0.0");if(e.test(r))return r;if(r=new n("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const o=e.set[t];let s=null;o.forEach((e=>{const t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":s&&!i(t,s)||(s=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!s||r&&!i(r,s)||(r=s)}return r&&e.test(r)?r:null}},6826:(e,t,r)=>{const n=r(6376),o=r(2257),{ANY:i}=o,s=r(6902),a=r(5712),c=r(1312),u=r(1544),l=r(2056),d=r(5903);e.exports=(e,t,r,p)=>{let f,h,g,v,m;switch(e=new n(e,p),t=new s(t,p),r){case">":f=c,h=l,g=u,v=">",m=">=";break;case"<":f=u,h=d,g=c,v="<",m="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,p))return!1;for(let r=0;r<t.set.length;++r){const n=t.set[r];let s=null,a=null;if(n.forEach((e=>{e.semver===i&&(e=new o(">=0.0.0")),s=s||e,a=a||e,f(e.semver,s.semver,p)?s=e:g(e.semver,a.semver,p)&&(a=e)})),s.operator===v||s.operator===m)return!1;if((!a.operator||a.operator===v)&&h(e,a.semver))return!1;if(a.operator===m&&g(e,a.semver))return!1}return!0}},7908:(e,t,r)=>{const n=r(5712),o=r(6269);e.exports=(e,t,r)=>{const i=[];let s=null,a=null;const c=e.sort(((e,t)=>o(e,t,r)));for(const e of c)n(e,t,r)?(a=e,s||(s=e)):(a&&i.push([s,a]),a=null,s=null);s&&i.push([s,null]);const u=[];for(const[e,t]of i)e===t?u.push(e):t||e!==c[0]?t?e===c[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const l=u.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return l.length<d.length?l:t}},799:(e,t,r)=>{const n=r(6902),o=r(2257),{ANY:i}=o,s=r(5712),a=r(6269),c=[new o(">=0.0.0-0")],u=[new o(">=0.0.0")],l=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===i){if(1===t.length&&t[0].semver===i)return!0;e=r.includePrerelease?c:u}if(1===t.length&&t[0].semver===i){if(r.includePrerelease)return!0;t=u}const n=new Set;let o,l,f,h,g,v,m;for(const t of e)">"===t.operator||">="===t.operator?o=d(o,t,r):"<"===t.operator||"<="===t.operator?l=p(l,t,r):n.add(t.semver);if(n.size>1)return null;if(o&&l){if(f=a(o.semver,l.semver,r),f>0)return null;if(0===f&&(">="!==o.operator||"<="!==l.operator))return null}for(const e of n){if(o&&!s(e,String(o),r))return null;if(l&&!s(e,String(l),r))return null;for(const n of t)if(!s(e,String(n),r))return!1;return!0}let y=!(!l||r.includePrerelease||!l.semver.prerelease.length)&&l.semver,_=!(!o||r.includePrerelease||!o.semver.prerelease.length)&&o.semver;y&&1===y.prerelease.length&&"<"===l.operator&&0===y.prerelease[0]&&(y=!1);for(const e of t){if(m=m||">"===e.operator||">="===e.operator,v=v||"<"===e.operator||"<="===e.operator,o)if(_&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===_.major&&e.semver.minor===_.minor&&e.semver.patch===_.patch&&(_=!1),">"===e.operator||">="===e.operator){if(h=d(o,e,r),h===e&&h!==o)return!1}else if(">="===o.operator&&!s(o.semver,String(e),r))return!1;if(l)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),"<"===e.operator||"<="===e.operator){if(g=p(l,e,r),g===e&&g!==l)return!1}else if("<="===l.operator&&!s(l.semver,String(e),r))return!1;if(!e.operator&&(l||o)&&0!==f)return!1}return!(o&&v&&!l&&0!==f||l&&m&&!o&&0!==f||_||y)},d=(e,t,r)=>{if(!e)return t;const n=a(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},p=(e,t,r)=>{if(!e)return t;const n=a(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let o=!1;e:for(const n of e.set){for(const e of t.set){const t=l(n,e,r);if(o=o||null!==t,t)continue e}if(o)return!1}return!0}},1042:(e,t,r)=>{const n=r(6902);e.exports=(e,t)=>new n(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},9042:(e,t,r)=>{const n=r(6902);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},9887:e=>{"use strict";e.exports=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0}},2600:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NIL:()=>T,parse:()=>y,stringify:()=>p,v1:()=>m,v3:()=>S,v4:()=>w,v5:()=>b,validate:()=>u,version:()=>C});var n=r(6113),o=r.n(n);const i=new Uint8Array(256);let s=i.length;function a(){return s>i.length-16&&(o().randomFillSync(i),s=0),i.slice(s,s+=16)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,u=function(e){return"string"==typeof e&&c.test(e)},l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));function d(e,t=0){return(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase()}const p=function(e,t=0){const r=d(e,t);if(!u(r))throw TypeError("Stringified UUID is invalid");return r};let f,h,g=0,v=0;const m=function(e,t,r){let n=t&&r||0;const o=t||new Array(16);let i=(e=e||{}).node||f,s=void 0!==e.clockseq?e.clockseq:h;if(null==i||null==s){const t=e.random||(e.rng||a)();null==i&&(i=f=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==s&&(s=h=16383&(t[6]<<8|t[7]))}let c=void 0!==e.msecs?e.msecs:Date.now(),u=void 0!==e.nsecs?e.nsecs:v+1;const l=c-g+(u-v)/1e4;if(l<0&&void 0===e.clockseq&&(s=s+1&16383),(l<0||c>g)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=c,v=u,h=s,c+=122192928e5;const p=(1e4*(268435455&c)+u)%4294967296;o[n++]=p>>>24&255,o[n++]=p>>>16&255,o[n++]=p>>>8&255,o[n++]=255&p;const m=c/4294967296*1e4&268435455;o[n++]=m>>>8&255,o[n++]=255&m,o[n++]=m>>>24&15|16,o[n++]=m>>>16&255,o[n++]=s>>>8|128,o[n++]=255&s;for(let e=0;e<6;++e)o[n+e]=i[e];return t||d(o)},y=function(e){if(!u(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function _(e,t,r){function n(e,n,o,i){var s;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=y(n)),16!==(null===(s=n)||void 0===s?void 0:s.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+e.length);if(a.set(n),a.set(e,n.length),a=r(a),a[6]=15&a[6]|t,a[8]=63&a[8]|128,o){i=i||0;for(let e=0;e<16;++e)o[i+e]=a[e];return o}return d(a)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}const S=_("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o().createHash("md5").update(e).digest()})),E={randomUUID:o().randomUUID},w=function(e,t,r){if(E.randomUUID&&!t&&!e)return E.randomUUID();const n=(e=e||{}).random||(e.rng||a)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return d(n)},b=_("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o().createHash("sha1").update(e).digest()})),T="00000000-0000-0000-0000-000000000000",C=function(e){if(!u(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},3384:(e,t)=>{"use strict";var r,n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.MeasurementEntries=t.DimensionEntries=t.ErrorType=t.ErrorCodes=t.EventName=void 0,(o=t.EventName||(t.EventName={})).ERROR="error",o.INFO="info",o.OPERATION_START="opStart",o.OPERATION_END="opEnd",o.OPERATION_STEP="opStep",(n=t.ErrorCodes||(t.ErrorCodes={})).NO_ERROR=0,n.GENERAL_ERROR=1,(r=t.ErrorType||(t.ErrorType={})).USER_ERROR="userError",r.SYSTEM_ERROR="systemError",t.DimensionEntries=["operationId","operationName","errorCode","errorType","message","stack","stepName"],t.MeasurementEntries=["duration"]},6800:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.addReplacementRule=t.addContextProperty=t.dispose=t.createUuid=t.instrumentOperationStep=t.sendInfo=t.sendOperationError=t.sendError=t.sendOperationEnd=t.sendOperationStart=t.instrumentOperationAsVsCodeCommand=t.instrumentSimpleOperation=t.instrumentOperation=t.setErrorCode=t.setUserError=t.initialize=t.initializeFromJsonFile=void 0;const o=r(7147),i=r(9183),s=r(9496),a=r(5683),c=r(3384),u=r(5005);let l,d=!1;const p={},f=[],h=[c.EventName.ERROR,c.EventName.OPERATION_END,c.EventName.OPERATION_STEP];function g(e,t,r,n){if(l)throw new Error("TelemetryReporter already initialized.");if(r){const o=n&&n.firstParty;l=r instanceof Array?r.map((r=>new a.default(e,t,r,o))):[new a.default(e,t,r,o)]}u.Output.setExtensionId(e),d=!(!n||!n.debug)||"true"===process.env.DEBUG_TELEMETRY}function v(e,t,r){return(...o)=>n(this,void 0,void 0,(function*(){let n;const i=E(),s=Date.now();try{return y(i,e),yield t.apply(r,[i,...o])}catch(t){n=t,S(i,e,n)}finally{const t=Date.now()-s;_(i,e,t,n)}}))}function m(e,t,r){return v(e,((e,...o)=>n(this,void 0,void 0,(function*(){return yield t.apply(r,o)}))),r)}function y(e,t){b({eventName:c.EventName.OPERATION_START,operationId:e,operationName:t})}function _(e,t,r,n){b(Object.assign({eventName:c.EventName.OPERATION_END,operationId:e,operationName:t,duration:r},w(n)))}function S(e,t,r){b(Object.assign({eventName:c.EventName.ERROR,operationId:e,operationName:t},w(r)))}function E(){return i.v4()}function w(e){if(!e)return{errorCode:c.ErrorCodes.NO_ERROR};const t=e;return{errorCode:t.errorCode||c.ErrorCodes.GENERAL_ERROR,errorType:t.isUserError?c.ErrorType.USER_ERROR:c.ErrorType.SYSTEM_ERROR,message:e.message,stack:e.stack}}function b(e){if(!l)return void console.warn("TelemetryReporter not initialized.");const t={};for(const r of c.DimensionEntries){const n=e[r];void 0!==n&&(t[r]=String(n))}const r={};for(const t of c.MeasurementEntries){const n=e[t];void 0!==n&&(r[t]=n)}T(e.eventName,t,r)}function T(e,t,r){if(l){t=null!=t?t:{};for(const e of Object.keys(t))t[e]=C(f,t[e]);t=Object.assign(Object.assign({},p),t),e in h?l.forEach((n=>{n.sendTelemetryErrorEvent(e,t,r)})):l.forEach((n=>{n.sendTelemetryEvent(e,t,r)})),d&&(u.Output.getInstance().appendLine(`>> ${(new Date).toISOString()}`),u.Output.getInstance().appendLine(JSON.stringify({eventName:e,dimensions:t,measurements:r},null,2)))}else console.warn("TelemetryReporter not initialized.")}function C(e,t){for(const r of e)t=t.replace(r.pattern,r.replace);return t}t.initializeFromJsonFile=function(e,t){return n(this,void 0,void 0,(function*(){try{yield o.promises.access(e);const{publisher:r,name:n,version:i,aiKey:s}=JSON.parse(o.readFileSync(e,"utf-8"));g(`${r}.${n}`,i,s,t)}catch(t){throw new Error(`The JSON file '${e}' does not exist.`)}}))},t.initialize=g,t.setUserError=function(e){e.isUserError=!0},t.setErrorCode=function(e,t){e.errorCode=t},t.instrumentOperation=v,t.instrumentSimpleOperation=m,t.instrumentOperationAsVsCodeCommand=function(e,t,r){return s.commands.registerCommand(e,m(e,t,r))},t.sendOperationStart=y,t.sendOperationEnd=_,t.sendError=function(e){b(Object.assign({eventName:c.EventName.ERROR},w(e)))},t.sendOperationError=S,t.sendInfo=function(e,t,r){if(!l)return void console.warn("TelemetryReporter not initialized.");let n,o;if(r)n=t,o=r;else{n={},o={};for(const e in t)"string"==typeof t[e]?n[e]=t[e]:"number"==typeof t[e]&&(o[e]=t[e])}T(c.EventName.INFO,Object.assign(Object.assign({},n),{operationId:e}),o)},t.instrumentOperationStep=function(e,t,r){return(...o)=>n(this,void 0,void 0,(function*(){let n;const i=Date.now();try{return yield r(...o)}catch(e){throw n=e,e}finally{b(Object.assign({eventName:c.EventName.OPERATION_STEP,operationId:e,stepName:t,duration:Date.now()-i},w(n)))}}))},t.createUuid=E,t.dispose=function(){return n(this,void 0,void 0,(function*(){if(l)return yield Promise.all(l.map((e=>e.dispose())))}))},t.addContextProperty=function(e,t){p[e]=t},t.addReplacementRule=function(e,t){f.push({pattern:e,replace:null!=t?t:""})}},5005:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Output=void 0;const n=r(9496);class o{constructor(){}static getInstance(){return this.INSTANCE||(this.INSTANCE=n.window.createOutputChannel(`Telemetry Wrapper (${o.extensionId})`)),this.INSTANCE}static setExtensionId(e){o.extensionId=e}}t.Output=o},5683:(e,t,r)=>{var n,o=Object.create,i=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,d=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(l)for(var r of l(t))f.call(t,r)&&h(e,r,t[r]);return e},v=(e,t)=>s(e,c(t)),m=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),y=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of u(t))!p.call(e,o)&&o!==r&&i(e,o,{get:()=>t[o],enumerable:!(n=a(t,o))||n.enumerable});return e},_=(e,t,r)=>(r=null!=e?o(d(e)):{},y(!t&&e&&e.__esModule?r:i(r,"default",{value:e,enumerable:!0}),e)),S=m(((e,t)=>{"use strict";var r=function(){function e(){}return e.info=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.enableDebug&&console.info(e.TAG+t,r)},e.warn=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.disableWarnings||console.warn(e.TAG+t,r)},e.enableDebug=!1,e.disableWarnings=!1,e.disableErrors=!1,e.TAG="ApplicationInsights:",e}();t.exports=r})),E=m((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncScopeManager=e.OpenTelemetryScopeManagerWrapper=void 0;var n=mn(),o=r(2361),i=function(){function e(){}return e.prototype.active=function(){var e=this,r=n.CorrelationContextManager.getCurrentContext();return t(t({},r),{getValue:function(t){return e._activeSymbol?t===e._activeSymbol&&r:(e._activeSymbol=t,r)},setValue:function(){}})},e.prototype.with=function(t,r){var o=t.parentSpanId,i=t.name,s=e._spanToContext(t,o,i);return n.CorrelationContextManager.runWithContext(s,r)()},e.prototype.bind=function(e){return"function"==typeof e?n.CorrelationContextManager.wrapCallback(e):(e instanceof o.EventEmitter&&n.CorrelationContextManager.wrapEmitter(e),e)},e.prototype.enable=function(){return n.CorrelationContextManager.enable(),this},e.prototype.disable=function(){return n.CorrelationContextManager.disable(),this},e._spanToContext=function(e,r,o){var i=r?"|"+e.spanContext().traceId+"."+r+".":e.spanContext().traceId,s=t(t({},e.spanContext()),{traceFlags:e.spanContext().traceFlags});return n.CorrelationContextManager.spanToContextObject(s,i,o)},e}();e.OpenTelemetryScopeManagerWrapper=i,e.AsyncScopeManager=new i})),w=m(((e,t)=>{var r;e=t.exports=W,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,i=e.re=[],s=e.src=[],a=0,c=a++;s[c]="0|[1-9]\\d*";var u=a++;s[u]="[0-9]+";var l=a++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=a++;s[d]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var p=a++;s[p]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var f=a++;s[f]="(?:"+s[c]+"|"+s[l]+")";var h=a++;s[h]="(?:"+s[u]+"|"+s[l]+")";var g=a++;s[g]="(?:-("+s[f]+"(?:\\."+s[f]+")*))";var v=a++;s[v]="(?:-?("+s[h]+"(?:\\."+s[h]+")*))";var m=a++;s[m]="[0-9A-Za-z-]+";var y=a++;s[y]="(?:\\+("+s[m]+"(?:\\."+s[m]+")*))";var _=a++,S="v?"+s[d]+s[g]+"?"+s[y]+"?";s[_]="^"+S+"$";var E="[v=\\s]*"+s[p]+s[v]+"?"+s[y]+"?",w=a++;s[w]="^"+E+"$";var b=a++;s[b]="((?:<|>)?=?)";var T=a++;s[T]=s[u]+"|x|X|\\*";var C=a++;s[C]=s[c]+"|x|X|\\*";var P=a++;s[P]="[v=\\s]*("+s[C]+")(?:\\.("+s[C]+")(?:\\.("+s[C]+")(?:"+s[g]+")?"+s[y]+"?)?)?";var I=a++;s[I]="[v=\\s]*("+s[T]+")(?:\\.("+s[T]+")(?:\\.("+s[T]+")(?:"+s[v]+")?"+s[y]+"?)?)?";var O=a++;s[O]="^"+s[b]+"\\s*"+s[P]+"$";var N=a++;s[N]="^"+s[b]+"\\s*"+s[I]+"$";var A=a++;s[A]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var R=a++;s[R]="(?:~>?)";var x=a++;s[x]="(\\s*)"+s[R]+"\\s+",i[x]=new RegExp(s[x],"g");var k=a++;s[k]="^"+s[R]+s[P]+"$";var D=a++;s[D]="^"+s[R]+s[I]+"$";var M=a++;s[M]="(?:\\^)";var j=a++;s[j]="(\\s*)"+s[M]+"\\s+",i[j]=new RegExp(s[j],"g");var L=a++;s[L]="^"+s[M]+s[P]+"$";var F=a++;s[F]="^"+s[M]+s[I]+"$";var U=a++;s[U]="^"+s[b]+"\\s*("+E+")$|^$";var B=a++;s[B]="^"+s[b]+"\\s*("+S+")$|^$";var V=a++;s[V]="(\\s*)"+s[b]+"\\s*("+E+"|"+s[P]+")",i[V]=new RegExp(s[V],"g");var $=a++;s[$]="^\\s*("+s[P]+")\\s+-\\s+("+s[P]+")\\s*$";var H=a++;s[H]="^\\s*("+s[I]+")\\s+-\\s+("+s[I]+")\\s*$";var q,z=a++;for(s[z]="(<|>)?=?\\s*\\*",q=0;q<35;q++)r(q,s[q]),i[q]||(i[q]=new RegExp(s[q]));function G(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof W)return e;if("string"!=typeof e||e.length>n)return null;if(!(t.loose?i[w]:i[_]).test(e))return null;try{return new W(e,t)}catch{return null}}function W(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof W){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof W))return new W(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var s=e.trim().match(t.loose?i[w]:i[_]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}e.parse=G,e.valid=function(e,t){var r=G(e,t);return r?r.version:null},e.clean=function(e,t){var r=G(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},e.SemVer=W,W.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},W.prototype.toString=function(){return this.version},W.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof W||(e=new W(e,this.options)),this.compareMain(e)||this.comparePre(e)},W.prototype.compareMain=function(e){return e instanceof W||(e=new W(e,this.options)),X(this.major,e.major)||X(this.minor,e.minor)||X(this.patch,e.patch)},W.prototype.comparePre=function(e){if(e instanceof W||(e=new W(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return X(n,o)}while(++t)},W.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},e.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new W(e,r).inc(t,n).version}catch{return null}},e.diff=function(e,t){if(Z(e,t))return null;var r=G(e),n=G(t),o="";if(r.prerelease.length||n.prerelease.length){o="pre";var i="prerelease"}for(var s in r)if(("major"===s||"minor"===s||"patch"===s)&&r[s]!==n[s])return o+s;return i},e.compareIdentifiers=X;var K=/^[0-9]+$/;function X(e,t){var r=K.test(e),n=K.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function J(e,t,r){return new W(e,r).compare(new W(t,r))}function Q(e,t,r){return J(e,t,r)>0}function Y(e,t,r){return J(e,t,r)<0}function Z(e,t,r){return 0===J(e,t,r)}function ee(e,t,r){return 0!==J(e,t,r)}function te(e,t,r){return J(e,t,r)>=0}function re(e,t,r){return J(e,t,r)<=0}function ne(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Z(e,r,n);case"!=":return ee(e,r,n);case">":return Q(e,r,n);case">=":return te(e,r,n);case"<":return Y(e,r,n);case"<=":return re(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function oe(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof oe){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof oe))return new oe(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ie?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}e.rcompareIdentifiers=function(e,t){return X(t,e)},e.major=function(e,t){return new W(e,t).major},e.minor=function(e,t){return new W(e,t).minor},e.patch=function(e,t){return new W(e,t).patch},e.compare=J,e.compareLoose=function(e,t){return J(e,t,!0)},e.rcompare=function(e,t,r){return J(t,e,r)},e.sort=function(t,r){return t.sort((function(t,n){return e.compare(t,n,r)}))},e.rsort=function(t,r){return t.sort((function(t,n){return e.rcompare(t,n,r)}))},e.gt=Q,e.lt=Y,e.eq=Z,e.neq=ee,e.gte=te,e.lte=re,e.cmp=ne,e.Comparator=oe;var ie={};function se(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof se)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new se(e.raw,t);if(e instanceof oe)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function ce(e,t,r,n,o,i,s,a,c,u,l,d,p){return((t=ae(r)?"":ae(n)?">="+r+".0.0":ae(o)?">="+r+"."+n+".0":">="+t)+" "+(a=ae(c)?"":ae(u)?"<"+(+c+1)+".0.0":ae(l)?"<"+c+"."+(+u+1)+".0":d?"<="+c+"."+u+"."+l+"-"+d:"<="+a)).trim()}function ue(e,t,n){for(var o=0;o<e.length;o++)if(!e[o].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(o=0;o<e.length;o++)if(r(e[o].semver),e[o].semver!==ie&&e[o].semver.prerelease.length>0){var i=e[o].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function le(e,t,r){try{t=new se(t,r)}catch{return!1}return t.test(e)}function de(e,t,r,n){var o,i,s,a,c;switch(e=new W(e,n),t=new se(t,n),r){case">":o=Q,i=re,s=Y,a=">",c=">=";break;case"<":o=Y,i=te,s=Q,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],d=null,p=null;if(l.forEach((function(e){e.semver===ie&&(e=new oe(">=0.0.0")),d=d||e,p=p||e,o(e.semver,d.semver,n)?d=e:s(e.semver,p.semver,n)&&(p=e)})),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&i(e,p.semver))return!1;if(p.operator===c&&s(e,p.semver))return!1}return!0}oe.prototype.parse=function(e){var t=this.options.loose?i[U]:i[B],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new W(r[2],this.options.loose):this.semver=ie},oe.prototype.toString=function(){return this.value},oe.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===ie||("string"==typeof e&&(e=new W(e,this.options)),ne(e,this.operator,this.semver,this.options))},oe.prototype.intersects=function(e,t){if(!(e instanceof oe))throw new TypeError("a Comparator is required");var r;if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new se(e.value,t),le(this.value,r,t);if(""===e.operator)return r=new se(this.value,t),le(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),o=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||o||i&&s||a||c},e.Range=se,se.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?i[H]:i[$];e=e.replace(n,ce),r("hyphen replace",e),e=e.replace(i[V],"$1$2$3"),r("comparator trim",e,i[V]),e=(e=(e=e.replace(i[x],"$1~")).replace(i[j],"$1^")).split(/\s+/).join(" ");var o=t?i[U]:i[B],s=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?i[F]:i[L];return e.replace(n,(function(t,n,o,i,s){var a;return r("caret",e,t,n,o,i,s),ae(n)?a="":ae(o)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(i)?a="0"===n?">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":">="+n+"."+o+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),a="0"===n?"0"===o?">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+"-"+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===o?">="+n+"."+o+"."+i+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+" <"+(+n+1)+".0.0"),r("caret return",a),a}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?i[D]:i[k];return e.replace(n,(function(t,n,o,i,s){var a;return r("tilde",e,t,n,o,i,s),ae(n)?a="":ae(o)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(i)?a=">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":s?(r("replaceTilde pr",s),a=">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+(+o+1)+".0"):a=">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0",r("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?i[N]:i[O];return e.replace(n,(function(t,n,o,i,s,a){r("xRange",e,t,n,o,i,s,a);var c=ae(o),u=c||ae(i),l=u||ae(s);return"="===n&&l&&(n=""),c?t=">"===n||"<"===n?"<0.0.0":"*":n&&l?(u&&(i=0),s=0,">"===n?(n=">=",u?(o=+o+1,i=0,s=0):(i=+i+1,s=0)):"<="===n&&(n="<",u?o=+o+1:i=+i+1),t=n+o+"."+i+"."+s):u?t=">="+o+".0.0 <"+(+o+1)+".0.0":l&&(t=">="+o+"."+i+".0 <"+o+"."+(+i+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(i[z],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(o)}))),s.map((function(e){return new oe(e,this.options)}),this)},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some((function(r){return r.every((function(r){return e.set.some((function(e){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},e.toComparators=function(e,t){return new se(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new W(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},e.satisfies=le,e.maxSatisfying=function(e,t,r){var n=null,o=null;try{var i=new se(t,r)}catch{return null}return e.forEach((function(e){i.test(e)&&(!n||-1===o.compare(e))&&(o=new W(n=e,r))})),n},e.minSatisfying=function(e,t,r){var n=null,o=null;try{var i=new se(t,r)}catch{return null}return e.forEach((function(e){i.test(e)&&(!n||1===o.compare(e))&&(o=new W(n=e,r))})),n},e.minVersion=function(e,t){e=new se(e,t);var r=new W("0.0.0");if(e.test(r)||(r=new W("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n)e.set[n].forEach((function(e){var t=new W(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!r||Q(r,t))&&(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return r&&e.test(r)?r:null},e.validRange=function(e,t){try{return new se(e,t).range||"*"}catch{return null}},e.ltr=function(e,t,r){return de(e,t,"<",r)},e.gtr=function(e,t,r){return de(e,t,">",r)},e.outside=de,e.prerelease=function(e,t){var r=G(e,t);return r&&r.prerelease.length?r.prerelease:null},e.intersects=function(e,t,r){return e=new se(e,r),t=new se(t,r),e.intersects(t)},e.coerce=function(e){if(e instanceof W)return e;if("string"!=typeof e)return null;var t=e.match(i[A]);return null==t?null:G(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}})),b=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makePatchingRequire=void 0;var t=r(1017),n=w(),o=r(8188),i=Object.keys(process.binding("natives")),s=o.prototype.require;e.makePatchingRequire=function(e){var r={};return function(a){var c=s.apply(this,arguments);if(e[a]){var u=o._resolveFilename(a,this);if(r.hasOwnProperty(u))return r[u];var l=void 0;if(i.indexOf(a)<0)try{l=s.call(this,t.join(a,"package.json")).version}catch{return c}else l=process.version.substring(1);var d=l.indexOf("-");d>=0&&(l=l.substring(0,d));for(var p=c,f=0,h=e[a];f<h.length;f++){var g=h[f];n.satisfies(l,g.versionSpecifier)&&(p=g.patch(p,u))}return r[u]=p}return c}}})),T=m(((e,t)=>{t.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}})),C=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.channel=e.makePatchingRequire=void 0;var t=b(),n=b();Object.defineProperty(e,"makePatchingRequire",{enumerable:!0,get:function(){return n.makePatchingRequire}});var o=function(e){return!0},i=function(){function e(){this.version=T().version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.currentlyPublishing=!1}return e.prototype.shouldPublish=function(e){var t=this.subscribers[e];return!!t&&t.some((function(e){var t=e.filter;return!t||t(!1)}))},e.prototype.publish=function(e,t){if(!this.currentlyPublishing){var r=this.subscribers[e];if(r){var n={timestamp:Date.now(),data:t};this.currentlyPublishing=!0,r.forEach((function(e){var t=e.listener,r=e.filter;try{r&&r(!0)&&t(n)}catch{}})),this.currentlyPublishing=!1}}},e.prototype.subscribe=function(e,t,r){void 0===r&&(r=o),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:t,filter:r})},e.prototype.unsubscribe=function(e,t,r){void 0===r&&(r=o);var n=this.subscribers[e];if(n)for(var i=0;i<n.length;++i)if(n[i].listener===t&&n[i].filter===r)return n.splice(i,1),!0;return!1},e.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(e){return e},Object.getOwnPropertyNames(this.knownPatches).forEach((function(t){return delete e.knownPatches[t]}))},e.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},e.prototype.addContextPreservation=function(e){var t=this.contextPreservationFunction;this.contextPreservationFunction=function(r){return e(t(r))}},e.prototype.registerMonkeyPatch=function(e,t){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(t)},e.prototype.getPatchesObject=function(){return this.knownPatches},e}();global.diagnosticsSource||(global.diagnosticsSource=new i,r(8188).prototype.require=t.makePatchingRequire(global.diagnosticsSource.getPatchesObject())),e.channel=global.diagnosticsSource})),P=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),I=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._globalThis=void 0,e._globalThis="object"==typeof globalThis?globalThis:global})),O=m((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(I(),e)})),N=m((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(O(),e)})),A=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="1.0.3"})),R=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCompatible=e._makeCompatibilityCheck=void 0;var t=A(),r=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function n(e){var t=new Set([e]),n=new Set,o=e.match(r);if(!o)return function(){return!1};var i=+o[1],s=+o[2],a=+o[3];if(null!=o[4])return function(t){return t===e};function c(e){return n.add(e),!1}function u(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(n.has(e))return!1;var o=e.match(r);if(!o)return c(e);var l=+o[1],d=+o[2],p=+o[3];return null!=o[4]||i!==l?c(e):0===i?s===d&&a<=p?u(e):c(e):s<=d?u(e):c(e)}}e._makeCompatibilityCheck=n,e.isCompatible=n(t.VERSION)})),x=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unregisterGlobal=e.getGlobal=e.registerGlobal=void 0;var t=N(),r=A(),n=R(),o=r.VERSION.split(".")[0],i=Symbol.for("opentelemetry.js.api."+o),s=t._globalThis;e.registerGlobal=function(e,t,n,o){var a;void 0===o&&(o=!1);var c=s[i]=null!==(a=s[i])&&void 0!==a?a:{version:r.VERSION};if(!o&&c[e]){var u=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(u.stack||u.message),!1}return c.version!==r.VERSION?(u=new Error("@opentelemetry/api: All API registration versions must match"),n.error(u.stack||u.message),!1):(c[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+r.VERSION+"."),!0)},e.getGlobal=function(e){var t,r,o=null===(t=s[i])||void 0===t?void 0:t.version;if(o&&n.isCompatible(o))return null===(r=s[i])||void 0===r?void 0:r[e]},e.unregisterGlobal=function(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+r.VERSION+".");var n=s[i];n&&delete n[e]}})),k=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagComponentLogger=void 0;var t=x(),r=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("verbose",this._namespace,e)},e}();function n(e,r,n){var o=t.getGlobal("diag");if(o)return n.unshift(r),o[e].apply(o,n)}e.DiagComponentLogger=r})),D=m((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.DiagLogLevel=void 0,(t=e.DiagLogLevel||(e.DiagLogLevel={}))[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})),M=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createLogLevelDiagLogger=void 0;var t=D();e.createLogLevelDiagLogger=function(e,r){function n(t,n){var o=r[t];return"function"==typeof o&&e>=n?o.bind(r):function(){}}return e<t.DiagLogLevel.NONE?e=t.DiagLogLevel.NONE:e>t.DiagLogLevel.ALL&&(e=t.DiagLogLevel.ALL),r=r||{},{error:n("error",t.DiagLogLevel.ERROR),warn:n("warn",t.DiagLogLevel.WARN),info:n("info",t.DiagLogLevel.INFO),debug:n("debug",t.DiagLogLevel.DEBUG),verbose:n("verbose",t.DiagLogLevel.VERBOSE)}}})),j=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagAPI=void 0;var t=k(),r=M(),n=D(),o=x(),i=function(){function e(){function e(e){return function(){var t=o.getGlobal("diag");if(t)return t[e].apply(t,arguments)}}var i=this;i.setLogger=function(e,t){var s,a;if(void 0===t&&(t=n.DiagLogLevel.INFO),e===i){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return i.error(null!==(s=c.stack)&&void 0!==s?s:c.message),!1}var u=o.getGlobal("diag"),l=r.createLogLevelDiagLogger(t,e);if(u){var d=null!==(a=(new Error).stack)&&void 0!==a?a:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+d),l.warn("Current logger will overwrite one already registered from "+d)}return o.registerGlobal("diag",l,i,!0)},i.disable=function(){o.unregisterGlobal("diag",i)},i.createComponentLogger=function(e){return new t.DiagComponentLogger(e)},i.verbose=e("verbose"),i.debug=e("debug"),i.info=e("info"),i.warn=e("warn"),i.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();e.DiagAPI=i})),L=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaggageImpl=void 0;var t=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){return[e[0],e[1]]}))},e.prototype.setEntry=function(t,r){var n=new e(this._entries);return n._entries.set(t,r),n},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r},e.prototype.removeEntries=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=new e(this._entries),o=0,i=t;o<i.length;o++){var s=i[o];n._entries.delete(s)}return n},e.prototype.clear=function(){return new e},e}();e.BaggageImpl=t})),F=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataSymbol=void 0,e.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")})),U=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataFromString=e.createBaggage=void 0;var t=j(),r=L(),n=F(),o=t.DiagAPI.instance();e.createBaggage=function(e){return void 0===e&&(e={}),new r.BaggageImpl(new Map(Object.entries(e)))},e.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(o.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:n.baggageEntryMetadataSymbol,toString:function(){return e}}}})),B=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),V=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),$=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagConsoleLogger=void 0;var t=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];e.DiagConsoleLogger=function(){function e(e){return function(){var t=arguments;if(console){var r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}for(var r=0;r<t.length;r++)this[t[r].n]=e(t[r].c)}})),H=m((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r($(),e),r(D(),e)})),q=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTextMapSetter=e.defaultTextMapGetter=void 0,e.defaultTextMapGetter={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},e.defaultTextMapSetter={set:function(e,t,r){null!=e&&(e[t]=r)}}})),z=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),G=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),W=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ROOT_CONTEXT=e.createContextKey=void 0,e.createContextKey=function(e){return Symbol.for(e)};e.ROOT_CONTEXT=new function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(e){return r._currentContext.get(e)},r.setValue=function(t,n){var o=new e(r._currentContext);return o._currentContext.set(t,n),o},r.deleteValue=function(t){var n=new e(r._currentContext);return n._currentContext.delete(t),n}}})),K=m((e=>{"use strict";var t=e&&e.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(e,"__esModule",{value:!0}),e.NoopContextManager=void 0;var r=W(),n=function(){function e(){}return e.prototype.active=function(){return r.ROOT_CONTEXT},e.prototype.with=function(e,r,n){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return r.call.apply(r,t([n],o))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}();e.NoopContextManager=n})),X=m((e=>{"use strict";var t=e&&e.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(e,"__esModule",{value:!0}),e.ContextAPI=void 0;var r=K(),n=x(),o=j(),i="context",s=new r.NoopContextManager,a=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return n.registerGlobal(i,e,o.DiagAPI.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,r,n){for(var o,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(o=this._getContextManager()).with.apply(o,t([e,r,n],i))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return n.getGlobal(i)||s},e.prototype.disable=function(){this._getContextManager().disable(),n.unregisterGlobal(i,o.DiagAPI.instance())},e}();e.ContextAPI=a})),J=m((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TraceFlags=void 0,(t=e.TraceFlags||(e.TraceFlags={}))[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})),Q=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=void 0;var t=J();e.INVALID_SPANID="0000000000000000",e.INVALID_TRACEID="00000000000000000000000000000000",e.INVALID_SPAN_CONTEXT={traceId:e.INVALID_TRACEID,spanId:e.INVALID_SPANID,traceFlags:t.TraceFlags.NONE}})),Y=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NonRecordingSpan=void 0;var t=Q(),r=function(){function e(e){void 0===e&&(e=t.INVALID_SPAN_CONTEXT),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}();e.NonRecordingSpan=r})),Z=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSpanContext=e.setSpanContext=e.deleteSpan=e.setSpan=e.getSpan=void 0;var t=W(),r=Y(),n=t.createContextKey("OpenTelemetry Context Key SPAN");function o(e){return e.getValue(n)||void 0}function i(e,t){return e.setValue(n,t)}e.getSpan=o,e.setSpan=i,e.deleteSpan=function(e){return e.deleteValue(n)},e.setSpanContext=function(e,t){return i(e,new r.NonRecordingSpan(t))},e.getSpanContext=function(e){var t;return null===(t=o(e))||void 0===t?void 0:t.spanContext()}})),ee=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapSpanContext=e.isSpanContextValid=e.isValidSpanId=e.isValidTraceId=void 0;var t=Q(),r=Y(),n=/^([0-9a-f]{32})$/i,o=/^[0-9a-f]{16}$/i;function i(e){return n.test(e)&&e!==t.INVALID_TRACEID}function s(e){return o.test(e)&&e!==t.INVALID_SPANID}e.isValidTraceId=i,e.isValidSpanId=s,e.isSpanContextValid=function(e){return i(e.traceId)&&s(e.spanId)},e.wrapSpanContext=function(e){return new r.NonRecordingSpan(e)}})),te=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracer=void 0;var t=X(),r=Z(),n=Y(),o=ee(),i=t.ContextAPI.getInstance(),s=function(){function e(){}return e.prototype.startSpan=function(e,t,i){if(Boolean(null==t?void 0:t.root))return new n.NonRecordingSpan;var s=i&&r.getSpanContext(i);return function(e){return"object"==typeof e&&"string"==typeof e.spanId&&"string"==typeof e.traceId&&"number"==typeof e.traceFlags}(s)&&o.isSpanContextValid(s)?new n.NonRecordingSpan(s):new n.NonRecordingSpan},e.prototype.startActiveSpan=function(e,t,n,o){var s,a,c;if(!(arguments.length<2)){2===arguments.length?c=t:3===arguments.length?(s=t,c=n):(s=t,a=n,c=o);var u=a??i.active(),l=this.startSpan(e,s,u),d=r.setSpan(u,l);return i.with(d,c,void 0,l)}},e}();e.NoopTracer=s})),re=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracer=void 0;var t=new(te().NoopTracer),r=function(){function e(e,t,r){this._provider=e,this.name=t,this.version=r}return e.prototype.startSpan=function(e,t,r){return this._getTracer().startSpan(e,t,r)},e.prototype.startActiveSpan=function(e,t,r,n){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version);return e?(this._delegate=e,this._delegate):t},e}();e.ProxyTracer=r})),ne=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracerProvider=void 0;var t=te(),r=function(){function e(){}return e.prototype.getTracer=function(e,r){return new t.NoopTracer},e}();e.NoopTracerProvider=r})),oe=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracerProvider=void 0;var t=re(),r=new(ne().NoopTracerProvider),n=function(){function e(){}return e.prototype.getTracer=function(e,r){var n;return null!==(n=this.getDelegateTracer(e,r))&&void 0!==n?n:new t.ProxyTracer(this,e,r)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:r},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getTracer(e,t)},e}();e.ProxyTracerProvider=n})),ie=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),se=m((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SamplingDecision=void 0,(t=e.SamplingDecision||(e.SamplingDecision={}))[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})),ae=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),ce=m((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SpanKind=void 0,(t=e.SpanKind||(e.SpanKind={}))[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})),ue=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),le=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),de=m((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SpanStatusCode=void 0,(t=e.SpanStatusCode||(e.SpanStatusCode={}))[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})),pe=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),fe=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),he=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),ge=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),ve=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceAPI=void 0;var t=x(),r=oe(),n=ee(),o=Z(),i=j(),s="trace",a=function(){function e(){this._proxyTracerProvider=new r.ProxyTracerProvider,this.wrapSpanContext=n.wrapSpanContext,this.isSpanContextValid=n.isSpanContextValid,this.deleteSpan=o.deleteSpan,this.getSpan=o.getSpan,this.getSpanContext=o.getSpanContext,this.setSpan=o.setSpan,this.setSpanContext=o.setSpanContext}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var r=t.registerGlobal(s,this._proxyTracerProvider,i.DiagAPI.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},e.prototype.getTracerProvider=function(){return t.getGlobal(s)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){t.unregisterGlobal(s,i.DiagAPI.instance()),this._proxyTracerProvider=new r.ProxyTracerProvider},e}();e.TraceAPI=a})),me=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTextMapPropagator=void 0;var t=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}();e.NoopTextMapPropagator=t})),ye=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteBaggage=e.setBaggage=e.getBaggage=void 0;var t=W().createContextKey("OpenTelemetry Baggage Key");e.getBaggage=function(e){return e.getValue(t)||void 0},e.setBaggage=function(e,r){return e.setValue(t,r)},e.deleteBaggage=function(e){return e.deleteValue(t)}})),_e=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropagationAPI=void 0;var t=x(),r=me(),n=q(),o=ye(),i=U(),s=j(),a="propagation",c=new r.NoopTextMapPropagator,u=function(){function e(){this.createBaggage=i.createBaggage,this.getBaggage=o.getBaggage,this.setBaggage=o.setBaggage,this.deleteBaggage=o.deleteBaggage}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return t.registerGlobal(a,e,s.DiagAPI.instance())},e.prototype.inject=function(e,t,r){return void 0===r&&(r=n.defaultTextMapSetter),this._getGlobalPropagator().inject(e,t,r)},e.prototype.extract=function(e,t,r){return void 0===r&&(r=n.defaultTextMapGetter),this._getGlobalPropagator().extract(e,t,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){t.unregisterGlobal(a,s.DiagAPI.instance())},e.prototype._getGlobalPropagator=function(){return t.getGlobal(a)||c},e}();e.PropagationAPI=u})),Se=m((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.diag=e.propagation=e.trace=e.context=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.baggageEntryMetadataFromString=void 0,r(P(),e);var n=U();Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return n.baggageEntryMetadataFromString}}),r(B(),e),r(V(),e),r(H(),e),r(q(),e),r(z(),e),r(G(),e),r(re(),e),r(oe(),e),r(ie(),e),r(se(),e),r(ae(),e),r(ce(),e),r(ue(),e),r(le(),e),r(de(),e),r(J(),e),r(pe(),e),r(fe(),e),r(he(),e);var o=ee();Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return o.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return o.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return o.isValidSpanId}});var i=Q();Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return i.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return i.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return i.INVALID_SPAN_CONTEXT}}),r(W(),e),r(ge(),e);var s=X();e.context=s.ContextAPI.getInstance();var a=ve();e.trace=a.TraceAPI.getInstance();var c=_e();e.propagation=c.PropagationAPI.getInstance();var u=j();e.diag=u.DiagAPI.instance(),e.default={trace:e.trace,context:e.context,propagation:e.propagation,diag:e.diag}})),Ee=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTracingSuppressed=e.unsuppressTracing=e.suppressTracing=void 0;var t=Se().createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");e.suppressTracing=function(e){return e.setValue(t,!0)},e.unsuppressTracing=function(e){return e.deleteValue(t)},e.isTracingSuppressed=function(e){return!0===e.getValue(t)}})),we=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BAGGAGE_MAX_TOTAL_LENGTH=e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=e.BAGGAGE_MAX_NAME_VALUE_PAIRS=e.BAGGAGE_HEADER=e.BAGGAGE_ITEMS_SEPARATOR=e.BAGGAGE_PROPERTIES_SEPARATOR=e.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,e.BAGGAGE_KEY_PAIR_SEPARATOR="=",e.BAGGAGE_PROPERTIES_SEPARATOR=";",e.BAGGAGE_ITEMS_SEPARATOR=",",e.BAGGAGE_HEADER="baggage",e.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,e.BAGGAGE_MAX_TOTAL_LENGTH=8192})),be=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseKeyPairsIntoRecord=e.parsePairKeyValue=e.getKeyPairs=e.serializeKeyPairs=void 0;var t=Se(),r=we();e.serializeKeyPairs=e=>e.reduce(((e,t)=>{let n=`${e}${""!==e?r.BAGGAGE_ITEMS_SEPARATOR:""}${t}`;return n.length>r.BAGGAGE_MAX_TOTAL_LENGTH?e:n}),""),e.getKeyPairs=e=>e.getAllEntries().map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t.value)}`)),e.parsePairKeyValue=e=>{let n=e.split(r.BAGGAGE_PROPERTIES_SEPARATOR);if(n.length<=0)return;let o=n.shift();if(!o)return;let i=o.split(r.BAGGAGE_KEY_PAIR_SEPARATOR);if(2!==i.length)return;let s,a=decodeURIComponent(i[0].trim()),c=decodeURIComponent(i[1].trim());return n.length>0&&(s=t.baggageEntryMetadataFromString(n.join(r.BAGGAGE_PROPERTIES_SEPARATOR))),{key:a,value:c,metadata:s}},e.parseKeyPairsIntoRecord=t=>"string"!=typeof t||0===t.length?{}:t.split(r.BAGGAGE_ITEMS_SEPARATOR).map((t=>e.parsePairKeyValue(t))).filter((e=>void 0!==e&&e.value.length>0)).reduce(((e,t)=>(e[t.key]=t.value,e)),{})})),Te=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpBaggagePropagator=void 0;var t=Se(),r=Ee(),n=we(),o=be();e.HttpBaggagePropagator=class{inject(e,i,s){let a=t.propagation.getBaggage(e);if(!a||r.isTracingSuppressed(e))return;let c=o.getKeyPairs(a).filter((e=>e.length<=n.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS)).slice(0,n.BAGGAGE_MAX_NAME_VALUE_PAIRS),u=o.serializeKeyPairs(c);u.length>0&&s.set(i,n.BAGGAGE_HEADER,u)}extract(e,r,i){let s=i.get(r,n.BAGGAGE_HEADER);if(!s)return e;let a={};return 0===s.length||(s.split(n.BAGGAGE_ITEMS_SEPARATOR).forEach((e=>{let t=o.parsePairKeyValue(e);if(t){let e={value:t.value};t.metadata&&(e.metadata=t.metadata),a[t.key]=e}})),0===Object.entries(a).length)?e:t.propagation.setBaggage(e,t.propagation.createBaggage(a))}fields(){return[n.BAGGAGE_HEADER]}}})),Ce=m((e=>{"use strict";function t(e){return null==e||(Array.isArray(e)?function(e){let t;for(let n of e)if(null!=n){if(!t){if(r(n)){t=typeof n;continue}return!1}if(typeof n!==t)return!1}return!0}(e):r(e))}function r(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}Object.defineProperty(e,"__esModule",{value:!0}),e.isAttributeValue=e.sanitizeAttributes=void 0,e.sanitizeAttributes=function(e){let r={};if(null==e||"object"!=typeof e)return r;for(let[n,o]of Object.entries(e))t(o)&&(Array.isArray(o)?r[n]=o.slice():r[n]=o);return r},e.isAttributeValue=t})),Pe=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loggingErrorHandler=void 0;var t=Se();e.loggingErrorHandler=function(){return e=>{t.diag.error(function(e){return"string"==typeof e?e:JSON.stringify(function(e){let t={},r=e;for(;null!==r;)Object.getOwnPropertyNames(r).forEach((e=>{if(t[e])return;let n=r[e];n&&(t[e]=String(n))})),r=Object.getPrototypeOf(r);return t}(e))}(e))}}})),Ie=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.globalErrorHandler=e.setGlobalErrorHandler=void 0;var t=Pe().loggingErrorHandler();e.setGlobalErrorHandler=function(e){t=e},e.globalErrorHandler=e=>{try{t(e)}catch{}}})),Oe=m((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TracesSamplerValues=void 0,(t=e.TracesSamplerValues||(e.TracesSamplerValues={})).AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})),Ne=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseEnvironment=e.DEFAULT_ENVIRONMENT=void 0;var t=Se(),r=Oe(),n=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function o(e){return n.indexOf(e)>-1}var i=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function s(e){return i.indexOf(e)>-1}function a(e,t,r,n=-1/0,o=1/0){if(typeof r[e]<"u"){let i=Number(r[e]);isNaN(i)||(t[e]=i<n?n:i>o?o:i)}}function c(e,t,r,n=","){let o=r[e];"string"==typeof o&&(t[e]=o.split(n).map((e=>e.trim())))}e.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:t.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:r.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};var u={ALL:t.DiagLogLevel.ALL,VERBOSE:t.DiagLogLevel.VERBOSE,DEBUG:t.DiagLogLevel.DEBUG,INFO:t.DiagLogLevel.INFO,WARN:t.DiagLogLevel.WARN,ERROR:t.DiagLogLevel.ERROR,NONE:t.DiagLogLevel.NONE};function l(e,t,r){let n=r[e];if("string"==typeof n){let r=u[n.toUpperCase()];null!=r&&(t[e]=r)}}e.parseEnvironment=function(t){let r={};for(let n in e.DEFAULT_ENVIRONMENT){let e=n;if("OTEL_LOG_LEVEL"===e)l(e,r,t);else if(o(e))a(e,r,t);else if(s(e))c(e,r,t);else{let n=t[e];typeof n<"u"&&null!==n&&(r[e]=String(n))}}return r}})),Ae=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEnv=void 0;var t=r(2037),n=Ne();e.getEnv=function(){let e=n.parseEnvironment(process.env);return Object.assign({HOSTNAME:t.hostname()},n.DEFAULT_ENVIRONMENT,e)}})),Re=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hexToBase64=void 0,e.hexToBase64=function(e){let t=e.length,r="";for(let n=0;n<t;n+=2){let t=e.substring(n,n+2),o=parseInt(t,16);r+=String.fromCharCode(o)}return Buffer.from(r,"ascii").toString("base64")}})),xe=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RandomIdGenerator=void 0,e.RandomIdGenerator=class{constructor(){this.generateTraceId=r(16),this.generateSpanId=r(8)}};var t=Buffer.allocUnsafe(16);function r(e){return function(){for(let r=0;r<e/4;r++)t.writeUInt32BE(Math.random()*2**32>>>0,4*r);for(let r=0;r<e&&!(t[r]>0);r++)r===e-1&&(t[e-1]=1);return t.toString("hex",0,e)}}})),ke=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.otperformance=void 0;var t=r(4074);e.otperformance=t.performance})),De=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="0.23.0"})),Me=m((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.RpcGrpcStatusCodeValues=e.MessagingOperationValues=e.MessagingDestinationKindValues=e.HttpFlavorValues=e.NetTransportValues=e.FaasInvokedProviderValues=e.FaasDocumentOperationValues=e.FaasTriggerValues=e.DbCassandraConsistencyLevelValues=e.DbSystemValues=e.SemanticAttributes=void 0,e.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"},(t=e.DbSystemValues||(e.DbSystemValues={})).OTHER_SQL="other_sql",t.MSSQL="mssql",t.MYSQL="mysql",t.ORACLE="oracle",t.DB2="db2",t.POSTGRESQL="postgresql",t.REDSHIFT="redshift",t.HIVE="hive",t.CLOUDSCAPE="cloudscape",t.HSQLDB="hsqldb",t.PROGRESS="progress",t.MAXDB="maxdb",t.HANADB="hanadb",t.INGRES="ingres",t.FIRSTSQL="firstsql",t.EDB="edb",t.CACHE="cache",t.ADABAS="adabas",t.FIREBIRD="firebird",t.DERBY="derby",t.FILEMAKER="filemaker",t.INFORMIX="informix",t.INSTANTDB="instantdb",t.INTERBASE="interbase",t.MARIADB="mariadb",t.NETEZZA="netezza",t.PERVASIVE="pervasive",t.POINTBASE="pointbase",t.SQLITE="sqlite",t.SYBASE="sybase",t.TERADATA="teradata",t.VERTICA="vertica",t.H2="h2",t.COLDFUSION="coldfusion",t.CASSANDRA="cassandra",t.HBASE="hbase",t.MONGODB="mongodb",t.REDIS="redis",t.COUCHBASE="couchbase",t.COUCHDB="couchdb",t.COSMOSDB="cosmosdb",t.DYNAMODB="dynamodb",t.NEO4J="neo4j",t.GEODE="geode",t.ELASTICSEARCH="elasticsearch",t.MEMCACHED="memcached",t.COCKROACHDB="cockroachdb",function(e){e.ALL="all",e.EACH_QUORUM="each_quorum",e.QUORUM="quorum",e.LOCAL_QUORUM="local_quorum",e.ONE="one",e.TWO="two",e.THREE="three",e.LOCAL_ONE="local_one",e.ANY="any",e.SERIAL="serial",e.LOCAL_SERIAL="local_serial"}(e.DbCassandraConsistencyLevelValues||(e.DbCassandraConsistencyLevelValues={})),function(e){e.DATASOURCE="datasource",e.HTTP="http",e.PUBSUB="pubsub",e.TIMER="timer",e.OTHER="other"}(e.FaasTriggerValues||(e.FaasTriggerValues={})),function(e){e.INSERT="insert",e.EDIT="edit",e.DELETE="delete"}(e.FaasDocumentOperationValues||(e.FaasDocumentOperationValues={})),function(e){e.AWS="aws",e.AZURE="azure",e.GCP="gcp"}(e.FaasInvokedProviderValues||(e.FaasInvokedProviderValues={})),function(e){e.IP_TCP="ip_tcp",e.IP_UDP="ip_udp",e.IP="ip",e.UNIX="unix",e.PIPE="pipe",e.INPROC="inproc",e.OTHER="other"}(e.NetTransportValues||(e.NetTransportValues={})),function(e){e.HTTP_1_0="1.0",e.HTTP_1_1="1.1",e.HTTP_2_0="2.0",e.SPDY="SPDY",e.QUIC="QUIC"}(e.HttpFlavorValues||(e.HttpFlavorValues={})),function(e){e.QUEUE="queue",e.TOPIC="topic"}(e.MessagingDestinationKindValues||(e.MessagingDestinationKindValues={})),function(e){e.RECEIVE="receive",e.PROCESS="process"}(e.MessagingOperationValues||(e.MessagingOperationValues={})),function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(e.RpcGrpcStatusCodeValues||(e.RpcGrpcStatusCodeValues={}))})),je=m((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Me(),e)})),Le=m((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetrySdkLanguageValues=e.OsTypeValues=e.HostArchValues=e.AwsEcsLaunchtypeValues=e.CloudPlatformValues=e.CloudProviderValues=e.ResourceAttributes=void 0,e.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},(t=e.CloudProviderValues||(e.CloudProviderValues={})).AWS="aws",t.AZURE="azure",t.GCP="gcp",function(e){e.AWS_EC2="aws_ec2",e.AWS_ECS="aws_ecs",e.AWS_EKS="aws_eks",e.AWS_LAMBDA="aws_lambda",e.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",e.AZURE_VM="azure_vm",e.AZURE_CONTAINER_INSTANCES="azure_container_instances",e.AZURE_AKS="azure_aks",e.AZURE_FUNCTIONS="azure_functions",e.AZURE_APP_SERVICE="azure_app_service",e.GCP_COMPUTE_ENGINE="gcp_compute_engine",e.GCP_CLOUD_RUN="gcp_cloud_run",e.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",e.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",e.GCP_APP_ENGINE="gcp_app_engine"}(e.CloudPlatformValues||(e.CloudPlatformValues={})),function(e){e.EC2="ec2",e.FARGATE="fargate"}(e.AwsEcsLaunchtypeValues||(e.AwsEcsLaunchtypeValues={})),function(e){e.AMD64="amd64",e.ARM32="arm32",e.ARM64="arm64",e.IA64="ia64",e.PPC32="ppc32",e.PPC64="ppc64",e.X86="x86"}(e.HostArchValues||(e.HostArchValues={})),function(e){e.WINDOWS="windows",e.LINUX="linux",e.DARWIN="darwin",e.FREEBSD="freebsd",e.NETBSD="netbsd",e.OPENBSD="openbsd",e.DRAGONFLYBSD="dragonflybsd",e.HPUX="hpux",e.AIX="aix",e.SOLARIS="solaris",e.Z_OS="z_os"}(e.OsTypeValues||(e.OsTypeValues={})),function(e){e.CPP="cpp",e.DOTNET="dotnet",e.ERLANG="erlang",e.GO="go",e.JAVA="java",e.NODEJS="nodejs",e.PHP="php",e.PYTHON="python",e.RUBY="ruby",e.WEBJS="webjs"}(e.TelemetrySdkLanguageValues||(e.TelemetrySdkLanguageValues={}))})),Fe=m((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Le(),e)})),Ue=m((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(je(),e),r(Fe(),e)})),Be=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SDK_INFO=void 0;var t=De(),r=Ue();e.SDK_INFO={[r.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[r.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[r.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.TelemetrySdkLanguageValues.NODEJS,[r.ResourceAttributes.TELEMETRY_SDK_VERSION]:t.VERSION}})),Ve=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unrefTimer=void 0,e.unrefTimer=function(e){e.unref()}})),$e=m((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Ae(),e),r(Re(),e),r(xe(),e),r(ke(),e),r(Be(),e),r(Ve(),e)})),He=m((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r($e(),e)})),qe=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTimeInput=e.isTimeInputHrTime=e.hrTimeToMicroseconds=e.hrTimeToMilliseconds=e.hrTimeToNanoseconds=e.hrTimeToTimeStamp=e.hrTimeDuration=e.timeInputToHrTime=e.hrTime=void 0;var t=He(),r=9,n=Math.pow(10,r);function o(e){let t=e/1e3,o=Math.trunc(t);return[o,Number((t-o).toFixed(r))*n]}function i(){let e=t.otperformance.timeOrigin;if("number"!=typeof e){let r=t.otperformance;e=r.timing&&r.timing.fetchStart}return e}function s(e){let r=o(i()),s=o("number"==typeof e?e:t.otperformance.now()),a=r[0]+s[0],c=r[1]+s[1];return c>n&&(c-=n,a+=1),[a,c]}function a(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}e.hrTime=s,e.timeInputToHrTime=function(e){if(a(e))return e;if("number"==typeof e)return e<i()?s(e):o(e);if(e instanceof Date)return o(e.getTime());throw TypeError("Invalid input type")},e.hrTimeDuration=function(e,t){let r=t[0]-e[0],o=t[1]-e[1];return o<0&&(r-=1,o+=n),[r,o]},e.hrTimeToTimeStamp=function(e){let t=r,n=`${"0".repeat(t)}${e[1]}Z`,o=n.substr(n.length-t-1);return new Date(1e3*e[0]).toISOString().replace("000Z",o)},e.hrTimeToNanoseconds=function(e){return e[0]*n+e[1]},e.hrTimeToMilliseconds=function(e){return Math.round(1e3*e[0]+e[1]/1e6)},e.hrTimeToMicroseconds=function(e){return Math.round(1e6*e[0]+e[1]/1e3)},e.isTimeInputHrTime=a,e.isTimeInput=function(e){return a(e)||"number"==typeof e||e instanceof Date}})),ze=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ge=m((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ExportResultCode=void 0,(t=e.ExportResultCode||(e.ExportResultCode={}))[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})),We=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompositePropagator=void 0;var t=Se();e.CompositePropagator=class{constructor(e={}){var t;this._propagators=null!==(t=e.propagators)&&void 0!==t?t:[],this._fields=Array.from(new Set(this._propagators.map((e=>"function"==typeof e.fields?e.fields():[])).reduce(((e,t)=>e.concat(t)),[])))}inject(e,r,n){for(let o of this._propagators)try{o.inject(e,r,n)}catch(e){t.diag.warn(`Failed to inject with ${o.constructor.name}. Err: ${e.message}`)}}extract(e,r,n){return this._propagators.reduce(((e,o)=>{try{return o.extract(e,r,n)}catch(e){t.diag.warn(`Failed to inject with ${o.constructor.name}. Err: ${e.message}`)}return e}),e)}fields(){return this._fields.slice()}}})),Ke=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateValue=e.validateKey=void 0;var t="[_0-9a-z-*/]",r=new RegExp(`^(?:[a-z]${t}{0,255}|[a-z0-9]${t}{0,240}@[a-z]${t}{0,13})$`),n=/^[ -~]{0,255}[!-~]$/,o=/,|=/;e.validateKey=function(e){return r.test(e)},e.validateValue=function(e){return n.test(e)&&!o.test(e)}})),Xe=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceState=void 0;var t=Ke(),r=class{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce(((e,t)=>(e.push(t+"="+this.get(t)),e)),[]).join(",")}_parse(e){e.length>512||(this._internalState=e.split(",").reverse().reduce(((e,r)=>{let n=r.trim(),o=n.indexOf("=");if(-1!==o){let i=n.slice(0,o),s=n.slice(o+1,r.length);t.validateKey(i)&&t.validateValue(s)&&e.set(i,s)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new r;return e._internalState=new Map(this._internalState),e}};e.TraceState=r})),Je=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpTraceContextPropagator=e.parseTraceParent=e.TRACE_STATE_HEADER=e.TRACE_PARENT_HEADER=void 0;var t=Se(),r=Ee(),n=Xe();e.TRACE_PARENT_HEADER="traceparent",e.TRACE_STATE_HEADER="tracestate";var o=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");function i(e){let t=o.exec(e);return!t||"00"===t[1]&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}e.parseTraceParent=i,e.HttpTraceContextPropagator=class{inject(n,o,i){let s=t.trace.getSpanContext(n);if(!s||r.isTracingSuppressed(n)||!t.isSpanContextValid(s))return;let a=`00-${s.traceId}-${s.spanId}-0${Number(s.traceFlags||t.TraceFlags.NONE).toString(16)}`;i.set(o,e.TRACE_PARENT_HEADER,a),s.traceState&&i.set(o,e.TRACE_STATE_HEADER,s.traceState.serialize())}extract(r,o,s){let a=s.get(o,e.TRACE_PARENT_HEADER);if(!a)return r;let c=Array.isArray(a)?a[0]:a;if("string"!=typeof c)return r;let u=i(c);if(!u)return r;u.isRemote=!0;let l=s.get(o,e.TRACE_STATE_HEADER);if(l){let e=Array.isArray(l)?l.join(","):l;u.traceState=new n.TraceState("string"==typeof e?e:void 0)}return t.trace.setSpanContext(r,u)}fields(){return[e.TRACE_PARENT_HEADER,e.TRACE_STATE_HEADER]}}})),Qe=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ye=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRPCMetadata=e.deleteRPCMetadata=e.setRPCMetadata=e.RPCType=void 0;var t=Se().createContextKey("OpenTelemetry SDK Context Key RPC_METADATA");(e.RPCType||(e.RPCType={})).HTTP="http",e.setRPCMetadata=function(e,r){return e.setValue(t,r)},e.deleteRPCMetadata=function(e){return e.deleteValue(t)},e.getRPCMetadata=function(e){return e.getValue(t)}})),Ze=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOffSampler=void 0;var t=Se();e.AlwaysOffSampler=class{shouldSample(){return{decision:t.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}})),et=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOnSampler=void 0;var t=Se();e.AlwaysOnSampler=class{shouldSample(){return{decision:t.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}})),tt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParentBasedSampler=void 0;var t=Se(),r=Ie(),n=Ze(),o=et();e.ParentBasedSampler=class{constructor(e){var t,i,s,a;this._root=e.root,this._root||(r.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new o.AlwaysOnSampler),this._remoteParentSampled=null!==(t=e.remoteParentSampled)&&void 0!==t?t:new o.AlwaysOnSampler,this._remoteParentNotSampled=null!==(i=e.remoteParentNotSampled)&&void 0!==i?i:new n.AlwaysOffSampler,this._localParentSampled=null!==(s=e.localParentSampled)&&void 0!==s?s:new o.AlwaysOnSampler,this._localParentNotSampled=null!==(a=e.localParentNotSampled)&&void 0!==a?a:new n.AlwaysOffSampler}shouldSample(e,r,n,o,i,s){let a=t.trace.getSpanContext(e);return a&&t.isSpanContextValid(a)?a.isRemote?a.traceFlags&t.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,o,i,s):this._remoteParentNotSampled.shouldSample(e,r,n,o,i,s):a.traceFlags&t.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(e,r,n,o,i,s):this._localParentNotSampled.shouldSample(e,r,n,o,i,s):this._root.shouldSample(e,r,n,o,i,s)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}})),rt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceIdRatioBasedSampler=void 0;var t=Se();e.TraceIdRatioBasedSampler=class{constructor(e=0){this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(4294967295*this._ratio)}shouldSample(e,r){return{decision:t.isValidTraceId(r)&&this._accumulate(r)<this._upperBound?t.SamplingDecision.RECORD_AND_SAMPLED:t.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e}_accumulate(e){let t=0;for(let r=0;r<e.length/8;r++){let n=8*r;t=(t^parseInt(e.slice(n,n+8),16))>>>0}return t}}})),nt=m((e=>{"use strict";function t(e,t){return"string"==typeof t?e===t:t.test(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.isUrlIgnored=e.urlMatches=void 0,e.urlMatches=t,e.isUrlIgnored=function(e,r){if(!r)return!1;for(let n of r)if(t(e,n))return!0;return!1}})),ot=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isWrapped=void 0,e.isWrapped=function(e){return"function"==typeof e&&"function"==typeof e.__original&&"function"==typeof e.__unwrap&&!0===e.__wrapped}})),it=m((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.baggageUtils=void 0,r(Te(),e),r(Ce(),e),r(Ie(),e),r(Pe(),e),r(qe(),e),r(ze(),e),r(Ge(),e),r(De(),e),e.baggageUtils=be(),r(He(),e),r(We(),e),r(Je(),e),r(Qe(),e),r(Ye(),e),r(Ze(),e),r(et(),e),r(tt(),e),r(rt(),e),r(Ee(),e),r(Xe(),e),r(Ne(),e),r(Oe(),e),r(nt(),e),r(ot(),e),r(De(),e)})),st=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExceptionEventName=void 0,e.ExceptionEventName="exception"})),at=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Span=void 0;var t=Se(),r=it(),n=Ue(),o=st();e.Span=class{constructor(e,n,o,i,s,a,c=[],u=r.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:t.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=o,this._spanContext=i,this.parentSpanId=a,this.kind=s,this.links=c,this.startTime=r.timeInputToHrTime(u),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,n)}spanContext(){return this._spanContext}setAttribute(e,n){return null==n||this._isSpanEnded()?this:0===e.length?(t.diag.warn(`Invalid attribute key: ${e}`),this):r.isAttributeValue(n)?(Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)||(this.attributes[e]=n),this):(t.diag.warn(`Invalid attribute value set for key: ${e}`),this)}setAttributes(e){for(let[t,r]of Object.entries(e))this.setAttribute(t,r);return this}addEvent(e,n,o){return this._isSpanEnded()||(this.events.length>=this._spanLimits.eventCountLimit&&(t.diag.warn("Dropping extra events."),this.events.shift()),r.isTimeInput(n)&&(typeof o>"u"&&(o=n),n=void 0),typeof o>"u"&&(o=r.hrTime()),this.events.push({name:e,attributes:n,time:r.timeInputToHrTime(o)})),this}setStatus(e){return this._isSpanEnded()||(this.status=e),this}updateName(e){return this._isSpanEnded()||(this.name=e),this}end(e=r.hrTime()){this._isSpanEnded()?t.diag.error("You can only call end() on a span once."):(this._ended=!0,this.endTime=r.timeInputToHrTime(e),this._duration=r.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&t.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this))}isRecording(){return!1===this._ended}recordException(e,i=r.hrTime()){let s={};"string"==typeof e?s[n.SemanticAttributes.EXCEPTION_MESSAGE]=e:e&&(e.code?s[n.SemanticAttributes.EXCEPTION_TYPE]=e.code.toString():e.name&&(s[n.SemanticAttributes.EXCEPTION_TYPE]=e.name),e.message&&(s[n.SemanticAttributes.EXCEPTION_MESSAGE]=e.message),e.stack&&(s[n.SemanticAttributes.EXCEPTION_STACKTRACE]=e.stack)),s[n.SemanticAttributes.EXCEPTION_TYPE]||s[n.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(o.ExceptionEventName,s,i):t.diag.warn(`Failed to record an exception ${e}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&t.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}}})),ct=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildSamplerFromEnv=e.DEFAULT_CONFIG=void 0;var t=Se(),r=it(),n=r.getEnv(),o=r.TracesSamplerValues.AlwaysOn;function i(e=r.getEnv()){switch(e.OTEL_TRACES_SAMPLER){case r.TracesSamplerValues.AlwaysOn:return new r.AlwaysOnSampler;case r.TracesSamplerValues.AlwaysOff:return new r.AlwaysOffSampler;case r.TracesSamplerValues.ParentBasedAlwaysOn:return new r.ParentBasedSampler({root:new r.AlwaysOnSampler});case r.TracesSamplerValues.ParentBasedAlwaysOff:return new r.ParentBasedSampler({root:new r.AlwaysOffSampler});case r.TracesSamplerValues.TraceIdRatio:return new r.TraceIdRatioBasedSampler(a(e));case r.TracesSamplerValues.ParentBasedTraceIdRatio:return new r.ParentBasedSampler({root:new r.TraceIdRatioBasedSampler(a(e))});default:return t.diag.error(`OTEL_TRACES_SAMPLER value "${e.OTEL_TRACES_SAMPLER} invalid, defaulting to ${o}".`),new r.AlwaysOnSampler}}e.DEFAULT_CONFIG={sampler:i(n),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:r.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:r.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:r.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}},e.buildSamplerFromEnv=i;var s=1;function a(e){if(void 0===e.OTEL_TRACES_SAMPLER_ARG||""===e.OTEL_TRACES_SAMPLER_ARG)return t.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${s}.`),s;let r=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(r)?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${s}.`),s):r<0||r>1?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${s}.`),s):r}})),ut=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeConfig=void 0;var t=ct();e.mergeConfig=function(e){let r={sampler:t.buildSamplerFromEnv()},n=Object.assign({},t.DEFAULT_CONFIG,r,e);return n.spanLimits=Object.assign({},t.DEFAULT_CONFIG.spanLimits,e.spanLimits||{}),n}})),lt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tracer=void 0;var t=Se(),r=it(),n=at(),o=ut();e.Tracer=class{constructor(e,t,n){this._tracerProvider=n;let i=o.mergeConfig(t);this._sampler=i.sampler,this._spanLimits=i.spanLimits,this._idGenerator=t.idGenerator||new r.RandomIdGenerator,this.resource=n.resource,this.instrumentationLibrary=e}startSpan(e,o={},i=t.context.active()){var s,a;if(r.isTracingSuppressed(i))return t.diag.debug("Instrumentation suppressed, returning Noop Span"),t.trace.wrapSpanContext(t.INVALID_SPAN_CONTEXT);let c,u,l,d=function(e,r){if(!e.root)return t.trace.getSpanContext(r)}(o,i),p=this._idGenerator.generateSpanId();d&&t.trace.isSpanContextValid(d)?(c=d.traceId,u=d.traceState,l=d.spanId):c=this._idGenerator.generateTraceId();let f=null!==(s=o.kind)&&void 0!==s?s:t.SpanKind.INTERNAL,h=null!==(a=o.links)&&void 0!==a?a:[],g=r.sanitizeAttributes(o.attributes),v=this._sampler.shouldSample(o.root?t.trace.setSpanContext(i,t.INVALID_SPAN_CONTEXT):i,c,e,f,g,h),m={traceId:c,spanId:p,traceFlags:v.decision===t.SamplingDecision.RECORD_AND_SAMPLED?t.TraceFlags.SAMPLED:t.TraceFlags.NONE,traceState:u};if(v.decision===t.SamplingDecision.NOT_RECORD)return t.diag.debug("Recording is off, propagating context in a non-recording span"),t.trace.wrapSpanContext(m);let y=new n.Span(this,i,e,m,f,l,h,o.startTime);return y.setAttributes(Object.assign(g,v.attributes)),y}startActiveSpan(e,r,n,o){let i,s,a;if(arguments.length<2)return;2===arguments.length?a=r:3===arguments.length?(i=r,a=n):(i=r,s=n,a=o);let c=s??t.context.active(),u=this.startSpan(e,i,c),l=t.trace.setSpan(c,u);return t.context.with(l,a,void 0,u)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}}})),dt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultServiceName=void 0,e.defaultServiceName=function(){return`unknown_service:${process.argv0}`}})),pt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detectResources=void 0;var t=yt(),n=Se(),o=r(3837);e.detectResources=async(e={})=>{let r=Object.assign(e),o=await Promise.all((r.detectors||[]).map((async e=>{try{let t=await e.detect(r);return n.diag.debug(`${e.constructor.name} found resource.`,t),t}catch(r){return n.diag.debug(`${e.constructor.name} failed: ${r.message}`),t.Resource.empty()}})));return i(o),o.reduce(((e,t)=>e.merge(t)),t.Resource.empty())};var i=e=>{e.forEach((e=>{if(Object.keys(e.attributes).length>0){let t=o.inspect(e.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});n.diag.verbose(t)}}))}})),ft=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.envDetector=void 0;var t=Se(),r=it(),n=Ue(),o=Et();e.envDetector=new class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(e){let i={},s=r.getEnv(),a=s.OTEL_RESOURCE_ATTRIBUTES,c=s.OTEL_SERVICE_NAME;if(a)try{let e=this._parseResourceAttributes(a);Object.assign(i,e)}catch(e){t.diag.debug(`EnvDetector failed: ${e.message}`)}return c&&(i[n.ResourceAttributes.SERVICE_NAME]=c),new o.Resource(i)}_parseResourceAttributes(e){if(!e)return{};let t={},r=e.split(this._COMMA_SEPARATOR,-1);for(let e of r){let r=e.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(2!==r.length)continue;let[n,o]=r;if(n=n.trim(),o=o.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(n))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(o))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);t[n]=o}return t}_isValid(e){return e.length<=this._MAX_LENGTH&&this._isPrintableString(e)}_isPrintableString(e){for(let t=0;t<e.length;t++){let r=e.charAt(t);if(r<=" "||r>="~")return!1}return!0}_isValidAndNotEmpty(e){return e.length>0&&this._isValid(e)}}})),ht=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processDetector=void 0;var t=Se(),r=Ue(),n=Et();e.processDetector=new class{async detect(e){let t={[r.ResourceAttributes.PROCESS_PID]:process.pid,[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[r.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[r.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(t,e)}_getResourceAttributes(e,o){return""===e[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]||""===e[r.ResourceAttributes.PROCESS_EXECUTABLE_PATH]||""===e[r.ResourceAttributes.PROCESS_COMMAND]||""===e[r.ResourceAttributes.PROCESS_COMMAND_LINE]?(t.diag.debug("ProcessDetector failed: Unable to find required process resources. "),n.Resource.empty()):new n.Resource(Object.assign({},e))}}})),gt=m((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(ft(),e),r(ht(),e)})),vt=m((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(dt(),e),r(pt(),e),r(gt(),e)})),mt=m((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(vt(),e)})),yt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Resource=void 0;var t=Ue(),r=it(),n=mt(),o=class{constructor(e){this.attributes=e}static empty(){return o.EMPTY}static default(){return new o({[t.ResourceAttributes.SERVICE_NAME]:n.defaultServiceName(),[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[t.ResourceAttributes.TELEMETRY_SDK_NAME]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_NAME],[t.ResourceAttributes.TELEMETRY_SDK_VERSION]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(e){if(!e||!Object.keys(e.attributes).length)return this;let t=Object.assign({},this.attributes,e.attributes);return new o(t)}};e.Resource=o,o.EMPTY=new o({})})),_t=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),St=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Et=m((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(yt(),e),r(mt(),e),r(_t(),e),r(St(),e)})),wt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiSpanProcessor=void 0;var t=it();e.MultiSpanProcessor=class{constructor(e){this._spanProcessors=e}forceFlush(){let e=[];for(let t of this._spanProcessors)e.push(t.forceFlush());return new Promise((r=>{Promise.all(e).then((()=>{r()})).catch((e=>{t.globalErrorHandler(e||new Error("MultiSpanProcessor: forceFlush failed")),r()}))}))}onStart(e,t){for(let r of this._spanProcessors)r.onStart(e,t)}onEnd(e){for(let t of this._spanProcessors)t.onEnd(e)}shutdown(){let e=[];for(let t of this._spanProcessors)e.push(t.shutdown());return new Promise(((t,r)=>{Promise.all(e).then((()=>{t()}),r)}))}}})),bt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopSpanProcessor=void 0,e.NoopSpanProcessor=class{onStart(e,t){}onEnd(e){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}}})),Tt=m(((e,t)=>{var r="__lodash_hash_undefined__",n=9007199254740991,o="[object Arguments]",i="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",c="[object Null]",u="[object Object]",l="[object Proxy]",d="[object Undefined]",p=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,h={};h["[object Float32Array]"]=h["[object Float64Array]"]=h["[object Int8Array]"]=h["[object Int16Array]"]=h["[object Int32Array]"]=h["[object Uint8Array]"]=h["[object Uint8ClampedArray]"]=h["[object Uint16Array]"]=h["[object Uint32Array]"]=!0,h[o]=h["[object Array]"]=h["[object ArrayBuffer]"]=h["[object Boolean]"]=h["[object DataView]"]=h["[object Date]"]=h["[object Error]"]=h[s]=h["[object Map]"]=h["[object Number]"]=h[u]=h["[object RegExp]"]=h["[object Set]"]=h["[object String]"]=h["[object WeakMap]"]=!1;var g,v="object"==typeof global&&global&&global.Object===Object&&global,m="object"==typeof self&&self&&self.Object===Object&&self,y=v||m||Function("return this")(),_="object"==typeof e&&e&&!e.nodeType&&e,S=_&&"object"==typeof t&&t&&!t.nodeType&&t,E=S&&S.exports===_,w=E&&v.process,b=function(){try{return S&&S.require&&S.require("util").types||w&&w.binding&&w.binding("util")}catch{}}(),T=b&&b.isTypedArray,C=Array.prototype,P=Function.prototype,I=Object.prototype,O=y["__core-js_shared__"],N=P.toString,A=I.hasOwnProperty,R=(g=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"",x=I.toString,k=N.call(Object),D=RegExp("^"+N.call(A).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),M=E?y.Buffer:void 0,j=y.Symbol,L=y.Uint8Array,F=(M&&M.allocUnsafe,function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object)),U=Object.create,B=I.propertyIsEnumerable,V=C.splice,$=j?j.toStringTag:void 0,H=function(){try{var e=le(Object,"defineProperty");return e({},"",{}),e}catch{}}(),q=M?M.isBuffer:void 0,z=Math.max,G=Date.now,W=le(y,"Map"),K=le(Object,"create"),X=function(){function e(){}return function(t){if(!we(t))return{};if(U)return U(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function J(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Q(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Y(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Z(e){var t=this.__data__=new Q(e);this.size=t.size}function ee(e,t,r){(void 0!==r&&!ge(e[t],r)||void 0===r&&!(t in e))&&ne(e,t,r)}function te(e,t,r){var n=e[t];(!A.call(e,t)||!ge(n,r)||void 0===r&&!(t in e))&&ne(e,t,r)}function re(e,t){for(var r=e.length;r--;)if(ge(e[r][0],t))return r;return-1}function ne(e,t,r){"__proto__"==t&&H?H(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}J.prototype.clear=function(){this.__data__=K?K(null):{},this.size=0},J.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},J.prototype.get=function(e){var t=this.__data__;if(K){var n=t[e];return n===r?void 0:n}return A.call(t,e)?t[e]:void 0},J.prototype.has=function(e){var t=this.__data__;return K?void 0!==t[e]:A.call(t,e)},J.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=K&&void 0===t?r:t,this},Q.prototype.clear=function(){this.__data__=[],this.size=0},Q.prototype.delete=function(e){var t=this.__data__,r=re(t,e);return!(r<0||(r==t.length-1?t.pop():V.call(t,r,1),--this.size,0))},Q.prototype.get=function(e){var t=this.__data__,r=re(t,e);return r<0?void 0:t[r][1]},Q.prototype.has=function(e){return re(this.__data__,e)>-1},Q.prototype.set=function(e,t){var r=this.__data__,n=re(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Y.prototype.clear=function(){this.size=0,this.__data__={hash:new J,map:new(W||Q),string:new J}},Y.prototype.delete=function(e){var t=ue(this,e).delete(e);return this.size-=t?1:0,t},Y.prototype.get=function(e){return ue(this,e).get(e)},Y.prototype.has=function(e){return ue(this,e).has(e)},Y.prototype.set=function(e,t){var r=ue(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Z.prototype.clear=function(){this.__data__=new Q,this.size=0},Z.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Z.prototype.get=function(e){return this.__data__.get(e)},Z.prototype.has=function(e){return this.__data__.has(e)},Z.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Q){var n=r.__data__;if(!W||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Y(n)}return r.set(e,t),this.size=r.size,this};var oe=function(e,t,r){for(var n=-1,o=Object(e),i=r(e),s=i.length;s--;){var a=i[++n];if(!1===t(o[a],a,o))break}return e};function ie(e){return null==e?void 0===e?d:c:$&&$ in Object(e)?function(e){var t=A.call(e,$),r=e[$];try{e[$]=void 0;var n=!0}catch{}var o=x.call(e);return n&&(t?e[$]=r:delete e[$]),o}(e):function(e){return x.call(e)}(e)}function se(e){return be(e)&&ie(e)==o}function ae(e,t,r,n,o){e!==t&&oe(t,(function(i,s){if(o||(o=new Z),we(i))!function(e,t,r,n,o,i,s){var a=fe(e,r),c=fe(t,r),l=s.get(c);if(l)ee(e,r,l);else{var d=i?i(a,c,r+"",e,t,s):void 0,p=void 0===d;if(p){var f=me(c),h=!f&&_e(c),g=!f&&!h&&Te(c);d=c,f||h||g?me(a)?d=a:function(e){return be(e)&&ye(e)}(a)?d=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(a):h?(p=!1,d=function(e,t){return e.slice()}(c)):g?(p=!1,d=function(e,t){var r=function(e){var t=new e.constructor(e.byteLength);return new L(t).set(new L(e)),t}(e.buffer);return new e.constructor(r,e.byteOffset,e.length)}(c)):d=[]:function(e){if(!be(e)||ie(e)!=u)return!1;var t=F(e);if(null===t)return!0;var r=A.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&N.call(r)==k}(c)||ve(c)?(d=a,ve(a)?d=function(e){return function(e,t,r,n){var o=!r;r||(r={});for(var i=-1,s=t.length;++i<s;){var a=t[i],c=void 0;void 0===c&&(c=e[a]),o?ne(r,a,c):te(r,a,c)}return r}(e,Ce(e))}(a):(!we(a)||Se(a))&&(d=function(e){return"function"!=typeof e.constructor||pe(e)?{}:X(F(e))}(c))):p=!1}p&&(s.set(c,d),o(d,c,n,i,s),s.delete(c)),ee(e,r,d)}}(e,t,s,r,ae,n,o);else{var a=n?n(fe(e,s),i,s+"",e,t,o):void 0;void 0===a&&(a=i),ee(e,s,a)}}),Ce)}var ce=H?function(e,t){return H(e,"toString",{configurable:!0,enumerable:!1,value:Ie(t),writable:!0})}:Oe;function ue(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function le(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!we(e)||function(e){return!!R&&R in e}(e))&&(Se(e)?D:p).test(function(e){if(null!=e){try{return N.call(e)}catch{}try{return e+""}catch{}}return""}(e))}(r)?r:void 0}function de(e,t){var r=typeof e;return!!(t=t??n)&&("number"==r||"symbol"!=r&&f.test(e))&&e>-1&&e%1==0&&e<t}function pe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||I)}function fe(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var he=function(e){var t=0,r=0;return function(){var n=G(),o=16-(n-r);if(r=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(ce);function ge(e,t){return e===t||e!=e&&t!=t}var ve=se(function(){return arguments}())?se:function(e){return be(e)&&A.call(e,"callee")&&!B.call(e,"callee")},me=Array.isArray;function ye(e){return null!=e&&Ee(e.length)&&!Se(e)}var _e=q||function(){return!1};function Se(e){if(!we(e))return!1;var t=ie(e);return t==s||t==a||t==i||t==l}function Ee(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}function we(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function be(e){return null!=e&&"object"==typeof e}var Te=T?function(e){return function(t){return e(t)}}(T):function(e){return be(e)&&Ee(e.length)&&!!h[ie(e)]};function Ce(e){return ye(e)?function(e,t){var r=me(e),n=!r&&ve(e),o=!r&&!n&&_e(e),i=!r&&!n&&!o&&Te(e),s=r||n||o||i,a=s?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=a.length;for(var u in e)(t||A.call(e,u))&&(!s||!("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||de(u,c)))&&a.push(u);return a}(e,!0):function(e){if(!we(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=pe(e),r=[];for(var n in e)"constructor"==n&&(t||!A.call(e,n))||r.push(n);return r}(e)}var Pe=function(e){return function(e,t){return he(function(e,t,r){return t=z(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=z(n.length-t,0),s=Array(i);++o<i;)s[o]=n[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=n[o];return a[t]=r(s),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,a)}}(e,t,Oe),e+"")}((function(t,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,s&&function(e,t,r){if(!we(r))return!1;var n=typeof t;return!!("number"==n?ye(r)&&de(t,r.length):"string"==n&&t in r)&&ge(r[t],e)}(r[0],r[1],s)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var a=r[n];a&&e(t,a,n)}return t}))}((function(e,t,r){ae(e,t,r)}));function Ie(e){return function(){return e}}function Oe(e){return e}t.exports=Pe})),Ct=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessorBase=void 0;var t=Se(),r=it();e.BatchSpanProcessorBase=class{constructor(e,t){this._exporter=e,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let n=r.getEnv();this._maxExportBatchSize="number"==typeof(null==t?void 0:t.maxExportBatchSize)?t.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof(null==t?void 0:t.maxQueueSize)?t.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof(null==t?void 0:t.scheduledDelayMillis)?t.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof(null==t?void 0:t.exportTimeoutMillis)?t.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(e){}onEnd(e){this._isShutdown||this._addToBuffer(e)}shutdown(){return this._isShutdown||(this._isShutdown=!0,this._shuttingDownPromise=new Promise(((e,t)=>{Promise.resolve().then((()=>this.onShutdown())).then((()=>this._flushAll())).then((()=>this._exporter.shutdown())).then(e).catch((e=>{t(e)}))}))),this._shuttingDownPromise}_addToBuffer(e){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(e),this._maybeStartTimer())}_flushAll(){return new Promise(((e,t)=>{let r=[];for(let e=0,t=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);e<t;e++)r.push(this._flushOneBatch());Promise.all(r).then((()=>{e()})).catch(t)}))}_flushOneBatch(){return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise(((e,n)=>{let o=setTimeout((()=>{n(new Error("Timeout"))}),this._exportTimeoutMillis);t.context.with(r.suppressTracing(t.context.active()),(()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),(t=>{var i;clearTimeout(o),t.code===r.ExportResultCode.SUCCESS?e():n(null!==(i=t.error)&&void 0!==i?i:new Error("BatchSpanProcessor: span export failed"))}))}))}))}_maybeStartTimer(){void 0===this._timer&&(this._timer=setTimeout((()=>{this._flushOneBatch().then((()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())})).catch((e=>{r.globalErrorHandler(e)}))}),this._scheduledDelayMillis),r.unrefTimer(this._timer))}_clearTimer(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)}}})),Pt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessor=void 0;var t=Ct(),r=class extends t.BatchSpanProcessorBase{onShutdown(){}};e.BatchSpanProcessor=r})),It=m((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Pt(),e)})),Ot=m((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(It(),e)})),Nt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BasicTracerProvider=e.ForceFlushState=void 0;var t,r,n=Se(),o=it(),i=Et(),s=Ft(),a=ct(),c=wt(),u=bt(),l=Tt(),d=Ot();(r=t=e.ForceFlushState||(e.ForceFlushState={}))[r.resolved=0]="resolved",r[r.timeout=1]="timeout",r[r.error=2]="error",r[r.unresolved=3]="unresolved";var p=class{constructor(e={}){var t;this._registeredSpanProcessors=[],this._tracers=new Map;let r=l({},a.DEFAULT_CONFIG,e);this.resource=null!==(t=r.resource)&&void 0!==t?t:i.Resource.empty(),this.resource=i.Resource.default().merge(this.resource),this._config=Object.assign({},r,{resource:this.resource});let n=this._buildExporterFromEnv();if(void 0!==n){let e=new d.BatchSpanProcessor(n);this.activeSpanProcessor=e}else this.activeSpanProcessor=new u.NoopSpanProcessor}getTracer(e,t){let r=`${e}@${t||""}`;return this._tracers.has(r)||this._tracers.set(r,new s.Tracer({name:e,version:t},this._config,this)),this._tracers.get(r)}addSpanProcessor(e){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch((e=>n.diag.error("Error while trying to shutdown current span processor",e))),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new c.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(e={}){n.trace.setGlobalTracerProvider(this),void 0===e.propagator&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&n.context.setGlobalContextManager(e.contextManager),e.propagator&&n.propagation.setGlobalPropagator(e.propagator)}forceFlush(){let e=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map((r=>new Promise((n=>{let o,i=setTimeout((()=>{n(new Error(`Span processor did not completed within timeout period of ${e} ms`)),o=t.timeout}),e);r.forceFlush().then((()=>{clearTimeout(i),o!==t.timeout&&(o=t.resolved,n(o))})).catch((e=>{clearTimeout(i),o=t.error,n(e)}))}))));return new Promise(((e,n)=>{Promise.all(r).then((r=>{let o=r.filter((e=>e!==t.resolved));o.length>0?n(o):e()})).catch((e=>n([e])))}))}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(e){var t;return null===(t=p._registeredPropagators.get(e))||void 0===t?void 0:t()}_getSpanExporter(e){var t;return null===(t=p._registeredExporters.get(e))||void 0===t?void 0:t()}_buildPropagatorFromEnv(){let e=Array.from(new Set(o.getEnv().OTEL_PROPAGATORS)),t=e.map((e=>{let t=this._getPropagator(e);return t||n.diag.warn(`Propagator "${e}" requested through environment variable is unavailable.`),t})).reduce(((e,t)=>(t&&e.push(t),e)),[]);if(0!==t.length)return 1===e.length?t[0]:new o.CompositePropagator({propagators:t})}_buildExporterFromEnv(){let e=o.getEnv().OTEL_TRACES_EXPORTER;if("none"===e)return;let t=this._getSpanExporter(e);return t||n.diag.error(`Exporter "${e}" requested through environment variable is unavailable.`),t}};e.BasicTracerProvider=p,p._registeredPropagators=new Map([["tracecontext",()=>new o.HttpTraceContextPropagator],["baggage",()=>new o.HttpBaggagePropagator]]),p._registeredExporters=new Map})),At=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsoleSpanExporter=void 0;var t=it();e.ConsoleSpanExporter=class{export(e,t){return this._sendSpans(e,t)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(e){return{traceId:e.spanContext().traceId,parentId:e.parentSpanId,name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:t.hrTimeToMicroseconds(e.startTime),duration:t.hrTimeToMicroseconds(e.duration),attributes:e.attributes,status:e.status,events:e.events}}_sendSpans(e,r){for(let t of e)console.log(this._exportInfo(t));if(r)return r({code:t.ExportResultCode.SUCCESS})}}})),Rt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemorySpanExporter=void 0;var t=it();e.InMemorySpanExporter=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(e,r){if(this._stopped)return r({code:t.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...e),setTimeout((()=>r({code:t.ExportResultCode.SUCCESS})),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}}})),xt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),kt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleSpanProcessor=void 0;var t=Se(),r=it();e.SimpleSpanProcessor=class{constructor(e){this._exporter=e,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(e){}onEnd(e){this._isShutdown||t.context.with(r.suppressTracing(t.context.active()),(()=>{this._exporter.export([e],(e=>{var t;e.code!==r.ExportResultCode.SUCCESS&&r.globalErrorHandler(null!==(t=e.error)&&void 0!==t?t:new Error(`SimpleSpanProcessor: span export failed (status ${e})`))}))}))}shutdown(){return this._isShutdown||(this._isShutdown=!0,this._shuttingDownPromise=new Promise(((e,t)=>{Promise.resolve().then((()=>this._exporter.shutdown())).then(e).catch((e=>{t(e)}))}))),this._shuttingDownPromise}}})),Dt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Mt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),jt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Lt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ft=m((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(lt(),e),r(Nt(),e),r(Ot(),e),r(At(),e),r(Rt(),e),r(xt(),e),r(kt(),e),r(Dt(),e),r(bt(),e),r(at(),e),r(Mt(),e),r(jt(),e),r(Lt(),e)})),Ut=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.azureCoreTracing=e.AzureMonitorSymbol=void 0;var t=C();e.AzureMonitorSymbol="Azure_Monitor_Tracer";var r=!1;e.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(n){if(r)return n;try{var o=Ft(),i=Se(),s=(new o.BasicTracerProvider).getTracer("applicationinsights tracer"),a=n.setTracer;n.setTracer=function(r){var n=r.startSpan;r.startSpan=function(e,r,o){var i=n.call(this,e,r,o),s=i.end;return i.end=function(){var e=s.apply(this,arguments);return t.channel.publish("azure-coretracing",i),e},i},r[e.AzureMonitorSymbol]=!0,a.call(this,r)},i.trace.getSpan(i.context.active()),n.setTracer(s),r=!0}catch{}return n}},e.enable=function(){t.channel.registerMonkeyPatch("@azure/core-tracing",e.azureCoreTracing)}})),Bt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.bunyan=void 0;var t=C();e.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(e){var r=e.prototype._emit;return e.prototype._emit=function(e,n){var o=r.apply(this,arguments);if(!n){var i=o;i||(i=r.call(this,e,!0)),t.channel.publish("bunyan",{level:e.level,result:i})}return o},e}},e.enable=function(){t.channel.registerMonkeyPatch("bunyan",e.bunyan)}})),Vt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.console=void 0;var t=C(),n=r(2781);e.console={versionSpecifier:">= 4.0.0",patch:function(e){var r=new n.Writable,o=new n.Writable;r.write=function(e){if(!e)return!0;var r=e.toString();return t.channel.publish("console",{message:r}),!0},o.write=function(e){if(!e)return!0;var r=e.toString();return t.channel.publish("console",{message:r,stderr:!0}),!0};for(var i=new e.Console(r,o),s=function(t){var r=e[t];r&&(e[t]=function(){if(i[t])try{i[t].apply(i,arguments)}catch{}return r.apply(e,arguments)})},a=0,c=["log","info","warn","error","dir","time","timeEnd","trace","assert"];a<c.length;a++)s(c[a]);return e}},e.enable=function(){t.channel.registerMonkeyPatch("console",e.console),r(6206)}})),$t=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongoCore=void 0;var t=C();e.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(e){var r=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var e=r.apply(this,arguments),n=this.s.pool.write;this.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=t.channel.bindToContext(arguments[e])),n.apply(this,arguments)};var o=this.s.pool.logout;return this.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=t.channel.bindToContext(arguments[1])),o.apply(this,arguments)},e},e}},e.enable=function(){t.channel.registerMonkeyPatch("mongodb-core",e.mongoCore)}})),Ht=m((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongo330=e.mongo3=e.mongo2=void 0;var r=C();e.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:function(e){var n=e.instrument({operationIdGenerator:{next:function(){return r.channel.bindToContext((function(e){return e()}))}}}),o={};return n.on("started",(function(e){o[e.requestId]||(o[e.requestId]=t(t({},e),{time:new Date}))})),n.on("succeeded",(function(e){var t=o[e.requestId];t&&delete o[e.requestId],"function"==typeof e.operationId?e.operationId((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})):r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),n.on("failed",(function(e){var t=o[e.requestId];t&&delete o[e.requestId],"function"==typeof e.operationId?e.operationId((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})):r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),e}},e.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:function(e){var n=e.instrument(),o={},i={};return n.on("started",(function(e){o[e.requestId]||(i[e.requestId]=r.channel.bindToContext((function(e){return e()})),o[e.requestId]=t(t({},e),{time:new Date}))})),n.on("succeeded",(function(e){var t=o[e.requestId];t&&delete o[e.requestId],"object"==typeof e&&"function"==typeof i[e.requestId]&&(i[e.requestId]((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),delete i[e.requestId])})),n.on("failed",(function(e){var t=o[e.requestId];t&&delete o[e.requestId],"object"==typeof e&&"function"==typeof i[e.requestId]&&(i[e.requestId]((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),delete i[e.requestId])})),e}},e.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:function(e){!function(e){var t=e.Server.prototype.connect;e.Server.prototype.connect=function(){var e=t.apply(this,arguments),n=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=r.channel.bindToContext(arguments[e])),n.apply(this,arguments)};var o=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=r.channel.bindToContext(arguments[1])),o.apply(this,arguments)},e}}(e);var t=e.instrument(),n={},o={};return t.on("started",(function(e){n[e.requestId]||(o[e.requestId]=r.channel.bindToContext((function(e){return e()})),n[e.requestId]=e)})),t.on("succeeded",(function(e){var t=n[e.requestId];t&&delete n[e.requestId],"object"==typeof e&&"function"==typeof o[e.requestId]&&(o[e.requestId]((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),delete o[e.requestId])})),t.on("failed",(function(e){var t=n[e.requestId];t&&delete n[e.requestId],"object"==typeof e&&"function"==typeof o[e.requestId]&&(o[e.requestId]((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),delete o[e.requestId])})),e}},e.enable=function(){r.channel.registerMonkeyPatch("mongodb",e.mongo2),r.channel.registerMonkeyPatch("mongodb",e.mongo3),r.channel.registerMonkeyPatch("mongodb",e.mongo330)}})),qt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mysql=void 0;var t=C(),n=r(1017);e.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:function(e,o){var i=function(e,r){return function(r,n){var o=e[r];o&&(e[r]=function(){for(var e=arguments.length-1,r=arguments.length-1;r>=0;--r){if("function"==typeof arguments[r]){e=r;break}if(typeof arguments[r]<"u")break}var i=arguments[e],s={result:null,startTime:null,startDate:null};"function"==typeof i&&(n?(s.startTime=process.hrtime(),s.startDate=new Date,arguments[e]=t.channel.bindToContext(n(s,i))):arguments[e]=t.channel.bindToContext(i));var a=o.apply(this,arguments);return s.result=a,a})}},s=function(e,t){return i(e.prototype)},a=r(852)(n.dirname(o)+"/lib/Connection");["connect","changeUser","ping","statistics","end"].forEach((function(e){return s(a)(e)})),i(a)("createQuery",(function(e,r){return function(n){var o=process.hrtime(e.startTime),i=1e3*o[0]+o[1]/1e6|0;t.channel.publish("mysql",{query:e.result,callbackArgs:arguments,err:n,duration:i,time:e.startDate}),r.apply(this,arguments)}}));var c=r(1024)(n.dirname(o)+"/lib/Pool");return["_enqueueCallback"].forEach((function(e){return s(c)(e)})),e}},e.enable=function(){t.channel.registerMonkeyPatch("mysql",e.mysql)}})),zt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgresPool1=void 0;var t=C();e.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:function(e){var r=e.prototype.connect;return e.prototype.connect=function(e){return e&&(arguments[0]=t.channel.bindToContext(e)),r.apply(this,arguments)},e}},e.enable=function(){t.channel.registerMonkeyPatch("pg-pool",e.postgresPool1)}})),Gt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgres7=e.postgres6=void 0;var t=C(),n=r(2361);e.postgres6={versionSpecifier:"6.*",patch:function(e,r){var o=e.Client.prototype.query,i="__diagnosticOriginalFunc";return e.Client.prototype.query=function(e,r,s){var a,c={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},u=process.hrtime();function l(e){e&&e[i]&&(e=e[i]);var r=t.channel.bindToContext((function(r,o){var i=process.hrtime(u);if(c.result=o&&{rowCount:o.rowCount,command:o.command},c.error=r,c.duration=Math.ceil(1e3*i[0]+i[1]/1e6),t.channel.publish("postgres",c),r){if(e)return e.apply(this,arguments);a&&a instanceof n.EventEmitter&&a.emit("error",r)}else e&&e.apply(this,arguments)}));try{return Object.defineProperty(r,i,{value:e}),r}catch{return e}}try{"string"==typeof e?r instanceof Array?(c.query.preparable={text:e,args:r},s=l(s)):(c.query.text=e,s?s=l(s):r=l(r)):("string"==typeof e.name?c.query.plan=e.name:e.values instanceof Array?c.query.preparable={text:e.text,args:e.values}:c.query.text=e.text,s?s=l(s):r?r=l(r):e.callback=l(e.callback))}catch{return o.apply(this,arguments)}return arguments[0]=e,arguments[1]=r,arguments[2]=s,arguments.length=arguments.length>3?arguments.length:3,a=o.apply(this,arguments)},e}},e.postgres7={versionSpecifier:">=7.* <=8.*",patch:function(e,r){var o=e.Client.prototype.query,i="__diagnosticOriginalFunc";return e.Client.prototype.query=function(e,r,s){var a,c=this,u=!!s,l={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},d=process.hrtime();function p(e){e&&e[i]&&(e=e[i]);var r=t.channel.bindToContext((function(r,o){var i=process.hrtime(d);if(l.result=o&&{rowCount:o.rowCount,command:o.command},l.error=r,l.duration=Math.ceil(1e3*i[0]+i[1]/1e6),t.channel.publish("postgres",l),r){if(e)return e.apply(this,arguments);a&&a instanceof n.EventEmitter&&a.emit("error",r)}else e&&e.apply(this,arguments)}));try{return Object.defineProperty(r,i,{value:e}),r}catch{return e}}try{"string"==typeof e?r instanceof Array?(l.query.preparable={text:e,args:r},s=(u="function"==typeof s)?p(s):s):(l.query.text=e,s?s=(u="function"==typeof s)?p(s):s:r=(u="function"==typeof r)?p(r):r):("string"==typeof e.name?l.query.plan=e.name:e.values instanceof Array?l.query.preparable={text:e.text,args:e.values}:l.query.text=e.text,s?(u="function"==typeof s,s=p(s)):r?r=(u="function"==typeof r)?p(r):r:(u="function"==typeof e.callback,e.callback=u?p(e.callback):e.callback))}catch{return o.apply(this,arguments)}return arguments[0]=e,arguments[1]=r,arguments[2]=s,arguments.length=arguments.length>3?arguments.length:3,a=o.apply(this,arguments),u?a:a.then((function(e){return p()(void 0,e),new c._Promise((function(t,r){t(e)}))})).catch((function(e){return p()(e,void 0),new c._Promise((function(t,r){r(e)}))}))},e}},e.enable=function(){t.channel.registerMonkeyPatch("pg",e.postgres6),t.channel.registerMonkeyPatch("pg",e.postgres7)}})),Wt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.redis=void 0;var t=C();e.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(e){var r=e.RedisClient.prototype.internal_send_command;return e.RedisClient.prototype.internal_send_command=function(e){if(e){var n=e.callback;if(!n||!n.pubsubBound){var o=this.address,i=process.hrtime(),s=new Date;e.callback=t.channel.bindToContext((function(r,a){var c=process.hrtime(i),u=1e3*c[0]+c[1]/1e6|0;t.channel.publish("redis",{duration:u,address:o,commandObj:e,err:r,result:a,time:s}),"function"==typeof n&&n.apply(this,arguments)})),e.callback.pubsubBound=!0}}return r.call(this,e)},e}},e.enable=function(){t.channel.registerMonkeyPatch("redis",e.redis)}})),Kt=m((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=void 0;var r=C();e.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:function(e){var n=e.Connection.prototype.makeRequest;return e.Connection.prototype.makeRequest=function(){var e,o,i,s=arguments[0];arguments[0].callback=(e=s.callback,o=process.hrtime(),i={query:{},database:{host:null,port:null},result:null,error:null,duration:0},r.channel.bindToContext((function(n,s,a){var c=process.hrtime(o);i=t(t({},i),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!n&&{rowCount:s,rows:a},query:{text:this.parametersByName.statement.value},error:n,duration:Math.ceil(1e3*c[0]+c[1]/1e6)}),r.channel.publish("tedious",i),e.call(this,n,s,a)}))),n.apply(this,arguments)},e}},e.enable=function(){r.channel.registerMonkeyPatch("tedious",e.tedious)}})),Xt=m((e=>{"use strict";var t,r=e&&e.__extends||(t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,r)},function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}),n=e&&e.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.winston2=e.winston3=void 0;var o=C();e.winston3={versionSpecifier:"3.x",patch:function(e){var t=function(e){function t(t,r){var n=e.call(this,r)||this;return n.winston=t,n}return r(t,e),t.prototype.log=function(e,t){var r=e.message,i=e.level,s=e.meta,a=n(e,["message","level","meta"]);i="function"==typeof Symbol.for?e[Symbol.for("level")]:i,r=e instanceof Error?e:r;var c=function(e,t){return null!=e.config.npm.levels[t]?"npm":null!=e.config.syslog.levels[t]?"syslog":"unknown"}(this.winston,i);for(var u in s=s||{},a)a.hasOwnProperty(u)&&(s[u]=a[u]);o.channel.publish("winston",{message:r,level:i,levelKind:c,meta:s}),t()},t}(e.Transport);function i(){var r,n=arguments[0].levels||e.config.npm.levels;for(var o in n)n.hasOwnProperty(o)&&(r=void 0===r||n[o]>n[r]?o:r);this.add(new t(e,{level:r}))}var s=e.createLogger;e.createLogger=function(){var r,n=arguments[0].levels||e.config.npm.levels;for(var o in n)n.hasOwnProperty(o)&&(r=void 0===r||n[o]>n[r]?o:r);var a=s.apply(this,arguments);a.add(new t(e,{level:r}));var c=a.configure;return a.configure=function(){c.apply(this,arguments),i.apply(this,arguments)},a};var a=e.configure;return e.configure=function(){a.apply(this,arguments),i.apply(this,arguments)},e.add(new t(e)),e}},e.winston2={versionSpecifier:"2.x",patch:function(e){var t,r=e.Logger.prototype.log,n=function(r,n,i){var s;return s=t===e.config.npm.levels?"npm":t===e.config.syslog.levels?"syslog":"unknown",o.channel.publish("winston",{level:r,message:n,meta:i,levelKind:s}),n};return e.Logger.prototype.log=function(){return t=this.levels,this.filters&&0!==this.filters.length?this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter((function(e){return e!==n})),this.filters.push(n)):this.filters=[n],r.apply(this,arguments)},e}},e.enable=function(){o.channel.registerMonkeyPatch("winston",e.winston2),o.channel.registerMonkeyPatch("winston",e.winston3)}})),Jt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=e.pgPool=e.pg=e.winston=e.redis=e.mysql=e.mongodb=e.mongodbCore=e.console=e.bunyan=e.azuresdk=void 0;var t=Ut();e.azuresdk=t;var r=Bt();e.bunyan=r;var n=Vt();e.console=n;var o=$t();e.mongodbCore=o;var i=Ht();e.mongodb=i;var s=qt();e.mysql=s;var a=zt();e.pgPool=a;var c=Gt();e.pg=c;var u=Wt();e.redis=u;var l=Kt();e.tedious=l;var d=Xt();e.winston=d,e.enable=function(){r.enable(),n.enable(),o.enable(),i.enable(),s.enable(),c.enable(),a.enable(),u.enable(),d.enable(),t.enable(),l.enable()}})),Qt=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerContextPreservation=e.IsInitialized=void 0;var t=E(),r=S();e.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var n,o,i,s,a="DiagnosticChannel";if(e.IsInitialized){for(s in n=Jt(),o=(process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"").split(","),i={bunyan:n.bunyan,console:n.console,mongodb:n.mongodb,mongodbCore:n.mongodbCore,mysql:n.mysql,redis:n.redis,pg:n.pg,pgPool:n.pgPool,winston:n.winston,azuresdk:n.azuresdk})-1===o.indexOf(s)&&(i[s].enable(),r.info(a,"Subscribed to "+s+" events"));o.length>0&&r.info(a,"Some modules will not be patched",o)}else r.info(a,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");e.registerContextPreservation=function(r){if(e.IsInitialized){var n=C();n.channel.addContextPreservation(r),n.channel.spanContextPropagator=t.AsyncScopeManager}}})),Yt=m(((e,t)=>{"use strict";t.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}})),Zt=m(((e,t)=>{"use strict";var n=e&&e.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=r(3685),i=r(5687),s=r(7310),a=r(2057),c=S(),u=Yt(),l=function(){function e(){}return e.getCookie=function(t,r){var n="";if(t&&t.length&&"string"==typeof r)for(var o=t+"=",i=r.split(";"),s=0;s<i.length;s++)if(r=i[s],(r=e.trim(r))&&0===r.indexOf(o)){n=r.substring(o.length,i[s].length);break}return n},e.trim=function(e){return"string"==typeof e?e.replace(/^\s+|\s+$/g,""):""},e.int32ArrayToBase64=function(e){var t=function(e,t){return String.fromCharCode(e>>t&255)},r=e.map((function(e){return t(e,24)+t(e,16)+t(e,8)+t(e,0)})).join(""),n=(Buffer.from?Buffer.from(r,"binary"):new Buffer(r,"binary")).toString("base64");return n.substr(0,n.indexOf("="))},e.random32=function(){return 4294967296*Math.random()|0},e.randomu32=function(){return e.random32()+2147483648},e.w3cTraceId=function(){for(var t,r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n="",o=0;o<4;o++)n+=r[15&(t=e.random32())]+r[t>>4&15]+r[t>>8&15]+r[t>>12&15]+r[t>>16&15]+r[t>>20&15]+r[t>>24&15]+r[t>>28&15];var i=r[8+4*Math.random()|0];return n.substr(0,8)+n.substr(9,4)+"4"+n.substr(13,3)+i+n.substr(16,3)+n.substr(19,12)},e.w3cSpanId=function(){return e.w3cTraceId().substring(16)},e.isValidW3CId=function(e){return 32===e.length&&"00000000000000000000000000000000"!==e},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.isError=function(e){return e instanceof Error},e.isPrimitive=function(e){var t=typeof e;return"string"===t||"number"===t||"boolean"===t},e.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},e.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),r=""+Math.floor(e/6e4)%60,n=""+Math.floor(e/36e5)%24,o=Math.floor(e/864e5);return t=t.indexOf(".")<2?"0"+t:t,r=r.length<2?"0"+r:r,(o>0?o+".":"")+(n=n.length<2?"0"+n:n)+":"+r+":"+t},e.extractError=function(e){var t=e;return{message:e.message,code:t.code||t.id||""}},e.extractObject=function(t){return t instanceof Error?e.extractError(t):"function"==typeof t.toJSON?t.toJSON():t},e.validateStringMap=function(t){if("object"==typeof t){var r={};for(var n in t){var o="",i=t[n],s=typeof i;if(e.isPrimitive(i))o=i.toString();else if(null===i||"undefined"===s)o="";else{if("function"===s){c.info("key: "+n+" was function; will not serialize");continue}var a=e.isArray(i)?i:e.extractObject(i);try{o=e.isPrimitive(a)?a:JSON.stringify(a)}catch(e){o=i.constructor.name.toString()+" (Error: "+e.message+")",c.info("key: "+n+", could not be serialized")}}r[n]=o.substring(0,e.MAX_PROPERTY_LENGTH)}return r}c.info("Invalid properties dropped from payload")},e.canIncludeCorrelationHeader=function(e,t){var r=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!r||0==r.length||!t)return!0;for(var n=0;n<r.length;n++)if(new RegExp(r[n].replace(/\./g,".").replace(/\*/g,".*")).test(s.parse(t).hostname))return!1;return!0},e.getCorrelationContextTarget=function(e,t){var r=e.headers&&e.headers[u.requestContextHeader];if(r)for(var n=r.split(","),o=0;o<n.length;++o){var i=n[o].split("=");if(2==i.length&&i[0]==t)return i[1]}},e.makeRequest=function(t,r,a,u){r&&0===r.indexOf("//")&&(r="https:"+r);var l=s.parse(r),d=n(n({},a),{host:l.hostname,port:l.port,path:l.pathname}),p=void 0;if("https:"===l.protocol&&(p=t.proxyHttpsUrl||void 0),"http:"===l.protocol&&(p=t.proxyHttpUrl||void 0),p){0===p.indexOf("//")&&(p="http:"+p);var f=s.parse(p);"https:"===f.protocol?(c.info("Proxies that use HTTPS are not supported"),p=void 0):d=n(n({},d),{host:f.hostname,port:f.port||"80",path:r,headers:n(n({},d.headers),{Host:l.hostname})})}var h="https:"===l.protocol&&!p;return h&&void 0!==t.httpsAgent?d.agent=t.httpsAgent:h||void 0===t.httpAgent?h&&(d.agent=e.tlsRestrictedAgent):d.agent=t.httpAgent,h?i.request(d,u):o.request(d,u)},e.safeIncludeCorrelationHeader=function(t,r,n){var o;if("string"==typeof n)o=n;else if(n instanceof Array)o=n.join(",");else if(n&&"function"==typeof n.toString)try{o=n.toString()}catch(e){c.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",e,n)}o?e.addCorrelationIdHeaderFromString(t,r,o):r.setHeader(u.requestContextHeader,u.requestContextSourceKey+"="+t.config.correlationId)},e.dumpObj=function(e){var t=Object.prototype.toString.call(e);return t+("[object Error]"===t?"{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":JSON.stringify(e))},e.addCorrelationIdHeaderFromString=function(e,t,r){var n=r.split(","),o=u.requestContextSourceKey+"=";n.some((function(e){return e.substring(0,o.length)===o}))||t.setHeader(u.requestContextHeader,r+","+u.requestContextSourceKey+"="+e.config.correlationId)},e.MAX_PROPERTY_LENGTH=8192,e.tlsRestrictedAgent=new i.Agent({keepAlive:!0,maxSockets:25,secureOptions:a.SSL_OP_NO_SSLv2|a.SSL_OP_NO_SSLv3|a.SSL_OP_NO_TLSv1|a.SSL_OP_NO_TLSv1_1}),e}();t.exports=l})),er=m(((e,t)=>{"use strict";var r=Zt(),n=S(),o=function(){function e(){}return e.queryCorrelationId=function(t,o){var i=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId";if(e.completedLookups.hasOwnProperty(i))o(e.completedLookups[i]);else if(e.pendingLookups[i])e.pendingLookups[i].push(o);else{e.pendingLookups[i]=[o];var s=function(){if(e.pendingLookups[i]){var o={method:"GET",disableAppInsightsAutoCollection:!0};n.info(e.TAG,o);var a=r.makeRequest(t,i,o,(function(r){if(200===r.statusCode){var o="";r.setEncoding("utf-8"),r.on("data",(function(e){o+=e})),r.on("end",(function(){n.info(e.TAG,o);var t=e.correlationIdPrefix+o;e.completedLookups[i]=t,e.pendingLookups[i]&&e.pendingLookups[i].forEach((function(e){return e(t)})),delete e.pendingLookups[i]}))}else r.statusCode>=400&&r.statusCode<500?(e.completedLookups[i]=void 0,delete e.pendingLookups[i]):setTimeout(s,t.correlationIdRetryIntervalMs)}));a&&(a.on("error",(function(t){n.warn(e.TAG,t)})),a.end())}};setTimeout(s,0)}},e.cancelCorrelationIdQuery=function(t,r){var n=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId",o=e.pendingLookups[n];o&&(e.pendingLookups[n]=o.filter((function(e){return e!=r})),0==e.pendingLookups[n].length&&delete e.pendingLookups[n])},e.generateRequestId=function(t){if(t){"."!==(t="|"==t[0]?t:"|"+t)[t.length-1]&&(t+=".");var r=(e.currentRootId++).toString(16);return e.appendSuffix(t,r,"_")}return e.generateRootId()},e.getRootId=function(e){var t=e.indexOf(".");t<0&&(t=e.length);var r="|"===e[0]?1:0;return e.substring(r,t)},e.generateRootId=function(){return"|"+r.w3cTraceId()+"."},e.appendSuffix=function(t,n,o){if(t.length+n.length<e.requestIdMaxLength)return t+n+o;var i=e.requestIdMaxLength-9;if(t.length>i)for(;i>1;--i){var s=t[i-1];if("."===s||"_"===s)break}if(i<=1)return e.generateRootId();for(n=r.randomu32().toString(16);n.length<8;)n="0"+n;return t.substring(0,i)+n+"#"},e.TAG="CorrelationIdManager",e.correlationIdPrefix="cid-v1:",e.w3cEnabled=!0,e.pendingLookups={},e.completedLookups={},e.requestIdMaxLength=1024,e.currentRootId=r.randomu32(),e}();t.exports=o})),tr=m(((e,t)=>{"use strict";var r=Zt(),n=er(),o=function(){function e(t,o){if(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.version=e.DEFAULT_VERSION,t&&"string"==typeof t)if(t.split(",").length>1)this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16);else{var i=t.trim().split("-"),s=i.length;s>=4?(this.version=i[0],this.traceId=i[1],this.spanId=i[2],this.traceFlag=i[3]):(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=e.DEFAULT_VERSION,this.traceId=r.w3cTraceId()),"00"===this.version&&4!==s&&(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),"ff"===this.version&&(this.version=e.DEFAULT_VERSION,this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=e.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.traceId=r.w3cTraceId()),e.isValidTraceId(this.traceId)||(this.traceId=r.w3cTraceId()),e.isValidSpanId(this.spanId)||(this.spanId=r.w3cTraceId().substr(0,16),this.traceId=r.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(o){this.parentId=o.slice();var a=n.getRootId(o);e.isValidTraceId(a)||(this.legacyRootId=a,a=r.w3cTraceId()),-1!==o.indexOf("|")&&(o=o.substring(1+o.substring(0,o.length-1).lastIndexOf("."),o.length-1)),this.traceId=a,this.spanId=o}else this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)}return e.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==e},e.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==e},e.formatOpenTelemetryTraceFlags=function(e){var t="0"+e.toString(16);return t.substring(t.length-2)},e.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},e.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},e.prototype.updateSpanId=function(){this.spanId=r.w3cTraceId().substr(0,16)},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}();t.exports=o})),rr=m(((e,t)=>{"use strict";var r=function(){function e(e){this.fieldmap=[],e&&(this.fieldmap=this.parseHeader(e))}return e.prototype.toString=function(){var e=this.fieldmap;return e&&0!=e.length?e.join(", "):null},e.validateKeyChars=function(e){var t=e.split("@");if(2==t.length){var r=t[0].trim(),n=t[1].trim(),o=Boolean(r.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),i=Boolean(n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return o&&i}return 1==t.length&&Boolean(e.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/))},e.prototype.parseHeader=function(t){var r=[],n={},o=t.split(",");if(o.length>32)return null;for(var i=0,s=o;i<s.length;i++){var a=s[i].trim();if(0!==a.length){var c=a.split("=");if(2!==c.length||!e.validateKeyChars(c[0])||n[c[0]])return null;n[c[0]]=!0,r.push(a)}}return r},e.strict=!0,e}();t.exports=r})),nr=m(((e,t)=>{"use strict";t.exports=function(){}})),or=m(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return n(t,e),t}(nr());t.exports=o})),ir=m(((e,t)=>{"use strict";t.exports=function(){}})),sr=m(((e,t)=>{"use strict";t.exports=function(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}})),ar=m(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){return e.call(this)||this}return n(t,e),t}(ir());t.exports=o})),cr=m(((e,t)=>{"use strict";var r,n;(n=r||(r={}))[n.Measurement=0]="Measurement",n[n.Aggregation=1]="Aggregation",t.exports=r})),ur=m(((e,t)=>{"use strict";var r=cr();t.exports=function(){this.kind=r.Measurement}})),lr=m(((e,t)=>{"use strict";t.exports=function(){this.ver=1,this.sampleRate=100,this.tags={}}})),dr=m(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return n(t,e),t}(nr());t.exports=o})),pr=m(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.exceptions=[],t.properties={},t.measurements={},t}return n(t,e),t}(nr());t.exports=o})),fr=m(((e,t)=>{"use strict";t.exports=function(){this.hasFullStack=!0,this.parsedStack=[]}})),hr=m(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t}return n(t,e),t}(nr());t.exports=o})),gr=m(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.metrics=[],t.properties={},t}return n(t,e),t}(nr());t.exports=o})),vr=m(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return n(t,e),t}(dr());t.exports=o})),mr=m(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.success=!0,t.properties={},t.measurements={},t}return n(t,e),t}(nr());t.exports=o})),yr=m(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return n(t,e),t}(nr());t.exports=o})),_r=m(((e,t)=>{"use strict";var r,n;(n=r||(r={}))[n.Verbose=0]="Verbose",n[n.Information=1]="Information",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.Critical=4]="Critical",t.exports=r})),Sr=m(((e,t)=>{"use strict";t.exports=function(){}})),Er=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AvailabilityData=or(),e.Base=ir(),e.ContextTagKeys=sr(),e.Data=ar(),e.DataPoint=ur(),e.DataPointType=cr(),e.Domain=nr(),e.Envelope=lr(),e.EventData=dr(),e.ExceptionData=pr(),e.ExceptionDetails=fr(),e.MessageData=hr(),e.MetricData=gr(),e.PageViewData=vr(),e.RemoteDependencyData=mr(),e.RequestData=yr(),e.SeverityLevel=_r(),e.StackFrame=Sr()})),wr=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.domainSupportsProperties=e.RemoteDependencyDataConstants=void 0;var t=Er(),r=function(){function e(){}return e.TYPE_HTTP="Http",e.TYPE_AI="Http (tracked component)",e}();e.RemoteDependencyDataConstants=r,e.domainSupportsProperties=function(e){return"properties"in e||e instanceof t.EventData||e instanceof t.ExceptionData||e instanceof t.MessageData||e instanceof t.MetricData||e instanceof t.PageViewData||e instanceof t.RemoteDependencyData||e instanceof t.RequestData}})),br=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Tr=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Cr=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Pr=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ir=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Or=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Nr=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ar=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Rr=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),xr=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),kr=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Dr=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Mr=m((e=>{"use strict";var t,r;Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryType=e.TelemetryTypeString=e.baseTypeToTelemetryType=e.telemetryTypeToBaseType=void 0,e.telemetryTypeToBaseType=function(e){switch(e){case t.Event:return"EventData";case t.Exception:return"ExceptionData";case t.Trace:return"MessageData";case t.Metric:return"MetricData";case t.Request:return"RequestData";case t.Dependency:return"RemoteDependencyData";case t.Availability:return"AvailabilityData";case t.PageView:return"PageViewData"}},e.baseTypeToTelemetryType=function(e){switch(e){case"EventData":return t.Event;case"ExceptionData":return t.Exception;case"MessageData":return t.Trace;case"MetricData":return t.Metric;case"RequestData":return t.Request;case"RemoteDependencyData":return t.Dependency;case"AvailabilityData":return t.Availability;case"PageViewData":return t.PageView}},e.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"},(r=t=e.TelemetryType||(e.TelemetryType={}))[r.Event=0]="Event",r[r.Exception=1]="Exception",r[r.Trace=2]="Trace",r[r.Metric=3]="Metric",r[r.Request=4]="Request",r[r.Dependency=5]="Dependency",r[r.Availability=6]="Availability",r[r.PageView=7]="PageView"})),jr=m((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(br(),e),r(Tr(),e),r(Cr(),e),r(Pr(),e),r(Ir(),e),r(Or(),e),r(Nr(),e),r(Ar(),e),r(Rr(),e),r(xr(),e),r(kr(),e),r(Dr(),e),r(Mr(),e)})),Lr=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Fr=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ur=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Br=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Vr=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),$r=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Hr=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),qr=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),zr=m((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Lr(),e),r(Fr(),e),r(Ur(),e),r(Br(),e),r(Vr(),e),r($r(),e),r(Hr(),e),r(qr(),e)})),Gr=m((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(wr(),e),r(Er(),e),r(jr(),e),r(zr(),e)})),Wr=m(((e,t)=>{"use strict";var r=function(){function e(){}return e.prototype.getUrl=function(){return this.url},e.prototype.RequestParser=function(){this.startTime=+new Date},e.prototype._setStatus=function(e,t){var r=+new Date;this.duration=r-this.startTime,this.statusCode=e;var n=this.properties||{};if(t)if("string"==typeof t)n.error=t;else if(t instanceof Error)n.error=t.message;else if("object"==typeof t)for(var o in t)n[o]=t[o]&&t[o].toString&&t[o].toString();this.properties=n},e.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},e}();t.exports=r})),Kr=m(((e,t)=>{"use strict";var n,o=e&&e.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=r(7310),s=Gr(),a=Zt(),c=Yt(),u=Wr(),l=er(),d=rr(),p=tr(),f=function(e){function t(t,r){var n=e.call(this)||this;return t&&(n.method=t.method,n.url=n._getAbsoluteUrl(t),n.startTime=+new Date,n.socketRemoteAddress=t.socket&&t.socket.remoteAddress,n.parseHeaders(t,r),t.connection&&(n.connectionRemoteAddress=t.connection.remoteAddress,n.legacySocketRemoteAddress=t.connection.socket&&t.connection.socket.remoteAddress)),n}return o(t,e),t.prototype.onError=function(e,t){this._setStatus(void 0,e),t&&(this.duration=t)},t.prototype.onResponse=function(e,t){this._setStatus(e.statusCode,void 0),t&&(this.duration=t)},t.prototype.getRequestTelemetry=function(e){var t={id:this.requestId,name:this.method+" "+i.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(e&&e.time?t.time=e.time:this.startTime&&(t.time=new Date(this.startTime)),e){for(var r in e)t[r]||(t[r]=e[r]);if(e.properties)for(var r in e.properties)t.properties[r]=e.properties[r]}return t},t.prototype.getRequestTags=function(e){var r={};for(var n in e)r[n]=e[n];return r[t.keys.locationIp]=e[t.keys.locationIp]||this._getIp(),r[t.keys.sessionId]=e[t.keys.sessionId]||this._getId("ai_session"),r[t.keys.userId]=e[t.keys.userId]||this._getId("ai_user"),r[t.keys.userAuthUserId]=e[t.keys.userAuthUserId]||this._getId("ai_authUser"),r[t.keys.operationName]=this.getOperationName(e),r[t.keys.operationParentId]=this.getOperationParentId(e),r[t.keys.operationId]=this.getOperationId(e),r},t.prototype.getOperationId=function(e){return e[t.keys.operationId]||this.operationId},t.prototype.getOperationParentId=function(e){return e[t.keys.operationParentId]||this.parentId||this.getOperationId(e)},t.prototype.getOperationName=function(e){return e[t.keys.operationName]||this.method+" "+i.parse(this.url).pathname},t.prototype.getRequestId=function(){return this.requestId},t.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},t.prototype.getTraceparent=function(){return this.traceparent},t.prototype.getTracestate=function(){return this.tracestate},t.prototype.getLegacyRootId=function(){return this.legacyRootId},t.prototype._getAbsoluteUrl=function(e){if(!e.headers)return e.url;var t=e.connection?e.connection.encrypted:null,r=i.parse(e.url),n=r.pathname,o=r.search,s=t||"https"==e.headers["x-forwarded-proto"]?"https":"http";return i.format({protocol:s,host:e.headers.host,pathname:n,search:o})},t.prototype._getIp=function(){var e=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,t=function(t){var r=e.exec(t);if(r)return r[0]},r=t(this.rawHeaders["x-forwarded-for"])||t(this.rawHeaders["x-client-ip"])||t(this.rawHeaders["x-real-ip"])||t(this.connectionRemoteAddress)||t(this.socketRemoteAddress)||t(this.legacySocketRemoteAddress);return!r&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&"::"===this.connectionRemoteAddress.substr(0,2)&&(r="127.0.0.1"),r},t.prototype._getId=function(e){var r=this.rawHeaders&&this.rawHeaders.cookie&&"string"==typeof this.rawHeaders.cookie&&this.rawHeaders.cookie||"";return t.parseId(a.getCookie(e,r))},t.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},t.prototype.parseHeaders=function(e,t){if(this.rawHeaders=e.headers||e.rawHeaders,this.userAgent=e.headers&&e.headers["user-agent"],this.sourceCorrelationId=a.getCorrelationContextTarget(e,c.requestContextSourceKey),e.headers){var r=e.headers[c.traceStateHeader]?e.headers[c.traceStateHeader].toString():null,n=e.headers[c.traceparentHeader]?e.headers[c.traceparentHeader].toString():null,o=e.headers[c.requestIdHeader]?e.headers[c.requestIdHeader].toString():null,i=e.headers[c.parentIdHeader]?e.headers[c.parentIdHeader].toString():null,s=e.headers[c.rootIdHeader]?e.headers[c.rootIdHeader].toString():null;this.correlationContextHeader=e.headers[c.correlationContextHeader]?e.headers[c.correlationContextHeader].toString():null,l.w3cEnabled&&(n||r)?(this.traceparent=new p(n?n.toString():null),this.tracestate=n&&r&&new d(r?r.toString():null),this.setBackCompatFromThisTraceContext()):o?l.w3cEnabled?(this.traceparent=new p(null,o),this.setBackCompatFromThisTraceContext()):(this.parentId=o,this.requestId=l.generateRequestId(this.parentId),this.operationId=l.getRootId(this.requestId)):l.w3cEnabled?(this.traceparent=new p,this.traceparent.parentId=i,this.traceparent.legacyRootId=s||i,this.setBackCompatFromThisTraceContext()):(this.parentId=i,this.requestId=l.generateRequestId(s||this.parentId),this.correlationContextHeader=null,this.operationId=l.getRootId(this.requestId)),t&&(this.requestId=t,this.operationId=l.getRootId(this.requestId))}},t.parseId=function(e){var t=e.split("|");return t.length>0?t[0]:""},t.keys=new s.ContextTagKeys,t}(u);t.exports=f})),Xr=m(((e,t)=>{var r;e=t.exports=W,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,i=e.re=[],s=e.src=[],a=0,c=a++;s[c]="0|[1-9]\\d*";var u=a++;s[u]="[0-9]+";var l=a++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=a++;s[d]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var p=a++;s[p]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var f=a++;s[f]="(?:"+s[c]+"|"+s[l]+")";var h=a++;s[h]="(?:"+s[u]+"|"+s[l]+")";var g=a++;s[g]="(?:-("+s[f]+"(?:\\."+s[f]+")*))";var v=a++;s[v]="(?:-?("+s[h]+"(?:\\."+s[h]+")*))";var m=a++;s[m]="[0-9A-Za-z-]+";var y=a++;s[y]="(?:\\+("+s[m]+"(?:\\."+s[m]+")*))";var _=a++,S="v?"+s[d]+s[g]+"?"+s[y]+"?";s[_]="^"+S+"$";var E="[v=\\s]*"+s[p]+s[v]+"?"+s[y]+"?",w=a++;s[w]="^"+E+"$";var b=a++;s[b]="((?:<|>)?=?)";var T=a++;s[T]=s[u]+"|x|X|\\*";var C=a++;s[C]=s[c]+"|x|X|\\*";var P=a++;s[P]="[v=\\s]*("+s[C]+")(?:\\.("+s[C]+")(?:\\.("+s[C]+")(?:"+s[g]+")?"+s[y]+"?)?)?";var I=a++;s[I]="[v=\\s]*("+s[T]+")(?:\\.("+s[T]+")(?:\\.("+s[T]+")(?:"+s[v]+")?"+s[y]+"?)?)?";var O=a++;s[O]="^"+s[b]+"\\s*"+s[P]+"$";var N=a++;s[N]="^"+s[b]+"\\s*"+s[I]+"$";var A=a++;s[A]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var R=a++;s[R]="(?:~>?)";var x=a++;s[x]="(\\s*)"+s[R]+"\\s+",i[x]=new RegExp(s[x],"g");var k=a++;s[k]="^"+s[R]+s[P]+"$";var D=a++;s[D]="^"+s[R]+s[I]+"$";var M=a++;s[M]="(?:\\^)";var j=a++;s[j]="(\\s*)"+s[M]+"\\s+",i[j]=new RegExp(s[j],"g");var L=a++;s[L]="^"+s[M]+s[P]+"$";var F=a++;s[F]="^"+s[M]+s[I]+"$";var U=a++;s[U]="^"+s[b]+"\\s*("+E+")$|^$";var B=a++;s[B]="^"+s[b]+"\\s*("+S+")$|^$";var V=a++;s[V]="(\\s*)"+s[b]+"\\s*("+E+"|"+s[P]+")",i[V]=new RegExp(s[V],"g");var $=a++;s[$]="^\\s*("+s[P]+")\\s+-\\s+("+s[P]+")\\s*$";var H=a++;s[H]="^\\s*("+s[I]+")\\s+-\\s+("+s[I]+")\\s*$";var q,z=a++;for(s[z]="(<|>)?=?\\s*\\*",q=0;q<35;q++)r(q,s[q]),i[q]||(i[q]=new RegExp(s[q]));function G(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof W)return e;if("string"!=typeof e||e.length>n)return null;if(!(t.loose?i[w]:i[_]).test(e))return null;try{return new W(e,t)}catch{return null}}function W(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof W){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof W))return new W(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var s=e.trim().match(t.loose?i[w]:i[_]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}e.parse=G,e.valid=function(e,t){var r=G(e,t);return r?r.version:null},e.clean=function(e,t){var r=G(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},e.SemVer=W,W.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},W.prototype.toString=function(){return this.version},W.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof W||(e=new W(e,this.options)),this.compareMain(e)||this.comparePre(e)},W.prototype.compareMain=function(e){return e instanceof W||(e=new W(e,this.options)),X(this.major,e.major)||X(this.minor,e.minor)||X(this.patch,e.patch)},W.prototype.comparePre=function(e){if(e instanceof W||(e=new W(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return X(n,o)}while(++t)},W.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},e.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new W(e,r).inc(t,n).version}catch{return null}},e.diff=function(e,t){if(Z(e,t))return null;var r=G(e),n=G(t),o="";if(r.prerelease.length||n.prerelease.length){o="pre";var i="prerelease"}for(var s in r)if(("major"===s||"minor"===s||"patch"===s)&&r[s]!==n[s])return o+s;return i},e.compareIdentifiers=X;var K=/^[0-9]+$/;function X(e,t){var r=K.test(e),n=K.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function J(e,t,r){return new W(e,r).compare(new W(t,r))}function Q(e,t,r){return J(e,t,r)>0}function Y(e,t,r){return J(e,t,r)<0}function Z(e,t,r){return 0===J(e,t,r)}function ee(e,t,r){return 0!==J(e,t,r)}function te(e,t,r){return J(e,t,r)>=0}function re(e,t,r){return J(e,t,r)<=0}function ne(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Z(e,r,n);case"!=":return ee(e,r,n);case">":return Q(e,r,n);case">=":return te(e,r,n);case"<":return Y(e,r,n);case"<=":return re(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function oe(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof oe){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof oe))return new oe(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ie?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}e.rcompareIdentifiers=function(e,t){return X(t,e)},e.major=function(e,t){return new W(e,t).major},e.minor=function(e,t){return new W(e,t).minor},e.patch=function(e,t){return new W(e,t).patch},e.compare=J,e.compareLoose=function(e,t){return J(e,t,!0)},e.rcompare=function(e,t,r){return J(t,e,r)},e.sort=function(t,r){return t.sort((function(t,n){return e.compare(t,n,r)}))},e.rsort=function(t,r){return t.sort((function(t,n){return e.rcompare(t,n,r)}))},e.gt=Q,e.lt=Y,e.eq=Z,e.neq=ee,e.gte=te,e.lte=re,e.cmp=ne,e.Comparator=oe;var ie={};function se(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof se)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new se(e.raw,t);if(e instanceof oe)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function ce(e,t,r,n,o,i,s,a,c,u,l,d,p){return((t=ae(r)?"":ae(n)?">="+r+".0.0":ae(o)?">="+r+"."+n+".0":">="+t)+" "+(a=ae(c)?"":ae(u)?"<"+(+c+1)+".0.0":ae(l)?"<"+c+"."+(+u+1)+".0":d?"<="+c+"."+u+"."+l+"-"+d:"<="+a)).trim()}function ue(e,t,n){for(var o=0;o<e.length;o++)if(!e[o].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(o=0;o<e.length;o++)if(r(e[o].semver),e[o].semver!==ie&&e[o].semver.prerelease.length>0){var i=e[o].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function le(e,t,r){try{t=new se(t,r)}catch{return!1}return t.test(e)}function de(e,t,r,n){var o,i,s,a,c;switch(e=new W(e,n),t=new se(t,n),r){case">":o=Q,i=re,s=Y,a=">",c=">=";break;case"<":o=Y,i=te,s=Q,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],d=null,p=null;if(l.forEach((function(e){e.semver===ie&&(e=new oe(">=0.0.0")),d=d||e,p=p||e,o(e.semver,d.semver,n)?d=e:s(e.semver,p.semver,n)&&(p=e)})),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&i(e,p.semver))return!1;if(p.operator===c&&s(e,p.semver))return!1}return!0}oe.prototype.parse=function(e){var t=this.options.loose?i[U]:i[B],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new W(r[2],this.options.loose):this.semver=ie},oe.prototype.toString=function(){return this.value},oe.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===ie||("string"==typeof e&&(e=new W(e,this.options)),ne(e,this.operator,this.semver,this.options))},oe.prototype.intersects=function(e,t){if(!(e instanceof oe))throw new TypeError("a Comparator is required");var r;if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new se(e.value,t),le(this.value,r,t);if(""===e.operator)return r=new se(this.value,t),le(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),o=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||o||i&&s||a||c},e.Range=se,se.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?i[H]:i[$];e=e.replace(n,ce),r("hyphen replace",e),e=e.replace(i[V],"$1$2$3"),r("comparator trim",e,i[V]),e=(e=(e=e.replace(i[x],"$1~")).replace(i[j],"$1^")).split(/\s+/).join(" ");var o=t?i[U]:i[B],s=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?i[F]:i[L];return e.replace(n,(function(t,n,o,i,s){var a;return r("caret",e,t,n,o,i,s),ae(n)?a="":ae(o)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(i)?a="0"===n?">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":">="+n+"."+o+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),a="0"===n?"0"===o?">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+"-"+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===o?">="+n+"."+o+"."+i+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+" <"+(+n+1)+".0.0"),r("caret return",a),a}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?i[D]:i[k];return e.replace(n,(function(t,n,o,i,s){var a;return r("tilde",e,t,n,o,i,s),ae(n)?a="":ae(o)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(i)?a=">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":s?(r("replaceTilde pr",s),a=">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+(+o+1)+".0"):a=">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0",r("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?i[N]:i[O];return e.replace(n,(function(t,n,o,i,s,a){r("xRange",e,t,n,o,i,s,a);var c=ae(o),u=c||ae(i),l=u||ae(s);return"="===n&&l&&(n=""),c?t=">"===n||"<"===n?"<0.0.0":"*":n&&l?(u&&(i=0),s=0,">"===n?(n=">=",u?(o=+o+1,i=0,s=0):(i=+i+1,s=0)):"<="===n&&(n="<",u?o=+o+1:i=+i+1),t=n+o+"."+i+"."+s):u?t=">="+o+".0.0 <"+(+o+1)+".0.0":l&&(t=">="+o+"."+i+".0 <"+o+"."+(+i+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(i[z],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(o)}))),s.map((function(e){return new oe(e,this.options)}),this)},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some((function(r){return r.every((function(r){return e.set.some((function(e){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},e.toComparators=function(e,t){return new se(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new W(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},e.satisfies=le,e.maxSatisfying=function(e,t,r){var n=null,o=null;try{var i=new se(t,r)}catch{return null}return e.forEach((function(e){i.test(e)&&(!n||-1===o.compare(e))&&(o=new W(n=e,r))})),n},e.minSatisfying=function(e,t,r){var n=null,o=null;try{var i=new se(t,r)}catch{return null}return e.forEach((function(e){i.test(e)&&(!n||1===o.compare(e))&&(o=new W(n=e,r))})),n},e.minVersion=function(e,t){e=new se(e,t);var r=new W("0.0.0");if(e.test(r)||(r=new W("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n)e.set[n].forEach((function(e){var t=new W(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!r||Q(r,t))&&(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return r&&e.test(r)?r:null},e.validRange=function(e,t){try{return new se(e,t).range||"*"}catch{return null}},e.ltr=function(e,t,r){return de(e,t,"<",r)},e.gtr=function(e,t,r){return de(e,t,">",r)},e.outside=de,e.prerelease=function(e,t){var r=G(e,t);return r&&r.prerelease.length?r.prerelease:null},e.intersects=function(e,t,r){return e=new se(e,r),t=new se(t,r),e.intersects(t)},e.coerce=function(e){if(e instanceof W)return e;if("string"!=typeof e)return null;var t=e.match(i[A]);return null==t?null:G(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}})),Jr=m(((e,t)=>{"use strict";function r(e){return"function"==typeof e}var n=console.error.bind(console);function o(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:r})}function i(e){e&&e.logger&&(r(e.logger)?n=e.logger:n("new logger isn't a function, not replacing"))}function s(e,t,i){if(e&&e[t]){if(!i)return n("no wrapper function"),void n((new Error).stack);if(r(e[t])&&r(i)){var s=e[t],a=i(s,t);return o(a,"__original",s),o(a,"__unwrap",(function(){e[t]===a&&o(e,t,s)})),o(a,"__wrapped",!0),o(e,t,a),a}n("original object and wrapper must be functions")}else n("no original function "+t+" to wrap")}function a(e,t){return e&&e[t]?e[t].__unwrap?e[t].__unwrap():void n("no original to unwrap to -- has "+t+" already been unwrapped?"):(n("no function to unwrap."),void n((new Error).stack))}i.wrap=s,i.massWrap=function(e,t,r){if(!e)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){s(e,t,r)}))})):n("must provide one or more functions to wrap on modules")},i.unwrap=a,i.massUnwrap=function(e,t){if(!e)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){a(e,t)}))})):n("must provide one or more functions to unwrap on modules")},t.exports=i})),Qr=m(((e,t)=>{"use strict";var r=Jr(),n=r.wrap,o=r.unwrap,i="wrap@before";function s(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:r})}function a(e,t){var r;return r=e._events&&e._events[t],Array.isArray(r)||(r=r?[r]:[]),r}function c(e,t){if(e){var r=e;if("function"==typeof e)r=t(e);else if(Array.isArray(e)){r=[];for(var n=0;n<e.length;n++)r[n]=t(e[n])}return r}}t.exports=function(e,t,r){if(!(e&&e.on&&e.addListener&&e.removeListener&&e.emit))throw new Error("can only wrap real EEs");if(!t)throw new Error("must have function to run on listener addition");if(!r)throw new Error("must have function to wrap listeners when emitting");function u(e){return function(t,r){var o=a(this,t).slice();try{var s=e.call(this,t,r);return function(e,t,r){var n=a(e,t).filter((function(e){return-1===r.indexOf(e)}));n.length>0&&function(e,t){for(var r=t.length,n=0;n<r;n++){var o=t[n],s=e[i];if("function"==typeof s)s(o);else if(Array.isArray(s))for(var a=s.length,c=0;c<a;c++)s[c](o)}}(e,n)}(this,t,o),s}finally{this.on.__wrapped||n(this,"on",u),this.addListener.__wrapped||n(this,"addListener",u)}}}e[i]?"function"==typeof e[i]?s(e,i,[e[i],t]):Array.isArray(e[i])&&e[i].push(t):s(e,i,t),e.__wrapped||(n(e,"addListener",u),n(e,"on",u),n(e,"emit",(function(e){return function(t){if(!this._events||!this._events[t])return e.apply(this,arguments);var i=this._events[t];n(this,"removeListener",(function(e){return function(){this._events[t]=i;try{return e.apply(this,arguments)}finally{i=this._events[t],this._events[t]=c(i,r)}}}));try{return this._events[t]=c(i,r),e.apply(this,arguments)}finally{o(this,"removeListener"),this._events[t]=i}}})),s(e,"__unwrap",(function(){o(e,"addListener"),o(e,"on"),o(e,"emit"),delete e[i],delete e.__wrapped})),s(e,"__wrapped",!0))}})),Yr=m(((e,t)=>{"use strict";var n=r(3837),o=r(9491),i=Qr(),s=r(8705),a="cls@contexts",c="error@context",u=process.env.DEBUG_CLS_HOOKED,l=-1;function d(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}function p(e){return process.namespaces[e]}function f(e){let t=p(e);o.ok(t,"can't delete nonexistent namespace! \""+e+'"'),o.ok(t.id,"don't assign to process.namespaces directly! "+n.inspect(t)),process.namespaces[e]=null}function h(...e){u&&process._rawDebug(`${n.format(...e)}`)}t.exports={getNamespace:p,createNamespace:function(e){o.ok(e,"namespace must be given a name."),u&&h(`NS-CREATING NAMESPACE (${e})`);let t=new d(e);return t.id=l,s.createHook({init(r,o,i,a){if(l=s.executionAsyncId(),t.active)t._contexts.set(r,t.active),u&&h(`${" ".repeat(t._indent<0?0:t._indent)}INIT [${o}] (${e}) asyncId:${r} currentUid:${l} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`);else if(0===l){let i=s.triggerAsyncId(),c=t._contexts.get(i);c?(t._contexts.set(r,c),u&&h(`${" ".repeat(t._indent<0?0:t._indent)}INIT USING CONTEXT FROM TRIGGERID [${o}] (${e}) asyncId:${r} currentUid:${l} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)):u&&h(`${" ".repeat(t._indent<0?0:t._indent)}INIT MISSING CONTEXT [${o}] (${e}) asyncId:${r} currentUid:${l} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}if(u&&"PROMISE"===o){h(n.inspect(a,{showHidden:!0}));let s=a.parentId;h(`${" ".repeat(t._indent<0?0:t._indent)}INIT RESOURCE-PROMISE [${o}] (${e}) parentId:${s} asyncId:${r} currentUid:${l} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}},before(r){let o;if(l=s.executionAsyncId(),o=t._contexts.get(r)||t._contexts.get(l),o){if(u){let i=s.triggerAsyncId();h(`${" ".repeat(t._indent<0?0:t._indent)}BEFORE (${e}) asyncId:${r} currentUid:${l} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(o)}`),t._indent+=2}t.enter(o)}else if(u){let o=s.triggerAsyncId();h(`${" ".repeat(t._indent<0?0:t._indent)}BEFORE MISSING CONTEXT (${e}) asyncId:${r} currentUid:${l} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${n.inspect(t._contexts,{showHidden:!0,depth:2,colors:!0})}`),t._indent+=2}},after(r){let o;if(l=s.executionAsyncId(),o=t._contexts.get(r)||t._contexts.get(l),o){if(u){let i=s.triggerAsyncId();t._indent-=2,h(`${" ".repeat(t._indent<0?0:t._indent)}AFTER (${e}) asyncId:${r} currentUid:${l} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(o)}`)}t.exit(o)}else if(u){let i=s.triggerAsyncId();t._indent-=2,h(`${" ".repeat(t._indent<0?0:t._indent)}AFTER MISSING CONTEXT (${e}) asyncId:${r} currentUid:${l} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(o)}`)}},destroy(r){if(l=s.executionAsyncId(),u){let o=s.triggerAsyncId();h(`${" ".repeat(t._indent<0?0:t._indent)}DESTROY (${e}) currentUid:${l} asyncId:${r} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(t._contexts.get(l))}`)}t._contexts.delete(r)}}).enable(),process.namespaces[e]=t,t},destroyNamespace:f,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){f(e)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:c},d.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,u&&h(" ".repeat(this._indent<0?0:this._indent)+"CONTEXT-SET KEY:"+e+"="+t+" in ns:"+this.name+" currentUid:"+l+" active:"+n.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),t},d.prototype.get=function(e){if(this.active){if(u){let t=s.executionAsyncId(),r=s.triggerAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);h(o+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+l+" active:"+n.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),h(`${o}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${l} asyncHooksCurrentId:${t} triggerId:${r} len:${this._set.length} active:${n.inspect(this.active)}`)}return this.active[e]}if(u){let t=s.currentId(),r=s.triggerAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${l} asyncHooksCurrentId:${t} triggerId:${r} len:${this._set.length}`)}},d.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=l,u){let t=s.executionAsyncId(),r=s.triggerAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-CREATED Context: (${this.name}) currentUid:${l} asyncHooksCurrentId:${t} triggerId:${r} len:${this._set.length} context:${n.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e},d.prototype.run=function(e){let t=this.createContext();this.enter(t);try{if(u){let e=s.triggerAsyncId(),r=s.executionAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${l} triggerId:${e} asyncHooksCurrentId:${r} len:${this._set.length} context:${n.inspect(t)}`)}return e(t),t}catch(e){throw e&&(e[c]=t),e}finally{if(u){let e=s.triggerAsyncId(),r=s.executionAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN END: (${this.name}) currentUid:${l} triggerId:${e} asyncHooksCurrentId:${r} len:${this._set.length} ${n.inspect(t)}`)}this.exit(t)}},d.prototype.runAndReturn=function(e){let t;return this.run((function(r){t=e(r)})),t},d.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let r=e(t);if(!r||!r.then||!r.catch)throw new Error("fn must return a promise.");return u&&h("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+n.inspect(t)),r.then((e=>(u&&h("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e))).catch((e=>{throw e[c]=t,u&&h("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e}))},d.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let r=this;return function(){r.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[c]=t),e}finally{r.exit(t)}}},d.prototype.enter=function(e){if(o.ok(e,"context must be provided for entering"),u){let t=s.executionAsyncId(),r=s.triggerAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-ENTER: (${this.name}) currentUid:${l} triggerId:${r} asyncHooksCurrentId:${t} len:${this._set.length} ${n.inspect(e)}`)}this._set.push(this.active),this.active=e},d.prototype.exit=function(e){if(o.ok(e,"context must be provided for exiting"),u){let t=s.executionAsyncId(),r=s.triggerAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-EXIT: (${this.name}) currentUid:${l} triggerId:${r} asyncHooksCurrentId:${t} len:${this._set.length} ${n.inspect(e)}`)}if(this.active===e)return o.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(u&&h("??ERROR?? context exiting but not entered - ignoring: "+n.inspect(e)),o.ok(t>=0,"context not currently entered; can't exit. \n"+n.inspect(this)+"\n"+n.inspect(e))):(o.ok(t,"can't remove top context"),this._set.splice(t,1))},d.prototype.bindEmitter=function(e){o.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,r="context@"+this.name;i(e,(function(e){!e||(e[a]||(e[a]=Object.create(null)),e[a][r]={namespace:t,context:t.active})}),(function(e){if(!e||!e[a])return e;let t=e,r=e[a];return Object.keys(r).forEach((function(e){let n=r[e];t=n.namespace.bind(t,n.context)})),t}))},d.prototype.fromException=function(e){return e[c]},process.namespaces={}})),Zr=m(((e,t)=>{"use strict";function r(){}t.exports=function(){let e=this._hooks,t=this._state,n=process.nextTick;process.nextTick=function(){if(!t.enabled)return n.apply(process,arguments);let o=new Array(arguments.length);for(let e=0;e<arguments.length;e++)o[e]=arguments[e];let i=o[0];if("function"!=typeof i)throw new TypeError("callback is not a function");let s=new r,a=--t.counter;return e.init.call(s,a,0,null,null),o[0]=function(){e.pre.call(s,a);let t=!0;try{i.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(s,a,!0),e.destroy.call(null,a)}))}e.post.call(s,a,!1),e.destroy.call(null,a)},n.apply(process,o)}}})),en=m(((e,t)=>{"use strict";function r(){}t.exports=function(){let e=this._hooks,t=this._state,n=global.Promise,o=n.prototype.then;function i(t,r,n,o){return"function"!=typeof t?o?function(t){return function(r){return e.destroy.call(null,t),r}}(n):function(t){return function(r){throw e.destroy.call(null,t),r}}(n):function(){e.pre.call(r,n);try{return t.apply(this,arguments)}finally{e.post.call(r,n,!1),e.destroy.call(null,n)}}}n.prototype.then=function(n,s){if(!t.enabled)return o.call(this,n,s);let a=new r,c=--t.counter;return e.init.call(a,c,0,null,null),o.call(this,i(n,a,c,!0),i(s,a,c,!1))}}})),tn=m(((e,t)=>{"use strict";var n=r(9512);function o(){}function i(){}function s(){}var a=new Map,c=new Map,u=new Map,l=null,d=!1;function p(e,t,r,o,i,s,a){let c=n[r],u=n[o];n[r]=function(){if(!t.enabled)return c.apply(n,arguments);let r=new Array(arguments.length);for(let e=0;e<arguments.length;e++)r[e]=arguments[e];let o=r[0];if("function"!=typeof o)throw new TypeError('"callback" argument must be a function');let u,p=new i,f=--t.counter;return e.init.call(p,f,0,null,null),r[0]=function(){l=u,e.pre.call(p,f);let t=!0;try{o.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(p,f,!0),s.delete(u),e.destroy.call(null,f)}))}e.post.call(p,f,!1),l=null,(a||d)&&(d=!1,s.delete(u),e.destroy.call(null,f))},u=c.apply(n,r),s.set(u,f),u},n[o]=function(t){if(l===t&&null!==t)d=!0;else if(s.has(t)){let r=s.get(t);s.delete(t),e.destroy.call(null,r)}u.apply(n,arguments)}}t.exports=function(){p(this._hooks,this._state,"setTimeout","clearTimeout",o,a,!0),p(this._hooks,this._state,"setInterval","clearInterval",i,c,!1),p(this._hooks,this._state,"setImmediate","clearImmediate",s,u,!0),global.setTimeout=n.setTimeout,global.setInterval=n.setInterval,global.setImmediate=n.setImmediate,global.clearTimeout=n.clearTimeout,global.clearInterval=n.clearInterval,global.clearImmediate=n.clearImmediate}})),rn=m(((e,t)=>{t.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}})),nn=m(((e,t)=>{"use strict";var r=process.binding("async_wrap"),n=r.Providers.TIMERWRAP,o={nextTick:Zr(),promise:en(),timers:tn()},i=new Set;function s(){this.enabled=!1,this.counter=0}function a(){let e=this.initFns=[],t=this.preFns=[],r=this.postFns=[],o=this.destroyFns=[];this.init=function(t,r,o,s){if(r!==n)for(let n of e)n(t,this,r,o,s);else i.add(t)},this.pre=function(e){if(!i.has(e))for(let r of t)r(e,this)},this.post=function(e,t){if(!i.has(e))for(let n of r)n(e,this,t)},this.destroy=function(e){if(i.has(e))i.delete(e);else for(let t of o)t(e)}}function c(e,t){let r=e.indexOf(t);-1!==r&&e.splice(r,1)}function u(){this._state=new s,this._hooks=new a,this.version=rn().version,this.providers=r.Providers;for(let e of Object.keys(o))o[e].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),r.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}a.prototype.add=function(e){e.init&&this.initFns.push(e.init),e.pre&&this.preFns.push(e.pre),e.post&&this.postFns.push(e.post),e.destroy&&this.destroyFns.push(e.destroy)},a.prototype.remove=function(e){e.init&&c(this.initFns,e.init),e.pre&&c(this.preFns,e.pre),e.post&&c(this.postFns,e.post),e.destroy&&c(this.destroyFns,e.destroy)},t.exports=u,u.prototype.addHooks=function(e){this._hooks.add(e)},u.prototype.removeHooks=function(e){this._hooks.remove(e)},u.prototype.enable=function(){this._state.enabled=!0,r.enable()},u.prototype.disable=function(){this._state.enabled=!1,r.disable()}})),on=m(((e,t)=>{t.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}})),sn=m(((e,t)=>{t.exports=function(e,t){var r=[];r.push(function(e){try{return Error.prototype.toString.call(e)}catch(e){try{return"<error: "+e+">"}catch{return"<error>"}}}(e));for(var n=0;n<t.length;n++){var o,i=t[n];try{o=i.toString()}catch(e){try{o="<error: "+e+">"}catch{o="<error>"}}r.push("    at "+o)}return r.join("\n")}})),an=m(((e,t)=>{var r=sn();function n(){this.extend=new s,this.filter=new s,this.format=new a,this.version=on().version}var o=!1;n.prototype.callSite=function e(t){t||(t={}),o=!0;var r={};Error.captureStackTrace(r,e);var n=r.stack;return o=!1,n=n.slice(t.slice||0),t.extend&&(n=this.extend._modify(r,n)),t.filter&&(n=this.filter._modify(r,n)),n};var i=new n;function s(){this._modifiers=[]}function a(){this._formater=r,this._previous=void 0}s.prototype._modify=function(e,t){for(var r=0,n=this._modifiers.length;r<n;r++)t=this._modifiers[r](e,t);return t},s.prototype.attach=function(e){this._modifiers.push(e)},s.prototype.deattach=function(e){var t=this._modifiers.indexOf(e);return-1!==t&&(this._modifiers.splice(t,1),!0)},a.prototype.replace=function(e){e?this._formater=e:this.restore()},a.prototype.restore=function(){this._formater=r,this._previous=void 0},a.prototype._backup=function(){this._previous=this._formater},a.prototype._roolback=function(){this._previous===r?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&i.format.replace(Error.prepareStackTrace);var c=!1;function u(e,t){if(o)return t;if(c)return r(e,t);var n=t.concat();n=i.extend._modify(e,n),n=(n=i.filter._modify(e,n)).slice(0,Error.stackTraceLimit),Object.isExtensible(e)&&void 0===Object.getOwnPropertyDescriptor(e,"callSite")&&(e.callSite={original:t,mutated:n}),c=!0;var s=i.format._formater(e,n);return c=!1,s}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return u},set:function(e){e===u?i.format._roolback():(i.format._backup(),i.format.replace(e))}}),Object.defineProperty(Error.prototype,"callSite",{get:function(){return this.stack,this.callSite},set:function(e){Object.defineProperty(this,"callSite",{value:e,writable:!0,configurable:!0})},configurable:!0}),t.exports=i})),cn=m(((e,t)=>{if(global._stackChain){if(global._stackChain.version!==on().version)throw new Error("Conflicting version of stack-chain found");t.exports=global._stackChain}else t.exports=global._stackChain=an()})),un=m(((e,t)=>{"use strict";var r=nn();if(global._asyncHook){if(global._asyncHook.version!==rn().version)throw new Error("Conflicting version of async-hook-jl found");t.exports=global._asyncHook}else cn().filter.attach((function(e,t){return t.filter((function(e){let t=e.getFileName();return!(t&&t.slice(0,__dirname.length)===__dirname)}))})),t.exports=global._asyncHook=new r})),ln=m(((e,t)=>{"use strict";var n=r(3837),o=r(9491),i=Qr(),s=un(),a="cls@contexts",c="error@context",u=[];for(let e in s.providers)u[s.providers[e]]=e;var l,d,p=process.env.DEBUG_CLS_HOOKED,f=-1;function h(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map}function g(e){return process.namespaces[e]}function v(e){let t=g(e);o.ok(t,"can't delete nonexistent namespace! \""+e+'"'),o.ok(t.id,"don't assign to process.namespaces directly! "+n.inspect(t)),process.namespaces[e]=null}function m(e){process.env.DEBUG&&process._rawDebug(e)}function y(e){return e?"function"==typeof e?e.name?e.name:(e.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1]:e.constructor&&e.constructor.name?e.constructor.name:void 0:e}if(t.exports={getNamespace:g,createNamespace:function(e){o.ok(e,"namespace must be given a name."),p&&m("CREATING NAMESPACE "+e);let t=new h(e);return t.id=f,s.addHooks({init(r,o,i,s,a){f=r,s?(t._contexts.set(r,t._contexts.get(s)),p&&m("PARENTID: "+e+" uid:"+r+" parent:"+s+" provider:"+i)):t._contexts.set(f,t.active),p&&m("INIT "+e+" uid:"+r+" parent:"+s+" provider:"+u[i]+" active:"+n.inspect(t.active,!0))},pre(r,o){f=r;let i=t._contexts.get(r);i?(p&&m(" PRE "+e+" uid:"+r+" handle:"+y(o)+" context:"+n.inspect(i)),t.enter(i)):p&&m(" PRE MISSING CONTEXT "+e+" uid:"+r+" handle:"+y(o))},post(r,o){f=r;let i=t._contexts.get(r);i?(p&&m(" POST "+e+" uid:"+r+" handle:"+y(o)+" context:"+n.inspect(i)),t.exit(i)):p&&m(" POST MISSING CONTEXT "+e+" uid:"+r+" handle:"+y(o))},destroy(r){f=r,p&&m("DESTROY "+e+" uid:"+r+" context:"+n.inspect(t._contexts.get(f))+" active:"+n.inspect(t.active,!0)),t._contexts.delete(r)}}),process.namespaces[e]=t,t},destroyNamespace:v,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){v(e)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:c},h.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return p&&m("    SETTING KEY:"+e+"="+t+" in ns:"+this.name+" uid:"+f+" active:"+n.inspect(this.active,!0)),this.active[e]=t,t},h.prototype.get=function(e){if(this.active)return p&&m("    GETTING KEY:"+e+"="+this.active[e]+" "+this.name+" uid:"+f+" active:"+n.inspect(this.active,!0)),this.active[e];p&&m("    GETTING KEY:"+e+"=undefined "+this.name+" uid:"+f+" active:"+n.inspect(this.active,!0))},h.prototype.createContext=function(){p&&m("   CREATING Context: "+this.name+" uid:"+f+" len:"+this._set.length+"  active:"+n.inspect(this.active,!0,2,!0));let e=Object.create(this.active?this.active:Object.prototype);return e._ns_name=this.name,e.id=f,p&&m("   CREATED Context: "+this.name+" uid:"+f+" len:"+this._set.length+"  context:"+n.inspect(e,!0,2,!0)),e},h.prototype.run=function(e){let t=this.createContext();this.enter(t);try{return p&&m(" BEFORE RUN: "+this.name+" uid:"+f+" len:"+this._set.length+" "+n.inspect(t)),e(t),t}catch(e){throw e&&(e[c]=t),e}finally{p&&m(" AFTER RUN: "+this.name+" uid:"+f+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t)}},h.prototype.runAndReturn=function(e){var t;return this.run((function(r){t=e(r)})),t},h.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let r=e(t);if(!r||!r.then||!r.catch)throw new Error("fn must return a promise.");return p&&m(" BEFORE runPromise: "+this.name+" uid:"+f+" len:"+this._set.length+" "+n.inspect(t)),r.then((e=>(p&&m(" AFTER runPromise: "+this.name+" uid:"+f+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e))).catch((e=>{throw e[c]=t,p&&m(" AFTER runPromise: "+this.name+" uid:"+f+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e}))},h.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let r=this;return function(){r.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[c]=t),e}finally{r.exit(t)}}},h.prototype.enter=function(e){o.ok(e,"context must be provided for entering"),p&&m("  ENTER "+this.name+" uid:"+f+" len:"+this._set.length+" context: "+n.inspect(e)),this._set.push(this.active),this.active=e},h.prototype.exit=function(e){if(o.ok(e,"context must be provided for exiting"),p&&m("  EXIT "+this.name+" uid:"+f+" len:"+this._set.length+" context: "+n.inspect(e)),this.active===e)return o.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(p&&m("??ERROR?? context exiting but not entered - ignoring: "+n.inspect(e)),o.ok(t>=0,"context not currently entered; can't exit. \n"+n.inspect(this)+"\n"+n.inspect(e))):(o.ok(t,"can't remove top context"),this._set.splice(t,1))},h.prototype.bindEmitter=function(e){o.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,r="context@"+this.name;i(e,(function(e){!e||(e[a]||(e[a]=Object.create(null)),e[a][r]={namespace:t,context:t.active})}),(function(e){if(!e||!e[a])return e;let t=e,r=e[a];return Object.keys(r).forEach((function(e){let n=r[e];t=n.namespace.bind(t,n.context)})),t}))},h.prototype.fromException=function(e){return e[c]},process.namespaces={},s._state&&!s._state.enabled&&s.enable(),p)for(d in(l=cn()).filter._modifiers)l.filter.deattach(d)})),dn=m(((e,t)=>{"use strict";var r=Xr();process&&r.gte(process.versions.node,"8.0.0")?t.exports=Yr():t.exports=ln()})),pn=m(((e,t)=>{var r;e=t.exports=W,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,i=e.re=[],s=e.src=[],a=0,c=a++;s[c]="0|[1-9]\\d*";var u=a++;s[u]="[0-9]+";var l=a++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=a++;s[d]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var p=a++;s[p]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var f=a++;s[f]="(?:"+s[c]+"|"+s[l]+")";var h=a++;s[h]="(?:"+s[u]+"|"+s[l]+")";var g=a++;s[g]="(?:-("+s[f]+"(?:\\."+s[f]+")*))";var v=a++;s[v]="(?:-?("+s[h]+"(?:\\."+s[h]+")*))";var m=a++;s[m]="[0-9A-Za-z-]+";var y=a++;s[y]="(?:\\+("+s[m]+"(?:\\."+s[m]+")*))";var _=a++,S="v?"+s[d]+s[g]+"?"+s[y]+"?";s[_]="^"+S+"$";var E="[v=\\s]*"+s[p]+s[v]+"?"+s[y]+"?",w=a++;s[w]="^"+E+"$";var b=a++;s[b]="((?:<|>)?=?)";var T=a++;s[T]=s[u]+"|x|X|\\*";var C=a++;s[C]=s[c]+"|x|X|\\*";var P=a++;s[P]="[v=\\s]*("+s[C]+")(?:\\.("+s[C]+")(?:\\.("+s[C]+")(?:"+s[g]+")?"+s[y]+"?)?)?";var I=a++;s[I]="[v=\\s]*("+s[T]+")(?:\\.("+s[T]+")(?:\\.("+s[T]+")(?:"+s[v]+")?"+s[y]+"?)?)?";var O=a++;s[O]="^"+s[b]+"\\s*"+s[P]+"$";var N=a++;s[N]="^"+s[b]+"\\s*"+s[I]+"$";var A=a++;s[A]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var R=a++;s[R]="(?:~>?)";var x=a++;s[x]="(\\s*)"+s[R]+"\\s+",i[x]=new RegExp(s[x],"g");var k=a++;s[k]="^"+s[R]+s[P]+"$";var D=a++;s[D]="^"+s[R]+s[I]+"$";var M=a++;s[M]="(?:\\^)";var j=a++;s[j]="(\\s*)"+s[M]+"\\s+",i[j]=new RegExp(s[j],"g");var L=a++;s[L]="^"+s[M]+s[P]+"$";var F=a++;s[F]="^"+s[M]+s[I]+"$";var U=a++;s[U]="^"+s[b]+"\\s*("+E+")$|^$";var B=a++;s[B]="^"+s[b]+"\\s*("+S+")$|^$";var V=a++;s[V]="(\\s*)"+s[b]+"\\s*("+E+"|"+s[P]+")",i[V]=new RegExp(s[V],"g");var $=a++;s[$]="^\\s*("+s[P]+")\\s+-\\s+("+s[P]+")\\s*$";var H=a++;s[H]="^\\s*("+s[I]+")\\s+-\\s+("+s[I]+")\\s*$";var q,z=a++;for(s[z]="(<|>)?=?\\s*\\*",q=0;q<35;q++)r(q,s[q]),i[q]||(i[q]=new RegExp(s[q]));function G(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof W)return e;if("string"!=typeof e||e.length>n)return null;if(!(t.loose?i[w]:i[_]).test(e))return null;try{return new W(e,t)}catch{return null}}function W(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof W){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof W))return new W(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var s=e.trim().match(t.loose?i[w]:i[_]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}e.parse=G,e.valid=function(e,t){var r=G(e,t);return r?r.version:null},e.clean=function(e,t){var r=G(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},e.SemVer=W,W.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},W.prototype.toString=function(){return this.version},W.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof W||(e=new W(e,this.options)),this.compareMain(e)||this.comparePre(e)},W.prototype.compareMain=function(e){return e instanceof W||(e=new W(e,this.options)),X(this.major,e.major)||X(this.minor,e.minor)||X(this.patch,e.patch)},W.prototype.comparePre=function(e){if(e instanceof W||(e=new W(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return X(n,o)}while(++t)},W.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},e.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new W(e,r).inc(t,n).version}catch{return null}},e.diff=function(e,t){if(Z(e,t))return null;var r=G(e),n=G(t),o="";if(r.prerelease.length||n.prerelease.length){o="pre";var i="prerelease"}for(var s in r)if(("major"===s||"minor"===s||"patch"===s)&&r[s]!==n[s])return o+s;return i},e.compareIdentifiers=X;var K=/^[0-9]+$/;function X(e,t){var r=K.test(e),n=K.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function J(e,t,r){return new W(e,r).compare(new W(t,r))}function Q(e,t,r){return J(e,t,r)>0}function Y(e,t,r){return J(e,t,r)<0}function Z(e,t,r){return 0===J(e,t,r)}function ee(e,t,r){return 0!==J(e,t,r)}function te(e,t,r){return J(e,t,r)>=0}function re(e,t,r){return J(e,t,r)<=0}function ne(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Z(e,r,n);case"!=":return ee(e,r,n);case">":return Q(e,r,n);case">=":return te(e,r,n);case"<":return Y(e,r,n);case"<=":return re(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function oe(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof oe){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof oe))return new oe(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ie?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}e.rcompareIdentifiers=function(e,t){return X(t,e)},e.major=function(e,t){return new W(e,t).major},e.minor=function(e,t){return new W(e,t).minor},e.patch=function(e,t){return new W(e,t).patch},e.compare=J,e.compareLoose=function(e,t){return J(e,t,!0)},e.rcompare=function(e,t,r){return J(t,e,r)},e.sort=function(t,r){return t.sort((function(t,n){return e.compare(t,n,r)}))},e.rsort=function(t,r){return t.sort((function(t,n){return e.rcompare(t,n,r)}))},e.gt=Q,e.lt=Y,e.eq=Z,e.neq=ee,e.gte=te,e.lte=re,e.cmp=ne,e.Comparator=oe;var ie={};function se(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof se)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new se(e.raw,t);if(e instanceof oe)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function ce(e,t,r,n,o,i,s,a,c,u,l,d,p){return((t=ae(r)?"":ae(n)?">="+r+".0.0":ae(o)?">="+r+"."+n+".0":">="+t)+" "+(a=ae(c)?"":ae(u)?"<"+(+c+1)+".0.0":ae(l)?"<"+c+"."+(+u+1)+".0":d?"<="+c+"."+u+"."+l+"-"+d:"<="+a)).trim()}function ue(e,t,n){for(var o=0;o<e.length;o++)if(!e[o].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(o=0;o<e.length;o++)if(r(e[o].semver),e[o].semver!==ie&&e[o].semver.prerelease.length>0){var i=e[o].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function le(e,t,r){try{t=new se(t,r)}catch{return!1}return t.test(e)}function de(e,t,r,n){var o,i,s,a,c;switch(e=new W(e,n),t=new se(t,n),r){case">":o=Q,i=re,s=Y,a=">",c=">=";break;case"<":o=Y,i=te,s=Q,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],d=null,p=null;if(l.forEach((function(e){e.semver===ie&&(e=new oe(">=0.0.0")),d=d||e,p=p||e,o(e.semver,d.semver,n)?d=e:s(e.semver,p.semver,n)&&(p=e)})),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&i(e,p.semver))return!1;if(p.operator===c&&s(e,p.semver))return!1}return!0}oe.prototype.parse=function(e){var t=this.options.loose?i[U]:i[B],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new W(r[2],this.options.loose):this.semver=ie},oe.prototype.toString=function(){return this.value},oe.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===ie||("string"==typeof e&&(e=new W(e,this.options)),ne(e,this.operator,this.semver,this.options))},oe.prototype.intersects=function(e,t){if(!(e instanceof oe))throw new TypeError("a Comparator is required");var r;if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new se(e.value,t),le(this.value,r,t);if(""===e.operator)return r=new se(this.value,t),le(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),o=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||o||i&&s||a||c},e.Range=se,se.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?i[H]:i[$];e=e.replace(n,ce),r("hyphen replace",e),e=e.replace(i[V],"$1$2$3"),r("comparator trim",e,i[V]),e=(e=(e=e.replace(i[x],"$1~")).replace(i[j],"$1^")).split(/\s+/).join(" ");var o=t?i[U]:i[B],s=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?i[F]:i[L];return e.replace(n,(function(t,n,o,i,s){var a;return r("caret",e,t,n,o,i,s),ae(n)?a="":ae(o)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(i)?a="0"===n?">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":">="+n+"."+o+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),a="0"===n?"0"===o?">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+"-"+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===o?">="+n+"."+o+"."+i+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+" <"+(+n+1)+".0.0"),r("caret return",a),a}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?i[D]:i[k];return e.replace(n,(function(t,n,o,i,s){var a;return r("tilde",e,t,n,o,i,s),ae(n)?a="":ae(o)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(i)?a=">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":s?(r("replaceTilde pr",s),a=">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+(+o+1)+".0"):a=">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0",r("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?i[N]:i[O];return e.replace(n,(function(t,n,o,i,s,a){r("xRange",e,t,n,o,i,s,a);var c=ae(o),u=c||ae(i),l=u||ae(s);return"="===n&&l&&(n=""),c?t=">"===n||"<"===n?"<0.0.0":"*":n&&l?(u&&(i=0),s=0,">"===n?(n=">=",u?(o=+o+1,i=0,s=0):(i=+i+1,s=0)):"<="===n&&(n="<",u?o=+o+1:i=+i+1),t=n+o+"."+i+"."+s):u?t=">="+o+".0.0 <"+(+o+1)+".0.0":l&&(t=">="+o+"."+i+".0 <"+o+"."+(+i+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(i[z],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(o)}))),s.map((function(e){return new oe(e,this.options)}),this)},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some((function(r){return r.every((function(r){return e.set.some((function(e){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},e.toComparators=function(e,t){return new se(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new W(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},e.satisfies=le,e.maxSatisfying=function(e,t,r){var n=null,o=null;try{var i=new se(t,r)}catch{return null}return e.forEach((function(e){i.test(e)&&(!n||-1===o.compare(e))&&(o=new W(n=e,r))})),n},e.minSatisfying=function(e,t,r){var n=null,o=null;try{var i=new se(t,r)}catch{return null}return e.forEach((function(e){i.test(e)&&(!n||1===o.compare(e))&&(o=new W(n=e,r))})),n},e.minVersion=function(e,t){e=new se(e,t);var r=new W("0.0.0");if(e.test(r)||(r=new W("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n)e.set[n].forEach((function(e){var t=new W(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!r||Q(r,t))&&(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return r&&e.test(r)?r:null},e.validRange=function(e,t){try{return new se(e,t).range||"*"}catch{return null}},e.ltr=function(e,t,r){return de(e,t,"<",r)},e.gtr=function(e,t,r){return de(e,t,">",r)},e.outside=de,e.prerelease=function(e,t){var r=G(e,t);return r&&r.prerelease.length?r.prerelease:null},e.intersects=function(e,t,r){return e=new se(e,r),t=new se(t,r),e.intersects(t)},e.coerce=function(e){if(e instanceof W)return e;if("string"!=typeof e)return null;var t=e.match(i[A]);return null==t?null:G(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}})),fn=m(((e,t)=>{var r,n,o,i,s,a=Jr().wrap,c=1,u=2,l=4,d=8,p=[],f=0,h=!1,g=[];function v(e,t){var r=e.length,n=t.length,o=[];if(0===r&&0===n)return o;for(var i=0;i<r;i++)o[i]=e[i];if(0===n)return o;for(var s=0;s<n;s++){var a=!0;for(i=0;i<r;i++)if(e[i].uid===t[s].uid){a=!1;break}a&&o.push(t[s])}return o}function m(e,t){"function"==typeof e.create&&(this.create=e.create,this.flags|=c),"function"==typeof e.before&&(this.before=e.before,this.flags|=u),"function"==typeof e.after&&(this.after=e.after,this.flags|=l),"function"==typeof e.error&&(this.error=e.error,this.flags|=d),this.uid=++f,this.data=void 0===t?null:t}function y(e,t){if("object"!=typeof e||!e)throw new TypeError("callbacks argument must be an object");return e instanceof m?e:new m(e,t)}process._fatalException?(o=!1,r=function(e){var t=p.length;if(o||0===t)return!1;var r=!1;o=!0;for(var n=0;n<t;++n){var s=p[n];if(0!=(s.flags&d)){var a=i&&i[s.uid];r=s.error(a,e)||r}}return o=!1,g.length>0&&(p=g.pop()),i=void 0,r&&!h},n=function(e,t,r){var n=[];h=!0;for(var o=0;o<r;++o){var s=t[o];if(n[s.uid]=s.data,0!=(s.flags&c)){var a=s.create(s.data);void 0!==a&&(n[s.uid]=a)}}return h=!1,function(){i=n,g.push(p),p=v(t,p),h=!0;for(var o=0;o<r;++o)(t[o].flags&u)>0&&t[o].before(this,n[t[o].uid]);h=!1;var s=e.apply(this,arguments);for(h=!0,o=0;o<r;++o)(t[o].flags&l)>0&&t[o].after(this,n[t[o].uid]);return h=!1,p=g.pop(),i=void 0,s}},a(process,"_fatalException",(function(e){return function(t){return r(t)||e(t)}}))):(s=!1,r=function(e){if(s)throw e;for(var t=!1,r=p.length,n=0;n<r;++n){var o=p[n];0!=(o.flags&d)&&(t=o.error(null,e)||t)}if(!t&&h)throw e},n=function(e,t,n){var o=[];h=!0;for(var i=0;i<n;++i){var a=t[i];if(o[a.uid]=a.data,0!=(a.flags&c)){var f=a.create(a.data);void 0!==f&&(o[a.uid]=f)}}return h=!1,function(){var i,a=!1,c=!1;g.push(p),p=v(t,p),h=!0;for(var f=0;f<n;++f)(t[f].flags&u)>0&&t[f].before(this,o[t[f].uid]);h=!1;try{i=e.apply(this,arguments)}catch(e){for(a=!0,f=0;f<n;++f)if(0!=(p[f].flags&d))try{c=p[f].error(o[t[f].uid],e)||c}catch(e){throw s=!0,e}if(!c)throw process.removeListener("uncaughtException",r),process._originalNextTick((function(){process.addListener("uncaughtException",r)})),e}finally{if(!a||c){for(h=!0,f=0;f<n;++f)(t[f].flags&l)>0&&t[f].after(this,o[t[f].uid]);h=!1}p=g.pop()}return i}},process.addListener("uncaughtException",r)),m.prototype.create=void 0,m.prototype.before=void 0,m.prototype.after=void 0,m.prototype.error=void 0,m.prototype.data=void 0,m.prototype.uid=0,m.prototype.flags=0,process.createAsyncListener=y,process.addAsyncListener=function(e,t){var r;r=e instanceof m?e:y(e,t);for(var n=!1,o=0;o<p.length;o++)if(r===p[o]){n=!0;break}return n||p.push(r),r},process.removeAsyncListener=function(e){for(var t=0;t<p.length;t++)if(e===p[t]){p.splice(t,1);break}},t.exports=function(e){var t=p.length;if(0===t)return e;for(var r=p.slice(),o=0;o<t;++o)if(r[o].flags>0)return n(e,r,t);return function(e,t,r){h=!0;for(var n=0;n<r;++n){var o=t[n];o.create&&o.create(o.data)}return h=!1,function(){g.push(p),p=v(t,p);var r=e.apply(this,arguments);return p=g.pop(),r}}(e,r,t)}})),hn=m(((e,t)=>{"use strict";t.exports=(e,t)=>class extends e{constructor(e){var r,n;super((function(e,i){r=this,n=[function(r){return t(o,!1),e(r)},function(e){return t(o,!1),i(e)}]}));var o=this;try{e.apply(r,n)}catch(e){n[1](e)}return o}}})),gn=m((()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var e=Jr(),t=pn(),n=e.wrap,o=e.massWrap,i=fn(),s=r(3837),a=t.gte(process.version,"6.0.0"),c=t.gte(process.version,"7.0.0"),u=t.gte(process.version,"8.0.0"),l=t.gte(process.version,"11.0.0"),d=r(1808);function p(e){return function(){this.on("connection",(function(e){e._handle&&(e._handle.onread=i(e._handle.onread))}));try{return e.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=i(this._handle.onconnection))}}}function f(e){if(e&&e._handle){var t=e._handle;t._originalOnread||(t._originalOnread=t.onread),t.onread=i(t._originalOnread)}}c&&!d._normalizeArgs?d._normalizeArgs=function(e){if(0===e.length)return[{},null];var t=e[0],r={};"object"==typeof t&&null!==t?r=t:function(e){return"string"==typeof e&&!1===function(e){return(e=Number(e))>=0&&e}(e)}(t)?r.path=t:(r.port=t,e.length>1&&"string"==typeof e[1]&&(r.host=e[1]));var n=e[e.length-1];return"function"!=typeof n?[r,null]:[r,n]}:!c&&!d._normalizeConnectArgs&&(d._normalizeConnectArgs=function(e){var t,r={};"object"==typeof e[0]&&null!==e[0]?r=e[0]:"string"==typeof e[0]&&!1===(t=e[0],(t=Number(t))>=0&&t)?r.path=e[0]:(r.port=e[0],"string"==typeof e[1]&&(r.host=e[1]));var n=e[e.length-1];return"function"==typeof n?[r,n]:[r]}),"_setUpListenHandle"in d.Server.prototype?n(d.Server.prototype,"_setUpListenHandle",p):n(d.Server.prototype,"_listen2",p),n(d.Socket.prototype,"connect",(function(e){return function(){var t;(t=u&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?arguments[0]:c?d._normalizeArgs(arguments):d._normalizeConnectArgs(arguments))[1]&&(t[1]=i(t[1]));var r=e.apply(this,t);return f(this),r}}));var h=r(3685);n(h.Agent.prototype,"addRequest",(function(e){return function(t){var r=t.onSocket;return t.onSocket=i((function(e){return f(e),r.apply(this,arguments)})),e.apply(this,arguments)}}));var g=r(2081);function v(e){Array.isArray(e.stdio)&&e.stdio.forEach((function(e){e&&e._handle&&(e._handle.onread=i(e._handle.onread),n(e._handle,"close",A))})),e._handle&&(e._handle.onexit=i(e._handle.onexit))}g.ChildProcess?n(g.ChildProcess.prototype,"spawn",(function(e){return function(){var t=e.apply(this,arguments);return v(this),t}})):o(g,["execFile","fork","spawn"],(function(e){return function(){var t=e.apply(this,arguments);return v(t),t}})),process._fatalException||(process._originalNextTick=process.nextTick);var m=[];process._nextDomainTick&&m.push("_nextDomainTick"),process._tickDomainCallback&&m.push("_tickDomainCallback"),o(process,m,N),n(process,"nextTick",A);var y=["setTimeout","setInterval"];global.setImmediate&&y.push("setImmediate");var _=r(9512),S=global.setTimeout===_.setTimeout;o(_,y,A),S&&o(global,y,A);var E=r(9523);o(E,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],N),E.resolveNaptr&&n(E,"resolveNaptr",N);var w,b,T,C=r(7147);o(C,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],N),C.lchown&&n(C,"lchown",N),C.lchmod&&n(C,"lchmod",N),C.ftruncate&&n(C,"ftruncate",N);try{w=r(9796)}catch{}w&&w.Deflate&&w.Deflate.prototype&&((b=Object.getPrototypeOf(w.Deflate.prototype))._transform?n(b,"_transform",N):b.write&&b.flush&&b.end&&o(b,["write","flush","end"],N));try{T=r(6113)}catch{}T&&(P=["pbkdf2","randomBytes"],l||P.push("pseudoRandomBytes"),o(T,P,N));var P,I,O=!!global.Promise&&"function Promise() { [native code] }"===Promise.toString()&&"function toString() { [native code] }"===Promise.toString.toString();function N(e){var t=function(){var t,r=arguments.length-1;if("function"==typeof arguments[r]){t=Array(arguments.length);for(var n=0;n<arguments.length-1;n++)t[n]=arguments[n];t[r]=i(arguments[r])}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(r){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=i(r)),e.call(this,r))};case 2:return function(r,n){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=i(n)),e.call(this,r,n))};case 3:return function(r,n,o){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof o&&(o=i(o)),e.call(this,r,n,o))};case 4:return function(r,n,o,s){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof s&&(s=i(s)),e.call(this,r,n,o,s))};case 5:return function(r,n,o,s,a){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof a&&(a=i(a)),e.call(this,r,n,o,s,a))};case 6:return function(r,n,o,s,a,c){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof c&&(c=i(c)),e.call(this,r,n,o,s,a,c))};default:return t}}function A(e){var t=function(){var t;if("function"==typeof arguments[0]){(t=Array(arguments.length))[0]=i(arguments[0]);for(var r=1;r<arguments.length;r++)t[r]=arguments[r]}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(r){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=i(r)),e.call(this,r))};case 2:return function(r,n){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=i(r)),e.call(this,r,n))};case 3:return function(r,n,o){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=i(r)),e.call(this,r,n,o))};case 4:return function(r,n,o,s){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=i(r)),e.call(this,r,n,o,s))};case 5:return function(r,n,o,s,a){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=i(r)),e.call(this,r,n,o,s,a))};case 6:return function(r,n,o,s,a,c){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=i(r)),e.call(this,r,n,o,s,a,c))};default:return t}}O&&(I=process.addAsyncListener({create:function(){O=!1}}),global.Promise.resolve(!0).then((function(){O=!1})),process.removeAsyncListener(I)),O&&function(){var e=global.Promise;function t(n){if(!(this instanceof t))return e(n);if("function"!=typeof n)return new e(n);var o,i,s=new e((function(e,t){o=this,i=[function(t){return r(s,!1),e(t)},function(e){return r(s,!1),t(e)}]}));s.__proto__=t.prototype;try{n.apply(o,i)}catch(e){i[1](e)}return s}function r(e,t){(!e.__asl_wrapper||t)&&(e.__asl_wrapper=i(o))}function o(t,n,i,s){var a;try{return{returnVal:a=n.call(t,i),error:!1}}catch(e){return{errorVal:e,error:!0}}finally{a instanceof e?s.__asl_wrapper=function(){return(a.__asl_wrapper||o).apply(this,arguments)}:r(s,!0)}}function c(e){return function(){var t=this,r=e.apply(t,Array.prototype.map.call(arguments,(function(e){return"function"!=typeof e?e:i((function(n){var i=(t.__asl_wrapper||o)(this,e,n,r);if(i.error)throw i.errorVal;return i.returnVal}))})));return r.__asl_wrapper=function(e,n,i,s){return t.__asl_wrapper?(t.__asl_wrapper(e,(function(){}),null,r),r.__asl_wrapper(e,n,i,s)):o(e,n,i,s)},r}}s.inherits(t,e),n(e.prototype,"then",c),e.prototype.chain&&n(e.prototype,"chain",c),a?global.Promise=hn()(e,r):(["all","race","reject","resolve","accept","defer"].forEach((function(r){"function"==typeof e[r]&&(t[r]=e[r])})),global.Promise=t)}()})),vn=m(((e,t)=>{"use strict";var n=r(9491),o=Qr(),i="cls@contexts",s="error@context";function a(e){this.name=e,this.active=null,this._set=[],this.id=null}function c(e){return process.namespaces[e]}function u(e){var t=c(e);n.ok(t,"can't delete nonexistent namespace!"),n.ok(t.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(t.id),process.namespaces[e]=null}function l(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){u(e)})),process.namespaces=Object.create(null)}process.addAsyncListener||gn(),a.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,t},a.prototype.get=function(e){if(this.active)return this.active[e]},a.prototype.createContext=function(){return Object.create(this.active)},a.prototype.run=function(e){var t=this.createContext();this.enter(t);try{return e(t),t}catch(e){throw e&&(e[s]=t),e}finally{this.exit(t)}},a.prototype.runAndReturn=function(e){var t;return this.run((function(r){t=e(r)})),t},a.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());var r=this;return function(){r.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[s]=t),e}finally{r.exit(t)}}},a.prototype.enter=function(e){n.ok(e,"context must be provided for entering"),this._set.push(this.active),this.active=e},a.prototype.exit=function(e){if(n.ok(e,"context must be provided for exiting"),this.active===e)return n.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());var t=this._set.lastIndexOf(e);n.ok(t>=0,"context not currently entered; can't exit"),n.ok(t,"can't remove top context"),this._set.splice(t,1)},a.prototype.bindEmitter=function(e){n.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");var t=this,r="context@"+this.name;o(e,(function(e){!e||(e[i]||(e[i]=Object.create(null)),e[i][r]={namespace:t,context:t.active})}),(function(e){if(!e||!e[i])return e;var t=e,r=e[i];return Object.keys(r).forEach((function(e){var n=r[e];t=n.namespace.bind(t,n.context)})),t}))},a.prototype.fromException=function(e){return e[s]},process.namespaces||l(),t.exports={getNamespace:c,createNamespace:function(e){n.ok(e,"namespace must be given a name!");var t=new a(e);return t.id=process.addAsyncListener({create:function(){return t.active},before:function(e,r){r&&t.enter(r)},after:function(e,r){r&&t.exit(r)},error:function(e){e&&t.exit(e)}}),process.namespaces[e]=t,t},destroyNamespace:u,reset:l}})),mn=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CorrelationContextManager=void 0;var t=S(),r=Qt(),n=tr(),o=rr(),i=Kr(),s=function(){function e(){}return e.getCurrentContext=function(){if(!e.enabled)return null;var t=e.session.get(e.CONTEXT_NAME);return void 0===t?null:t},e.generateContextObject=function(e,t,r,n,o,i){return t=t||e,this.enabled?{operation:{name:r,id:e,parentId:t,traceparent:o,tracestate:i},customProperties:new a(n)}:null},e.spanToContextObject=function(t,r,o){var i=new n;return i.traceId=t.traceId,i.spanId=t.spanId,i.traceFlag=n.formatOpenTelemetryTraceFlags(t.traceFlags)||n.DEFAULT_TRACE_FLAG,i.parentId=r,e.generateContextObject(i.traceId,i.parentId,o,null,i)},e.runWithContext=function(t,r){var n;return e.enabled?e.session.bind(r,((n={})[e.CONTEXT_NAME]=t,n))():r()},e.wrapEmitter=function(t){e.enabled&&e.session.bindEmitter(t)},e.wrapCallback=function(t,r){var n;return e.enabled?e.session.bind(t,r?((n={})[e.CONTEXT_NAME]=r,n):void 0):t},e.enable=function(t){if(!this.enabled){if(!this.isNodeVersionCompatible())return void(this.enabled=!1);e.hasEverEnabled||(this.forceClsHooked=t,this.hasEverEnabled=!0,typeof this.cls>"u"&&(!0===e.forceClsHooked||void 0===e.forceClsHooked&&e.shouldUseClsHooked()?this.cls=dn():this.cls=vn()),e.session=this.cls.createNamespace("AI-CLS-Session"),r.registerContextPreservation((function(t){return e.session.bind(t)}))),this.enabled=!0}},e.startOperation=function(r,s){var a=r&&r.traceContext||null,c=r&&r.traceId?r:null,u=r&&r.headers;if(c){var l=new n("00-"+c.traceId+"-"+c.spanId+"-01"),d=new o(c.traceState?c.traceState.serialize():null);return e.generateContextObject(c.traceId,"|"+c.traceId+"."+c.spanId+".","string"==typeof s?s:"",void 0,l,d)}if(a){l=new n(a.traceparent),d=new o(a.tracestate);var p="object"==typeof s?new i(s):null;return e.generateContextObject(l.traceId,l.parentId,"string"==typeof s?s:p.getOperationName({}),p&&p.getCorrelationContextHeader()||void 0,l,d)}return u?(l=new n(u.traceparent?u.traceparent.toString():null),d=new o(u.tracestate?u.tracestate.toString():null),p=new i(r),e.generateContextObject(l.traceId,l.parentId,p.getOperationName({}),p.getCorrelationContextHeader(),l,d)):(t.warn("startOperation was called with invalid arguments",arguments),null)},e.disable=function(){this.enabled=!1},e.reset=function(){e.hasEverEnabled&&(e.session=null,e.session=this.cls.createNamespace("AI-CLS-Session"))},e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},e.shouldUseClsHooked=function(){var e=process.versions.node.split(".");return parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=2},e.canUseClsHooked=function(){var e=process.versions.node.split("."),t=parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=0,r=parseInt(e[0])<8||parseInt(e[0])<=8&&parseInt(e[1])<2,n=parseInt(e[0])>4||parseInt(e[0])>=4&&parseInt(e[1])>=7;return!(t&&r)&&n},e.enabled=!1,e.hasEverEnabled=!1,e.forceClsHooked=void 0,e.CONTEXT_NAME="ApplicationInsights-Context",e}();e.CorrelationContextManager=s;var a=function(){function e(e){this.props=[],this.addHeaderData(e)}return e.prototype.addHeaderData=function(e){var t=e?e.split(", "):[];this.props=t.map((function(e){var t=e.split("=");return{key:t[0],value:t[1]}})).concat(this.props)},e.prototype.serializeToHeader=function(){return this.props.map((function(e){return e.key+"="+e.value})).join(", ")},e.prototype.getProperty=function(e){for(var t=0;t<this.props.length;++t){var r=this.props[t];if(r.key===e)return r.value}},e.prototype.setProperty=function(r,n){if(e.bannedCharacters.test(r)||e.bannedCharacters.test(n))t.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+r+" and value: "+n);else{for(var o=0;o<this.props.length;++o){var i=this.props[o];if(i.key===r)return void(i.value=n)}this.props.push({key:r,value:n})}},e.bannedCharacters=/[,=]/,e}()})),yn=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=Gr(),r=C(),n=[],o=function(e){var r=e.data.message;n.forEach((function(n){r instanceof Error?n.trackException({exception:r}):(r.lastIndexOf("\n")==r.length-1&&(r=r.substring(0,r.length-1)),n.trackTrace({message:r,severity:e.data.stderr?t.SeverityLevel.Warning:t.SeverityLevel.Information}))}))};e.enable=function(e,t){e?(0===n.length&&r.channel.subscribe("console",o),n.push(t)):0===(n=n.filter((function(e){return e!=t}))).length&&r.channel.unsubscribe("console",o)},e.dispose=function(){r.channel.unsubscribe("console",o),n=[]}})),_n=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=Gr(),r=C(),n=[],o={10:t.SeverityLevel.Verbose,20:t.SeverityLevel.Verbose,30:t.SeverityLevel.Information,40:t.SeverityLevel.Warning,50:t.SeverityLevel.Error,60:t.SeverityLevel.Critical},i=function(e){var t=e.data.result;n.forEach((function(r){var n=o[e.data.level];t instanceof Error?r.trackException({exception:t}):r.trackTrace({message:t,severity:n})}))};e.enable=function(e,t){e?(0===n.length&&r.channel.subscribe("bunyan",i),n.push(t)):0===(n=n.filter((function(e){return e!=t}))).length&&r.channel.unsubscribe("bunyan",i)},e.dispose=function(){r.channel.unsubscribe("bunyan",i),n=[]}})),Sn=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=Gr(),r=C(),n=[],o={syslog:function(e){var r={emerg:t.SeverityLevel.Critical,alert:t.SeverityLevel.Critical,crit:t.SeverityLevel.Critical,error:t.SeverityLevel.Error,warning:t.SeverityLevel.Warning,notice:t.SeverityLevel.Information,info:t.SeverityLevel.Information,debug:t.SeverityLevel.Verbose};return void 0===r[e]?t.SeverityLevel.Information:r[e]},npm:function(e){var r={error:t.SeverityLevel.Error,warn:t.SeverityLevel.Warning,info:t.SeverityLevel.Information,verbose:t.SeverityLevel.Verbose,debug:t.SeverityLevel.Verbose,silly:t.SeverityLevel.Verbose};return void 0===r[e]?t.SeverityLevel.Information:r[e]},unknown:function(e){return t.SeverityLevel.Information}},i=function(e){var t=e.data.message;n.forEach((function(r){if(t instanceof Error)r.trackException({exception:t,properties:e.data.meta});else{var n=o[e.data.levelKind](e.data.level);r.trackTrace({message:t,severity:n,properties:e.data.meta})}}))};e.enable=function(e,t){e?(0===n.length&&r.channel.subscribe("winston",i),n.push(t)):0===(n=n.filter((function(e){return e!=t}))).length&&r.channel.unsubscribe("winston",i)},e.dispose=function(){r.channel.unsubscribe("winston",i),n=[]}})),En=m(((e,t)=>{"use strict";var r=Qt(),n=function(){function e(t){if(e.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=t,e.INSTANCE=this}return e.prototype.enable=function(e,t){r.IsInitialized&&(yn().enable(e&&t,this._client),_n().enable(e,this._client),Sn().enable(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1,!1)},e._methodNames=["debug","info","log","warn","error"],e}();t.exports=n})),wn=m(((e,t)=>{"use strict";var r=function(){function e(t){if(e.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t;var r=process.versions.node.split(".");e._canUseUncaughtExceptionMonitor=parseInt(r[0])>13||13===parseInt(r[0])&&parseInt(r[1])>=7}return e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.enable=function(t){var r=this;if(t){if(this._isInitialized=!0,!this._exceptionListenerHandle){var n=function(t,n,o){void 0===o&&(o=new Error(e._FALLBACK_ERROR_MESSAGE)),r._client.trackException({exception:o}),r._client.flush({isAppCrashing:!0}),t&&n&&1===process.listeners(n).length&&(console.error(o),process.exit(1))};e._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=n.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=n.bind(this,!0,e.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=n.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(e._canUseUncaughtExceptionMonitor?process.removeListener(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.INSTANCE=null,e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",e.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",e.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",e._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",e._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",e._canUseUncaughtExceptionMonitor=!1,e}();t.exports=r})),bn=m((e=>{"use strict";var t,r,n,o;Object.defineProperty(e,"__esModule",{value:!0}),e.HeartBeatMetricName=e.DependencyTypeName=e.SpanAttribute=e.TelemetryTypeStringToQuickPulseDocumentType=e.TelemetryTypeStringToQuickPulseType=e.QuickPulseType=e.QuickPulseDocumentType=e.PerformanceToQuickPulseCounter=e.MetricId=e.PerformanceCounter=e.QuickPulseCounter=e.DEFAULT_LIVEMETRICS_HOST=e.DEFAULT_LIVEMETRICS_ENDPOINT=e.DEFAULT_BREEZE_ENDPOINT=void 0,e.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com",(n=r=e.QuickPulseCounter||(e.QuickPulseCounter={})).COMMITTED_BYTES="\\Memory\\Committed Bytes",n.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",n.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",n.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",n.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",n.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",n.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",n.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",n.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec",function(e){e.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",e.AVAILABLE_BYTES="\\Memory\\Available Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",e.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",e.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"}(o=e.PerformanceCounter||(e.PerformanceCounter={})),function(e){e.REQUESTS_DURATION="requests/duration",e.DEPENDENCIES_DURATION="dependencies/duration",e.EXCEPTIONS_COUNT="exceptions/count",e.TRACES_COUNT="traces/count"}(e.MetricId||(e.MetricId={})),e.PerformanceToQuickPulseCounter=((t={})[o.PROCESSOR_TIME]=r.PROCESSOR_TIME,t[o.REQUEST_RATE]=r.REQUEST_RATE,t[o.REQUEST_DURATION]=r.REQUEST_DURATION,t[r.COMMITTED_BYTES]=r.COMMITTED_BYTES,t[r.REQUEST_FAILURE_RATE]=r.REQUEST_FAILURE_RATE,t[r.DEPENDENCY_RATE]=r.DEPENDENCY_RATE,t[r.DEPENDENCY_FAILURE_RATE]=r.DEPENDENCY_FAILURE_RATE,t[r.DEPENDENCY_DURATION]=r.DEPENDENCY_DURATION,t[r.EXCEPTION_RATE]=r.EXCEPTION_RATE,t),e.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},e.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},e.TelemetryTypeStringToQuickPulseType={EventData:e.QuickPulseType.Event,ExceptionData:e.QuickPulseType.Exception,MessageData:e.QuickPulseType.Trace,MetricData:e.QuickPulseType.Metric,RequestData:e.QuickPulseType.Request,RemoteDependencyData:e.QuickPulseType.Dependency,AvailabilityData:e.QuickPulseType.Availability,PageViewData:e.QuickPulseType.PageView},e.TelemetryTypeStringToQuickPulseDocumentType={EventData:e.QuickPulseDocumentType.Event,ExceptionData:e.QuickPulseDocumentType.Exception,MessageData:e.QuickPulseDocumentType.Trace,MetricData:e.QuickPulseDocumentType.Metric,RequestData:e.QuickPulseDocumentType.Request,RemoteDependencyData:e.QuickPulseDocumentType.Dependency,AvailabilityData:e.QuickPulseDocumentType.Availability,PageViewData:e.QuickPulseDocumentType.PageView},e.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},e.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},e.HeartBeatMetricName="HeartBeat"})),Tn=m(((e,t)=>{"use strict";var n=r(2037),o=bn(),i=function(){function e(t,r,n){void 0===r&&(r=6e4),void 0===n&&(n=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t,this._collectionInterval=r,this._enableLiveMetricsCounters=n}return e.prototype.enable=function(t,r){var o=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._lastCpus=n.cpus(),this._lastRequests={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:e._totalExceptionCount,time:+new Date},"function"==typeof process.cpuUsage&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=r||this._collectionInterval,this._handle=setInterval((function(){return o.trackPerformance()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countRequest=function(t,r){var n;if(e.isEnabled()){if("string"==typeof t)n=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;n=t}e._intervalRequestExecutionTime+=n,!1===r&&e._totalFailedRequestCount++,e._totalRequestCount++}},e.countException=function(){e._totalExceptionCount++},e.countDependency=function(t,r){var n;if(e.isEnabled()){if("string"==typeof t)n=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;n=t}e._intervalDependencyExecutionTime+=n,!1===r&&e._totalFailedDependencyCount++,e._totalDependencyCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},e.prototype._trackCpu=function(){var e=n.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var t=0,r=0,i=0,s=0,a=0,c=0;e&&c<e.length;c++){var u=e[c],l=this._lastCpus[c],d=(u.model,u.speed,u.times),p=l.times;t+=d.user-p.user||0,r+=d.sys-p.sys||0,i+=d.nice-p.nice||0,s+=d.idle-p.idle||0,a+=d.irq-p.irq||0}var f=void 0;if("function"==typeof process.cpuUsage){var h=process.cpuUsage(),g=process.hrtime(),v=h.user-this._lastAppCpuUsage.user+(h.system-this._lastAppCpuUsage.system)||0;typeof this._lastHrtime<"u"&&2===this._lastHrtime.length&&(f=100*v/((1e6*(g[0]-this._lastHrtime[0])+(g[1]-this._lastHrtime[1])/1e3||0)*e.length)),this._lastAppCpuUsage=h,this._lastHrtime=g}var m=t+r+i+s+a||1;this._client.trackMetric({name:o.PerformanceCounter.PROCESSOR_TIME,value:(m-s)/m*100}),this._client.trackMetric({name:o.PerformanceCounter.PROCESS_TIME,value:f||t/m*100})}this._lastCpus=e},e.prototype._trackMemory=function(){var e=n.freemem(),t=process.memoryUsage().rss,r=n.totalmem()-e;this._client.trackMetric({name:o.PerformanceCounter.PRIVATE_BYTES,value:t}),this._client.trackMetric({name:o.PerformanceCounter.AVAILABLE_BYTES,value:e}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:o.QuickPulseCounter.COMMITTED_BYTES,value:r})},e.prototype._trackNetwork=function(){var t=this._lastRequests,r={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},n=r.totalRequestCount-t.totalRequestCount||0,i=r.totalFailedRequestCount-t.totalFailedRequestCount||0,s=r.time-t.time,a=s/1e3,c=(e._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/n||0;if(this._lastIntervalRequestExecutionTime=e._intervalRequestExecutionTime,s>0){var u=n/a,l=i/a;this._client.trackMetric({name:o.PerformanceCounter.REQUEST_RATE,value:u}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:o.PerformanceCounter.REQUEST_DURATION,value:c}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:o.QuickPulseCounter.REQUEST_FAILURE_RATE,value:l})}this._lastRequests=r},e.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastDependencies,r={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},n=r.totalDependencyCount-t.totalDependencyCount||0,i=r.totalFailedDependencyCount-t.totalFailedDependencyCount||0,s=r.time-t.time,a=s/1e3,c=(e._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/n||0;if(this._lastIntervalDependencyExecutionTime=e._intervalDependencyExecutionTime,s>0){var u=n/a,l=i/a;this._client.trackMetric({name:o.QuickPulseCounter.DEPENDENCY_RATE,value:u}),this._client.trackMetric({name:o.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:l}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:o.QuickPulseCounter.DEPENDENCY_DURATION,value:c})}this._lastDependencies=r}},e.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastExceptions,r={totalExceptionCount:e._totalExceptionCount,time:+new Date},n=r.totalExceptionCount-t.totalExceptionCount||0,i=r.time-t.time;if(i>0){var s=n/(i/1e3);this._client.trackMetric({name:o.QuickPulseCounter.EXCEPTION_RATE,value:s})}this._lastExceptions=r}},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e._totalRequestCount=0,e._totalFailedRequestCount=0,e._totalDependencyCount=0,e._totalFailedDependencyCount=0,e._totalExceptionCount=0,e._intervalDependencyExecutionTime=0,e._intervalRequestExecutionTime=0,e}();t.exports=i})),Cn=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AggregatedMetricCounter=void 0;e.AggregatedMetricCounter=function(e){this.dimensions=e,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}})),Pn=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreaggregatedMetricPropertyNames=void 0,e.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}})),In=m(((e,t)=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},n=bn(),o=Cn(),i=Pn(),s=function(){function e(t,r){void 0===r&&(r=6e4),e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,e._dependencyCountersCollection=[],e._requestCountersCollection=[],e._exceptionCountersCollection=[],e._traceCountersCollection=[],this._client=t,this._collectionInterval=r}return e.prototype.enable=function(e,t){var r=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._collectionInterval=t||this._collectionInterval,this._handle=setInterval((function(){return r.trackPreAggregatedMetrics()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countException=function(t){e.isEnabled()&&e._getAggregatedCounter(t,this._exceptionCountersCollection).totalCount++},e.countTrace=function(t){e.isEnabled()&&e._getAggregatedCounter(t,this._traceCountersCollection).totalCount++},e.countRequest=function(t,r){if(e.isEnabled()){var n,o=e._getAggregatedCounter(r,this._requestCountersCollection);if("string"==typeof t)n=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;n=t}o.intervalExecutionTime+=n,o.totalCount++}},e.countDependency=function(t,r){if(e.isEnabled()){var n,o=e._getAggregatedCounter(r,this._dependencyCountersCollection);if("string"==typeof t)n=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;n=t}o.intervalExecutionTime+=n,o.totalCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},e._getAggregatedCounter=function(e,t){for(var r=!1,n=0;n<t.length;n++){if(e===t[n].dimensions)return t[n];if(Object.keys(e).length===Object.keys(t[n].dimensions).length){for(var i in e)if(e[i]!=t[n].dimensions[i]){r=!0;break}if(!r)return t[n];r=!1}}var s=new o.AggregatedMetricCounter(e);return t.push(s),s},e.prototype._trackRequestMetrics=function(){for(var t=0;t<e._requestCountersCollection.length;t++){var r=e._requestCountersCollection[t];r.time=+new Date;var o=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,s=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/o||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&o>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:r.dimensions,value:s,count:o,aggregationInterval:i,metricType:n.MetricId.REQUESTS_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackDependencyMetrics=function(){for(var t=0;t<e._dependencyCountersCollection.length;t++){var r=e._dependencyCountersCollection[t];r.time=+new Date;var o=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,s=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/o||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&o>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:r.dimensions,value:s,count:o,aggregationInterval:i,metricType:n.MetricId.DEPENDENCIES_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackExceptionMetrics=function(){for(var t=0;t<e._exceptionCountersCollection.length;t++){var r=e._exceptionCountersCollection[t],o=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:r.dimensions,value:o,count:o,aggregationInterval:i,metricType:n.MetricId.EXCEPTIONS_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackTraceMetrics=function(){for(var t=0;t<e._traceCountersCollection.length;t++){var r=e._traceCountersCollection[t],o=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:r.dimensions,value:o,count:o,aggregationInterval:i,metricType:n.MetricId.TRACES_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackPreAggregatedMetric=function(e){var t={};for(var n in e.dimensions)t[i.PreaggregatedMetricPropertyNames[n]]=e.dimensions[n];t=r(r({},t),{"_MS.MetricId":e.metricType,"_MS.AggregationIntervalMs":String(e.aggregationInterval),"_MS.IsAutocollected":"True"});var o={name:e.name,value:e.value,count:e.count,properties:t,kind:"Aggregation"};this._client.trackMetric(o)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();t.exports=s})),On=m(((e,t)=>{"use strict";var n=r(2037),o=r(7147),i=r(1017),s=Gr(),a=S(),c=function(){function e(e){this.keys=new s.ContextTagKeys,this.tags={},this._loadApplicationContext(e),this._loadDeviceContext(),this._loadInternalContext()}return e.prototype._loadApplicationContext=function(t){if(t=t||i.resolve(__dirname,"../../../../package.json"),!e.appVersion[t]){e.appVersion[t]="unknown";try{var r=JSON.parse(o.readFileSync(t,"utf8"));r&&"string"==typeof r.version&&(e.appVersion[t]=r.version)}catch(e){a.info("unable to read app version: ",e)}}this.tags[this.keys.applicationVersion]=e.appVersion[t]},e.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=n&&n.hostname(),this.tags[this.keys.deviceOSVersion]=n&&n.type()+" "+n.release(),this.tags[this.keys.cloudRole]=e.DefaultRoleName,this.tags["ai.device.osArchitecture"]=n&&n.arch(),this.tags["ai.device.osPlatform"]=n&&n.platform()},e.prototype._loadInternalContext=function(){var t=i.resolve(__dirname,"../../package.json");if(!e.sdkVersion){e.sdkVersion="unknown";try{var r=JSON.parse(o.readFileSync(t,"utf8"));r&&"string"==typeof r.version&&(e.sdkVersion=r.version)}catch(e){a.info("unable to read app version: ",e)}}this.tags[this.keys.internalSdkVersion]="node:"+e.sdkVersion},e.DefaultRoleName="Web",e.appVersion={},e.sdkVersion=null,e}();t.exports=c})),Nn=m(((e,t)=>{"use strict";var n,o=e&&e.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=r(7310),s=Gr(),a=Zt(),c=Yt(),u=Wr(),l=er(),d=function(e){function t(r,n){var o=e.call(this)||this;return n&&n.method&&r&&(o.method=n.method,o.url=t._getUrlFromRequestOptions(r,n),o.startTime=+new Date),o}return o(t,e),t.prototype.onError=function(e){this._setStatus(void 0,e)},t.prototype.onResponse=function(e){this._setStatus(e.statusCode,void 0),this.correlationId=a.getCorrelationContextTarget(e,c.requestContextTargetKey)},t.prototype.getDependencyTelemetry=function(e,t){var r=i.parse(this.url);r.search=void 0,r.hash=void 0;var n=this.method.toUpperCase()+" "+r.pathname,o=s.RemoteDependencyDataConstants.TYPE_HTTP,a=r.hostname;r.port&&(a+=":"+r.port),this.correlationId?(o=s.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==l.correlationIdPrefix&&(a+=" | "+this.correlationId)):o=s.RemoteDependencyDataConstants.TYPE_HTTP;var c={id:t,name:n,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:o,target:a};if(e&&e.time?c.time=e.time:this.startTime&&(c.time=new Date(this.startTime)),e){for(var u in e)c[u]||(c[u]=e[u]);if(e.properties)for(var u in e.properties)c.properties[u]=e.properties[u]}return c},t._getUrlFromRequestOptions=function(e,t){if("string"==typeof e)if(0===e.indexOf("http://")||0===e.indexOf("https://"))e=i.parse(e);else{var r=i.parse(e);e="443"===r.host?i.parse("https://"+e):i.parse("http://"+e)}else{if(e&&"function"==typeof i.URL&&e instanceof i.URL)return i.format(e);var n=e;e={},n&&Object.keys(n).forEach((function(t){e[t]=n[t]}))}if(e.path){var o=i.parse(e.path);e.pathname=o.pathname,e.search=o.search}return e.host&&e.port&&!i.parse("http://"+e.host).port&&e.port&&(e.hostname=e.host,delete e.host),e.protocol=e.protocol||t.agent&&t.agent.protocol||t.protocol||void 0,e.hostname=e.hostname||"localhost",i.format(e)},t}(u);t.exports=d})),An=m((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.spanToTelemetryContract=void 0;var r=Se(),n=bn();function o(e){var r=t({},e);return Object.keys(n.SpanAttribute).forEach((function(e){delete r[e]})),r}e.spanToTelemetryContract=function(e){var i="|"+e.spanContext().traceId+"."+e.spanContext().spanId+".",s=Math.round(1e3*e._duration[0]+e._duration[1]/1e6),a=e.attributes["peer.address"]?e.attributes["peer.address"].toString():"",c=e.attributes.component?e.attributes.component.toString():"",u=c.toUpperCase()===n.DependencyTypeName.Http||!!e.attributes[n.SpanAttribute.HttpUrl],l=c.toLowerCase()===n.DependencyTypeName.Grpc;if(u){var d=e.attributes[n.SpanAttribute.HttpMethod]||"GET",p=new URL(e.attributes[n.SpanAttribute.HttpUrl].toString()),f=e.attributes[n.SpanAttribute.HttpHost]||p.host,h=e.attributes[n.SpanAttribute.HttpPort]||p.port||null,g=d+" "+(p.pathname||"/"),v=n.DependencyTypeName.Http,m=h?(f+":"+h).toString():f.toString(),y=p.toString(),_=e.attributes[n.SpanAttribute.HttpStatusCode]||e.status.code||0;return{id:i,name:g,dependencyTypeName:v,target:m,data:y,success:_<400,duration:s,url:y,resultCode:String(_),properties:o(e.attributes)}}if(l){d=e.attributes[n.SpanAttribute.GrpcMethod]||"rpc";var S=e.attributes[n.SpanAttribute.GrpcService],E=S?d+" "+S:e.name;return{id:i,duration:s,name:E,target:S.toString(),data:S.toString()||E,url:S.toString()||E,dependencyTypeName:n.DependencyTypeName.Grpc,resultCode:String(e.status.code||0),success:0===e.status.code,properties:o(e.attributes)}}var w=e.name,b=e.links&&e.links.map((function(e){return{operation_Id:e.context.traceId,id:e.context.spanId}}));return{id:i,duration:s,name:w,target:a,data:a||w,url:a||w,dependencyTypeName:e.kind===r.SpanKind.INTERNAL?n.DependencyTypeName.InProc:c||e.name,resultCode:String(e.status.code||0),success:0===e.status.code,properties:t(t({},o(e.attributes)),{"_MS.links":b||void 0})}}})),Rn=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=Se(),r=C(),n=tr(),o=An(),i=E(),s=[];e.subscriber=function(e){var r=e.data,a=o.spanToTelemetryContract(r),c=r.spanContext(),u=new n;u.traceId=c.traceId,u.spanId=c.spanId,u.traceFlag=n.formatOpenTelemetryTraceFlags(c.traceFlags),u.parentId=r.parentSpanId?"|"+c.traceId+"."+r.parentSpanId+".":null,i.AsyncScopeManager.with(r,(function(){s.forEach((function(e){r.kind===t.SpanKind.SERVER?e.trackRequest(a):(r.kind===t.SpanKind.CLIENT||r.kind===t.SpanKind.INTERNAL)&&e.trackDependency(a)}))}))},e.enable=function(t,n){t?(0===s.length&&r.channel.subscribe("azure-coretracing",e.subscriber),s.push(n)):0===(s=s.filter((function(e){return e!=n}))).length&&r.channel.unsubscribe("azure-coretracing",e.subscriber)}})),xn=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=C(),r=[];e.subscriber=function(e){"ismaster"!==e.data.event.commandName&&r.forEach((function(t){var r=e.data.startedData&&e.data.startedData.databaseName||"Unknown database";t.trackDependency({target:r,data:e.data.event.commandName,name:e.data.event.commandName,duration:e.data.event.duration,success:e.data.succeeded,resultCode:e.data.succeeded?"0":"1",time:e.data.startedData.time,dependencyTypeName:"mongodb"})}))},e.enable=function(n,o){n?(0===r.length&&t.channel.subscribe("mongodb",e.subscriber),r.push(o)):0===(r=r.filter((function(e){return e!=o}))).length&&t.channel.unsubscribe("mongodb",e.subscriber)}})),kn=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=C(),r=[];e.subscriber=function(e){r.forEach((function(t){var r=e.data.query||{},n=r.sql||"Unknown query",o=!e.data.err,i=(r._connection||{}).config||{},s=i.socketPath?i.socketPath:(i.host||"localhost")+":"+i.port;t.trackDependency({target:s,data:n,name:n,duration:e.data.duration,success:o,resultCode:o?"0":"1",time:e.data.time,dependencyTypeName:"mysql"})}))},e.enable=function(n,o){n?(0===r.length&&t.channel.subscribe("mysql",e.subscriber),r.push(o)):0===(r=r.filter((function(e){return e!=o}))).length&&t.channel.unsubscribe("mysql",e.subscriber)}})),Dn=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=C(),r=[];e.subscriber=function(e){r.forEach((function(t){"info"!==e.data.commandObj.command&&t.trackDependency({target:e.data.address,name:e.data.commandObj.command,data:e.data.commandObj.command,duration:e.data.duration,success:!e.data.err,resultCode:e.data.err?"1":"0",time:e.data.time,dependencyTypeName:"redis"})}))},e.enable=function(n,o){n?(0===r.length&&t.channel.subscribe("redis",e.subscriber),r.push(o)):0===(r=r.filter((function(e){return e!=o}))).length&&t.channel.unsubscribe("redis",e.subscriber)}})),Mn=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=C(),r=[];e.subscriber=function(e){r.forEach((function(t){var r=e.data.query,n=r.preparable&&r.preparable.text||r.plan||r.text||"unknown query",o=!e.data.error,i=e.data.database.host+":"+e.data.database.port;t.trackDependency({target:i,data:n,name:n,duration:e.data.duration,success:o,resultCode:o?"0":"1",time:e.data.time,dependencyTypeName:"postgres"})}))},e.enable=function(n,o){n?(0===r.length&&t.channel.subscribe("postgres",e.subscriber),r.push(o)):0===(r=r.filter((function(e){return e!=o}))).length&&t.channel.unsubscribe("postgres",e.subscriber)}})),jn=m(((e,t)=>{"use strict";var n=e&&e.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n},o=r(3685),i=r(5687),s=S(),a=Zt(),c=Yt(),u=Nn(),l=mn(),d=er(),p=tr(),f=Qt(),h=function(){function e(t){if(e.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),f.IsInitialized&&(Rn().enable(!0,this._client),xn().enable(e,this._client),kn().enable(e,this._client),Dn().enable(e,this._client),Mn().enable(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var r=o.request,s=i.request,a=function(r,n){var o=!n[e.disableCollectionRequestOption]&&!r[e.alreadyAutoCollectedFlag];n.headers&&n.headers["user-agent"]&&-1!==n.headers["user-agent"].toString().indexOf("azsdk-js")&&(o=!1),r[e.alreadyAutoCollectedFlag]=!0,r&&n&&o&&(l.CorrelationContextManager.wrapEmitter(r),e.trackRequest(t._client,{options:n,request:r}))};o.request=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var s=r.call.apply(r,n([o,e],t));return a(s,e),s},i.request=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o=s.call.apply(s,n([i,e],t));return a(o,e),o},o.get=function(e){for(var t,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=(t=o.request).call.apply(t,n([o,e],r));return s.end(),s},i.get=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var s=(t=i.request).call.apply(t,n([i,e],r));return s.end(),s}},e.trackRequest=function(t,r){if(r.options&&r.request&&t){var n,o,i=new u(r.options,r.request),f=l.CorrelationContextManager.getCurrentContext();if(f&&f.operation&&f.operation.traceparent&&p.isValidTraceId(f.operation.traceparent.traceId)?(f.operation.traceparent.updateSpanId(),n=f.operation.traceparent.getBackCompatRequestId()):d.w3cEnabled?(o=(g=new p).toString(),n=g.getBackCompatRequestId()):n=f&&f.operation&&f.operation.parentId+e.requestNumber+++".",a.canIncludeCorrelationHeader(t,i.getUrl())&&r.request.getHeader&&r.request.setHeader&&t.config&&t.config.correlationId){var h=r.request.getHeader(c.requestContextHeader);try{a.safeIncludeCorrelationHeader(t,r.request,h)}catch(e){s.warn("Request-Context header could not be set. Correlation of requests may be lost",e)}if(f&&f.operation)try{if(r.request.setHeader(c.requestIdHeader,n),t.config.ignoreLegacyHeaders||(r.request.setHeader(c.parentIdHeader,f.operation.id),r.request.setHeader(c.rootIdHeader,n)),o||f.operation.traceparent)r.request.setHeader(c.traceparentHeader,o||f.operation.traceparent.toString());else if(d.w3cEnabled){var g=(new p).toString();r.request.setHeader(c.traceparentHeader,g)}if(f.operation.tracestate){var v=f.operation.tracestate.toString();v&&r.request.setHeader(c.traceStateHeader,v)}var m=f.customProperties.serializeToHeader();m&&r.request.setHeader(c.correlationContextHeader,m)}catch(e){s.warn("Correlation headers could not be set. Correlation of requests may be lost.",e)}}r.request.on&&(r.request.on("response",(function(e){i.onResponse(e);var o=i.getDependencyTelemetry(r,n);o.contextObjects=o.contextObjects||{},o.contextObjects["http.RequestOptions"]=r.options,o.contextObjects["http.ClientRequest"]=r.request,o.contextObjects["http.ClientResponse"]=e,t.trackDependency(o)})),r.request.on("error",(function(e){i.onError(e);var o=i.getDependencyTelemetry(r,n);o.contextObjects=o.contextObjects||{},o.contextObjects["http.RequestOptions"]=r.options,o.contextObjects["http.ClientRequest"]=r.request,o.contextObjects.Error=e,t.trackDependency(o)})),r.request.on("abort",(function(){i.onError(new Error);var e=i.getDependencyTelemetry(r,n);e.contextObjects=e.contextObjects||{},e.contextObjects["http.RequestOptions"]=r.options,e.contextObjects["http.ClientRequest"]=r.request,t.trackDependency(e)})))}else s.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!r.options,!r.request,!t)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.disableCollectionRequestOption="disableAppInsightsAutoCollection",e.requestNumber=1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();t.exports=h})),Ln=m(((e,t)=>{"use strict";var n=r(2037),o=bn(),i=Zt(),s=On(),a=jn(),c=function(){function e(t){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t}return e.prototype.enable=function(e,t){var r=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._handle=setInterval((function(){return r.trackHeartBeat(t,(function(){}))}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackHeartBeat=function(e,t){var r=this,i=!1,a={},c=s.sdkVersion;a.sdk=c,a.osType=n.type(),process.env.WEBSITE_SITE_NAME?(a.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",a.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",a.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?a.azfunction_appId=process.env.WEBSITE_HOSTNAME:e&&(void 0===this._isVM?(i=!0,this._getAzureComputeMetadata(e,(function(){r._isVM&&Object.keys(r._vmData).length>0&&(a.azInst_vmId=r._vmData.vmId||"",a.azInst_subscriptionId=r._vmData.subscriptionId||"",a.azInst_osType=r._vmData.osType||"",r._azInst_vmId=r._vmData.vmId||"",r._azInst_subscriptionId=r._vmData.subscriptionId||"",r._azInst_osType=r._vmData.osType||""),r._client.trackMetric({name:o.HeartBeatMetricName,value:0,properties:a}),t()}))):this._isVM&&(a.azInst_vmId=this._azInst_vmId,a.azInst_subscriptionId=this._azInst_subscriptionId,a.azInst_osType=this._azInst_osType)),i||(this._client.trackMetric({name:o.HeartBeatMetricName,value:0,properties:a}),t())},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.prototype._getAzureComputeMetadata=function(e,t){var r,n=this,o=((r={method:"GET"})[a.disableCollectionRequestOption]=!0,r.headers={Metadata:"True"},r),s=i.makeRequest(e,"http://169.254.169.254/metadata/instance/compute?api-version=2017-12-01&format=json",o,(function(e){if(200===e.statusCode){n._isVM=!0;var r="";e.on("data",(function(e){r+=e})),e.on("end",(function(){n._vmData=n._isJSON(r)?JSON.parse(r):{},t()}))}else t()}));s&&(s.on("error",(function(e){e&&e.message&&e.message.indexOf("ENETUNREACH")>-1&&(n._isVM=!1),t()})),s.end())},e.prototype._isJSON=function(e){try{return JSON.parse(e)&&!!e}catch{return!1}},e}();t.exports=c})),Fn=m(((e,t)=>{"use strict";var n=r(3685),o=r(5687),i=S(),s=Zt(),a=Yt(),c=Kr(),u=mn(),l=Tn(),d=function(){function e(t){if(e.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||l.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},e.prototype.useAutoCorrelation=function(e,t){e&&!this._isAutoCorrelating?u.CorrelationContextManager.enable(t):!e&&this._isAutoCorrelating&&u.CorrelationContextManager.disable(),this._isAutoCorrelating=e},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},e.prototype._generateCorrelationContext=function(e){if(this._isAutoCorrelating)return u.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader(),e.getTraceparent(),e.getTracestate())},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var r=function(r){if(r){if("function"!=typeof r)throw new Error("onRequest handler must be a function");return function(n,o){u.CorrelationContextManager.wrapEmitter(n),u.CorrelationContextManager.wrapEmitter(o);var i=n&&!n[e.alreadyAutoCollectedFlag];if(n&&i){var s=new c(n),a=t._generateCorrelationContext(s);u.CorrelationContextManager.runWithContext(a,(function(){t._isEnabled&&(n[e.alreadyAutoCollectedFlag]=!0,e.trackRequest(t._client,{request:n,response:o},s)),"function"==typeof r&&r(n,o)}))}else"function"==typeof r&&r(n,o)}}},i=function(e){var t=e.addListener.bind(e);e.addListener=function(e,n){switch(e){case"request":case"checkContinue":return t(e,r(n));default:return t(e,n)}},e.on=e.addListener},s=n.createServer;n.createServer=function(e,t){if(t&&"function"==typeof t){var n=s(e,r(t));return i(n),n}return n=s(r(e)),i(n),n};var a=o.createServer;o.createServer=function(e,t){var n=a(e,r(t));return i(n),n}},e.trackRequestSync=function(t,r){if(r.request&&r.response&&t){e.addResponseCorrelationIdHeader(t,r.response);var n=u.CorrelationContextManager.getCurrentContext(),o=new c(r.request,n&&n.operation.parentId);n&&(n.operation.id=o.getOperationId(t.context.tags)||n.operation.id,n.operation.name=o.getOperationName(t.context.tags)||n.operation.name,n.operation.parentId=o.getRequestId()||n.operation.parentId,n.customProperties.addHeaderData(o.getCorrelationContextHeader())),e.endRequest(t,o,r,r.duration,r.error)}else i.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!r.request,!r.response,!t)},e.trackRequest=function(t,r,n){if(r.request&&r.response&&t){var o=u.CorrelationContextManager.getCurrentContext(),a=n||new c(r.request,o&&o.operation.parentId);s.canIncludeCorrelationHeader(t,a.getUrl())&&e.addResponseCorrelationIdHeader(t,r.response),o&&!n&&(o.operation.id=a.getOperationId(t.context.tags)||o.operation.id,o.operation.name=a.getOperationName(t.context.tags)||o.operation.name,o.operation.parentId=a.getOperationParentId(t.context.tags)||o.operation.parentId,o.customProperties.addHeaderData(a.getCorrelationContextHeader())),r.response.once&&r.response.once("finish",(function(){e.endRequest(t,a,r,null,null)})),r.request.on&&r.request.on("error",(function(n){e.endRequest(t,a,r,null,n)})),r.request.on&&r.request.on("aborted",(function(){e.endRequest(t,a,r,null,"The request has been aborted and the network socket has closed.")}))}else i.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!r.request,!r.response,!t)},e.addResponseCorrelationIdHeader=function(e,t){if(e.config&&e.config.correlationId&&t.getHeader&&t.setHeader&&!t.headersSent){var r=t.getHeader(a.requestContextHeader);s.safeIncludeCorrelationHeader(e,t,r)}},e.endRequest=function(e,t,r,n,o){o?t.onError(o,n):t.onResponse(r.response,n);var i=t.getRequestTelemetry(r);if(i.tagOverrides=t.getRequestTags(e.context.tags),r.tagOverrides)for(var s in r.tagOverrides)i.tagOverrides[s]=r.tagOverrides[s];var a=t.getLegacyRootId();a&&(i.properties.ai_legacyRootId=a),i.contextObjects=i.contextObjects||{},i.contextObjects["http.ServerRequest"]=r.request,i.contextObjects["http.ServerResponse"]=r.response,e.trackRequest(i)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1,u.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();t.exports=d})),Un=m(((e,t)=>{"use strict";var n=e&&e.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=r(2037),i=Gr(),s=bn(),a=Zt(),c=S(),u=a.w3cTraceId(),l=function(){function e(){}return e.createQuickPulseEnvelope=function(e,t,r,n){var i=o&&"function"==typeof o.hostname&&o.hostname()||"Unknown",s=n.tags&&n.keys&&n.keys.cloudRoleInstance&&n.tags[n.keys.cloudRoleInstance]||i,a=n.tags&&n.keys&&n.keys.cloudRole&&n.tags[n.keys.cloudRole]||null;return{Documents:t.length>0?t:null,InstrumentationKey:r.instrumentationKey||"",Metrics:e.length>0?e:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:n.tags[n.keys.internalSdkVersion],StreamId:u,MachineName:i,Instance:s,RoleName:a}},e.createQuickPulseMetric=function(e){return{Name:e.name,Value:e.value,Weight:e.count||1}},e.telemetryEnvelopeToQuickPulseDocument=function(t){switch(t.data.baseType){case i.TelemetryTypeString.Event:return e.createQuickPulseEventDocument(t);case i.TelemetryTypeString.Exception:return e.createQuickPulseExceptionDocument(t);case i.TelemetryTypeString.Trace:return e.createQuickPulseTraceDocument(t);case i.TelemetryTypeString.Dependency:return e.createQuickPulseDependencyDocument(t);case i.TelemetryTypeString.Request:return e.createQuickPulseRequestDocument(t)}return null},e.createQuickPulseEventDocument=function(t){var r=e.createQuickPulseDocument(t),o=t.data.baseData.name;return n(n({},r),{Name:o})},e.createQuickPulseTraceDocument=function(t){var r=e.createQuickPulseDocument(t),o=t.data.baseData.severityLevel||0;return n(n({},r),{Message:t.data.baseData.message,SeverityLevel:i.SeverityLevel[o]})},e.createQuickPulseExceptionDocument=function(t){var r=e.createQuickPulseDocument(t),o=t.data.baseData.exceptions,i="",s="",a="";return o&&o.length>0&&(o[0].parsedStack&&o[0].parsedStack.length>0?o[0].parsedStack.forEach((function(e){i+=e.assembly+"\n"})):o[0].stack&&o[0].stack.length>0&&(i=o[0].stack),s=o[0].message,a=o[0].typeName),n(n({},r),{Exception:i,ExceptionMessage:s,ExceptionType:a})},e.createQuickPulseRequestDocument=function(t){var r=e.createQuickPulseDocument(t),o=t.data.baseData;return n(n({},r),{Name:o.name,Success:o.success,Duration:o.duration,ResponseCode:o.responseCode,OperationName:o.name})},e.createQuickPulseDependencyDocument=function(t){var r=e.createQuickPulseDocument(t),o=t.data.baseData;return n(n({},r),{Name:o.name,Target:o.target,Success:o.success,Duration:o.duration,ResultCode:o.resultCode,CommandName:o.data,OperationName:r.OperationId,DependencyTypeName:o.type})},e.createQuickPulseDocument=function(t){var r,n;return t.data.baseType?(n=s.TelemetryTypeStringToQuickPulseType[t.data.baseType],r=s.TelemetryTypeStringToQuickPulseDocumentType[t.data.baseType]):c.warn("Document type invalid; not sending live metric document",t.data.baseType),{DocumentType:r,__type:n,OperationId:t.tags[e.keys.operationId],Version:"1.0",Properties:e.aggregateProperties(t)}},e.aggregateProperties=function(e){var t=[],r=e.data.baseData.measurements||{};for(var n in r)if(r.hasOwnProperty(n)){var o={key:n,value:r[n]};t.push(o)}var i=e.data.baseData.properties||{};for(var n in i)i.hasOwnProperty(n)&&(o={key:n,value:i[n]},t.push(o));return t},e.keys=new i.ContextTagKeys,e}();t.exports=l})),Bn=m(((e,t)=>{"use strict";t.exports={getTransmissionTime:function(){return 1e4*(Date.now()+621355968e5)}}})),Vn=m(((e,t)=>{"use strict";var n=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=e&&e.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=r(5687),s=jn(),a=S(),c=Bn(),u=Zt(),l="x-ms-qps-service-polling-interval-hint",d="x-ms-qps-service-endpoint-redirect",p=function(){function e(e){this._config=e,this._consecutiveErrors=0}return e.prototype.ping=function(e,t,r){var n=[{name:"x-ms-qps-stream-id",value:e.StreamId},{name:"x-ms-qps-machine-name",value:e.MachineName},{name:"x-ms-qps-role-name",value:e.RoleName},{name:"x-ms-qps-instance-name",value:e.Instance},{name:"x-ms-qps-invariant-version",value:e.InvariantVersion.toString()}];this._submitData(e,t,r,"ping",n)},e.prototype.post=function(e,t,r){return n(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,this._submitData([e],t,r,"post")];case 1:return n.sent(),[2]}}))}))},e.prototype._submitData=function(e,t,r,a,p){return n(this,void 0,void 0,(function(){var n,f,h,g,v,m=this;return o(this,(function(o){return n=JSON.stringify(e),(g={})[s.disableCollectionRequestOption]=!0,g.host=t&&t.length>0?t:this._config.quickPulseHost,g.method="POST",g.path="/QuickPulseService.svc/"+a+"?ikey="+this._config.instrumentationKey,g.headers=((v={Expect:"100-continue"})["x-ms-qps-transmission-time"]=c.getTransmissionTime(),v["Content-Type"]="application/json",v["Content-Length"]=Buffer.byteLength(n),v),f=g,p&&p.length>0&&p.forEach((function(e){return f.headers[e.name]=e.value})),this._config.httpsAgent?f.agent=this._config.httpsAgent:f.agent=u.tlsRestrictedAgent,(h=i.request(f,(function(e){if(200==e.statusCode){var t="true"===e.headers["x-ms-qps-subscribed"],n=e.headers[d]?e.headers[d].toString():null,o=e.headers[l]?parseInt(e.headers[l].toString()):null;m._consecutiveErrors=0,r(t,e,n,o)}else m._onError("StatusCode:"+e.statusCode+" StatusMessage:"+e.statusMessage),r()}))).on("error",(function(e){m._onError(e),r()})),h.write(n),h.end(),[2]}))}))},e.prototype._onError=function(t){this._consecutiveErrors++;var r="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%e.MAX_QPS_FAILURES_BEFORE_WARN==0?(r="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",a.warn(e.TAG,r,t)):a.info(e.TAG,r,t)},e.TAG="QuickPulseSender",e.MAX_QPS_FAILURES_BEFORE_WARN=25,e}();t.exports=p})),$n=m(((e,t)=>{"use strict";var r=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}c((n=n.apply(e,t||[])).next())}))},n=e&&e.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},o=S(),i=Un(),s=Vn(),a=bn(),c=On(),u=function(){function e(e,t){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=e,this.context=t||new c,this._sender=new s(this.config),this._isEnabled=!1}return e.prototype.addCollector=function(e){this._collectors.push(e)},e.prototype.trackMetric=function(e){this._addMetric(e)},e.prototype.addDocument=function(e){var t=i.telemetryEnvelopeToQuickPulseDocument(e);t&&this._documents.push(t)},e.prototype.enable=function(e){e&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!e&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},e.prototype.enableCollectors=function(e){this._collectors.forEach((function(t){t.enable(e)}))},e.prototype._addMetric=function(e){var t=e.value,r=e.count||1,n=a.PerformanceToQuickPulseCounter[e.name];n&&(this._metrics[n]?(this._metrics[n].Value=(this._metrics[n].Value*this._metrics[n].Weight+t*r)/(this._metrics[n].Weight+r),this._metrics[n].Weight+=r):(this._metrics[n]=i.createQuickPulseMetric(e),this._metrics[n].Name=n,this._metrics[n].Weight=1))},e.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},e.prototype._goQuickPulse=function(){return r(this,void 0,void 0,(function(){var t,r,o,s,a=this;return n(this,(function(n){switch(n.label){case 0:return t=Object.keys(this._metrics).map((function(e){return a._metrics[e]})),r=i.createQuickPulseEnvelope(t,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(r)]:[3,2];case 1:return n.sent(),[3,3];case 2:this._ping(r),n.label=3;case 3:return o=this._pollingIntervalHint>0?this._pollingIntervalHint:e.PING_INTERVAL,s=this._isCollectingData?e.POST_INTERVAL:o,this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,s=e.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(s=e.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),s),this._handle.unref(),[2]}}))}))},e.prototype._ping=function(e){this._sender.ping(e,this._redirectedHost,this._quickPulseDone.bind(this))},e.prototype._post=function(e){return r(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,this._sender.post(e,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return t.sent(),[2]}}))}))},e.prototype._quickPulseDone=function(e,t,r,n){null!=e?(this._isCollectingData!==e&&(o.info("Live Metrics sending data",e),this.enableCollectors(e)),this._isCollectingData=e,r&&r.length>0&&(this._redirectedHost=r,o.info("Redirecting endpoint to: ",r)),n&&n>0&&(this._pollingIntervalHint=n),t&&t.statusCode<300&&t.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},e.MAX_POST_WAIT_TIME=2e4,e.MAX_PING_WAIT_TIME=6e4,e.FALLBACK_INTERVAL=6e4,e.PING_INTERVAL=5e3,e.POST_INTERVAL=1e3,e}();t.exports=u})),Hn=m(((e,t)=>{"use strict";var r=bn(),n=function(){function e(){}return e.parse=function(t){if(!t)return{};var n=t.split(e._FIELDS_SEPARATOR).reduce((function(t,r){var n=r.split(e._FIELD_KEY_VALUE_SEPARATOR);if(2===n.length){var o=n[0].toLowerCase(),i=n[1];t[o]=i}return t}),{});if(Object.keys(n).length>0){if(n.endpointsuffix){var o=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+o+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+o+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||r.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||r.DEFAULT_LIVEMETRICS_ENDPOINT}return n},e._FIELDS_SEPARATOR=";",e._FIELD_KEY_VALUE_SEPARATOR="=",e}();t.exports=n})),qn=m(((e,t)=>{"use strict";var n=er(),o=Hn(),i=(S(),bn()),s=r(7310),a=function(){function e(t){var r=this;this.endpointBase=i.DEFAULT_BREEZE_ENDPOINT;var n=process.env[e.ENV_connectionString],a=o.parse(t),c=o.parse(n),u=!a.instrumentationkey&&Object.keys(a).length>0?null:t;this.instrumentationKey=a.instrumentationkey||u||c.instrumentationkey||e._getInstrumentationKey(),e._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(a.ingestionendpoint||c.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=3e4,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(e){return r.correlationId=e},this.proxyHttpUrl=process.env[e.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[e.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=a.ingestionendpoint||c.ingestionendpoint||process.env[e.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=a.liveendpoint||c.liveendpoint||process.env[e.ENV_quickPulseHost]||i.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=s.parse(this._quickPulseHost).host)}return Object.defineProperty(e.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){n.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=e,this.correlationId=n.correlationIdPrefix,n.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(e){this._quickPulseHost=e},enumerable:!1,configurable:!0}),e._getInstrumentationKey=function(){var t=process.env[e.ENV_iKey]||process.env[e.ENV_azurePrefix+e.ENV_iKey]||process.env[e.legacy_ENV_iKey]||process.env[e.ENV_azurePrefix+e.legacy_ENV_iKey];if(!t||""==t)throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return t},e._validateInstrumentationKey=function(e){return new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e)},e.ENV_azurePrefix="APPSETTING_",e.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",e.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",e.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",e.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",e.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",e.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",e.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",e.ENV_http_proxy="http_proxy",e.ENV_https_proxy="https_proxy",e}();t.exports=a})),zn=m((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoCollectNativePerformance=void 0;var n=qn(),o=On(),i=S(),s=function(){function e(t){this._disabledMetrics={},e.INSTANCE&&e.INSTANCE.dispose(),e.INSTANCE=this,this._client=t}return e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>=6},e.prototype.enable=function(t,n,o){var s=this;if(void 0===n&&(n={}),void 0===o&&(o=6e4),e.isNodeVersionCompatible()){if(null==e._metricsAvailable&&t&&!this._isInitialized)try{var a=r(9166);e._emitter=new a,e._metricsAvailable=!0,i.info("Native metrics module successfully loaded!")}catch{return void(e._metricsAvailable=!1)}this._isEnabled=t,this._disabledMetrics=n,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&e._emitter?(e._emitter.enable(!0,o),this._handle||(this._handle=setInterval((function(){return s._trackNativeMetrics()}),o),this._handle.unref())):e._emitter&&(e._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},e.prototype.dispose=function(){this.enable(!1)},e.parseEnabled=function(e){var r=process.env[n.ENV_nativeMetricsDisableAll],o=process.env[n.ENV_nativeMetricsDisablers];if(r)return{isEnabled:!1,disabledMetrics:{}};if(o){var i=o.split(","),s={};if(i.length>0)for(var a=0,c=i;a<c.length;a++)s[c[a]]=!0;return"object"==typeof e?{isEnabled:!0,disabledMetrics:t(t({},e),s)}:{isEnabled:e,disabledMetrics:s}}return"boolean"==typeof e?{isEnabled:e,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:e}},e.prototype._trackNativeMetrics=function(){var e=!0;"object"!=typeof this._isEnabled&&(e=this._isEnabled),e&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},e.prototype._trackGarbageCollection=function(){var t;if(!this._disabledMetrics.gc){var r=e._emitter.getGCData();for(var n in r){var i=r[n].metrics,s=n+" Garbage Collection Duration",a=Math.sqrt(i.sumSquares/i.count-Math.pow(i.total/i.count,2))||0;this._client.trackMetric({name:s,value:i.total,count:i.count,max:i.max,min:i.min,stdDev:a,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,t)})}}},e.prototype._trackEventLoop=function(){var t;if(!this._disabledMetrics.loop){var r=e._emitter.getLoopData().loopUsage;if(0!=r.count){var n=Math.sqrt(r.sumSquares/r.count-Math.pow(r.total/r.count,2))||0;this._client.trackMetric({name:"Event Loop CPU Time",value:r.total,count:r.count,min:r.min,max:r.max,stdDev:n,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,t)})}}},e.prototype._trackHeapUsage=function(){var e,t,r;if(!this._disabledMetrics.heap){var n=process.memoryUsage(),i=n.heapUsed,s=n.heapTotal,a=n.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:i,count:1,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,e)}),this._client.trackMetric({name:"Memory Total (Heap)",value:s,count:1,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,t)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:a-s,count:1,tagOverrides:(r={},r[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,r)})}},e}();e.AutoCollectNativePerformance=s})),Gn=m(((e,t)=>{"use strict";var r=S(),n=function(){function e(e,t,r,n){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=t,this._getBatchIntervalMs=r,this._sender=n}return e.prototype.setUseDiskRetryCaching=function(e,t,r){this._sender.setDiskRetryMode(e,t,r)},e.prototype.send=function(e){var t=this;if(!this._isDisabled()){if(!e)return void r.warn("Cannot send null/undefined telemetry");if(this._buffer.push(e),this._buffer.length>=this._getBatchSize())return void this.triggerSend(!1);!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout((function(){t._timeoutHandle=null,t.triggerSend(!1)}),this._getBatchIntervalMs()))}},e.prototype.triggerSend=function(e,t){var r=this._buffer.length<1;r||(e?(this._sender.saveOnCrash(this._buffer),"function"==typeof t&&t("data saved on crash")):this._sender.send(this._buffer,t)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,r&&"function"==typeof t&&t("no data to send")},e}();t.exports=n})),Wn=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.azureRoleEnvironmentTelemetryProcessor=void 0,e.azureRoleEnvironmentTelemetryProcessor=function(e,t){process.env.WEBSITE_SITE_NAME&&(e.tags[t.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}})),Kn=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSamplingHashCode=e.samplingTelemetryProcessor=void 0;var t=Gr();function r(e){var t=2147483647,r=5381;if(!e)return 0;for(;e.length<8;)e+=e;for(var n=0;n<e.length;n++)r=((r<<5)+r|0)+e.charCodeAt(n)|0;return(r=r<=-2147483648?t:Math.abs(r))/t*100}e.samplingTelemetryProcessor=function(e,n){var o=e.sampleRate;return!!(null==o||o>=100||e.data&&t.TelemetryType.Metric===t.baseTypeToTelemetryType(e.data.baseType))||(n.correlationContext&&n.correlationContext.operation?r(n.correlationContext.operation.id)<o:100*Math.random()<o)},e.getSamplingHashCode=r})),Xn=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.performanceMetricsTelemetryProcessor=void 0;var t=Tn(),r=Gr();e.performanceMetricsTelemetryProcessor=function(e,n){switch(n&&n.addDocument(e),e.data.baseType){case r.TelemetryTypeString.Exception:t.countException();break;case r.TelemetryTypeString.Request:var o=e.data.baseData;t.countRequest(o.duration,o.success);break;case r.TelemetryTypeString.Dependency:var i=e.data.baseData;t.countDependency(i.duration,i.success)}return!0}})),Jn=m((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.preAggregatedMetricsTelemetryProcessor=void 0;var r=Gr(),n=In(),o=Gr();e.preAggregatedMetricsTelemetryProcessor=function(e,i){if(n.isEnabled())switch(e.data.baseType){case o.TelemetryTypeString.Exception:var s=e.data.baseData;s.properties=t(t({},s.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var a={cloudRoleInstance:e.tags[i.keys.cloudRoleInstance],cloudRoleName:e.tags[i.keys.cloudRole]};n.countException(a);break;case o.TelemetryTypeString.Trace:var c=e.data.baseData;c.properties=t(t({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var u={cloudRoleInstance:e.tags[i.keys.cloudRoleInstance],cloudRoleName:e.tags[i.keys.cloudRole],traceSeverityLevel:r.SeverityLevel[c.severity]};n.countTrace(u);break;case o.TelemetryTypeString.Request:var l=e.data.baseData;l.properties=t(t({},l.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var d={cloudRoleInstance:e.tags[i.keys.cloudRoleInstance],cloudRoleName:e.tags[i.keys.cloudRole],operationSynthetic:e.tags[i.keys.operationSyntheticSource],requestSuccess:l.success,requestResultCode:l.responseCode};n.countRequest(l.duration,d);break;case o.TelemetryTypeString.Dependency:var p=e.data.baseData;p.properties=t(t({},p.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var f={cloudRoleInstance:e.tags[i.keys.cloudRoleInstance],cloudRoleName:e.tags[i.keys.cloudRole],operationSynthetic:e.tags[i.keys.operationSyntheticSource],dependencySuccess:p.success,dependencyType:p.type,dependencyTarget:p.target,dependencyResultCode:p.resultCode};n.countDependency(p.duration,f)}return!0}})),Qn=m((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Wn(),e),r(Kn(),e),r(Xn(),e),r(Jn(),e)})),Yn=m(((e,t)=>{"use strict";var n=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=e&&e.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=r(7147),s=r(2037),a=r(1017),c=r(9796),u=r(2081),l=S(),d=jn(),p=Zt(),f=function(){function e(t,r,n){if(this._redirectedHost=null,this._config=t,this._onSuccess=r,this._onError=n,this._enableDiskRetryMode=!1,this._resendInterval=e.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=e.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=a.join(s.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey),!e.OS_PROVIDES_FILE_PROTECTION)if(e.USE_ICACLS){try{e.OS_PROVIDES_FILE_PROTECTION=i.existsSync(e.ICACLS_PATH)}catch{}e.OS_PROVIDES_FILE_PROTECTION||l.warn(e.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else e.OS_PROVIDES_FILE_PROTECTION=!0}return e.prototype.setDiskRetryMode=function(t,r,n){var o=this;this._enableDiskRetryMode=e.OS_PROVIDES_FILE_PROTECTION&&t,"number"==typeof r&&r>=0&&(this._resendInterval=Math.floor(r)),"number"==typeof n&&n>=0&&(this._maxBytesOnDisk=Math.floor(n)),t&&!e.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,l.warn(e.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout((function(){o._fileCleanupTask()}),e.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},e.prototype.send=function(t,r){return n(this,void 0,void 0,(function(){var n,i,s,a,u=this;return o(this,(function(o){return t&&(n=this._redirectedHost||this._config.endpointUrl,i={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},s="",t.forEach((function(e){var t=u._stringify(e);"string"==typeof t&&(s+=t+"\n")})),s.length>0&&(s=s.substring(0,s.length-1)),a=Buffer.from?Buffer.from(s):new Buffer(s),c.gzip(a,(function(o,s){var c=s;o?(l.warn(o),c=a,i.headers["Content-Length"]=a.length.toString()):(i.headers["Content-Encoding"]="gzip",i.headers["Content-Length"]=s.length.toString()),l.info(e.TAG,i),i[d.disableCollectionRequestOption]=!0;var f=p.makeRequest(u._config,n,i,(function(n){n.setEncoding("utf-8");var o="";n.on("data",(function(e){o+=e})),n.on("end",(function(){if(u._numConsecutiveFailures=0,u._enableDiskRetryMode)if(200===n.statusCode)u._resendTimer||(u._resendTimer=setTimeout((function(){u._resendTimer=null,u._sendFirstFileOnDisk()}),u._resendInterval),u._resendTimer.unref());else if(u._isRetriable(n.statusCode))try{var i=JSON.parse(o),s=[];i.errors.forEach((function(e){u._isRetriable(e.statusCode)&&s.push(t[e.index])})),s.length>0&&u._storeToDisk(s)}catch{u._storeToDisk(t)}if(307===n.statusCode||308===n.statusCode)if(u._numConsecutiveRedirects++,u._numConsecutiveRedirects<10){var a=n.headers.location?n.headers.location.toString():null;a&&(u._redirectedHost=a,u.send(t,r))}else"function"==typeof r&&r("Error sending telemetry because of circular redirects.");else u._numConsecutiveRedirects=0,"function"==typeof r&&r(o),l.info(e.TAG,o),"function"==typeof u._onSuccess&&u._onSuccess(o)}))}));f.on("error",(function(n){if(u._numConsecutiveFailures++,!u._enableDiskRetryMode||u._numConsecutiveFailures>0&&u._numConsecutiveFailures%e.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var o="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";u._enableDiskRetryMode&&(o="Ingestion endpoint could not be reached "+u._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),l.warn(e.TAG,o,p.dumpObj(n))}else o="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:",l.info(e.TAG,o,p.dumpObj(n));u._onErrorHelper(n),"function"==typeof r&&(n&&r(p.dumpObj(n)),r("Error sending telemetry")),u._enableDiskRetryMode&&u._storeToDisk(t)})),f.write(c),f.end()}))),[2]}))}))},e.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(e))},e.prototype._isRetriable=function(e){return 206===e||408===e||429===e||439===e||500===e||503===e},e.prototype._runICACLS=function(t,r){var n=u.spawn(e.ICACLS_PATH,t,{windowsHide:!0});n.on("error",(function(e){return r(e)})),n.on("close",(function(e,t){return r(0===e?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+e+")"))}))},e.prototype._runICACLSSync=function(t){if(!u.spawnSync)throw new Error("Could not synchronously call ICACLS under current version of Node.js");var r=u.spawnSync(e.ICACLS_PATH,t,{windowsHide:!0});if(r.error)throw r.error;if(0!==r.status)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+r.status+")")},e.prototype._getACLIdentity=function(t){if(e.ACL_IDENTITY)return t(null,e.ACL_IDENTITY);var r=u.spawn(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),n="";r.stdout.on("data",(function(e){return n+=e})),r.on("error",(function(e){return t(e,null)})),r.on("close",(function(r,o){return e.ACL_IDENTITY=n&&n.trim(),t(0===r?null:new Error("Getting ACL identity did not succeed (PS returned code "+r+")"),e.ACL_IDENTITY)}))},e.prototype._getACLIdentitySync=function(){if(e.ACL_IDENTITY)return e.ACL_IDENTITY;if(u.spawnSync){var t=u.spawnSync(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(t.error)throw t.error;if(0!==t.status)throw new Error("Getting ACL identity did not succeed (PS returned code "+t.status+")");return e.ACL_IDENTITY=t.stdout&&t.stdout.toString().trim(),e.ACL_IDENTITY}throw new Error("Could not synchronously get ACL identity under current version of Node.js")},e.prototype._getACLArguments=function(e,t){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",t+":(OI)(CI)F","/inheritance:r"]},e.prototype._applyACLRules=function(t,r){var n=this;return e.USE_ICACLS?void 0!==e.ACLED_DIRECTORIES[t]?r(e.ACLED_DIRECTORIES[t]?null:new Error("Setting ACL restrictions did not succeed (cached result)")):(e.ACLED_DIRECTORIES[t]=!1,void this._getACLIdentity((function(o,i){if(o)return e.ACLED_DIRECTORIES[t]=!1,r(o);n._runICACLS(n._getACLArguments(t,i),(function(n){return e.ACLED_DIRECTORIES[t]=!n,r(n)}))}))):r(null)},e.prototype._applyACLRulesSync=function(t){if(e.USE_ICACLS){if(void 0===e.ACLED_DIRECTORIES[t])return this._runICACLSSync(this._getACLArguments(t,this._getACLIdentitySync())),void(e.ACLED_DIRECTORIES[t]=!0);if(!e.ACLED_DIRECTORIES[t])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},e.prototype._confirmDirExists=function(e,t){var r=this;i.lstat(e,(function(n,o){n&&"ENOENT"===n.code?i.mkdir(e,(function(n){n&&"EEXIST"!==n.code?t(n):r._applyACLRules(e,t)})):!n&&o.isDirectory()?r._applyACLRules(e,t):t(n||new Error("Path existed but was not a directory"))}))},e.prototype._getShallowDirectorySize=function(e,t){i.readdir(e,(function(r,n){if(r)return t(r,-1);var o=null,s=0,c=0;if(0!==n.length)for(var u=0;u<n.length;u++)i.stat(a.join(e,n[u]),(function(e,r){c++,e?o=e:r.isFile()&&(s+=r.size),c===n.length&&t(o,o?-1:s)}));else t(null,0)}))},e.prototype._getShallowDirectorySizeSync=function(e){for(var t=i.readdirSync(e),r=0,n=0;n<t.length;n++)r+=i.statSync(a.join(e,t[n])).size;return r},e.prototype._storeToDisk=function(t){var r=this;l.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,(function(n){if(n)return l.warn(e.TAG,"Error while checking/creating directory: "+(n&&n.message)),void r._onErrorHelper(n);r._getShallowDirectorySize(r._tempDir,(function(n,o){if(n||o<0)return l.warn(e.TAG,"Error while checking directory size: "+(n&&n.message)),void r._onErrorHelper(n);if(o>r._maxBytesOnDisk)l.warn(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+o);else{var s=(new Date).getTime()+".ai.json",c=a.join(r._tempDir,s);l.info(e.TAG,"saving data to disk at: "+c),i.writeFile(c,r._stringify(t),{mode:384},(function(e){return r._onErrorHelper(e)}))}}))}))},e.prototype._storeToDiskSync=function(t){try{l.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),i.existsSync(this._tempDir)||i.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var r=this._getShallowDirectorySizeSync(this._tempDir);if(r>this._maxBytesOnDisk)return void l.info(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+r);var n=(new Date).getTime()+".ai.json",o=a.join(this._tempDir,n);l.info(e.TAG,"saving data before crash to disk at: "+o),i.writeFileSync(o,t,{mode:384})}catch(t){l.warn(e.TAG,"Error while saving data to disk: "+(t&&t.message)),this._onErrorHelper(t)}},e.prototype._sendFirstFileOnDisk=function(){var e=this;i.exists(this._tempDir,(function(t){t&&i.readdir(e._tempDir,(function(t,r){if(t)e._onErrorHelper(t);else if((r=r.filter((function(e){return a.basename(e).indexOf(".ai.json")>-1}))).length>0){var n=r[0],o=a.join(e._tempDir,n);i.readFile(o,(function(t,r){t?e._onErrorHelper(t):i.unlink(o,(function(t){if(t)e._onErrorHelper(t);else try{var n=JSON.parse(r.toString());e.send(n)}catch(e){l.warn("Failed to read persisted file",e)}}))}))}}))}))},e.prototype._onErrorHelper=function(e){"function"==typeof this._onError&&this._onError(e)},e.prototype._stringify=function(e){try{return JSON.stringify(e)}catch(t){l.warn("Failed to serialize payload",t,e)}},e.prototype._fileCleanupTask=function(){var t=this;i.exists(this._tempDir,(function(r){r&&i.readdir(t._tempDir,(function(r,n){r?t._onErrorHelper(r):(n=n.filter((function(e){return a.basename(e).indexOf(".ai.json")>-1}))).length>0&&n.forEach((function(r){var n=new Date(parseInt(r.split(".ai.json")[0]));if(new Date(+new Date-e.FILE_RETEMPTION_PERIOD)>n){var o=a.join(t._tempDir,r);i.unlink(o,(function(e){e&&t._onErrorHelper(e)}))}}))}))}))},e.TAG="Sender",e.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",e.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",e.ACLED_DIRECTORIES={},e.ACL_IDENTITY=null,e.WAIT_BETWEEN_RESEND=6e4,e.MAX_BYTES_ON_DISK=52428800,e.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,e.CLEANUP_TIMEOUT=36e5,e.FILE_RETEMPTION_PERIOD=6048e5,e.TEMPDIR_PREFIX="appInsights-node",e.OS_PROVIDES_FILE_PROTECTION=!1,e.USE_ICACLS="Windows_NT"===s.type(),e}();t.exports=f})),Zn=m(((e,t)=>{"use strict";var r=Gr(),n=Zt(),o=mn(),i=function(){function e(){}return e.createEnvelope=function(t,o,i,s,a){var c=null;switch(o){case r.TelemetryType.Trace:c=e.createTraceData(t);break;case r.TelemetryType.Dependency:c=e.createDependencyData(t);break;case r.TelemetryType.Event:c=e.createEventData(t);break;case r.TelemetryType.Exception:c=e.createExceptionData(t);break;case r.TelemetryType.Request:c=e.createRequestData(t);break;case r.TelemetryType.Metric:c=e.createMetricData(t);break;case r.TelemetryType.Availability:c=e.createAvailabilityData(t);break;case r.TelemetryType.PageView:c=e.createPageViewData(t)}if(i&&r.domainSupportsProperties(c.baseData)){if(c&&c.baseData)if(c.baseData.properties)for(var u in i)c.baseData.properties[u]||(c.baseData.properties[u]=i[u]);else c.baseData.properties=i;c.baseData.properties=n.validateStringMap(c.baseData.properties)}var l=a&&a.instrumentationKey||"",d=new r.Envelope;return d.data=c,d.iKey=l,d.name="Microsoft.ApplicationInsights."+l.replace(/-/g,"")+"."+c.baseType.substr(0,c.baseType.length-4),d.tags=this.getTags(s,t.tagOverrides),d.time=(new Date).toISOString(),d.ver=1,d.sampleRate=a?a.samplingPercentage:100,o===r.TelemetryType.Metric&&(d.sampleRate=100),d},e.createTraceData=function(e){var t=new r.MessageData;t.message=e.message,t.properties=e.properties,isNaN(e.severity)?t.severityLevel=r.SeverityLevel.Information:t.severityLevel=e.severity;var n=new r.Data;return n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Trace),n.baseData=t,n},e.createDependencyData=function(e){var t=new r.RemoteDependencyData;"string"==typeof e.name&&(t.name=e.name.length>1024?e.name.slice(0,1021)+"...":e.name),t.data=e.data,t.target=e.target,t.duration=n.msToTimeSpan(e.duration),t.success=e.success,t.type=e.dependencyTypeName,t.properties=e.properties,t.resultCode=e.resultCode?e.resultCode+"":"",e.id?t.id=e.id:t.id=n.w3cTraceId();var o=new r.Data;return o.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Dependency),o.baseData=t,o},e.createEventData=function(e){var t=new r.EventData;t.name=e.name,t.properties=e.properties,t.measurements=e.measurements;var n=new r.Data;return n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Event),n.baseData=t,n},e.createExceptionData=function(e){var t=new r.ExceptionData;t.properties=e.properties,isNaN(e.severity)?t.severityLevel=r.SeverityLevel.Error:t.severityLevel=e.severity,t.measurements=e.measurements,t.exceptions=[];var o=e.exception.stack,i=new r.ExceptionDetails;i.message=e.exception.message,i.typeName=e.exception.name,i.parsedStack=this.parseStack(o),i.hasFullStack=n.isArray(i.parsedStack)&&i.parsedStack.length>0,t.exceptions.push(i);var s=new r.Data;return s.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Exception),s.baseData=t,s},e.createRequestData=function(e){var t=new r.RequestData;e.id?t.id=e.id:t.id=n.w3cTraceId(),t.name=e.name,t.url=e.url,t.source=e.source,t.duration=n.msToTimeSpan(e.duration),t.responseCode=e.resultCode?e.resultCode+"":"",t.success=e.success,t.properties=e.properties;var o=new r.Data;return o.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Request),o.baseData=t,o},e.createMetricData=function(e){var t=new r.MetricData;t.metrics=[];var n=new r.DataPoint;n.count=isNaN(e.count)?1:e.count,n.kind=r.DataPointType.Aggregation,n.max=isNaN(e.max)?e.value:e.max,n.min=isNaN(e.min)?e.value:e.min,n.name=e.name,n.stdDev=isNaN(e.stdDev)?0:e.stdDev,n.value=e.value,t.metrics.push(n),t.properties=e.properties;var o=new r.Data;return o.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Metric),o.baseData=t,o},e.createAvailabilityData=function(e){var t=new r.AvailabilityData;e.id?t.id=e.id:t.id=n.w3cTraceId(),t.name=e.name,t.duration=n.msToTimeSpan(e.duration),t.success=e.success,t.runLocation=e.runLocation,t.message=e.message,t.measurements=e.measurements,t.properties=e.properties;var o=new r.Data;return o.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Availability),o.baseData=t,o},e.createPageViewData=function(e){var t=new r.PageViewData;t.name=e.name,t.duration=n.msToTimeSpan(e.duration),t.url=e.url,t.measurements=e.measurements,t.properties=e.properties;var o=new r.Data;return o.baseType=r.telemetryTypeToBaseType(r.TelemetryType.PageView),o.baseData=t,o},e.getTags=function(e,t){var r=o.CorrelationContextManager.getCurrentContext(),n={};if(e&&e.tags)for(var i in e.tags)n[i]=e.tags[i];if(t)for(var i in t)n[i]=t[i];return r&&(n[e.keys.operationId]=n[e.keys.operationId]||r.operation.id,n[e.keys.operationName]=n[e.keys.operationName]||r.operation.name,n[e.keys.operationParentId]=n[e.keys.operationParentId]||r.operation.parentId),n},e.parseStack=function(e){var t=void 0;if("string"==typeof e){var r=e.split("\n");t=[];for(var n=0,o=0,i=0;i<=r.length;i++){var a=r[i];if(s.regex.test(a)){var c=new s(r[i],n++);o+=c.sizeInBytes,t.push(c)}}if(o>32768)for(var u=0,l=t.length-1,d=0,p=u,f=l;u<l;){if((d+=t[u].sizeInBytes+t[l].sizeInBytes)>32768){var h=f-p+1;t.splice(p,h);break}p=u,f=l,u++,l--}}return t},e}(),s=function(){function e(t,r){this.sizeInBytes=0,this.level=r,this.method="<no_method>",this.assembly=n.trim(t);var o=t.match(e.regex);o&&o.length>=5&&(this.method=n.trim(o[2])||this.method,this.fileName=n.trim(o[4])||"<no_filename>",this.line=parseInt(o[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=e.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return e.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,e.baseSize=58,e}();t.exports=i})),eo=m(((e,t)=>{"use strict";var n=r(7310),o=qn(),i=On(),s=Gr(),a=Gn(),c=Qn(),u=mn(),l=Yn(),d=Zt(),p=S(),f=Zn(),h=function(){function e(e){this._telemetryProcessors=[],this._enableAzureProperties=!1;var t=new o(e);this.config=t,this.context=new i,this.commonProperties={};var r=new l(this.config);this.channel=new a((function(){return t.disableAppInsights}),(function(){return t.maxBatchSize}),(function(){return t.maxBatchIntervalMs}),r)}return e.prototype.trackAvailability=function(e){this.track(e,s.TelemetryType.Availability)},e.prototype.trackPageView=function(e){this.track(e,s.TelemetryType.PageView)},e.prototype.trackTrace=function(e){this.track(e,s.TelemetryType.Trace)},e.prototype.trackMetric=function(e){this.track(e,s.TelemetryType.Metric)},e.prototype.trackException=function(e){e&&e.exception&&!d.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,s.TelemetryType.Exception)},e.prototype.trackEvent=function(e){this.track(e,s.TelemetryType.Event)},e.prototype.trackRequest=function(e){this.track(e,s.TelemetryType.Request)},e.prototype.trackDependency=function(e){e&&!e.target&&e.data&&(e.target=n.parse(e.data).host),this.track(e,s.TelemetryType.Dependency)},e.prototype.flush=function(e){this.channel.triggerSend(!!e&&!!e.isAppCrashing,e?e.callback:void 0)},e.prototype.track=function(e,t){if(e&&s.telemetryTypeToBaseType(t)){var r=f.createEnvelope(e,t,this.commonProperties,this.context,this.config);e.time&&(r.time=e.time.toISOString()),this._enableAzureProperties&&c.azureRoleEnvironmentTelemetryProcessor(r,this.context);var n=this.runTelemetryProcessors(r,e.contextObjects);n=n&&c.samplingTelemetryProcessor(r,{correlationContext:u.CorrelationContextManager.getCurrentContext()}),c.preAggregatedMetricsTelemetryProcessor(r,this.context),n&&(c.performanceMetricsTelemetryProcessor(r,this.quickPulseClient),this.channel.send(r))}else p.warn("track() requires telemetry object and telemetryType to be specified.")},e.prototype.setAutoPopulateAzureProperties=function(e){this._enableAzureProperties=e},e.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},e.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},e.prototype.runTelemetryProcessors=function(e,t){var r=!0,n=this._telemetryProcessors.length;if(0===n)return r;(t=t||{}).correlationContext=u.CorrelationContextManager.getCurrentContext();for(var o=0;o<n;++o)try{var i=this._telemetryProcessors[o];if(i&&!1===i.apply(null,[e,t])){r=!1;break}}catch(t){r=!0,p.warn("One of telemetry processors failed, telemetry item will be sent.",t,e)}return r&&(e&&e.tags&&(e.tags=d.validateStringMap(e.tags)),e&&e.data&&e.data.baseData&&e.data.baseData.properties&&(e.data.baseData.properties=d.validateStringMap(e.data.baseData.properties))),r},e}();t.exports=h})),to=m(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=eo(),i=Fn(),s=jn(),a=S(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.trackNodeHttpRequestSync=function(e){e&&e.request&&e.response&&e.duration?i.trackRequestSync(this,e):a.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},t.prototype.trackNodeHttpRequest=function(e){(e.duration||e.error)&&a.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),e&&e.request&&e.response?i.trackRequest(this,e):a.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},t.prototype.trackNodeHttpDependency=function(e){e&&e.request?s.trackRequest(this,e):a.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},t}(o);t.exports=c})),ro=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),no=m((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.Configuration=e.wrapWithCorrelationContext=e.startOperation=e.getCorrelationContext=e.start=e.setup=e.liveMetricsClient=e.defaultClient=e.DistributedTracingModes=void 0;var t,r,n=mn(),o=En(),i=wn(),s=Tn(),a=In(),c=Ln(),u=jn(),l=Fn(),d=er(),p=S(),f=$n(),h=zn();e.TelemetryClient=to(),e.Contracts=Gr(),e.azureFunctionsTypes=ro(),(r=t=e.DistributedTracingModes||(e.DistributedTracingModes={}))[r.AI=0]="AI",r[r.AI_AND_W3C=1]="AI_AND_W3C";var g,v,m,y,_,E,w,b,T,C,P,I=!0,O=!1,N=!0,A=!0,R=!0,x=!1,k=!0,D=!0,M=!0,j=!0,L=!1,F=!0,U=void 0,B=void 0,V=!1;function $(){return e.defaultClient?(V=!0,m.enable(I,O),y.enable(N),_.enable(A),E.enable(R),w.enable(x,e.defaultClient.config),b.enable(F,v),T.useAutoCorrelation(j,g),T.enable(k),C.enable(D),e.liveMetricsClient&&L&&e.liveMetricsClient.enable(L)):p.warn("Start cannot be called before setup"),H}e.setup=function(t){return e.defaultClient?p.info("The default client is already setup"):(e.defaultClient=new e.TelemetryClient(t),m=new o(e.defaultClient),y=new i(e.defaultClient),_=new s(e.defaultClient),E=new a(e.defaultClient),w=new c(e.defaultClient),T=new l(e.defaultClient),C=new u(e.defaultClient),b||(b=new h.AutoCollectNativePerformance(e.defaultClient))),e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(M,U,B),H},e.start=$,e.getCorrelationContext=function(){return j?n.CorrelationContextManager.getCurrentContext():null},e.startOperation=function(e,t){return n.CorrelationContextManager.startOperation(e,t)},e.wrapWithCorrelationContext=function(e,t){return n.CorrelationContextManager.wrapCallback(e,t)};var H=function(){function r(){}return r.setDistributedTracingMode=function(e){return d.w3cEnabled=e===t.AI_AND_W3C,r},r.setAutoCollectConsole=function(e,t){return void 0===t&&(t=!1),I=e,O=t,V&&m.enable(e,t),r},r.setAutoCollectExceptions=function(e){return N=e,V&&y.enable(e),r},r.setAutoCollectPerformance=function(e,t){void 0===t&&(t=!0),A=e;var n=h.AutoCollectNativePerformance.parseEnabled(t);return F=n.isEnabled,v=n.disabledMetrics,V&&(_.enable(e),b.enable(n.isEnabled,n.disabledMetrics)),r},r.setAutoCollectPreAggregatedMetrics=function(e){return R=e,V&&E.enable(e),r},r.setAutoCollectHeartbeat=function(t){return x=t,V&&w.enable(t,e.defaultClient.config),r},r.setAutoCollectRequests=function(e){return k=e,V&&T.enable(e),r},r.setAutoCollectDependencies=function(e){return D=e,V&&C.enable(e),r},r.setAutoDependencyCorrelation=function(e,t){return j=e,g=t,V&&T.useAutoCorrelation(e,t),r},r.setUseDiskRetryCaching=function(t,n,o){return M=t,U=n,B=o,e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(t,n,o),r},r.setInternalLogging=function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=!0),p.enableDebug=e,p.disableWarnings=!t,r},r.setSendLiveMetrics=function(t){return void 0===t&&(t=!1),e.defaultClient?(!e.liveMetricsClient&&t?(e.liveMetricsClient=new f(e.defaultClient.config,null),P=new s(e.liveMetricsClient,1e3,!0),e.liveMetricsClient.addCollector(P),e.defaultClient.quickPulseClient=e.liveMetricsClient):e.liveMetricsClient&&e.liveMetricsClient.enable(t),L=t,r):(p.warn("Live metrics client cannot be setup without the default client"),r)},r.start=$,r}();e.Configuration=H,e.dispose=function(){d.w3cEnabled=!0,e.defaultClient=null,V=!1,m&&m.dispose(),y&&y.dispose(),_&&_.dispose(),E&&E.dispose(),w&&w.dispose(),b&&b.dispose(),T&&T.dispose(),C&&C.dispose(),e.liveMetricsClient&&(e.liveMetricsClient.enable(!1),L=!1,e.liveMetricsClient=void 0)}})),oo={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(oo,{default:()=>lo}),e.exports=(n=oo,y(i({},"__esModule",{value:!0}),n));var io=_(r(2037)),so=_(r(9496)),ao=_(r(5687)),co=class{constructor(e){this.vscodeAPI=e}getTelemetryLevel(){try{let e=this.vscodeAPI.env.telemetryConfiguration;return e.isUsageEnabled&&e.isErrorsEnabled&&e.isCrashEnabled?"on":e.isErrorsEnabled&&e.isCrashEnabled?"error":"off"}catch{return void 0!==this.vscodeAPI.env.isTelemetryEnabled?this.vscodeAPI.env.isTelemetryEnabled?"on":"off":this.vscodeAPI.workspace.getConfiguration("telemetry").get("enableTelemetry")?"on":"off"}}static applyReplacements(e,t){for(let r of Object.keys(e))for(let n of t)n.lookup.test(r)&&(void 0!==n.replacementString?e[r]=n.replacementString:delete e[r])}static shouldUseOneDataSystemSDK(e){return 74===e.length&&"-"===e[32]&&"-"===e[41]&&"-"===e[46]&&"-"===e[51]&&"-"===e[56]&&"-"===e[69]}static getInstance(e){return co._instance||(co._instance=new co(e)),co._instance}},uo=class{constructor(e,t,r,n,o,i){this.extensionId=e,this.extensionVersion=t,this.telemetryAppender=r,this.osShim=n,this.vscodeAPI=o,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!i,this.updateUserOptStatus(),void 0!==o.env.onDidChangeTelemetryEnabled?(this.disposables.push(o.env.onDidChangeTelemetryEnabled((()=>this.updateUserOptStatus()))),this.disposables.push(o.workspace.onDidChangeConfiguration((()=>this.updateUserOptStatus())))):this.disposables.push(o.workspace.onDidChangeConfiguration((()=>this.updateUserOptStatus())))}updateUserOptStatus(){let e=co.getInstance(this.vscodeAPI).getTelemetryLevel();this.userOptIn="on"===e,this.errorOptIn="error"===e||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(e){if(!e)return"none";let t="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach((r=>{0===e.indexOf(`${r}`)&&(t=r)})),t}get extension(){return void 0===this._extension&&(this._extension=this.vscodeAPI.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(e,t){if(null===e||"object"!=typeof e||"function"!=typeof t)return e;let r={};for(let n in e)r[n]=t(n,e[n]);return r}shouldSendErrorTelemetry(){return!(!1===this.errorOptIn||this.firstParty&&this.vscodeAPI.env.remoteName&&"other"===this.cleanRemoteName(this.vscodeAPI.env.remoteName))}getCommonProperties(){let e={};if(e["common.os"]=this.osShim.platform,e["common.nodeArch"]=this.osShim.architecture,e["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,this.vscodeAPI&&this.vscodeAPI.env){switch(e["common.vscodemachineid"]=this.vscodeAPI.env.machineId,e["common.vscodesessionid"]=this.vscodeAPI.env.sessionId,e["common.vscodeversion"]=this.vscodeAPI.version,e["common.isnewappinstall"]=this.vscodeAPI.env.isNewAppInstall?this.vscodeAPI.env.isNewAppInstall.toString():"false",e["common.product"]=this.vscodeAPI.env.appHost,this.vscodeAPI.env.uiKind){case this.vscodeAPI.UIKind.Web:e["common.uikind"]="web";break;case this.vscodeAPI.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(this.vscodeAPI.env.remoteName)}return e}anonymizeFilePaths(e,t){let r;if(null==e)return"";let n=[];""!==this.vscodeAPI.env.appRoot&&n.push(new RegExp(this.vscodeAPI.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let o=e;if(t){let t=[];for(let o of n)for(;(r=o.exec(e))&&r;)t.push([r.index,o.lastIndex]);let i=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,s=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,a=0;for(o="";(r=s.exec(e))&&r;)r[0]&&!i.test(r[0])&&t.every((([e,t])=>r.index<e||r.index>=t))&&(o+=e.substring(a,r.index)+"<REDACTED: user-file-path>",a=s.lastIndex);a<e.length&&(o+=e.substr(a))}for(let e of n)o=o.replace(e,"");return o}removePropertiesWithPossibleUserInfo(e){if("object"!=typeof e)return;let t={};for(let r of Object.keys(e)){let n=e[r];if(!n)continue;let o=/@[a-zA-Z0-9-.]+/,i=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/.test(n.toLowerCase())?t[r]="<REDACTED: secret>":o.test(n)?t[r]="<REDACTED: email>":i.test(n)?t[r]="<REDACTED: token>":t[r]=n}return t}get telemetryLevel(){switch(co.getInstance(this.vscodeAPI).getTelemetryLevel()){case"on":return"all";case"error":return"error";case"off":return"off"}}internalSendTelemetryEvent(e,t,r,n,o){if((this.userOptIn||o)&&""!==e){if(t=g(g({},t),this.getCommonProperties()),n){let e=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));t=this.removePropertiesWithPossibleUserInfo(e)}t=t??{},r=r??{},e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:t,measurements:r})}}sendTelemetryEvent(e,t,r){this.internalSendTelemetryEvent(e,t,r,!0,!1)}sendRawTelemetryEvent(e,t,r){this.internalSendTelemetryEvent(e,t,r,!1,!1)}sendDangerousTelemetryEvent(e,t,r,n=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryEvent(e,t,r,n,!0)}internalSendTelemetryErrorEvent(e,t,r,n,o){if((this.shouldSendErrorTelemetry()||o)&&""!==e){if(t=g(g({},t),this.getCommonProperties()),n){let e=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));t=this.removePropertiesWithPossibleUserInfo(e)}t=t??{},r=r??{},e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:t,measurements:r})}}sendTelemetryErrorEvent(e,t,r){this.internalSendTelemetryErrorEvent(e,t,r,!0,!1)}sendDangerousTelemetryErrorEvent(e,t,r,n=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryErrorEvent(e,t,r,n,!0)}internalSendTelemetryException(e,t,r,n,o){if((this.shouldSendErrorTelemetry()||o)&&e){if(t=g(g({},t),this.getCommonProperties()),n){let r=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));e.stack&&(e.stack=this.anonymizeFilePaths(e.stack,this.firstParty)),t=this.removePropertiesWithPossibleUserInfo(r)}t=t??{},r=r??{},this.telemetryAppender.logException(e,{properties:t,measurements:r})}}sendTelemetryException(e,t,r){this.internalSendTelemetryException(e,t,r,!0,!1)}sendDangerousTelemetryException(e,t,r,n=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryException(e,t,r,n,!0)}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map((e=>e.dispose())))}},lo=class extends uo{constructor(e,t,n,o,i){let s=e=>(async(e,t)=>{let r;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let t=await Promise.resolve().then((()=>_(no())));t.defaultClient?(r=new t.TelemetryClient(e),r.channel.setUseDiskRetryCaching(!0)):(t.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),r=t.defaultClient),so&&so.env&&(r.context.tags[r.context.keys.userId]=so.env.machineId,r.context.tags[r.context.keys.sessionId]=so.env.sessionId,r.context.tags[r.context.keys.cloudRole]=so.env.appName,r.context.tags[r.context.keys.cloudRoleInstance]=so.env.appName),e&&0===e.indexOf("AIF-")&&(r.config.endpointUrl="https://mobile.events.data.microsoft.com/collect/v1")}catch(e){return Promise.reject("Failed to initialize app insights!\n"+e.message)}return null!=t&&t.length&&function(e,t){e.addTelemetryProcessor((e=>(Array.isArray(e.tags)?e.tags.forEach((e=>co.applyReplacements(e,t))):e.tags&&co.applyReplacements(e.tags,t),e.data.baseData&&co.applyReplacements(e.data.baseData,t),!0)))}(r,t),{logEvent:(e,t)=>{try{null==r||r.trackEvent({name:e,properties:null==t?void 0:t.properties,measurements:null==t?void 0:t.measurements})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},logException:(e,t)=>{try{null==r||r.trackException({exception:e,properties:null==t?void 0:t.properties,measurements:null==t?void 0:t.measurements})}catch(e){throw new Error("Failed to log exception to app insights!\n"+e.message)}},flush:async()=>{try{null==r||r.flush()}catch(e){throw new Error("Failed to flush app insights!\n"+e.message)}}}})(e,i);co.shouldUseOneDataSystemSDK(n)&&(s=e=>(async(e,t,n)=>{let o=await(async(e,t,n)=>{let o=await Promise.all([r.e(844),r.e(779)]).then(r.bind(r,779)),i=await Promise.all([r.e(844),r.e(172)]).then(r.bind(r,1172)),s=new o.AppInsightsCore,a=new i.PostChannel,c={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[a]]};if(n){c.extensionConfig={};let e={alwaysUseXhrOverride:!0,httpXHROverride:n};c.extensionConfig[a.identifier]=e}let u=t.workspace.getConfiguration("telemetry").get("internalTesting");return s.initialize(c,[]),s.addTelemetryInitializer((e=>{!u||(e.ext=e.ext??{},e.ext.utc=e.ext.utc??{},e.ext.utc.flags=8462029)})),s})(e,t,n);return{logEvent:(e,t)=>{try{null==o||o.track({name:e,baseData:{name:e,properties:null==t?void 0:t.properties,measurements:null==t?void 0:t.measurements}})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},logException:(e,t)=>{throw new Error("1DS SDK does not support logging exceptions, please use logEvent for exception tracking")},flush:async()=>{try{null==o||o.unload()}catch(e){throw new Error("Failed to flush app insights!\n"+e.message)}}}})(e,so,{sendPOST:(e,t)=>{let r={method:"POST",headers:v(g({},e.headers),{"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)})};try{let n=ao.request(e.urlString,r,(e=>{e.on("data",(function(r){t(e.statusCode??200,e.headers,r.toString())})),e.on("error",(function(){t(0,{})}))}));n.write(e.data),n.end()}catch{t(0,{})}}}));let a=new class{constructor(e,t){this._instantiationStatus=0,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e}logEvent(e,t){this._telemetryClient?this._telemetryClient.logEvent(e,t):2!==this._instantiationStatus&&this._eventQueue.push({eventName:e,data:t})}logException(e,t){this._telemetryClient?this._telemetryClient.logException(e,t):2!==this._instantiationStatus&&this._exceptionQueue.push({exception:e,data:t})}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach((({eventName:e,data:t})=>this.logEvent(e,t))),this._eventQueue=[],this._exceptionQueue.forEach((({exception:e,data:t})=>this.logException(e,t))),this._exceptionQueue=[]}instantiateAppender(){0===this._instantiationStatus&&(this._instantiationStatus=1,this._clientFactory(this._key).then((e=>{this._telemetryClient=e,this._instantiationStatus=2,this._flushQueues()})).catch((e=>{console.error(e),this._instantiationStatus=2})))}}(n,s);n&&(0===n.indexOf("AIF-")||co.shouldUseOneDataSystemSDK(n))&&(o=!0),super(e,t,a,{release:io.release(),platform:io.platform(),architecture:io.arch()},so,o)}}},852:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=852,e.exports=t},1024:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=1024,e.exports=t},9183:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NIL:()=>w,parse:()=>m,stringify:()=>d,v1:()=>v,v3:()=>_,v4:()=>S,v5:()=>E,validate:()=>u,version:()=>b});var n=r(6113),o=r.n(n);const i=new Uint8Array(256);let s=i.length;function a(){return s>i.length-16&&(o().randomFillSync(i),s=0),i.slice(s,s+=16)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,u=function(e){return"string"==typeof e&&c.test(e)},l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).substr(1));const d=function(e,t=0){const r=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!u(r))throw TypeError("Stringified UUID is invalid");return r};let p,f,h=0,g=0;const v=function(e,t,r){let n=t&&r||0;const o=t||new Array(16);let i=(e=e||{}).node||p,s=void 0!==e.clockseq?e.clockseq:f;if(null==i||null==s){const t=e.random||(e.rng||a)();null==i&&(i=p=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==s&&(s=f=16383&(t[6]<<8|t[7]))}let c=void 0!==e.msecs?e.msecs:Date.now(),u=void 0!==e.nsecs?e.nsecs:g+1;const l=c-h+(u-g)/1e4;if(l<0&&void 0===e.clockseq&&(s=s+1&16383),(l<0||c>h)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=c,g=u,f=s,c+=122192928e5;const v=(1e4*(268435455&c)+u)%4294967296;o[n++]=v>>>24&255,o[n++]=v>>>16&255,o[n++]=v>>>8&255,o[n++]=255&v;const m=c/4294967296*1e4&268435455;o[n++]=m>>>8&255,o[n++]=255&m,o[n++]=m>>>24&15|16,o[n++]=m>>>16&255,o[n++]=s>>>8|128,o[n++]=255&s;for(let e=0;e<6;++e)o[n+e]=i[e];return t||d(o)},m=function(e){if(!u(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function y(e,t,r){function n(e,n,o,i){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=m(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+e.length);if(s.set(n),s.set(e,n.length),s=r(s),s[6]=15&s[6]|t,s[8]=63&s[8]|128,o){i=i||0;for(let e=0;e<16;++e)o[i+e]=s[e];return o}return d(s)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}const _=y("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o().createHash("md5").update(e).digest()})),S=function(e,t,r){const n=(e=e||{}).random||(e.rng||a)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return d(n)},E=y("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o().createHash("sha1").update(e).digest()})),w="00000000-0000-0000-0000-000000000000",b=function(e){if(!u(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},3870:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressType=t.ProgressToken=t.createMessageConnection=t.NullLogger=t.ConnectionOptions=t.ConnectionStrategy=t.AbstractMessageBuffer=t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=t.SharedArrayReceiverStrategy=t.SharedArraySenderStrategy=t.CancellationToken=t.CancellationTokenSource=t.Emitter=t.Event=t.Disposable=t.LRUCache=t.Touch=t.LinkedMap=t.ParameterStructures=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.ErrorCodes=t.ResponseError=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType0=t.RequestType=t.Message=t.RAL=void 0,t.MessageStrategy=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=void 0;const n=r(839);Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return n.Message}}),Object.defineProperty(t,"RequestType",{enumerable:!0,get:function(){return n.RequestType}}),Object.defineProperty(t,"RequestType0",{enumerable:!0,get:function(){return n.RequestType0}}),Object.defineProperty(t,"RequestType1",{enumerable:!0,get:function(){return n.RequestType1}}),Object.defineProperty(t,"RequestType2",{enumerable:!0,get:function(){return n.RequestType2}}),Object.defineProperty(t,"RequestType3",{enumerable:!0,get:function(){return n.RequestType3}}),Object.defineProperty(t,"RequestType4",{enumerable:!0,get:function(){return n.RequestType4}}),Object.defineProperty(t,"RequestType5",{enumerable:!0,get:function(){return n.RequestType5}}),Object.defineProperty(t,"RequestType6",{enumerable:!0,get:function(){return n.RequestType6}}),Object.defineProperty(t,"RequestType7",{enumerable:!0,get:function(){return n.RequestType7}}),Object.defineProperty(t,"RequestType8",{enumerable:!0,get:function(){return n.RequestType8}}),Object.defineProperty(t,"RequestType9",{enumerable:!0,get:function(){return n.RequestType9}}),Object.defineProperty(t,"ResponseError",{enumerable:!0,get:function(){return n.ResponseError}}),Object.defineProperty(t,"ErrorCodes",{enumerable:!0,get:function(){return n.ErrorCodes}}),Object.defineProperty(t,"NotificationType",{enumerable:!0,get:function(){return n.NotificationType}}),Object.defineProperty(t,"NotificationType0",{enumerable:!0,get:function(){return n.NotificationType0}}),Object.defineProperty(t,"NotificationType1",{enumerable:!0,get:function(){return n.NotificationType1}}),Object.defineProperty(t,"NotificationType2",{enumerable:!0,get:function(){return n.NotificationType2}}),Object.defineProperty(t,"NotificationType3",{enumerable:!0,get:function(){return n.NotificationType3}}),Object.defineProperty(t,"NotificationType4",{enumerable:!0,get:function(){return n.NotificationType4}}),Object.defineProperty(t,"NotificationType5",{enumerable:!0,get:function(){return n.NotificationType5}}),Object.defineProperty(t,"NotificationType6",{enumerable:!0,get:function(){return n.NotificationType6}}),Object.defineProperty(t,"NotificationType7",{enumerable:!0,get:function(){return n.NotificationType7}}),Object.defineProperty(t,"NotificationType8",{enumerable:!0,get:function(){return n.NotificationType8}}),Object.defineProperty(t,"NotificationType9",{enumerable:!0,get:function(){return n.NotificationType9}}),Object.defineProperty(t,"ParameterStructures",{enumerable:!0,get:function(){return n.ParameterStructures}});const o=r(6184);Object.defineProperty(t,"LinkedMap",{enumerable:!0,get:function(){return o.LinkedMap}}),Object.defineProperty(t,"LRUCache",{enumerable:!0,get:function(){return o.LRUCache}}),Object.defineProperty(t,"Touch",{enumerable:!0,get:function(){return o.Touch}});const i=r(3911);Object.defineProperty(t,"Disposable",{enumerable:!0,get:function(){return i.Disposable}});const s=r(7135);Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return s.Event}}),Object.defineProperty(t,"Emitter",{enumerable:!0,get:function(){return s.Emitter}});const a=r(3881);Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return a.CancellationTokenSource}}),Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return a.CancellationToken}});const c=r(8211);Object.defineProperty(t,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return c.SharedArraySenderStrategy}}),Object.defineProperty(t,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return c.SharedArrayReceiverStrategy}});const u=r(6525);Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return u.MessageReader}}),Object.defineProperty(t,"AbstractMessageReader",{enumerable:!0,get:function(){return u.AbstractMessageReader}}),Object.defineProperty(t,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return u.ReadableStreamMessageReader}});const l=r(6654);Object.defineProperty(t,"MessageWriter",{enumerable:!0,get:function(){return l.MessageWriter}}),Object.defineProperty(t,"AbstractMessageWriter",{enumerable:!0,get:function(){return l.AbstractMessageWriter}}),Object.defineProperty(t,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return l.WriteableStreamMessageWriter}});const d=r(5530);Object.defineProperty(t,"AbstractMessageBuffer",{enumerable:!0,get:function(){return d.AbstractMessageBuffer}});const p=r(1343);Object.defineProperty(t,"ConnectionStrategy",{enumerable:!0,get:function(){return p.ConnectionStrategy}}),Object.defineProperty(t,"ConnectionOptions",{enumerable:!0,get:function(){return p.ConnectionOptions}}),Object.defineProperty(t,"NullLogger",{enumerable:!0,get:function(){return p.NullLogger}}),Object.defineProperty(t,"createMessageConnection",{enumerable:!0,get:function(){return p.createMessageConnection}}),Object.defineProperty(t,"ProgressToken",{enumerable:!0,get:function(){return p.ProgressToken}}),Object.defineProperty(t,"ProgressType",{enumerable:!0,get:function(){return p.ProgressType}}),Object.defineProperty(t,"Trace",{enumerable:!0,get:function(){return p.Trace}}),Object.defineProperty(t,"TraceValues",{enumerable:!0,get:function(){return p.TraceValues}}),Object.defineProperty(t,"TraceFormat",{enumerable:!0,get:function(){return p.TraceFormat}}),Object.defineProperty(t,"SetTraceNotification",{enumerable:!0,get:function(){return p.SetTraceNotification}}),Object.defineProperty(t,"LogTraceNotification",{enumerable:!0,get:function(){return p.LogTraceNotification}}),Object.defineProperty(t,"ConnectionErrors",{enumerable:!0,get:function(){return p.ConnectionErrors}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return p.ConnectionError}}),Object.defineProperty(t,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return p.CancellationReceiverStrategy}}),Object.defineProperty(t,"CancellationSenderStrategy",{enumerable:!0,get:function(){return p.CancellationSenderStrategy}}),Object.defineProperty(t,"CancellationStrategy",{enumerable:!0,get:function(){return p.CancellationStrategy}}),Object.defineProperty(t,"MessageStrategy",{enumerable:!0,get:function(){return p.MessageStrategy}});const f=r(147);t.RAL=f.default},3881:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationTokenSource=t.CancellationToken=void 0;const n=r(147),o=r(7574),i=r(7135);var s;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:i.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:i.Event.None}),e.is=function(t){const r=t;return r&&(r===e.None||r===e.Cancelled||o.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}}(s=t.CancellationToken||(t.CancellationToken={}));const a=Object.freeze((function(e,t){const r=(0,n.default)().timer.setTimeout(e.bind(t),0);return{dispose(){r.dispose()}}}));class c{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new i.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new c),this._token}cancel(){this._token?this._token.cancel():this._token=s.Cancelled}dispose(){this._token?this._token instanceof c&&this._token.dispose():this._token=s.None}}},1343:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.ConnectionOptions=t.MessageStrategy=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.RequestCancellationReceiverStrategy=t.IdCancellationReceiverStrategy=t.ConnectionStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=t.NullLogger=t.ProgressType=t.ProgressToken=void 0;const n=r(147),o=r(7574),i=r(839),s=r(6184),a=r(7135),c=r(3881);var u,l,d,p,f,h,g,v,m,y,_,S,E,w,b,T,C,P;!function(e){e.type=new i.NotificationType("$/cancelRequest")}(u||(u={})),function(e){e.is=function(e){return"string"==typeof e||"number"==typeof e}}(l=t.ProgressToken||(t.ProgressToken={})),function(e){e.type=new i.NotificationType("$/progress")}(d||(d={})),t.ProgressType=class{constructor(){}},function(e){e.is=function(e){return o.func(e)}}(p||(p={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose"}(f=t.Trace||(t.Trace={})),(P=t.TraceValues||(t.TraceValues={})).Off="off",P.Messages="messages",P.Compact="compact",P.Verbose="verbose",function(e){e.fromString=function(t){if(!o.string(t))return e.Off;switch(t=t.toLowerCase()){case"off":default:return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Compact:return"compact";case e.Verbose:return"verbose";default:return"off"}}}(f=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return o.string(t)&&"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(h=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new i.NotificationType("$/setTrace")}(g=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new i.NotificationType("$/logTrace")}(v=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(m=t.ConnectionErrors||(t.ConnectionErrors={}));class I extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,I.prototype)}}t.ConnectionError=I,function(e){e.is=function(e){const t=e;return t&&o.func(t.cancelUndispatched)}}(y=t.ConnectionStrategy||(t.ConnectionStrategy={})),function(e){e.is=function(e){const t=e;return t&&(void 0===t.kind||"id"===t.kind)&&o.func(t.createCancellationTokenSource)&&(void 0===t.dispose||o.func(t.dispose))}}(_=t.IdCancellationReceiverStrategy||(t.IdCancellationReceiverStrategy={})),function(e){e.is=function(e){const t=e;return t&&"request"===t.kind&&o.func(t.createCancellationTokenSource)&&(void 0===t.dispose||o.func(t.dispose))}}(S=t.RequestCancellationReceiverStrategy||(t.RequestCancellationReceiverStrategy={})),function(e){e.Message=Object.freeze({createCancellationTokenSource:e=>new c.CancellationTokenSource}),e.is=function(e){return _.is(e)||S.is(e)}}(E=t.CancellationReceiverStrategy||(t.CancellationReceiverStrategy={})),function(e){e.Message=Object.freeze({sendCancellation:(e,t)=>e.sendNotification(u.type,{id:t}),cleanup(e){}}),e.is=function(e){const t=e;return t&&o.func(t.sendCancellation)&&o.func(t.cleanup)}}(w=t.CancellationSenderStrategy||(t.CancellationSenderStrategy={})),function(e){e.Message=Object.freeze({receiver:E.Message,sender:w.Message}),e.is=function(e){const t=e;return t&&E.is(t.receiver)&&w.is(t.sender)}}(b=t.CancellationStrategy||(t.CancellationStrategy={})),function(e){e.is=function(e){const t=e;return t&&o.func(t.handleMessage)}}(T=t.MessageStrategy||(t.MessageStrategy={})),(t.ConnectionOptions||(t.ConnectionOptions={})).is=function(e){const t=e;return t&&(b.is(t.cancellationStrategy)||y.is(t.connectionStrategy)||T.is(t.messageStrategy))},function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(C||(C={})),t.createMessageConnection=function(e,r,y,S){const E=void 0!==y?y:t.NullLogger;let w=0,P=0,O=0;const N="2.0";let A;const R=new Map;let x;const k=new Map,D=new Map;let M,j,L=new s.LinkedMap,F=new Map,U=new Set,B=new Map,V=f.Off,$=h.Text,H=C.New;const q=new a.Emitter,z=new a.Emitter,G=new a.Emitter,W=new a.Emitter,K=new a.Emitter,X=S&&S.cancellationStrategy?S.cancellationStrategy:b.Message;function J(e){if(null===e)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+e.toString()}function Q(e){}function Y(){return H===C.Listening}function Z(){return H===C.Closed}function ee(){return H===C.Disposed}function te(){H!==C.New&&H!==C.Listening||(H=C.Closed,z.fire(void 0))}function re(){M||0===L.size||(M=(0,n.default)().timer.setImmediate((()=>{M=void 0,function(){if(0===L.size)return;const e=L.shift();try{const t=S?.messageStrategy;T.is(t)?t.handleMessage(e,ne):ne(e)}finally{re()}}()})))}function ne(e){i.Message.isRequest(e)?function(e){if(ee())return;function t(t,n,o){const s={jsonrpc:N,id:e.id};t instanceof i.ResponseError?s.error=t.toJson():s.result=void 0===t?null:t,se(s,n,o),r.write(s).catch((()=>E.error("Sending response failed.")))}function n(t,n,o){const i={jsonrpc:N,id:e.id,error:t.toJson()};se(i,n,o),r.write(i).catch((()=>E.error("Sending response failed.")))}!function(e){if(V!==f.Off&&j)if($===h.Text){let t;V!==f.Verbose&&V!==f.Compact||!e.params||(t=`Params: ${ie(e.params)}\n\n`),j.log(`Received request '${e.method} - (${e.id})'.`,t)}else ce("receive-request",e)}(e);const s=R.get(e.method);let a,c;s&&(a=s.type,c=s.handler);const u=Date.now();if(c||A){const s=e.id??String(Date.now()),l=_.is(X.receiver)?X.receiver.createCancellationTokenSource(s):X.receiver.createCancellationTokenSource(e);null!==e.id&&U.has(e.id)&&l.cancel(),null!==e.id&&B.set(s,l);try{let d;if(c)if(void 0===e.params){if(void 0!==a&&0!==a.numberOfParams)return void n(new i.ResponseError(i.ErrorCodes.InvalidParams,`Request ${e.method} defines ${a.numberOfParams} params but received none.`),e.method,u);d=c(l.token)}else if(Array.isArray(e.params)){if(void 0!==a&&a.parameterStructures===i.ParameterStructures.byName)return void n(new i.ResponseError(i.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,u);d=c(...e.params,l.token)}else{if(void 0!==a&&a.parameterStructures===i.ParameterStructures.byPosition)return void n(new i.ResponseError(i.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,u);d=c(e.params,l.token)}else A&&(d=A(e.method,e.params,l.token));const p=d;d?p.then?p.then((r=>{B.delete(s),t(r,e.method,u)}),(t=>{B.delete(s),t instanceof i.ResponseError?n(t,e.method,u):t&&o.string(t.message)?n(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,u):n(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)})):(B.delete(s),t(d,e.method,u)):(B.delete(s),function(t,n,o){void 0===t&&(t=null);const i={jsonrpc:N,id:e.id,result:t};se(i,n,o),r.write(i).catch((()=>E.error("Sending response failed.")))}(d,e.method,u))}catch(r){B.delete(s),r instanceof i.ResponseError?t(r,e.method,u):r&&o.string(r.message)?n(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${r.message}`),e.method,u):n(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)}}else n(new i.ResponseError(i.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,u)}(e):i.Message.isNotification(e)?function(e){if(ee())return;let t,r;if(e.method===u.type.method){const t=e.params.id;return U.delete(t),void ae(e)}{const n=k.get(e.method);n&&(r=n.handler,t=n.type)}if(r||x)try{if(ae(e),r)if(void 0===e.params)void 0!==t&&0!==t.numberOfParams&&t.parameterStructures!==i.ParameterStructures.byName&&E.error(`Notification ${e.method} defines ${t.numberOfParams} params but received none.`),r();else if(Array.isArray(e.params)){const n=e.params;e.method===d.type.method&&2===n.length&&l.is(n[0])?r({token:n[0],value:n[1]}):(void 0!==t&&(t.parameterStructures===i.ParameterStructures.byName&&E.error(`Notification ${e.method} defines parameters by name but received parameters by position`),t.numberOfParams!==e.params.length&&E.error(`Notification ${e.method} defines ${t.numberOfParams} params but received ${n.length} arguments`)),r(...n))}else void 0!==t&&t.parameterStructures===i.ParameterStructures.byPosition&&E.error(`Notification ${e.method} defines parameters by position but received parameters by name`),r(e.params);else x&&x(e.method,e.params)}catch(t){t.message?E.error(`Notification handler '${e.method}' failed with message: ${t.message}`):E.error(`Notification handler '${e.method}' failed unexpectedly.`)}else G.fire(e)}(e):i.Message.isResponse(e)?function(e){if(!ee())if(null===e.id)e.error?E.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):E.error("Received response message without id. No further error information provided.");else{const t=e.id,r=F.get(t);if(function(e,t){if(V!==f.Off&&j)if($===h.Text){let r;if(V!==f.Verbose&&V!==f.Compact||(e.error&&e.error.data?r=`Error data: ${ie(e.error.data)}\n\n`:e.result?r=`Result: ${ie(e.result)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),t){const n=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";j.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${n}`,r)}else j.log(`Received response ${e.id} without active response promise.`,r)}else ce("receive-response",e)}(e,r),void 0!==r){F.delete(t);try{if(e.error){const t=e.error;r.reject(new i.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");r.resolve(e.result)}}catch(e){e.message?E.error(`Response handler '${r.method}' failed with message: ${e.message}`):E.error(`Response handler '${r.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void E.error("Received empty message.");E.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);const t=e;if(o.string(t.id)||o.number(t.id)){const e=t.id,r=F.get(e);r&&r.reject(new Error("The received response has neither a result nor an error property."))}}(e)}e.onClose(te),e.onError((function(e){q.fire([e,void 0,void 0])})),r.onClose(te),r.onError((function(e){q.fire(e)}));const oe=e=>{try{if(i.Message.isNotification(e)&&e.method===u.type.method){const t=e.params.id,n=J(t),o=L.get(n);if(i.Message.isRequest(o)){const i=S?.connectionStrategy,s=i&&i.cancelUndispatched?i.cancelUndispatched(o,Q):void 0;if(s&&(void 0!==s.error||void 0!==s.result))return L.delete(n),B.delete(t),s.id=o.id,se(s,e.method,Date.now()),void r.write(s).catch((()=>E.error("Sending response for canceled message failed.")))}const s=B.get(t);if(void 0!==s)return s.cancel(),void ae(e);U.add(t)}!function(e,t){var r;i.Message.isRequest(t)?e.set(J(t.id),t):i.Message.isResponse(t)?e.set(null===(r=t.id)?"res-unknown-"+(++O).toString():"res-"+r.toString(),t):e.set("not-"+(++P).toString(),t)}(L,e)}finally{re()}};function ie(e){if(null!=e)switch(V){case f.Verbose:return JSON.stringify(e,null,4);case f.Compact:return JSON.stringify(e);default:return}}function se(e,t,r){if(V!==f.Off&&j)if($===h.Text){let n;V!==f.Verbose&&V!==f.Compact||(e.error&&e.error.data?n=`Error data: ${ie(e.error.data)}\n\n`:e.result?n=`Result: ${ie(e.result)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),j.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-r}ms`,n)}else ce("send-response",e)}function ae(e){if(V!==f.Off&&j&&e.method!==v.type.method)if($===h.Text){let t;V!==f.Verbose&&V!==f.Compact||(t=e.params?`Params: ${ie(e.params)}\n\n`:"No parameters provided.\n\n"),j.log(`Received notification '${e.method}'.`,t)}else ce("receive-notification",e)}function ce(e,t){if(!j||V===f.Off)return;const r={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};j.log(r)}function ue(){if(Z())throw new I(m.Closed,"Connection is closed.");if(ee())throw new I(m.Disposed,"Connection is disposed.")}function le(e){return void 0===e?null:e}function de(e){return null===e?void 0:e}function pe(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function fe(e,t){switch(e){case i.ParameterStructures.auto:return pe(t)?de(t):[le(t)];case i.ParameterStructures.byName:if(!pe(t))throw new Error("Received parameters by name but param is not an object literal.");return de(t);case i.ParameterStructures.byPosition:return[le(t)];default:throw new Error(`Unknown parameter structure ${e.toString()}`)}}function he(e,t){let r;const n=e.numberOfParams;switch(n){case 0:r=void 0;break;case 1:r=fe(e.parameterStructures,t[0]);break;default:r=[];for(let e=0;e<t.length&&e<n;e++)r.push(le(t[e]));if(t.length<n)for(let e=t.length;e<n;e++)r.push(null)}return r}const ge={sendNotification:(e,...t)=>{let n,s;if(ue(),o.string(e)){n=e;const r=t[0];let o=0,a=i.ParameterStructures.auto;i.ParameterStructures.is(r)&&(o=1,a=r);let c=t.length;const u=c-o;switch(u){case 0:s=void 0;break;case 1:s=fe(a,t[o]);break;default:if(a===i.ParameterStructures.byName)throw new Error(`Received ${u} parameters for 'by Name' notification parameter structure.`);s=t.slice(o,c).map((e=>le(e)))}}else{const r=t;n=e.method,s=he(e,r)}const a={jsonrpc:N,method:n,params:s};return function(e){if(V!==f.Off&&j)if($===h.Text){let t;V!==f.Verbose&&V!==f.Compact||(t=e.params?`Params: ${ie(e.params)}\n\n`:"No parameters provided.\n\n"),j.log(`Sending notification '${e.method}'.`,t)}else ce("send-notification",e)}(a),r.write(a).catch((e=>{throw E.error("Sending notification failed."),e}))},onNotification:(e,t)=>{let r;return ue(),o.func(e)?x=e:t&&(o.string(e)?(r=e,k.set(e,{type:void 0,handler:t})):(r=e.method,k.set(e.method,{type:e,handler:t}))),{dispose:()=>{void 0!==r?k.delete(r):x=void 0}}},onProgress:(e,t,r)=>{if(D.has(t))throw new Error(`Progress handler for token ${t} already registered`);return D.set(t,r),{dispose:()=>{D.delete(t)}}},sendProgress:(e,t,r)=>ge.sendNotification(d.type,{token:t,value:r}),onUnhandledProgress:W.event,sendRequest:(e,...t)=>{let n,s,a;if(ue(),function(){if(!Y())throw new Error("Call listen() first.")}(),o.string(e)){n=e;const r=t[0],o=t[t.length-1];let u=0,l=i.ParameterStructures.auto;i.ParameterStructures.is(r)&&(u=1,l=r);let d=t.length;c.CancellationToken.is(o)&&(d-=1,a=o);const p=d-u;switch(p){case 0:s=void 0;break;case 1:s=fe(l,t[u]);break;default:if(l===i.ParameterStructures.byName)throw new Error(`Received ${p} parameters for 'by Name' request parameter structure.`);s=t.slice(u,d).map((e=>le(e)))}}else{const r=t;n=e.method,s=he(e,r);const o=e.numberOfParams;a=c.CancellationToken.is(r[o])?r[o]:void 0}const u=w++;let l;a&&(l=a.onCancellationRequested((()=>{const e=X.sender.sendCancellation(ge,u);return void 0===e?(E.log(`Received no promise from cancellation strategy when cancelling id ${u}`),Promise.resolve()):e.catch((()=>{E.log(`Sending cancellation messages for id ${u} failed`)}))})));const d={jsonrpc:N,id:u,method:n,params:s};return function(e){if(V!==f.Off&&j)if($===h.Text){let t;V!==f.Verbose&&V!==f.Compact||!e.params||(t=`Params: ${ie(e.params)}\n\n`),j.log(`Sending request '${e.method} - (${e.id})'.`,t)}else ce("send-request",e)}(d),"function"==typeof X.sender.enableCancellation&&X.sender.enableCancellation(d),new Promise((async(e,t)=>{const o={method:n,timerStart:Date.now(),resolve:t=>{e(t),X.sender.cleanup(u),l?.dispose()},reject:e=>{t(e),X.sender.cleanup(u),l?.dispose()}};try{await r.write(d),F.set(u,o)}catch(e){throw E.error("Sending request failed."),o.reject(new i.ResponseError(i.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),e}}))},onRequest:(e,t)=>{ue();let r=null;return p.is(e)?(r=void 0,A=e):o.string(e)?(r=null,void 0!==t&&(r=e,R.set(e,{handler:t,type:void 0}))):void 0!==t&&(r=e.method,R.set(e.method,{type:e,handler:t})),{dispose:()=>{null!==r&&(void 0!==r?R.delete(r):A=void 0)}}},hasPendingResponse:()=>F.size>0,trace:async(e,t,r)=>{let n=!1,i=h.Text;void 0!==r&&(o.boolean(r)?n=r:(n=r.sendNotification||!1,i=r.traceFormat||h.Text)),V=e,$=i,j=V===f.Off?void 0:t,!n||Z()||ee()||await ge.sendNotification(g.type,{value:f.toString(e)})},onError:q.event,onClose:z.event,onUnhandledNotification:G.event,onDispose:K.event,end:()=>{r.end()},dispose:()=>{if(ee())return;H=C.Disposed,K.fire(void 0);const t=new i.ResponseError(i.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const e of F.values())e.reject(t);F=new Map,B=new Map,U=new Set,L=new s.LinkedMap,o.func(r.dispose)&&r.dispose(),o.func(e.dispose)&&e.dispose()},listen:()=>{ue(),function(){if(Y())throw new I(m.AlreadyListening,"Connection is already listening")}(),H=C.Listening,e.listen(oe)},inspect:()=>{(0,n.default)().console.log("inspect")}};return ge.onNotification(v.type,(e=>{if(V===f.Off||!j)return;const t=V===f.Verbose||V===f.Compact;j.log(e.message,t?e.verbose:void 0)})),ge.onNotification(d.type,(e=>{const t=D.get(e.token);t?t(e.value):W.fire(e)})),ge}},3911:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Disposable=void 0,(t.Disposable||(t.Disposable={})).create=function(e){return{dispose:e}}},7135:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=t.Event=void 0;const n=r(147);!function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class o{add(e,t=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let r=!1;for(let n=0,o=this._callbacks.length;n<o;n++)if(this._callbacks[n]===e){if(this._contexts[n]===t)return this._callbacks.splice(n,1),void this._contexts.splice(n,1);r=!0}if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];const t=[],r=this._callbacks.slice(0),o=this._contexts.slice(0);for(let i=0,s=r.length;i<s;i++)try{t.push(r[i].apply(o[i],e))}catch(e){(0,n.default)().console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class i{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,r)=>{this._callbacks||(this._callbacks=new o),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);const n={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),n.dispose=i._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(n),n}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}t.Emitter=i,i._noop=function(){}},7574:(e,t)=>{"use strict";function r(e){return"string"==typeof e||e instanceof String}function n(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=n,t.stringArray=function(e){return n(e)&&e.every((e=>r(e)))}},6184:(e,t)=>{"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=t.LinkedMap=t.Touch=void 0,function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last}(n=t.Touch||(t.Touch={}));class o{constructor(){this[r]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=n.None){const r=this._map.get(e);if(r)return t!==n.None&&this.touch(r,t),r.value}set(e,t,r=n.None){let o=this._map.get(e);if(o)o.value=t,r!==n.None&&this.touch(o,r);else{switch(o={key:e,value:t,next:void 0,previous:void 0},r){case n.None:this.addItemLast(o);break;case n.First:this.addItemFirst(o);break;case n.Last:default:this.addItemLast(o)}this._map.set(e,o),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const r=this._state;let n=this._head;for(;n;){if(t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");n=n.next}}keys(){const e=this._state;let t=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.key,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return r}values(){const e=this._state;let t=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.value,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return r}entries(){const e=this._state;let t=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:[t.key,t.value],done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return r}[(r=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,r=this.size;for(;t&&r>e;)this._map.delete(t.key),t=t.next,r--;this._head=t,this._size=r,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===n.First||t===n.Last)if(t===n.First){if(e===this._head)return;const t=e.next,r=e.previous;e===this._tail?(r.next=void 0,this._tail=r):(t.previous=r,r.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===n.Last){if(e===this._tail)return;const t=e.next,r=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=r,r.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach(((t,r)=>{e.push([r,t])})),e}fromJSON(e){this.clear();for(const[t,r]of e)this.set(t,r)}}t.LinkedMap=o,t.LRUCache=class extends o{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=n.AsNew){return super.get(e,t)}peek(e){return super.get(e,n.None)}set(e,t){return super.set(e,t,n.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}},5530:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractMessageBuffer=void 0,t.AbstractMessageBuffer=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){const t="string"==typeof e?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(e=!1){if(0===this._chunks.length)return;let t=0,r=0,n=0,o=0;e:for(;r<this._chunks.length;){const e=this._chunks[r];for(n=0;n<e.length;){switch(e[n]){case 13:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case 10:switch(t){case 1:t=2;break;case 3:t=4,n++;break e;default:t=0}break;default:t=0}n++}o+=e.byteLength,r++}if(4!==t)return;const i=this._read(o+n),s=new Map,a=this.toString(i,"ascii").split("\r\n");if(a.length<2)return s;for(let t=0;t<a.length-2;t++){const r=a[t],n=r.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");const o=r.substr(0,n),i=r.substr(n+1).trim();s.set(e?o.toLowerCase():o,i)}return s}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(0===e)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const t=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(t)}if(this._chunks[0].byteLength>e){const t=this._chunks[0],r=this.asNative(t,e);return this._chunks[0]=t.slice(e),this._totalLength-=e,r}const t=this.allocNative(e);let r=0;for(;e>0;){const n=this._chunks[0];if(n.byteLength>e){const o=n.slice(0,e);t.set(o,r),r+=e,this._chunks[0]=n.slice(e),this._totalLength-=e,e-=e}else t.set(n,r),r+=n.byteLength,this._chunks.shift(),this._totalLength-=n.byteLength,e-=n.byteLength}return t}}},6525:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=void 0;const n=r(147),o=r(7574),i=r(7135),s=r(142);var a;(t.MessageReader||(t.MessageReader={})).is=function(e){let t=e;return t&&o.func(t.listen)&&o.func(t.dispose)&&o.func(t.onError)&&o.func(t.onClose)&&o.func(t.onPartialMessage)};class c{constructor(){this.errorEmitter=new i.Emitter,this.closeEmitter=new i.Emitter,this.partialMessageEmitter=new i.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${o.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=c,function(e){e.fromOptions=function(e){let t,r;const o=new Map;let i;const s=new Map;if(void 0===e||"string"==typeof e)t=e??"utf-8";else{if(t=e.charset??"utf-8",void 0!==e.contentDecoder&&(r=e.contentDecoder,o.set(r.name,r)),void 0!==e.contentDecoders)for(const t of e.contentDecoders)o.set(t.name,t);if(void 0!==e.contentTypeDecoder&&(i=e.contentTypeDecoder,s.set(i.name,i)),void 0!==e.contentTypeDecoders)for(const t of e.contentTypeDecoders)s.set(t.name,t)}return void 0===i&&(i=(0,n.default)().applicationJson.decoder,s.set(i.name,i)),{charset:t,contentDecoder:r,contentDecoders:o,contentTypeDecoder:i,contentTypeDecoders:s}}}(a||(a={})),t.ReadableStreamMessageReader=class extends c{constructor(e,t){super(),this.readable=e,this.options=a.fromOptions(t),this.buffer=(0,n.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new s.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;const t=this.readable.onData((e=>{this.onData(e)}));return this.readable.onError((e=>this.fireError(e))),this.readable.onClose((()=>this.fireClose())),t}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){const e=this.buffer.tryReadHeaders(!0);if(!e)return;const t=e.get("content-length");if(!t)return void this.fireError(new Error("Header must provide a Content-Length property."));const r=parseInt(t);if(isNaN(r))return void this.fireError(new Error("Content-Length value must be a number."));this.nextMessageLength=r}const e=this.buffer.tryReadBody(this.nextMessageLength);if(void 0===e)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock((async()=>{const t=void 0!==this.options.contentDecoder?await this.options.contentDecoder.decode(e):e,r=await this.options.contentTypeDecoder.decode(t,this.options);this.callback(r)})).catch((e=>{this.fireError(e)}))}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=(0,n.default)().timer.setTimeout(((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())}),this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}},6654:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=void 0;const n=r(147),o=r(7574),i=r(142),s=r(7135);var a;(t.MessageWriter||(t.MessageWriter={})).is=function(e){let t=e;return t&&o.func(t.dispose)&&o.func(t.onClose)&&o.func(t.onError)&&o.func(t.write)};class c{constructor(){this.errorEmitter=new s.Emitter,this.closeEmitter=new s.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,r){this.errorEmitter.fire([this.asError(e),t,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${o.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=c,function(e){e.fromOptions=function(e){return void 0===e||"string"==typeof e?{charset:e??"utf-8",contentTypeEncoder:(0,n.default)().applicationJson.encoder}:{charset:e.charset??"utf-8",contentEncoder:e.contentEncoder,contentTypeEncoder:e.contentTypeEncoder??(0,n.default)().applicationJson.encoder}}}(a||(a={})),t.WriteableStreamMessageWriter=class extends c{constructor(e,t){super(),this.writable=e,this.options=a.fromOptions(t),this.errorCount=0,this.writeSemaphore=new i.Semaphore(1),this.writable.onError((e=>this.fireError(e))),this.writable.onClose((()=>this.fireClose()))}async write(e){return this.writeSemaphore.lock((async()=>this.options.contentTypeEncoder.encode(e,this.options).then((e=>void 0!==this.options.contentEncoder?this.options.contentEncoder.encode(e):e)).then((t=>{const r=[];return r.push("Content-Length: ",t.byteLength.toString(),"\r\n"),r.push("\r\n"),this.doWrite(e,r,t)}),(e=>{throw this.fireError(e),e}))))}async doWrite(e,t,r){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(r)}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}}},839:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType=t.RequestType0=t.AbstractMessageSignature=t.ParameterStructures=t.ResponseError=t.ErrorCodes=void 0;const n=r(7574);var o,i;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3}(o=t.ErrorCodes||(t.ErrorCodes={}));class s extends Error{constructor(e,t,r){super(t),this.code=n.number(e)?e:o.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,s.prototype)}toJson(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),e}}t.ResponseError=s;class a{constructor(e){this.kind=e}static is(e){return e===a.auto||e===a.byName||e===a.byPosition}toString(){return this.kind}}t.ParameterStructures=a,a.auto=new a("auto"),a.byPosition=new a("byPosition"),a.byName=new a("byName");class c{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return a.auto}}t.AbstractMessageSignature=c,t.RequestType0=class extends c{constructor(e){super(e,0)}},t.RequestType=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType1=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType2=class extends c{constructor(e){super(e,2)}},t.RequestType3=class extends c{constructor(e){super(e,3)}},t.RequestType4=class extends c{constructor(e){super(e,4)}},t.RequestType5=class extends c{constructor(e){super(e,5)}},t.RequestType6=class extends c{constructor(e){super(e,6)}},t.RequestType7=class extends c{constructor(e){super(e,7)}},t.RequestType8=class extends c{constructor(e){super(e,8)}},t.RequestType9=class extends c{constructor(e){super(e,9)}},t.NotificationType=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType0=class extends c{constructor(e){super(e,0)}},t.NotificationType1=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType2=class extends c{constructor(e){super(e,2)}},t.NotificationType3=class extends c{constructor(e){super(e,3)}},t.NotificationType4=class extends c{constructor(e){super(e,4)}},t.NotificationType5=class extends c{constructor(e){super(e,5)}},t.NotificationType6=class extends c{constructor(e){super(e,6)}},t.NotificationType7=class extends c{constructor(e){super(e,7)}},t.NotificationType8=class extends c{constructor(e){super(e,8)}},t.NotificationType9=class extends c{constructor(e){super(e,9)}},(i=t.Message||(t.Message={})).isRequest=function(e){const t=e;return t&&n.string(t.method)&&(n.string(t.id)||n.number(t.id))},i.isNotification=function(e){const t=e;return t&&n.string(t.method)&&void 0===e.id},i.isResponse=function(e){const t=e;return t&&(void 0!==t.result||!!t.error)&&(n.string(t.id)||n.number(t.id)||null===t.id)}},147:(e,t)=>{"use strict";let r;function n(){if(void 0===r)throw new Error("No runtime abstraction layer installed");return r}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");r=e}}(n||(n={})),t.default=n},142:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Semaphore=void 0;const n=r(147);t.Semaphore=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise(((t,r)=>{this._waiting.push({thunk:e,resolve:t,reject:r}),this.runNext()}))}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&(0,n.default)().timer.setImmediate((()=>this.doRunNext()))}doRunNext(){if(0===this._waiting.length||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then((t=>{this._active--,e.resolve(t),this.runNext()}),(t=>{this._active--,e.reject(t),this.runNext()})):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}}},8211:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharedArrayReceiverStrategy=t.SharedArraySenderStrategy=void 0;const n=r(3881);var o;!function(e){e.Continue=0,e.Cancelled=1}(o||(o={})),t.SharedArraySenderStrategy=class{constructor(){this.buffers=new Map}enableCancellation(e){if(null===e.id)return;const t=new SharedArrayBuffer(4);new Int32Array(t,0,1)[0]=o.Continue,this.buffers.set(e.id,t),e.$cancellationData=t}async sendCancellation(e,t){const r=this.buffers.get(t);if(void 0===r)return;const n=new Int32Array(r,0,1);Atomics.store(n,0,o.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};class i{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===o.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}}class s{constructor(e){this.token=new i(e)}cancel(){}dispose(){}}t.SharedArrayReceiverStrategy=class{constructor(){this.kind="request"}createCancellationTokenSource(e){const t=e.$cancellationData;return void 0===t?new n.CancellationTokenSource:new s(t)}}},4389:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.createServerSocketTransport=t.createClientSocketTransport=t.createServerPipeTransport=t.createClientPipeTransport=t.generateRandomPipeName=t.StreamMessageWriter=t.StreamMessageReader=t.SocketMessageWriter=t.SocketMessageReader=t.PortMessageWriter=t.PortMessageReader=t.IPCMessageWriter=t.IPCMessageReader=void 0;const i=r(3034);i.default.install();const s=r(1017),a=r(2037),c=r(6113),u=r(1808),l=r(3870);o(r(3870),t);class d extends l.AbstractMessageReader{constructor(e){super(),this.process=e;let t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose()))}listen(e){return this.process.on("message",e),l.Disposable.create((()=>this.process.off("message",e)))}}t.IPCMessageReader=d;class p extends l.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;const t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose))}write(e){try{return"function"==typeof this.process.send&&this.process.send(e,void 0,void 0,(t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0})),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}}t.IPCMessageWriter=p;class f extends l.AbstractMessageReader{constructor(e){super(),this.onData=new l.Emitter,e.on("close",(()=>this.fireClose)),e.on("error",(e=>this.fireError(e))),e.on("message",(e=>{this.onData.fire(e)}))}listen(e){return this.onData.event(e)}}t.PortMessageReader=f;class h extends l.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",(()=>this.fireClose())),e.on("error",(e=>this.fireError(e)))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}}t.PortMessageWriter=h;class g extends l.ReadableStreamMessageReader{constructor(e,t="utf-8"){super((0,i.default)().stream.asReadableStream(e),t)}}t.SocketMessageReader=g;class v extends l.WriteableStreamMessageWriter{constructor(e,t){super((0,i.default)().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}}t.SocketMessageWriter=v;class m extends l.ReadableStreamMessageReader{constructor(e,t){super((0,i.default)().stream.asReadableStream(e),t)}}t.StreamMessageReader=m;class y extends l.WriteableStreamMessageWriter{constructor(e,t){super((0,i.default)().stream.asWritableStream(e),t)}}t.StreamMessageWriter=y;const _=process.env.XDG_RUNTIME_DIR,S=new Map([["linux",107],["darwin",103]]);t.generateRandomPipeName=function(){const e=(0,c.randomBytes)(21).toString("hex");if("win32"===process.platform)return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;t=_?s.join(_,`vscode-ipc-${e}.sock`):s.join(a.tmpdir(),`vscode-${e}.sock`);const r=S.get(process.platform);return void 0!==r&&t.length>r&&(0,i.default)().console.warn(`WARNING: IPC handle "${t}" is longer than ${r} characters.`),t},t.createClientPipeTransport=function(e,t="utf-8"){let r;const n=new Promise(((e,t)=>{r=e}));return new Promise(((o,i)=>{let s=(0,u.createServer)((e=>{s.close(),r([new g(e,t),new v(e,t)])}));s.on("error",i),s.listen(e,(()=>{s.removeListener("error",i),o({onConnected:()=>n})}))}))},t.createServerPipeTransport=function(e,t="utf-8"){const r=(0,u.createConnection)(e);return[new g(r,t),new v(r,t)]},t.createClientSocketTransport=function(e,t="utf-8"){let r;const n=new Promise(((e,t)=>{r=e}));return new Promise(((o,i)=>{const s=(0,u.createServer)((e=>{s.close(),r([new g(e,t),new v(e,t)])}));s.on("error",i),s.listen(e,"127.0.0.1",(()=>{s.removeListener("error",i),o({onConnected:()=>n})}))}))},t.createServerSocketTransport=function(e,t="utf-8"){const r=(0,u.createConnection)(e,"127.0.0.1");return[new g(r,t),new v(r,t)]},t.createMessageConnection=function(e,t,r,n){r||(r=l.NullLogger);const o=function(e){const t=e;return void 0!==t.read&&void 0!==t.addListener}(e)?new m(e):e,i=function(e){const t=e;return void 0!==t.write&&void 0!==t.addListener}(t)?new y(t):t;return l.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,l.createMessageConnection)(o,i,r,n)}},3034:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3837),o=r(3870);class i extends o.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return i.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){return e instanceof Buffer?e.toString(t):new n.TextDecoder(t).decode(e)}asNative(e,t){return void 0===t?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}}i.emptyBuffer=Buffer.allocUnsafe(0);class s{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),o.Disposable.create((()=>this.stream.off("close",e)))}onError(e){return this.stream.on("error",e),o.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){return this.stream.on("end",e),o.Disposable.create((()=>this.stream.off("end",e)))}onData(e){return this.stream.on("data",e),o.Disposable.create((()=>this.stream.off("data",e)))}}class a{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),o.Disposable.create((()=>this.stream.off("close",e)))}onError(e){return this.stream.on("error",e),o.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){return this.stream.on("end",e),o.Disposable.create((()=>this.stream.off("end",e)))}write(e,t){return new Promise(((r,n)=>{const o=e=>{null==e?r():n(e)};"string"==typeof e?this.stream.write(e,t,o):this.stream.write(e,o)}))}end(){this.stream.end()}}const c=Object.freeze({messageBuffer:Object.freeze({create:e=>new i(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(e){return Promise.reject(e)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new n.TextDecoder(t.charset).decode(e)))}catch(e){return Promise.reject(e)}}})}),stream:Object.freeze({asReadableStream:e=>new s(e),asWritableStream:e=>new a(e)}),console,timer:Object.freeze({setTimeout(e,t,...r){const n=setTimeout(e,t,...r);return{dispose:()=>clearTimeout(n)}},setImmediate(e,...t){const r=setImmediate(e,...t);return{dispose:()=>clearImmediate(r)}},setInterval(e,t,...r){const n=setInterval(e,t,...r);return{dispose:()=>clearInterval(n)}}})});function u(){return c}!function(e){e.install=function(){o.RAL.install(c)}}(u||(u={})),t.default=u},5028:(e,t,r)=>{"use strict";e.exports=r(4389)},9279:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAUI_WORKLOAD_URL=t.MAUI_EXTENSION_URL=t.MAUI_EXTENSION_ID=t.NET_RUNTIME_VERSION_PATCH=t.NET_RUNTIME_VERSION=t.CSHARP_EXTENSION_SUPPORTS_DEFERRAL_VERSION=t.CSHARP_EXTENSION_REQUIRED_VERSION=t.CSHARP_EXTENSION_ID=t.EXTENSION_ID=void 0,t.EXTENSION_ID="ms-dotnettools.csdevkit",t.CSHARP_EXTENSION_ID="ms-dotnettools.csharp",t.CSHARP_EXTENSION_REQUIRED_VERSION="2.0.0",t.CSHARP_EXTENSION_SUPPORTS_DEFERRAL_VERSION="2.4.0",t.NET_RUNTIME_VERSION="8.0",t.NET_RUNTIME_VERSION_PATCH="0",t.MAUI_EXTENSION_ID="ms-dotnettools.dotnet-maui",t.MAUI_EXTENSION_URL="https://marketplace.visualstudio.com/items?itemName=ms-dotnettools.dotnet-maui",t.MAUI_WORKLOAD_URL="https://learn.microsoft.com/dotnet/maui/get-started/installation?tabs=visual-studio-code#install-net-and-net-maui-workloads"},6051:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomBuildTaskTerminal=void 0;const n=r(9496),o=r(2081),i=r(8242),s=r(2037);t.CustomBuildTaskTerminal=class{command;args;cwd;writeEmitter=new n.EventEmitter;onDidWrite=this.writeEmitter.event;closeEmitter=new n.EventEmitter;onDidClose=this.closeEmitter.event;constructor(e,t,r){this.command=e,this.args=t,this.cwd=r}async open(e){await this.executeBuild()}close(){}async executeBuild(){let e="dotnet "+this.args.join(" ");this.writeEmitter.fire(e+" \r\n"),(0,i.startBuild)();let t="",r="";const n=o.spawn(this.command,this.args,{cwd:this.cwd});n.stdout.on("data",(e=>{t=t.concat(e);let r=this.formatResult(e);this.writeEmitter.fire(r)})),n.stderr.on("data",(e=>{r=r.concat(e);let t=this.formatResult(e);this.writeEmitter.fire(t)})),n.on("close",(e=>{(0,i.reportBuildResultsToCSharpExtension)(t),this.closeEmitter.fire(e??1)})),n.on("error",(e=>{console.log(`child process exited with code ${e}`)}))}formatResult(e){return e.toString().replaceAll(s.EOL,"\n\r")}}},9397:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dotnetSolutionBuildActionUsingTask=t.getAllProjects=t.getOpenedWorkspaceHelper=t.DotnetTaskProvider=void 0;const n=r(9496),o=r(9279),i=r(5300),s=r(695),a=r(7195),c=r(519),u=r(3228),l=r(6051),d=r(8242),p="watch",f="rebuild",h="--no-incremental";class g{static dotnetType="dotnet";cachedTasks=void 0;cachedTasksNames=new Set;lastOpenedSolution=void 0;autoDetect=v.on;constructor(){n.workspace.onDidChangeConfiguration(this.onConfigurationChanged,this),this.onConfigurationChanged()}async provideTasks(){if(this.autoDetect===v.off)return;const e=await(0,i.getOpenedSolution)();if(this.lastOpenedSolution!==e){this.lastOpenedSolution=e,this.cachedTasks=await async function(){const e=n.workspace.workspaceFolders,t=[];if(!e||0===e.length)return t;const r=await(0,i.getOpenedSolution)(),o=y();if(r&&o){const e=await m(o,s.BUILD,r,{taskGroup:n.TaskGroup.Build,persistFilePath:!1});e&&t.push(e);const i=await m(o,s.CLEAN,r,{taskGroup:n.TaskGroup.Clean,persistFilePath:!1});i&&t.push(i);const a=await _();a&&a.forEach((async e=>{const r=await m(o,`${p} ${e.Name}`,e.Path,{action:p});r&&t.push(r)}))}return t}(),this.cachedTasksNames.clear();for(const e of this.cachedTasks)this.cachedTasksNames.add(e.name)}return this.cachedTasks}async resolveTask(e){if(e.definition.task){const t=e.definition;if(t.task.startsWith(p)&&t.file)return m(e.scope??n.TaskScope.Workspace,e.name,t.file,{taskGroup:e.group,action:p,persistFilePath:!0,taskDefinition:t});if(t.task.startsWith(s.BUILD)||t.task.startsWith(s.CLEAN)||t.task.startsWith(f)){const r=await(0,i.getOpenedSolution)(),o=y();if(r&&o){const o=t?.file??r;return m(e.scope??n.TaskScope.Workspace,e.name,o,{taskGroup:e.group,persistFilePath:!1,taskDefinition:t})}}}}onConfigurationChanged(){const e=n.workspace.getConfiguration("dotnet").get("autoDetect");this.autoDetect=void 0===e?v.on:e}cacheNewTask(e){if(e.definition.type!==g.dotnetType)throw new Error(`Error: Trying to cache a task that is not ${g.dotnetType}. Actual type ${e.definition.type}`);this.cachedTasks?this.cachedTasksNames.has(e.name)||(this.cachedTasksNames.add(e.name),this.cachedTasks.push(e)):(this.cachedTasksNames.add(e.name),this.cachedTasks=[e])}}var v;async function m(e,t,r,o){if(!o?.action)switch(o?.taskGroup?.id){case n.TaskGroup.Build.id:case n.TaskGroup.Rebuild.id:o.action=s.BUILD;break;case n.TaskGroup.Clean.id:o.action=s.CLEAN;break;default:return}const c=o?.taskDefinition??{type:g.dotnetType,task:t,file:o?.persistFilePath??1?r:void 0};let f;const v=function(){const e=a.environmentStateManager?.getLatestEnvironmentState()?.configuration;if("string"!=typeof e)return{configurationName:void 0,platformName:void 0};const t=e.split("|",2);return{configurationName:t[0]||void 0,platformName:t[1]||void 0}}(),m=v.platformName?"Any CPU"===(_=v.platformName)?"AnyCPU":_:void 0;var _;if(o?.action===p)f=[o.action,"--project",r];else if((o?.taskGroup?.id===n.TaskGroup.Rebuild.id||o?.taskGroup?.id===n.TaskGroup.Build.id)&&(0,u.endsWithInvariantIgnoreCase)(r,".csproj")&&o?.projectTarget){const e=await(0,i.getOpenedSolution)();o?.taskGroup?.id===n.TaskGroup.Rebuild.id&&(o.projectTarget+=":rebuild"),f=e?[o.action,e,o.projectTarget,"/property:GenerateFullPaths=true","/consoleloggerparameters:NoSummary"]:[o.action,r,h,"/property:GenerateFullPaths=true","/consoleloggerparameters:NoSummary"],v.configurationName&&f.push(`/p:Configuration=${v.configurationName}`);const t=e?v.platformName:m;t&&f.push(`/p:Platform="${t}"`)}else if(f=o?.taskGroup?.id===n.TaskGroup.Rebuild.id?[o.action,r,h,"/property:GenerateFullPaths=true","/consoleloggerparameters:NoSummary"]:[o.action,r,"/property:GenerateFullPaths=true","/consoleloggerparameters:NoSummary"],o?.taskGroup?.id===n.TaskGroup.Rebuild.id||o?.taskGroup?.id===n.TaskGroup.Build.id||o?.taskGroup?.id===n.TaskGroup.Clean.id){v.configurationName&&f.push(`/p:Configuration=${v.configurationName}`);const e=(0,u.endsWithInvariantIgnoreCase)(r,".csproj")?m:v.platformName;e&&f.push(`/p:Platform="${e}"`)}let S;if(await(0,d.isCSharpExtensionBuildResultServiceAvailable)()){const r=y();if(!r)return void a.logger.log("Cannot find the current workspace folder. The build operation is aborted.");const o=new n.CustomExecution((async()=>new l.CustomBuildTaskTerminal("dotnet",f,r.uri.fsPath)));S=new n.Task(c,e,t,"dotnet",o)}else{a.logger.log("Microsoft.VisualStudio.CSharpExtension.BuildResultService not found.");const r={env:{DOTNET_CLI_UI_LANGUAGE:n.env.language}},o=new n.ProcessExecution("dotnet",f,r);S=new n.Task(c,e,t,"dotnet",o),S.problemMatchers=["$msCompile"]}return S.group=o.taskGroup,S}function y(){if(n.workspace.workspaceFolders&&n.workspace.workspaceFolders.length>=1)return a.environmentStateManager?.getActiveWorkspace()}async function _(){const e=n.extensions.getExtension(o.EXTENSION_ID);if(!e)throw new Error("Unable to find the extension.");const t=e.exports.serviceBroker,r=new c.ProjectQueryableSpace(t),i={context:"Projects",query:{$properties:["Name","Path"],$filter:{ProjectsByCapabilities:["!SharedAssetsProject"]}}};return await a.logger.watch("Query for all projects",(async()=>{const e=await r.executeQuery(i),t=[];return e&&e.Items?.forEach((e=>{e&&t.push(e)})),t}),{catchUnhandledErrors:!0})}t.DotnetTaskProvider=g,function(e){e.on="on",e.off="off"}(v||(v={})),t.getOpenedWorkspaceHelper=y,t.getAllProjects=_,t.dotnetSolutionBuildActionUsingTask=async function(e,t,r,o,c){const u=n.workspace.workspaceFolders;if(!u||0===u.length||!u[0])return{success:Promise.resolve(!1)};var l=void 0,d=e;e===s.BUILD?r?(l=n.TaskGroup.Rebuild,d=f):l=n.TaskGroup.Build:e===s.CLEAN&&(l=n.TaskGroup.Clean);var p=void 0;const h=t.toUpperCase(),v={type:g.dotnetType},_=await n.tasks.fetchTasks(v);for(const e of _){const t=e.definition;if(t&&t.task.startsWith(d)&&(t.file?.toUpperCase()===h||void 0===t.file&&h.endsWith(".SLN"))){if(void 0===t.file){const e=await(0,i.getOpenedSolution)();if(e?.toUpperCase()!==h)continue}p=e;break}}if(!p){const e=y();if(e&&(p=await m(e,`${d} ${t}`,t,{taskGroup:l,projectTarget:o}))&&c){if(!a.dotnetTaskProvider)return{success:Promise.resolve(!1)};a.dotnetTaskProvider.cacheNewTask(p)}}return p?{taskName:`${p.definition.type}: ${p.name}`,success:new Promise((async(e,t)=>{const r=n.tasks.onDidEndTaskProcess((t=>{t.execution.task===p&&(r.dispose(),e(0===t.exitCode))}));try{await n.tasks.executeTask(p)}catch(e){r.dispose(),t(e)}}))}:{success:Promise.resolve(!1)}}},1297:(e,t)=>{"use strict";function r(e){const t=()=>{if(void 0===t.value&&t.loader&&(t.value=t.loader()),void 0===t.value)throw new Error("No loader o value was supplied.");return t.value};return t.loader=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.setLazyLoadMutable=t.delayedLoadMutable=t.lazyLoadNotImplemented=t.lazyLoadMutable=t.lazyLoad=void 0,t.lazyLoad=function(e){let t;return(r=!0)=>void 0!==t?t:r?t=e():void 0},t.lazyLoadMutable=r,t.lazyLoadNotImplemented=function(){throw new Error("Dependencies: Instance not provided.")},t.delayedLoadMutable=function(e){return r((()=>{throw Error(`Dependencies: ${e} is not yet initialized`)}))},t.setLazyLoadMutable=function(e,t){return"function"==typeof t&&(e.loader=t),e}},9781:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonOutputMonitor=t.OutputMonitor=t.StepProgressLogger=t.NuGetLogger=t.Logger=t.LoggerBase=t.LogImportance=void 0;const n=r(9496),o=r(77),i=r(2677);var s;!function(e){e[e.low=0]="low",e[e.normal=1]="normal",e[e.high=2]="high"}(s||(t.LogImportance=s={}));class a{async watch(e,t,r){const n=r?.importance;this.log(`Starting ${e}...`,n);const i=performance.now();try{const r=await t(),o=performance.now();return this.log(`Completed ${e} (${(o-i).toFixed()}ms)`,n),r}catch(t){const s=performance.now();if(this.log(`Failed at '${e}' (${(s-i).toFixed()}ms) with error: ${t}`,n),r?.telemetry?.addOrUpdateProperties({succeeded:String(!1),error:t instanceof Error?t.name:"error"}),r?.telemetry?.addOrUpdateMeasurements({errorCode:t instanceof o.ErrorCodeError?t.errorCode:void 0}),!r?.catchUnhandledErrors)throw t}}}t.LoggerBase=a;class c extends a{outputChannel;level;constructor(e){switch(super(),this.outputChannel="string"==typeof e?n.window.createOutputChannel(e):e,this.level=s.normal,process.env.MINIMUM_LOG_LEVEL?.toLowerCase()){case"low":this.level=s.low;break;case"normal":this.level=s.normal;break;case"high":this.level=s.high}}log(e,t){(void 0===t||t>=this.level)&&this.outputChannel.appendLine(e)}reportExceptionTelemetryAndLog(e,t,r,n,o,i){let a=null,c=n;c&&(a=c.stack??null);let u={methodName:e,fault:t=t??"(missing)",errorName:r??""};a&&(u.exceptionStack=a),o?.sendTelemetryErrorEvent(c,{...u,...i}),this.log("Error occurred in "+e+": "+n,s.high)}}t.Logger=c;class u extends c{static userInteractionRequiredMessage="[CredentialProvider]ATTENTION: User interaction required.";log(e,t){super.log(e,t),e.includes(u.userInteractionRequiredMessage)&&n.window.showWarningMessage(i.NuGet.requiresCredentialsMessage,i.NuGet.showDeviceCodeLoginInfo).then((e=>{e===i.NuGet.showDeviceCodeLoginInfo&&this.outputChannel.show()}))}}t.NuGetLogger=u,t.StepProgressLogger=class{logger;name;constructor(e,t){this.logger=e,this.name=t}report(e){this.logger.log(`${this.name}: Step ${e.currentStep} of ${e.totalSteps}.`)}};class l extends a{outputLog;constructor(){super(),this.outputLog=[]}log(e){this.outputLog.push(e)}getOutput(){return this.outputLog.join("")}clearOutput(){this.outputLog=[]}}t.OutputMonitor=l,t.JsonOutputMonitor=class extends l{logger;constructor(e){super(),this.logger=e}log(e){super.log(e),this.logger.log(e)}getOutput(){const e=super.getOutput();return this.extractJson(e)}extractJson(e){const t=e.indexOf("{"),r=e.lastIndexOf("}");if(-1===t||-1===r)throw new Error("No valid JSON object found in the output");return e.slice(t,r+1)}}},8343:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prepareBrokeredServices=void 0;const n=r(9679),o=r(3292),i=r(9496),s=r(7631),a=r(9781),c=r(1925),u=r(5056),l=r(1694),d=r(5979),p=r(2485),f=r(5158),h=r(2902),g=r(8240),v=r(2743),m=r(3228),y=r(9491),_=r(1017),S=r(1855),E=r(1467),w=r(8349),b=r(965),T=r(2300),C=r(7787),P=r(979),I=r(6315),O=r(2188),N=r(277),A=r(5825),R=r(9751),x=r(7407),k=r(8305),D=r(700);function M(e,t,r){const o=[],i=new n.ServiceRegistration(n.ServiceAudience.local,!1,(()=>t));for(const t of e)o.push({moniker:t.moniker,registration:i,serviceHub:{serviceModuleInfo:t.serviceModuleInfo,baseDir:t.baseDir}}),r.log(`Registered ServiceHub-hosted brokered service ${n.ServiceMoniker.toString(t.moniker)}.`,a.LogImportance.low);return o}async function j(e){const t=(await(0,o.readdir)(e)).filter((e=>e.endsWith(".servicehub.service.json")));let r=[];for(const o of t){const t=n.ServiceMoniker.create(o.slice(0,o.length-24)),i=await(0,m.readJsonFile)(_.join(e,o));r.push({moniker:t,serviceModuleInfo:i,baseDir:e})}return r}async function L(e){const t=_.join(e,"platforms"),r=await(0,o.readdir)(t,{withFileTypes:!0});let n=[];for(const e of r)if(e.isDirectory()){const r=_.join(t,e.name);if((await(0,o.readdir)(_.join(r))).indexOf("node_modules")>=0){const e=await(0,w.getPackageInfo)(r);for(const t of e){const e=_.resolve(r,"node_modules",t.fullName);n.push(...await j(e))}}}return n}t.prepareBrokeredServices=async function(e,t,r){const w=new n.GlobalBrokeredServiceContainer,F=w.getFullAccessServiceBroker();let U=!1,B=new i.EventEmitter;const V=(0,m.lazyPromiseLambda)((()=>(U=!0,B.fire(),r.watch("Spawn .NET server",(()=>(0,c.launchDotNetServer)(e,t,w))))));let $,H=!1;const q=(0,m.lazyPromiseLambda)((()=>(H=!0,r.watch("Register services with .NET server",(async()=>{await async function(e,t){const r=await t.getProxy(d.default.outOfProcServiceRegistration);try{y(r);for(const{moniker:t,serviceHub:n}of e)n?await r.registerServiceHubService(t,n.serviceModuleInfo,n.baseDir):await r.registerParentProcessService(t)}finally{r?.dispose()}}($,F)}),{importance:a.LogImportance.low}))));$=await async function(e,t,r,n,o){const i=await(0,s.loadOrCreateCachedValue)(e,"brokered-services-from-components",(async()=>{const e={};for(const t in r){const n=r[t];let o=await j(n);o.length>0&&(e[t]=o)}return e})),a=[];for(const e in i)a.push(...M(i[e],n,o));return t.register(a),a}(e,w,t,q,r),$.push(...await async function(e,t,r,s){const c=b.idsOfExtensionsAllowedToExtendCsDevKit.map((e=>i.extensions.getExtension(e))),u=[];for(const i of c)if(i)try{const c=i.packageJSON;if(c.brokeredServices){const o=(0,m.lazyPromiseLambda)((async()=>{await s.watch(`JIT proffering brokered services from the '${i.id}' extension `,(async function(){await i.activate(),i.exports.profferBrokeredServices&&i.exports.profferBrokeredServices(e)}),{importance:a.LogImportance.low})}));for(const e of c.brokeredServices){let c,l;e.serviceHub?(c=Array.isArray(e.moniker)||e.moniker.name!==d.default.outOfProcServiceRegistration.moniker.name?async function(e,t){await s.watch(`JIT proffering for ${n.ServiceMoniker.toString(t)} is awaiting for the .NET server`,(async function(){await r}),{importance:a.LogImportance.low})}:async function(e,r){await t},l=".NET runtime"):(c=(e,t)=>o,l="Extension Host");const p=new n.ServiceRegistration(e.audience??n.ServiceAudience.local,e.allowGuestClients??!1,c);if(Array.isArray(e.moniker))for(const t of e.moniker)u.push({moniker:t,registration:p,isInProcVsServer:!!e.serviceHub}),s.log(`Registered ${l}-hosted brokered service ${n.ServiceMoniker.toString(t)} from extension ${i.id}.`,a.LogImportance.low);else u.push({moniker:e.moniker,registration:p,isInProcVsServer:!!e.serviceHub}),s.log(`Registered ${l}-hosted brokered service ${n.ServiceMoniker.toString(e.moniker)} from extension ${i.id}.`,a.LogImportance.low)}}if(c.serviceHubServiceDirectories)for(const e of c.serviceHubServiceDirectories){const t=_.join(i.extensionPath,e);let n=await j(t);(await(0,o.readdir)(t)).indexOf("platforms")>=0&&n.push(...await L(t));for(const e of M(n,r,s))u.push({...e,isInProcVsServer:!1})}}catch(e){s.log(`Error trying to register services from extension ${i.id}: ${e}`)}return e.register(u),i.extensions.onDidChange((()=>{})),u.filter((e=>!e.isInProcVsServer))}(w,V,q,r)),y(!H);const z={serviceBroker:F,getBrokeredServiceServerPipeName:async()=>(await V).brokeredServiceServerPipeName,hasServerProcessLoaded:()=>U,serverProcessLoaded:B.event};return function(e,t,r,n){e.subscriptions.push(t.profferServiceFactory(d.default.helloWorld.extensionHost,((e,t,r)=>new f.HelloWorld(r)))),e.subscriptions.push(t.profferServiceFactory(d.default.tokenAcquisitionService,((e,t,r)=>new h.TokenAcquisitionService))),e.subscriptions.push(t.profferServiceFactory(d.default.errorReportingService,((t,r,n)=>new p.ErrorReportingService(e)))),e.subscriptions.push(t.profferServiceFactory(d.default.activeDocumentsInformationService,((e,t,r)=>new u.ActiveDocumentsInformationService))),e.subscriptions.push(t.profferServiceFactory(d.default.buildService,((e,t,r)=>new S.BuildService)));const o=(0,m.lazyPromiseLambda)((()=>l.ComponentExportsState.create(e,r)));e.subscriptions.push(t.profferServiceFactory(d.default.componentExportsService,(async()=>new l.ComponentExportsService(await o)))),e.subscriptions.push(t.profferServiceFactory(d.default.vsCodeFileWatcherService,((e,t,r)=>new O.VsCodeFileWatcherService(t))));const s=new E.BrokeredServiceExportsRegistrarState;e.subscriptions.push(t.profferServiceFactory(d.default.brokeredServiceExportsRegistrar,(()=>new E.BrokeredServiceExportsRegistrar(s))));const a=(0,m.lazyPromiseLambda)((async()=>i.window.createOutputChannel("NuGet"))),c=(0,m.lazyPromiseLambda)((async()=>g.NuGetSolutionRestoreState.create(await a)));e.subscriptions.push(t.profferServiceFactory(d.default.nugetSolutionRestoreService,(async(e,t,r)=>new g.NuGetSolutionRestoreService(await c,t))));const y=(0,m.lazyPromiseLambda)((async()=>v.LogOutputChannelState.create()));e.subscriptions.push(t.profferServiceFactory(d.default.logOutputChannelService,(async(e,t,r)=>(await y).createOutputChannel(t)))),e.subscriptions.push(t.profferServiceFactory(d.default.hotReloadLogger,((e,t,r)=>T.hotReloadLogger))),e.subscriptions.push(t.profferServiceFactory(d.default.hotReloadClientListener,((e,t,r)=>new C.HotReloadClientListener))),e.subscriptions.push(t.profferServiceFactory(d.default.hotReloadOptionService,((e,t,r)=>P.hotReloadOptionService))),e.subscriptions.push(t.profferServiceFactory(d.default.dotnetDebugConfigurationService,((e,t,r)=>new I.DotnetDebugConfigurationService(r,n)))),e.subscriptions.push(t.profferServiceFactory(d.default.dotnetDebugLaunchService,((e,t,r)=>new D.DotnetDebugLaunchService(n)))),e.subscriptions.push(t.profferServiceFactory(d.default.nugetCommandsService,((e,t,r)=>new N.NuGetDotnetCommandsService(a)))),e.subscriptions.push(t.profferServiceFactory(d.default.workspaceConfigurationOptionsService,((e,t,r)=>A.workspaceConfigurationOptionsService)));const _=(0,m.lazyPromiseLambda)((async()=>R.OutputChannelState.create()));e.subscriptions.push(t.profferServiceFactory(d.default.outputChannelService,(async(e,t,r)=>(await _).createOutputChannel(t)))),e.subscriptions.push(t.profferServiceFactory(d.default.startupProjectService,((e,t,r)=>new k.FilteredStartupProjectService(x.startupProjectService))))}(e,w,t,z),z}},7631:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCacheDirectory=t.loadOrCreateCachedValue=t.isCacheEnabled=void 0;const n=r(7147),o=r(3292),i=r(9496),s=r(1017),a="utf8";function c(e){return e.extensionMode===i.ExtensionMode.Production||false}let u;function l(e){return s.join(e.extensionPath,"cache")}function d(e){return s.join(l(e),"discovery.json")}t.isCacheEnabled=c,t.loadOrCreateCachedValue=async function(e,t,r){let i;if(c(e)&&(u??=async function(e){const t=d(e);try{const e=(0,n.readFileSync)(t);return JSON.parse(e.toString(a))}catch{return{}}}(e),i=await u,t in i))return i[t];const l=await r();return i&&(i[t]=l,await async function(e,t){const r=d(e);await(0,o.mkdir)(s.dirname(r),{recursive:!0}),await(0,o.writeFile)(r,JSON.stringify(t),{encoding:a})}(e,i)),JSON.parse(JSON.stringify(l))},t.getCacheDirectory=l},2155:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9496),o=r(2181),i=r(9279),s=r(5300),a=r(7195),c=r(5979),u=r(9994),l=r(1017),d=r(2906),p=r(2677),f=r(5010),h=r(3228);t.default=async function(e){const t=n.extensions.getExtension(i.EXTENSION_ID);if(!t)throw new Error("Unable to find the extension");if(e.contextValue===o.contextValues.solutionFolder){const r=t.exports.serviceBroker,o=await(0,s.getOpenedSolution)(),i=u.getActiveWorkspaceRoot();let g=i;o&&(0,h.containsFileOrFolder)(i,o)&&(g=l.dirname(o));const v=await n.window.showOpenDialog({canSelectFolders:!1,canSelectFiles:!0,canSelectMany:!1,title:p.promptStrings.addExistingFile,openLabel:p.promptStrings.selectFile,defaultUri:n.Uri.file(g)});if(!v)return;const m=v[0].fsPath,y=l.parse(m).base,_=l.relative(l.dirname(o),m),S=new f.TelemetryActivity("add-existing-file",a.telemetryService),E=await r.getProxy(c.default.solutionFileService);try{await a.logger.watch("Add an existing solution file.",(async function(){let t=e.node.ProjectGuid;t&&0!==t.length||(t=u.emptyGuid),await(E?.addSolutionItem(t,_)),n.window.showTextDocument(n.Uri.file(m)),(0,d.expandToNewNode)(e,y)}),{telemetry:S,catchUnhandledErrors:!0})}finally{S.end(),S.sendTelemetry(),E?.dispose()}}}},2614:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9496),o=r(7195),i=r(9994),s=r(5300),a=r(1017),c=r(9994),u=r(2677);t.default=async function(e,t){const r=await(0,s.getOpenedSolution)(),l=i.getActiveWorkspaceRoot(),d=i.parseSolutionFolderFromContextMenu(t),p={};p[u.promptStrings.projectFilesFilterName]=["csproj"];const f=await n.window.showOpenDialog({canSelectFolders:!1,canSelectFiles:!0,canSelectMany:!1,title:u.promptStrings.addExistingProject,filters:p,openLabel:u.promptStrings.chooseProjectFileLabel,defaultUri:n.Uri.file(l)});f&&await async function(e,t,r,n,u){await o.logger.watch("Add existing project",(async()=>{const o=a.parse(r).name;await(0,c.doesSolutionContainProject)(o)||(n=await i.ensureSolutionFile(e,t,r,n),await i.addProjectToSolution(t,n,r,u),await(0,s.reloadSolution)(n))}))}(e,l,f[0].fsPath,r,d)}},1106:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7147),o=r(9496),i=r(7195),s=r(5979),a=r(519),c=r(2677),u=r(5010),l=r(3228),d=r(2181),p=r(2906),f=r(5300),h=r(9994),g=r(9994),v=r(1017),m=r(840),y=r(279);function _(e){return e.contextValue===d.contextValues.project?e.node.Path:_(e.parentNode)}async function S(e,t,r){const n=new a.ProjectQueryableSpace(e),o={update:{target:{context:"Projects",query:{$filter:{ProjectsByProjectGuid:[[t.node.ProjectGuid]]},$properties:["Id"]}},steps:[{AddFiles:{ItemsPath:[r]}}]}},s=await n.executeAction(o);s.Errors&&s.Errors.forEach((e=>{i.logger.log(e.Message)}))}async function E(e,t,r){let n=t.node.ProjectGuid;n&&0!==n.length||(n=h.emptyGuid),await(e?.addSolutionItem(n,r))}function w(e,t){return t&&e.length>t.length&&e.substring(e.length-t.length).toLowerCase()===t?e.substring(0,e.length-t.length-1):e}function b(e,t,r){const o=r?t+"."+r:t;return(0,n.existsSync)(v.join(e,o))?c.addNewItemUiStrings.fileExists:null}t.default=async function(e){if(!o.workspace.getConfiguration("csharp.experimental").get("dotnetNewIntegration",!0))return(0,m.default)(e);if(e.contextValue!==d.contextValues.solutionFolder&&e.contextValue!==d.contextValues.project&&e.contextValue!==d.contextValues.folder)return;const t=await(0,y.getTemplateService)();if(!t)return;const r=e.contextValue===d.contextValues.solutionFolder,a=await async function(e,t){if(t){const e=h.getActiveWorkspaceRoot(),t=await(0,f.getOpenedSolution)();return t&&(0,l.containsFileOrFolder)(e,t)?v.dirname(t):e}return e.contextValue===d.contextValues.project?v.dirname(e.node.Path):e.node.Path}(e,r);if(!(0,g.isWorkingDirectoryInWorkspace)(a))return void i.logger.log(`The selected node's path is located outside the workspace. ${a}`);const T=r?void 0:_(e),C=await async function(e,t){const r=t?await e.getProjectItemTemplates(t):await e.getSolutionItemTemplates();if(!r)throw new Error("Unable to fetch item templates");const n=r.map((e=>({label:e.name,defaultName:e.defaultName,groupIdentity:e.groupIdentity,fixedFile:e.fixedFile,fileExtension:e.fileExtension}))).concat({label:c.addNewItemUiStrings.custom,defaultName:"",groupIdentity:"custom",fixedFile:!1,fileExtension:""});return n.sort(((e,t)=>e.label.localeCompare(t.label))),await o.window.showQuickPick(n,{title:c.addNewItemUiStrings.createNewFile,placeHolder:c.addNewItemUiStrings.searchForTemplates})}(t,T);if(!C)return;var P=C.defaultName;if(C.fixedFile&&b(a,P,C.fileExtension)){const t=r?c.addNewItemUiStrings.addExistingFileToSolutionFolder(P):c.addNewItemUiStrings.addExistingFileToProject(P);if(await o.window.showQuickPick([c.addNewItemUiStrings.yes,c.addNewItemUiStrings.cancel],{placeHolder:t})!==c.addNewItemUiStrings.yes)return;const n=new u.TelemetryActivity("add-new-file",i.telemetryService);n.addOrUpdateProperties({solutionExplorerNodeType:e.node.NodeType,existingFileAdded:"true",templateGroupIdentity:C.groupIdentity});const l=h.getExtensionBrokerService(),d=await l.getProxy(s.default.solutionFileService);try{await i.logger.watch("Add a file to project/solution folder",(async function(){const t=P+(C.fileExtension?"."+C.fileExtension:""),n=v.join(a,t);r?await E(d,e,t):await S(l,e,n),o.window.showTextDocument(o.Uri.file(n)),(0,p.expandToNewNode)(e,t)}),{telemetry:n,catchUnhandledErrors:!0})}finally{n.end(),n.sendTelemetry(),d?.dispose()}return}if(!C.fixedFile){const e=await async function(e,t){const r="custom"!==e.groupIdentity&&null!==e.fileExtension&&void 0!==e.fileExtension;let n=e.defaultName,i=n;if(r){""===n&&(n=v.parse(t).base,i=n);let r=1;do{i=n+r.toString(),r++}while(b(t,i,e.fileExtension))}const s=await o.window.showInputBox({title:c.addNewItemUiStrings.nameNewFile,value:i,validateInput:async function(r){if(!r||0===r.length||0===r.trim().length)return c.addNewItemUiStrings.noFileName;if("custom"===e.groupIdentity){const e=r.lastIndexOf(".");if(-1!==e&&(0===r.substring(0,e).trim().length||0===r.substring(e+1).trim().length))return c.addNewItemUiStrings.noFileName}return v.isAbsolute(r)?c.addNewItemUiStrings.onlyRelative:(r=w(r,e.fileExtension),b(t,r,e.fileExtension))}});return s?w(s,e.fileExtension):s}(C,a);if(!e)return;P=e}const I=h.getExtensionBrokerService(),O=await I.getProxy(s.default.solutionFileService),N=new u.TelemetryActivity("add-new-file",i.telemetryService);if(!r){const e=-1!==v.extname(T).localeCompare(".shproj",void 0,{sensitivity:"base"});N.addOrUpdateProperties({projectType:e?"SharedProject":"CSharpProject"})}try{await i.logger.watch("Add a new file"+("custom"===C.groupIdentity?"":" using template: "+C.label),(async function(){const i=P+(C.fileExtension?"."+C.fileExtension:""),s=v.join(a,i);if("custom"===C.groupIdentity)(0,n.writeFile)(v.join(a,P),"",(e=>{if(e)throw e}));else{const e=r?await t.createSolutionItem(C.groupIdentity,P,a):await t.createProjectItem(C.groupIdentity,P,a,T);if(e.errorMessage)return void o.window.showErrorMessage(e.errorMessage)}r?await E(O,e,i):await S(I,e,s),N.addOrUpdateProperties({solutionExplorerNodeType:e.node.NodeType,templateUsed:"true",templateGroupIdentity:C.groupIdentity}),o.window.showTextDocument(o.Uri.file(s)),(0,p.expandToNewNode)(e,i)}),{telemetry:N,catchUnhandledErrors:!1})}finally{N.end(),N.sendTelemetry(),O?.dispose()}}},840:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7147),o=r(2037),i=r(9496),s=r(9279),a=r(9781),c=r(77),u=r(7195),l=r(7867),d=r(5979),p=r(519),f=r(2677),h=r(5010),g=r(3228),v=r(2181),m=r(2906),y=r(5300),_=r(9994),S=r(9994),E=r(1017);function w(e){return e.contextValue===v.contextValues.project?E.extname(e.node.Path):w(e.parentNode)}t.default=async function(e){const t=i.extensions.getExtension(s.EXTENSION_ID);if(!t)throw new Error("Unable to find the extension");const r=t.exports.serviceBroker;if(e.contextValue!==v.contextValues.solutionFolder&&e.contextValue!==v.contextValues.project&&e.contextValue!==v.contextValues.folder)return;const P=e.contextValue===v.contextValues.solutionFolder,I=!P&&-1!==w(e).localeCompare(".shproj",void 0,{sensitivity:"base"}),O=await async function(e,t){if(t){const e=_.getActiveWorkspaceRoot(),t=await(0,y.getOpenedSolution)();return t&&(0,g.containsFileOrFolder)(e,t)?E.dirname(t):e}return e.contextValue===v.contextValues.project?E.dirname(e.node.Path):e.node.Path}(e,P);if(!(0,S.isWorkingDirectoryInWorkspace)(O))return void u.logger.log(`The selected node's path is located outside the workspace. ${O}`);const N=await async function(e){const t=[{id:"gitignore",label:f.fileTemplateStrings.file("dotnet gitignore"),defaultName:".gitignore",fixedFile:!0},{id:"tool-manifest",label:f.fileTemplateStrings.localToolManifest("Dotnet"),defaultName:E.join(".config","dotnet-tools.json"),fixedFile:!0},{id:"editorconfig",label:f.fileTemplateStrings.file("EditorConfig"),defaultName:".editorconfig",fixedFile:!0},{id:"globaljson",label:f.fileTemplateStrings.file("global.json"),defaultName:"global.json",fixedFile:!0},{id:"buildprops",label:f.fileTemplateStrings.file("MSBuild Directory.Build.props"),defaultName:"Directory.Build.props",fixedFile:!0},{id:"buildtargets",label:f.fileTemplateStrings.file("MSBuild Directory.Build.targets"),defaultName:"Directory.Build.targets",fixedFile:!0},{id:"nugetconfig",label:f.fileTemplateStrings.config("NuGet"),defaultName:"nuget.config",fixedFile:!0},{id:"custom",label:f.fileTemplateStrings.custom,defaultName:"",fileExtension:"",fixedFile:!1}],r=[{id:"class",label:f.fileTemplateStrings.class,defaultName:"Class",fileExtension:".cs",fixedFile:!1},{id:"interface",label:f.fileTemplateStrings.interface,defaultName:"Interface",fileExtension:".cs",fixedFile:!1},{id:"record",label:f.fileTemplateStrings.record,defaultName:"Record",fileExtension:".cs",fixedFile:!1},{id:"enum",label:f.fileTemplateStrings.enum,defaultName:"Enum",fileExtension:".cs",fixedFile:!1},{id:"struct",label:f.fileTemplateStrings.struct,defaultName:"Struct",fileExtension:".cs",fixedFile:!1},{id:"custom",label:f.fileTemplateStrings.custom,defaultName:"",fileExtension:"",fixedFile:!1},{id:"viewimports",label:"MVC ViewImports",defaultName:"_ViewImports.cshtml",fixedFile:!0},{id:"viewstart",label:"MVC ViewStart",defaultName:"_ViewStart.cshtml",fixedFile:!0},{id:"proto",label:f.fileTemplateStrings.protobuf,defaultName:"",fileExtension:".proto",fixedFile:!1},{id:"razorcomponent",label:f.fileTemplateStrings.component("Razor"),defaultName:"",fileExtension:".razor",fixedFile:!1},{id:"page",label:f.fileTemplateStrings.page("Razor"),defaultName:"",fileExtension:".cshtml",fixedFile:!1},{id:"webconfig",label:f.fileTemplateStrings.config("Web"),defaultName:"web.config",fixedFile:!0}],n=[{id:"maui-page-csharp",label:f.fileTemplateStrings.dotNetMauiPageCSharp,defaultName:"NewPage",fileExtension:".cs",fixedFile:!1},{id:"maui-page-xaml",label:f.fileTemplateStrings.dotNetMauiPageXaml,defaultName:"NewPage",fileExtension:".xaml",fixedFile:!1},{id:"maui-view-csharp",label:f.fileTemplateStrings.dotNetMauiViewCSharp,defaultName:"NewView",fileExtension:".cs",fixedFile:!1},{id:"maui-view-xaml",label:f.fileTemplateStrings.dotNetMauiViewXaml,defaultName:"NewView",fileExtension:".xaml",fixedFile:!1},{id:"maui-dict-xaml",label:f.fileTemplateStrings.dotNEtMauiDictionaryXaml,defaultName:"Dictionary",fileExtension:".xaml",fixedFile:!1}];let o;return e?o=t:(o=r,await u.logger.watch("Check for MAUI templates",(async()=>{let e=new a.OutputMonitor;await(0,l.dotnetCommand)(c.DotnetCommand.checkMauiTemplate,void 0,["new","list","maui"],e),e.getOutput().match(/\.NET MAUI/)&&(o=o.concat(n))}),{importance:a.LogImportance.low,catchUnhandledErrors:!0})),o.sort(((e,t)=>e.label.localeCompare(t.label))),await i.window.showQuickPick(o,{placeHolder:f.promptStrings.selectNewFileTemplate})}(P);if(!N)return;const[A,R]=await async function(e,t){if(e.fixedFile)return[e.defaultName,e.defaultName];let r=e.defaultName,n="custom"!==e.id;n&&""===r&&(r=E.parse(t).base,n=null!==C(t,r+e.fileExtension));let o=r;if(n){let n=1;do{o=r+n.toString(),n++}while(C(t,o+e.fileExtension))}const s=await i.window.showInputBox({title:f.promptStrings.nameNewFile,value:o,validateInput:async function(r){if(!r||0===r.length||0===r.trim().length)return f.errorStrings.noFileName;if("custom"===e.id){const e=r.lastIndexOf(".");if(-1!==e&&(0===r.substring(0,e).trim().length||0===r.substring(e+1).trim().length))return f.errorStrings.noFileName}return E.isAbsolute(r)?f.errorStrings.onlyRelative:(r=T(r,e.fileExtension),C(t,r+e.fileExtension))}}),a=s?T(s,e.fileExtension):s;return[a,a+e.fileExtension]}(N,O);if(!A||!R)return;if(N.fixedFile&&C(O,R)){const t=P?f.promptStrings.addExistingFileToSolutionFolder(R):f.promptStrings.openExistingFile(R);if(await i.window.showQuickPick([f.promptStrings.yes,f.promptStrings.cancel],{placeHolder:t})!==f.promptStrings.yes)return;const n=new h.TelemetryActivity("add-new-file",u.telemetryService);n.addOrUpdateProperties({solutionExplorerNodeType:e.node.NodeType,existingFileAdded:"true",templateName:N.id});const o=await r.getProxy(d.default.solutionFileService);try{await u.logger.watch("Add a solution file",(async function(){if(P){let t=e.node.ProjectGuid;t&&0!==t.length||(t=_.emptyGuid),await(o?.addSolutionItem(t,N.defaultName))}const t=i.Uri.file(E.join(O,R));i.window.showTextDocument(t),(0,m.expandToNewNode)(e,N.defaultName)}),{telemetry:n,catchUnhandledErrors:!0})}finally{n.end(),n.sendTelemetry(),o?.dispose()}return}const x=new h.TelemetryActivity("add-new-file",u.telemetryService),k=P?await r.getProxy(d.default.solutionFileService):null;P||x.addOrUpdateProperties({projectType:I?"SharedProject":"CSharpProject"});try{await u.logger.watch("Add a new file"+("custom"===N.id?"":" using template: "+N.label),(async function(){let t=!0;if("custom"===N.id)(0,n.writeFile)(E.join(O,A),"",(e=>{if(e)throw e}));else try{const e=["new",N.id];N.fixedFile||(e.push("-n"),e.push(A),I&&e.push("--force")),await(0,l.dotnetCommand)(c.DotnetCommand.newFile,O,e)}catch(e){const r=e instanceof c.ExitCodeError?e.errorCode:0,s=(e instanceof Error?e.message:e?.toString())??"";if(103===r)t=!1,!C(O,R)&&N.id in b&&(u.logger.log(`Calling dotnet new failed with error: ${e}`),(0,n.writeFile)(E.join(O,R),b[N.id],(e=>{if(e)throw e})));else if(127===r){if(s.substring(s.indexOf("Details")+`Details${o.EOL}`.length).includes("Name cannot contain any of the following characters"))return void i.window.showErrorMessage(f.errorStrings.addingNewFileFailedInvalidCharacters)}else{if(!s.includes("84c0da21-51c8-4541-9940-6ca19af04ee6"))throw e;u.logger.log("Ignoring post action '84c0da21-51c8-4541-9940-6ca19af04ee6' warning.")}}if(P){let t=e.node.ProjectGuid;t&&0!==t.length||(t=_.emptyGuid),await(k?.addSolutionItem(t,A))}else{const t=new p.ProjectQueryableSpace(r),n={update:{target:{context:"Projects",query:{$filter:{ProjectsByProjectGuid:[[e.node.ProjectGuid]]},$properties:["Id"]}},steps:[{AddFiles:{ItemsPath:[E.join(O,R)]}}]}},o=await t.executeAction(n);o.Errors&&o.Errors.forEach((e=>{u.logger.log(e.Message)}))}x.addOrUpdateProperties({solutionExplorerNodeType:e.node.NodeType,templateUsed:t?"true":"false",templateName:N.id});const s=i.Uri.file(E.join(O,R));i.window.showTextDocument(s),(0,m.expandToNewNode)(e,R)}),{telemetry:x,catchUnhandledErrors:!1})}finally{x.end(),x.sendTelemetry(),k?.dispose()}};const b={class:"namespace Namespace;\npublic class Class\n{\n\n}\n",interface:"namespace Namespace;\npublic interface Interface\n{\n\n}\n",enum:"namespace Namespace;\npublic enum Enum\n{\n\n}\n",record:"namespace Namespace;\npublic record class Record\n{\n\n}\n",struct:"namespace Namespace;\npublic struct Struct\n{\n\n}\n"};function T(e,t){return e.length>t.length&&e.substring(e.length-t.length).toLowerCase()===t?e.substring(0,e.length-t.length):e}function C(e,t){return(0,n.existsSync)(E.join(e,t))?f.errorStrings.fileExists:null}},7702:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7147),o=r(3292),i=r(9496),s=r(7195),a=r(5979),c=r(279),u=r(2677),l=r(5010),d=r(3228),p=r(2906),f=r(6874),h=r(5300),g=r(9994),v=r(9994),m=r(1017),y=r(9279);async function _(e,t,r,n){let o,s=1;do{o=t.defaultName+s.toString(),n&&(o=m.join(n,o)),s++}while(await E(e,o,r));const a=(await i.window.showInputBox({title:u.addNewItemUiStrings.nameNewProject,value:o,validateInput:async function(t){return t&&0!==t.length?(t=t.trim(),m.isAbsolute(t)?u.addNewItemUiStrings.onlyRelative:await E(e,t,r)):u.addNewItemUiStrings.noProjectName}}))?.trim();if(a){const e=m.dirname(a),t=m.basename(a);return e&&"."!==e?{solutionFolder:e,projectName:t}:{projectName:t}}return{}}function S(e){try{return 0===(0,n.readdirSync)(e).length}catch{return!1}}async function E(e,t,r){for(const e of'"*<>:|?')if(-1!==t.indexOf(e))return u.addNewItemUiStrings.pathInvalidChars;if(e.length+3*t.length>240)return u.addNewItemUiStrings.pathTooLong;const o=m.resolve(e,t);return(0,n.existsSync)(o)&&!S(o)?u.addNewItemUiStrings.projectDirectoryExists:!r&&await(0,v.doesSolutionContainProject)(t,!0)?u.addNewItemUiStrings.solutionContainsItem(t):null}async function w(e,t,r,n,o){const s=u.addNewItemUiStrings.projectCreatedIn(m.join(t.projectLocation,t.projectName)),a=[{label:u.addNewItemUiStrings.createProject,description:s,id:0},{label:"",kind:i.QuickPickItemKind.Separator,id:-1}];var c=0;const l={};for(const e of r){c++;const t=e.selectedValue??e.defaultValue;var d=!0;if(e.visibilityConditions)for(const t of e.visibilityConditions){if(!(t.parameterId in l)){d=!1;break}var p=t.values.includes(l[t.parameterId]);if(t.negated&&(p=!p),!p){d=!1;break}}if(!d)continue;l[e.id]=t;const r=e.values?.find((e=>e.value===t))?.displayName??t,n={label:e.displayName,description:r??t,id:c};a.push(n)}const f=await i.window.showQuickPick(a,{placeHolder:u.addNewItemUiStrings.selectOption,title:u.addNewItemUiStrings.selectOptionToConfigure});f&&(0!==f.id?(await async function(e){const t=e.dataType??"choice";if("choice"===t){const t=[];for(const r of e.values)t.push({label:r.displayName,id:r.value,description:T(e,r.value)});const r=await i.window.showQuickPick(t,{title:u.addNewItemUiStrings.configureOption(e.displayName),placeHolder:u.addNewItemUiStrings.specifyValue(e.displayName)});r&&(e.selectedValue=r.id)}else if("bool"===t){const t=[{label:u.addNewItemUiStrings.trueValue,id:"true",description:T(e,"true")},{label:u.addNewItemUiStrings.falseValue,id:"false",description:T(e,"false")}],r=await i.window.showQuickPick(t,{title:u.addNewItemUiStrings.configureOption(e.displayName),placeHolder:u.addNewItemUiStrings.specifyValue(e.displayName)});r&&(e.selectedValue=r.id)}}(r[f.id-1]),await w(e,t,r,n,o)):await b(n,e,t,o,r))}async function b(e,t,r,o,c){await async function(e,t,r,o){const c=new l.TelemetryActivity("add-project",s.telemetryService);c.addOrUpdateProperties({openFolder:String(r.openFolder),templateGroupIdentity:r.templateGroupIdentity,fromSolutionExplorer:String(r.fromSolutionExplorer)});try{await s.logger.watch("Add a new project",(async()=>{const s="Aspire.Empty"===r.templateGroupIdentity||"Aspire.Starter"===r.templateGroupIdentity?r.projectLocation:m.join(r.projectLocation,r.projectName),c=function(e){const t={};if(e)for(const r of e)r.selectedValue&&("bool"===r.dataType&&r.invertBoolean?t[r.name]="true"===r.selectedValue?"false":"true":t[r.name]=r.selectedValue);return t}(o),u=await t.createProject(r.templateGroupIdentity,r.projectName,s,c);if(u.errorMessage)return void i.window.showErrorMessage(u.errorMessage);const l=await g.ensureSolutionFile(e,r.rootDirectory,r.projectName,r.fullSolutionPath);if(u.primaryOutputPaths){const e=g.getExtensionBrokerService(),t=await e.getProxy(a.default.solutionFileService);try{let e=!1;for(const n of u.primaryOutputPaths){const o=m.join(s,n);".csproj"===m.extname(o).toLowerCase()&&(e=!0,await g.addProjectToSolution(r.rootDirectory,l,o,r.solutionFolder),await(t?.addProjectToFilter(o)))}if(!e){const e=(0,n.readdirSync)(s);for(const n of e){const e=m.join(s,n);".csproj"===m.extname(e).toLowerCase()&&(await g.addProjectToSolution(r.rootDirectory,l,e,r.solutionFolder),await(t?.addProjectToFilter(e)))}}}finally{t?.dispose()}}r.openFolder||await(0,h.reloadSolution)(l)}),{telemetry:c})}finally{c.end(),c.sendTelemetry()}r.openFolder&&await i.commands.executeCommand("vscode.openFolder",i.Uri.file(r.rootDirectory))}(e,t,r,c),o instanceof i.TreeItem&&(0,p.expandToNewNode)(o,r.projectName)}function T(e,t){var r=void 0;return t===e.defaultValue&&(r=u.addNewItemUiStrings.default),t===e.selectedValue&&(r=u.addNewItemUiStrings.selected),r}t.default=async function(e,t){if(!i.workspace.getConfiguration("csharp.experimental").get("dotnetNewIntegration",!0))return(0,f.default)(e,t);const r=await(0,c.getTemplateService)();if(!r)return;const s=await async function(e,t){const r=i.workspace.workspaceFolders,s=!r||0===r.length,a=await async function(e){const t=await e.getProjectTemplates();if(!t)throw new Error("Unable to fetch project templates");const r=t.filter((e=>"Microsoft.Maui.MultiProjectApp"!==e.groupIdentity)).map((e=>({label:e.name,description:e.tags.join(", "),defaultName:e.defaultName,groupIdentity:e.groupIdentity})));return r.sort(((e,t)=>e.label.localeCompare(t.label))),await i.window.showQuickPick(r,{title:u.addNewItemUiStrings.createNewProject,placeHolder:u.addNewItemUiStrings.searchForTemplates})}(e);if(a){if(s){const e=await async function(){const e=await i.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,title:u.addNewItemUiStrings.projectLocation});if(e)return e[0].fsPath}();if(!e)return;const{solutionFolder:t,projectName:r}=await _(e,a,!0);if(!r)return;var c=e;!(0,n.existsSync)(c)||S(c)||(c=m.join(c,r),await(0,o.mkdir)(c,{recursive:!0}));const s=m.join(c,m.parse(c).name)+".sln",l=m.join(c,t??".");return{templateGroupIdentity:a.groupIdentity,projectName:r,rootDirectory:c,solutionFolder:t,fullSolutionPath:s,projectLocation:l,openFolder:!0,fromSolutionExplorer:!1}}{const e=g.getActiveWorkspaceRoot(),r=await(0,h.getOpenedSolution)();c=r&&(0,d.containsFileOrFolder)(e,r)?m.dirname(r):e;const n=g.parseSolutionFolderFromContextMenu(t),{solutionFolder:o,projectName:s}=await _(c,a,void 0!==r,n);if(!s)return;const l=await async function(e,t,r){const n=m.join(e,t??"."),o=u.addNewItemUiStrings.projectCreatedIn(m.join(n,r)),s=[{label:u.addNewItemUiStrings.defaultDirectory,id:"default",description:o},{label:u.addNewItemUiStrings.chooseDirectory,id:"picker"}],a=await i.window.showQuickPick(s,{title:u.addNewItemUiStrings.locationForNewProject,placeHolder:o});if(!a)return;if("default"===a.id)return n;const c=await i.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,title:u.addNewItemUiStrings.projectLocation,defaultUri:i.Uri.file(n)});return c?c[0].fsPath:void 0}(c,o,s);if(!l)return;return{templateGroupIdentity:a.groupIdentity,projectName:s,rootDirectory:c,projectLocation:l,solutionFolder:o,fullSolutionPath:r,openFolder:!1,fromSolutionExplorer:void 0!==t}}}}(r,t);s&&(s.templateGroupIdentity.startsWith("Microsoft.Maui")&&(i.extensions.getExtension(y.MAUI_EXTENSION_ID)||i.window.showWarningMessage(u.errorStrings.mauiExtensionNotFound,u.promptStrings.installMaui).then((e=>{e===u.promptStrings.installMaui&&i.env.openExternal(i.Uri.parse(y.MAUI_EXTENSION_URL))}))),await async function(e,t,r,n){const o=u.addNewItemUiStrings.projectCreatedIn(m.join(t.projectLocation,t.projectName)),s={label:u.addNewItemUiStrings.createProject,description:o,id:0},a={label:u.addNewItemUiStrings.showTemplateOptions,id:1},c=await i.window.showQuickPick([s,a],{title:u.addNewItemUiStrings.createProjectOrViewOptions,placeHolder:o});if(!c)return;if(0===c.id)return void await b(r,e,t,n,void 0);const l=await e.getProjectParameters(t.templateGroupIdentity);await w(e,t,l,r,n)}(r,s,e,t))}},6874:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7147),o=r(3292),i=r(9496),s=r(9279),a=r(9781),c=r(77),u=r(7195),l=r(7867),d=r(5979),p=r(2677),f=r(5010),h=r(3228),g=r(2906),v=r(5300),m=r(9994),y=r(9994),_=r(1017),S=r(1249);async function E(e,t,r,n){let o,s=1;do{o=t.defaultName+s.toString(),n&&(o=_.join(n,o)),s++}while(await b(e,o,r));const a=(await i.window.showInputBox({title:p.promptStrings.nameNewProject,value:o,validateInput:async function(t){return t&&0!==t.length?(t=t.trim(),_.isAbsolute(t)?p.errorStrings.onlyRelative:await b(e,t,r)):p.errorStrings.noProjectName}}))?.trim();if(a){const e=_.dirname(a),t=_.basename(a);return e&&"."!==e?{solutionFolder:e,projectName:t}:{projectName:t}}return{}}function w(e){try{return 0===(0,n.readdirSync)(e).length}catch{return!1}}async function b(e,t,r){for(const e of'"*<>:|?')if(-1!==t.indexOf(e))return p.errorStrings.pathInvalidChars;if(e.length+3*t.length>240)return p.errorStrings.pathTooLong;const o=_.resolve(e,t);return(0,n.existsSync)(o)&&!w(o)?p.errorStrings.projectDirectoryExists:!r&&await(0,y.doesSolutionContainProject)(t,!0)?p.errorStrings.solutionContainsItem(t):null}t.default=async function(e,t){const r=await async function(e){const t=i.workspace.workspaceFolders,r=!t||0===t.length,d=await async function(){const e={web:"Web",webAPI:"WebAPI",empty:p.projectTemplateStrings.tagEmpty,grpc:"gRPC",mvc:"MVC",blazor:"Blazor",webAssembly:"WebAssembly",pwa:p.projectTemplateStrings.tagPWA,razorPages:"Razor Pages",common:p.projectTemplateStrings.tagCommon,library:p.projectTemplateStrings.tagLibrary,console:p.projectTemplateStrings.tagConsole,test:p.projectTemplateStrings.tagTest,msTest:"MSTest",nUnit:"NUnit",xUnit:"xUnit",mobile:p.projectTemplateStrings.tagMobile,desktop:p.projectTemplateStrings.tagDesktop,razor:"Razor",razorClassLibrary:p.projectTemplateStrings.tagClassLibarayType("Razor")};function t(...e){return e.join(", ")}const r=[{label:p.projectTemplateStrings.aspNETCoreEmpty,id:"web",description:t(e.web,e.empty),defaultName:"WebApplication",options:["--no-restore"]},{label:p.projectTemplateStrings.aspNETCoreGRPCService,id:"grpc",description:t(e.web,e.gRPC),defaultName:"GrpcService",options:["--no-restore"]},{label:p.projectTemplateStrings.aspNETCoreWebAPI,id:"webapi",description:t(e.web,e.webAPI),defaultName:"WebApplication",options:["--no-restore","-minimal"]},{label:p.projectTemplateStrings.aspNETCoreWebAppMVC,id:"mvc",description:t(e.web,e.mvc),defaultName:"WebApplication",options:["--no-restore"]},{label:p.projectTemplateStrings.aspNETCoreWebApp,id:"webapp",description:t(e.web,e.mvc,e.razorPages),defaultName:"WebApplication",options:["--no-restore"]},{label:p.projectTemplateStrings.classLibrary,id:"classlib",description:t(e.common,e.library),defaultName:"ClassLibrary",options:["--no-restore"]},{label:p.projectTemplateStrings.consoleApp,id:"console",description:t(e.common,e.console),defaultName:"ConsoleApp",options:["--no-restore"]},{label:p.projectTemplateStrings.msTestTest,id:"mstest",description:t(e.test,e.msTest),defaultName:"TestProject",options:["--no-restore"]},{label:p.projectTemplateStrings.nUnit3Test,id:"nunit",description:t(e.test,e.nUnit),defaultName:"TestProject",options:["--no-restore"]},{label:p.projectTemplateStrings.razorClassLibrary,id:"razorclasslib",description:t(e.web,e.razor,e.library,e.razorClassLibrary),defaultName:"RazorClassLibrary",options:["--no-restore"]},{label:p.projectTemplateStrings.xUnitTest,id:"xunit",description:t(e.test,e.xUnit),defaultName:"TestProject",options:["--no-restore"]}],n=[{label:p.projectTemplateStrings.dotNetMauiApp,id:"maui",description:t(e.mobile,e.desktop),defaultName:"MauiApp"},{label:p.projectTemplateStrings.dotNetMauiBlazorHybridApp,id:"maui-blazor",description:t(e.mobile,e.desktop,e.blazor),defaultName:"MauiBlazorApp"},{label:p.projectTemplateStrings.dotNetMauiClassLib,id:"mauilib",description:t(e.mobile,e.desktop),defaultName:"MauiClassLib"}],o=[{label:p.projectTemplateStrings.dotNetAspireApp,id:"aspire",description:t(e.web,e.webAPI),defaultName:"AspireApp"},{label:p.projectTemplateStrings.dotNetAspireStarterApp,id:"aspire-starter",description:t(e.web,e.webAPI),defaultName:"AspireStarterApp"}];let d=r;return await u.logger.watch("Check for MAUI templates",(async()=>{let e=new a.OutputMonitor;try{await(0,l.dotnetCommand)(c.DotnetCommand.checkMauiTemplate,void 0,["new","list","maui"],e),e.getOutput().match(/\.NET MAUI/)&&(d=d.concat(n))}catch(e){if(!(I&&e instanceof c.DotnetCommandError&&e.message.includes("No templates found")&&i.extensions.getExtension(s.MAUI_EXTENSION_ID)))throw e;I=!1,i.window.showWarningMessage(p.errorStrings.mauiWorkloadNotFound)}}),{importance:a.LogImportance.low,catchUnhandledErrors:!0}),await u.logger.watch("Check for .NET Aspire templates",(async()=>{let e=new a.OutputMonitor;await(0,l.dotnetCommand)(c.DotnetCommand.checkAspireTemplate,void 0,["new","list","aspire"],e),e.getOutput().match(/Aspire/)&&(d=d.concat(o))}),{importance:a.LogImportance.low,catchUnhandledErrors:!0}),await u.logger.watch("Check for .NET Version for Blazor Projects",(async()=>{let r=new a.OutputMonitor;await(0,l.dotnetCommand)(c.DotnetCommand.dotnetVersion,void 0,["--version"],r,!0);let n=S.clean(r.getOutput());r.clearOutput(),await(0,l.dotnetCommand)(c.DotnetCommand.dotnetVersion,void 0,["--list-sdks"],r,!0);let o=r.getOutput().split("\n").sort(),i=!1,s=!1;for(let e=0;e<o.length;e++){let t=o[e],r=t.substring(0,t.indexOf(" ")),n=S.major(r).toString().concat(".0.0");if(s&&i)break;S.eq(n,P)&&s||S.eq(n,C)&&i||S.lt(n,P)||(S.eq(n,C)?i=!0:S.eq(n,P)&&(s=!0))}S.gte(n,T)&&d.push({label:p.projectTemplateStrings.blazorWebApp,id:"blazor",description:t(e.web,e.blazor),defaultName:"BlazorApp",options:["--no-restore"]},{label:p.projectTemplateStrings.blazorWebAssemblyStandaloneApp,id:"blazorwasm",description:t(e.web,e.blazor,e.webAssembly,e.pwa),defaultName:"BlazorApp",options:["--no-restore"]});let u=!1;i&&S.gte(n,C)&&(u=!0,d.push({label:p.projectTemplateStrings.blazorServerAppEmpty,id:"blazorserver-empty",description:t(e.web,e.blazor,e.empty),defaultName:"BlazorApp",options:["--no-restore"]},{label:p.projectTemplateStrings.blazorServerApp,id:"blazorserver",description:t(e.web,e.blazor),defaultName:"BlazorApp",options:["--no-restore"]},{label:p.projectTemplateStrings.blazorWebAssemblyAppEmpty,id:"blazorwasm-empty",description:t(e.web,e.blazor,e.webAssembly,e.pwa,e.empty),defaultName:"BlazorApp",options:["--no-restore"]},{label:p.projectTemplateStrings.blazorWebAssemblyApp,id:"blazorwasm",description:t(e.web,e.blazor,e.webAssembly,e.pwa),defaultName:"BlazorApp",options:["--no-restore"]})),s&&S.gte(n,P)&&!u&&d.push({label:p.projectTemplateStrings.blazorServerApp,id:"blazorserver",description:t(e.web,e.blazor),defaultName:"BlazorApp",options:["--no-restore"]},{label:p.projectTemplateStrings.blazorWebAssemblyApp,id:"blazorwasm",description:t(e.web,e.blazor,e.webAssembly,e.pwa),defaultName:"BlazorApp",options:["--no-restore"]})}),{catchUnhandledErrors:!0}),d.sort(((e,t)=>e.label.localeCompare(t.label))),await i.window.showQuickPick(d,{placeHolder:p.promptStrings.selectNewProjectTemplate})}();if(!d)return;let f,g,y,b,O;if(r){const e=await async function(){const e=await i.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,title:p.promptStrings.projectLocation});if(e)return e[0].fsPath}();if(!e)return;if(f=e,({solutionFolder:b,projectName:g}=await E(f,d,!0)),!g)return;!(0,n.existsSync)(f)||w(f)||(f=_.join(f,g),await(0,o.mkdir)(f,{recursive:!0})),y=_.join(f,_.parse(f).name)+".sln"}else{y=await(0,v.getOpenedSolution)();const t=m.getActiveWorkspaceRoot();f=y&&(0,h.containsFileOrFolder)(t,y)?_.dirname(y):t;const r=m.parseSolutionFolderFromContextMenu(e);if(({solutionFolder:b,projectName:g}=await E(f,d,void 0!==y,r)),!g)return;if(O=await async function(e,t,r){const n=_.join(e,t??"."),o=p.promptStrings.projectCreatedIn(_.join(n,r)),s=[{label:p.promptStrings.defaultDirectory,id:"default",description:o},{label:p.promptStrings.chooseDirectory,id:"picker"}],a=await i.window.showQuickPick(s,{placeHolder:o});if(!a)return;if("default"===a.id)return n;const c=await i.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,title:p.promptStrings.projectLocation,defaultUri:i.Uri.file(n)});return c?c[0].fsPath:void 0}(f,b,g),!O)return}return{rootDirectory:f,projectName:g,projectTypeId:d.id,projectTypeOptions:d.options,fullSolutionPath:y,solutionFolder:b,projectLocation:O,fromSolutionExplorer:void 0!==e,openFolder:r}}(t);if(r){if(r.projectTypeId.includes("maui")&&!await async function(){if(!i.extensions.getExtension(s.MAUI_EXTENSION_ID)){const e="Install the .NET MAUI extension";i.window.showWarningMessage(p.errorStrings.mauiExtensionNotFound,e).then((t=>{t===e&&i.env.openExternal(i.Uri.parse(s.MAUI_EXTENSION_URL))}))}let e=new a.OutputMonitor;await(0,l.dotnetCommand)(c.DotnetCommand.checkMauiWorkloads,void 0,["workload","list"],e);const t=e.getOutput().match(/maui.*/g);if(!t||0===t.length){const e="Install the .NET MAUI workloads";return i.window.showWarningMessage(p.errorStrings.mauiWorkloadNotFound,e).then((t=>{t===e&&i.env.openExternal(i.Uri.parse(s.MAUI_WORKLOAD_URL))})),!1}return!0}())return!1;await async function(e,t){const r=new f.TelemetryActivity("add-project",u.telemetryService);r.addOrUpdateProperties({openFolder:String(t.openFolder),projectTypeId:t.projectTypeId,fromSolutionExplorer:String(t.fromSolutionExplorer)});try{await u.logger.watch("Add a new project",(async()=>{const r=_.join(t.projectLocation??t.solutionFolder??".",t.projectName);if("aspire"===t.projectTypeId||"aspire-starter"===t.projectTypeId){const n=_.join(t.projectLocation??".");await(0,l.dotnetCommand)(c.DotnetCommand.newProject,t.rootDirectory,["new",t.projectTypeId,"-o",n,"-n",t.projectName].concat(t.projectTypeOptions??[]));const o=t.projectLocation?r+".sln":_.join(t.rootDirectory,r)+".sln";if(!t.openFolder){await(0,v.default)(e,o);const t=i.workspace.asRelativePath(o);await i.workspace.getConfiguration("dotnet").update("defaultSolution",t),await(0,v.reloadSolution)(o)}}else{await(0,l.dotnetCommand)(c.DotnetCommand.newProject,t.rootDirectory,["new",t.projectTypeId,"-o",r].concat(t.projectTypeOptions??[]));const n=await m.ensureSolutionFile(e,t.rootDirectory,t.projectName,t.fullSolutionPath);await m.addProjectToSolution(t.rootDirectory,n,r,t.solutionFolder);const o=m.getExtensionBrokerService(),i=await o.getProxy(d.default.solutionFileService);try{await(i?.addProjectToFilter(r))}finally{i?.dispose()}t.openFolder||await(0,v.reloadSolution)(n)}}),{telemetry:r})}finally{r.end(),r.sendTelemetry()}t.openFolder&&await i.commands.executeCommand("vscode.openFolder",i.Uri.file(t.rootDirectory))}(e,r),t instanceof i.TreeItem&&(0,g.expandToNewNode)(t,r.projectName)}};const T="8.0.0",C="7.0.0",P="6.0.0";let I=!0},4462:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9496),o=r(8489),i=r(9279),s=r(7195),a=r(5979),c=r(2677),u=r(8986),l=r(9994),d=r(6260),p=r(9047),f=r(5010),h=r(9058);t.default=async function(e){const t=n.extensions.getExtension(i.EXTENSION_ID);if(!t)throw new Error("Unable to find the extension.");const r=t.exports.serviceBroker,g=u.NuGetAction.add,v=new d.TelemetryEvent("nuget/add-nuget-package",s.telemetryService);try{const t=new h.NuGetConfigurationSettings;(0,p.addIncludePrereleaseTelemetry)(v,t.includePrerelease);const d=(0,l.getActiveWorkspaceRoot)(),m=await(0,u.verifyServicePrerequisites)(g,d,r,v);if(!m||!m.isPrerequisiteMet)return void(0,p.cancelAtStepTelemetry)(v,"verify-prerequisites");const y=(0,u.getProjectFromContext)(e);y?(0,p.addEntrypointTelemetry)(v,"project-context-menu"):(0,p.addEntrypointTelemetry)(v,"command-palette");const _=y??await(0,u.showProjectPicker)(g,v);if(!_)return void(0,p.cancelAtStepTelemetry)(v,"project-picker");const S=await async function(e,{title:t,value:r,prompt:o,placeholder:u},l,d,h){const g=n.extensions.getExtension(i.EXTENSION_ID);if(!g)throw new Error("Unable to find the extension.");const v=[],m=g.exports.serviceBroker,y=await m.getProxy(a.default.nugetCommandsService);y&&v.push(y);try{return await new Promise((i=>{const a=n.window.createInputBox();a.title=t,a.value=r,a.prompt=o,a.placeholder=u;let g=0;v.push(a.onDidAccept((async()=>{a.validationMessage="";const t=a.value;let r;a.enabled=!1,a.busy=!0,g++;const n=new f.TelemetryActivity("nuget/search-nuget-packages",s.telemetryService);try{r=await s.logger.watch("Search NuGet packages",(async function(){return n.start(),r=await(0,p.runWithDurationTelemetry)((async()=>await(y?.packageSearch(e,t,d.includePrerelease))),l,"packageSearch"),n.end(),r}),{telemetry:n,catchUnhandledErrors:!1})}finally{const e=r?.length??0;0===e?a.validationMessage=c.nugetStrings.noPackagesFoundError:i(r),a.busy=!1,a.enabled=!0,l.addOrUpdateMeasurements({numberOfSearches:g}),(0,p.addResultsCountTelemetry)(l,e,"packageSearch"),n.addOrUpdateMeasurements({searchTermLength:t.length}),(0,p.addResultsCountTelemetry)(n,e,"packageSearch"),(0,p.addDotnetSdkTelemetry)(n,h),n.sendTelemetry()}})),a.onDidChangeValue((async()=>{a.validationMessage=""})),a.onDidHide((()=>{i(void 0)})),a),a.show()}))}finally{v.forEach((e=>e.dispose()))}}(_.fullPath,{title:c.nugetStrings.addPackageTitle,value:"",placeholder:(0,u.getPrereleaseStatusPlaceholder)(t.includePrerelease,c.nugetStrings.packageSearchPlacholder)},v,t,m.value);if(void 0===S)return void(0,p.cancelAtStepTelemetry)(v,"package-search");const E=await async function(e,t){let r;const i=await n.window.showQuickPick(e?.map((e=>new o.NuGetPackageSearchQuickPick(e))),{title:c.nugetStrings.addPackageTitle,placeHolder:(0,u.getPrereleaseStatusPlaceholder)(t.includePrerelease,c.nugetStrings.packagePickerPlaceholder)});return i&&(r=i.info),r}(S,t);if(!E)return void(0,p.cancelAtStepTelemetry)(v,"package-picker");const w=await(0,u.showVersionPicker)(g,E,(0,u.retrievePackageVersions)(_.fullPath,E.id,t.includePrerelease,r,v),t);if(!w)return void(0,p.cancelAtStepTelemetry)(v,"version-picker");await s.logger.watch("Add NuGet package",(async function(){const e=await r.getProxy(a.default.nugetCommandsService);try{const t=await(0,p.runWithDurationTelemetry)((async()=>await(e?.addPackage(_.fullPath,E.id,w.version))),v,"addPackage");v.addOrUpdateProperties({succeeded:String(t)})}finally{e?.dispose(),(0,p.addCompletedTelemetry)(v)}}),{telemetry:v,catchUnhandledErrors:!0})}finally{v.sendTelemetry()}}},6925:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9496),o=r(9279),i=r(77),s=r(7195),a=r(7867),c=r(519),u=r(2677),l=r(5010),d=r(2181),p=r(1017);t.default=async function(e){const t=n.extensions.getExtension(o.EXTENSION_ID);if(!t)throw new Error("Unable to find the extension");if(e.contextValue!==d.contextValues.project||!e.node.Path||!e.node.ProjectGuid)return;if(r=e.node.Path,-1!==p.extname(r).localeCompare(".shproj",void 0,{sensitivity:"base"}))return void n.window.showWarningMessage(u.errorStrings.addProjectReferenceOnSharedProject,{modal:!0});var r;const f=t.exports.serviceBroker,h=await async function(e,t){const r=new c.ProjectQueryableSpace(e);return await s.logger.watch("Get project to add reference to.",(async()=>{const e={context:"Projects",query:{$filter:{ProjectsByCapabilities:["!SharedAssetsProject"]},$where:{"!=":[{".":"Name"},t.node.Name]},$properties:["Name","Path"]}},o=await r.executeQuery(e);if(o.Items){const e=o.Items.filter((e=>e.Path)).map((e=>({path:e.Path,label:e.Name})));return 0===e.length?void n.window.showWarningMessage(u.errorStrings.addProjectReferenceNoProjects,{modal:!0}):(e.sort(((e,t)=>e.label.localeCompare(t.label))),(await n.window.showQuickPick(e,{placeHolder:u.promptStrings.selectProject}))?.path)}}),{catchUnhandledErrors:!1})}(f,e);if(!h)return;const g=new l.TelemetryActivity("add-project-reference",s.telemetryService);try{await s.logger.watch("Add project reference",(async()=>{const t=p.dirname(e.node.Path);await(0,a.dotnetCommand)(i.DotnetCommand.addReference,t,["add","reference",p.relative(t,h)])}),{telemetry:g,catchUnhandledErrors:!1})}finally{g.end(),g.sendTelemetry()}}},6686:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(695);t.default=async function(e){return(0,n.setSolutionBuildAction)(new n.BuildActionOptions(n.BUILD),e)}},3771:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(695);t.default=async function(e){return(0,n.setSolutionBuildAction)(new n.BuildActionOptions(n.CLEAN),e)}},31:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyRelativePath=t.copyPath=void 0;const n=r(9496),o=r(5300),i=r(1017);t.copyPath=async function(e){await n.env.clipboard.writeText(e.node.Path)},t.copyRelativePath=async function(e){const t=await(0,o.getOpenedSolution)();if(t){const r=i.relative(i.dirname(t),e.node.Path);await n.env.clipboard.writeText(r)}}},634:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9496),o=r(9279),i=r(2677),s=r(519),a=r(2269),c=r(5010),u=r(7195),l=r(6315),d=r(1017);t.default=async function(e,t){const r=n.extensions.getExtension(o.EXTENSION_ID);if(!r)throw new Error("Unable to find the extension.");if(!n.workspace.workspaceFolders||n.workspace.workspaceFolders.length<1)return void n.window.showErrorMessage(i.debugProjectLaunchStrings.errorNoOpenFolder);const p=n.workspace.workspaceFolders[0];if(!p)return void n.window.showErrorMessage(i.debugProjectLaunchStrings.errorNoOpenFolder);const f=e?.fsPath;if(!f)return void n.window.showErrorMessage(i.debugProjectLaunchStrings.errorNoProjectFound);const h=d.extname(f).toLowerCase();if(".cs"!==h)return void n.window.showErrorMessage(i.debugProjectLaunchStrings.notSupportedFileExtension(f,h));const g=r.exports.serviceBroker,v=await async function(e,t){const r=[],n=new s.ProjectQueryableSpace(t),o={context:"Projects",query:{$properties:["Id","Path","Files"],Files:{$properties:["Id","Path"],$filter:{FilesByPath:[[e]]}},$where:{any:{".":"Files"}}}},i=await n.executeQuery(o);return i&&i.Items?.forEach((e=>{e&&e.Path&&r.push(e.Path)})),r}(f,g);if(v&&v.length>0){let e;if(1===v.length)e=v[0];else{const t=await n.window.showQuickPick(v,{title:i.debugProjectLaunchStrings.selectProject});if(!t)return void n.window.showWarningMessage(i.debugProjectLaunchStrings.warnNoProjectSelected);e=t}await(0,a.debugLaunch)(e,p,t,r.exports.serviceBroker,"debugFileLaunch")}else{n.window.showWarningMessage(i.debugProjectLaunchStrings.errorNoProjectForFile(f));const e=new c.TelemetryActivity("debugFileLaunch",u.telemetryService);e.addOrUpdateProperties({succeeded:String(!1)}),e.addOrUpdateMeasurements({telemetryCode:l.DebugTelemetryCode.failedToFindProjectForFile}),e.sendTelemetry()}}},9053:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9496),o=r(9279),i=r(2677),s=r(2269);t.default=async function(e,t){const r=n.extensions.getExtension(o.EXTENSION_ID);if(!r)throw new Error("Unable to find the extension.");if(!n.workspace.workspaceFolders||n.workspace.workspaceFolders.length<1)return void n.window.showErrorMessage(i.debugProjectLaunchStrings.errorNoOpenFolder);const a=n.workspace.workspaceFolders[0];if(!a)return void n.window.showErrorMessage(i.debugProjectLaunchStrings.errorNoOpenFolder);const c=e?.node?.Path;c?await(0,s.debugLaunch)(c,a,t,r.exports.serviceBroker,"debugProjectLaunch"):n.window.showErrorMessage(i.debugProjectLaunchStrings.errorNoProjectFound)}},3334:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9496),o=r(7195),i=r(5979),s=r(519),a=r(2677),c=r(2181),u=r(2906),l=r(9994);async function d(e){await n.window.showErrorMessage(a.errorStrings.deleteOperationFailed(e))}t.default=async function(e,t){const p=l.getExtensionBrokerService();if((e=e??await(0,u.getSelectedSolutionTreeNodeInExplorer)())&&e.node){if(!t&&!await n.window.showWarningMessage(a.promptStrings.deleteConfirmation(e.node.Name),{modal:!0},a.promptStrings.yes))return;void 0!==e.parentNode&&e.parentNode.node.NodeType===c.nodeTypes.solutionFolder?await async function(e,t){await o.logger.watch("Delete file in a solution folder",(async function(){const n=await t.getProxy(i.default.solutionFileService);try{if(null!==n&&e.parentNode){const t=e.parentNode.node.ProjectGuid;if(t&&e.node.Path){const o=await l.getRelativePathToSolution(e.node.Path);await(n?.removeSolutionItem(t,o)),r(7147).unlinkSync(e.node.Path)}}}finally{n?.dispose()}}),{catchUnhandledErrors:!0})}(e,p):e.node.NodeType===c.nodeTypes.file?await async function(e,t){const r=new s.ProjectQueryableSpace(t),n={update:{target:{context:"Projects",query:{$filter:{ProjectsByProjectGuid:[[e.node.ProjectGuid]]},$properties:["Id"],$get:{Files:{$filter:{FilesByPath:[[e.node.Path]]},$properties:["Id","Path"]}}}},steps:["Delete"]}};await o.logger.watch("Delete file in a project",(async()=>{const t=await r.executeAction(n);t.Errors&&(await d(e.node.Name),t.Errors.forEach((e=>{o.logger.log(e.Message)})))}),{catchUnhandledErrors:!0})}(e,p):e.node.NodeType===c.nodeTypes.folder?await async function(e,t){const r=new s.ProjectQueryableSpace(t),n={update:{target:{context:"Projects",query:{$filter:{ProjectsByProjectGuid:[[e.node.ProjectGuid]]},$properties:["Id"],$get:{Folders:{$filter:{FoldersByPath:[[e.node.Path]]},$properties:["Id"]}}}},steps:["Delete"]}};await o.logger.watch("Delete folders in a project",(async()=>{const t=await r.executeAction(n);t.Errors&&(await d(e.node.Name),t.Errors.forEach((e=>{o.logger.log(e.Message)})))}),{catchUnhandledErrors:!0})}(e,p):await d(e.node.Name)}}},6716:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showHotReloadPanel=t.hotReload=void 0;const n=r(9279),o=r(5979),i=r(8457),s=r(2300),a=r(2677),c=r(9496);t.hotReload=async function(){const e=c.extensions.getExtension(n.EXTENSION_ID);if(!e)throw new Error("Unable to find the extension.");const t=e.exports.serviceBroker,r=await t.getProxy(o.default.hotReloadService);let u=i.HotReloadResult.applyUpdatesFailure;try{if(null===r)return void await s.hotReloadLogger.log(new s.HotReloadLogMessage(s.HotReloadVerbosity.minimal,a.hotReloadStrings.serviceNotFound));u=await r.applyChanges()}catch(e){let t=a.hotReloadStrings.exceptionWhenApplying+e;await s.hotReloadLogger.log(new s.HotReloadLogMessage(s.HotReloadVerbosity.detailed,t))}finally{r?.dispose()}},t.showHotReloadPanel=async function(e){await s.hotReloadLogger.outputChannel().show()}},4138:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openCoverageReport=t.selectActiveConfiguration=t.syncWithActiveItem=t.helperOpenUrl=t.webviewRunCommand=t.installDotnetSdkFromWalkthrough=t.installDotnetSdk=t.selectLaunchConfiguration=t.selectStartupProject=t.noDebugFileLaunch=t.debugFileLaunch=t.stepIntoProjectLaunch=t.noDebugProjectLaunch=t.debugProjectLaunch=t.showHotReloadPanel=t.hotReload=t.openProjectsLogsView=t.removeItem=t.newFolder=t.removeSolutionFolder=t.renameSolutionFolder=t.newSolutionFolder=t.revealFileInOS=t.copyRelativePath=t.copyPath=t.rename=t.addProjectReference=t.addExistingFile=t.addNewFile=t.deleteItem=t.searchFromCommandPalette=t.searchOpenFromCommandPalette=t.searchProjectFromCommandPalette=t.signIntoVsAccount=t.removeProject=t.cleanSolution=t.rebuildSolution=t.buildSolution=t.addExistingProject=t.openInTerminal=t.showEntitlementsStatus=t.removeNuGetPackage=t.updateNuGetPackage=t.addNuGetPackage=t.addNewProject=t.closeSolution=t.openSolution=void 0;const n="csdevkit",o=r(2037).platform().toLowerCase().replace(/[0-9]/g,"").replace("darwin","mac").replace("win","windows");t.openSolution=`${n}.openSolution`,t.closeSolution=`${n}.closeSolution`,t.addNewProject=`${n}.addNewProject`,t.addNuGetPackage=`${n}.addNuGetPackage`,t.updateNuGetPackage=`${n}.updateNuGetPackage`,t.removeNuGetPackage=`${n}.removeNuGetPackage`,t.showEntitlementsStatus=`${n}.showEntitlementsStatus`,t.openInTerminal=`${n}.openInTerminal`,t.addExistingProject=`${n}.addExistingProject`,t.buildSolution=`${n}.buildSolution`,t.rebuildSolution=`${n}.rebuildSolution`,t.cleanSolution=`${n}.cleanSolution`,t.removeProject=`${n}.removeProject`,t.signIntoVsAccount=`${n}.signIntoVsAccount`,t.searchProjectFromCommandPalette=`${n}.searchProjectFromCommandPalette`,t.searchOpenFromCommandPalette=`${n}.searchOpenFromCommandPalette`,t.searchFromCommandPalette=`${n}.searchFromCommandPalette`,t.deleteItem=`${n}.deleteItem`,t.addNewFile=`${n}.addNewFile`,t.addExistingFile=`${n}.addExistingFile`,t.addProjectReference=`${n}.addProjectReference`,t.rename=`${n}.rename`,t.copyPath=`${n}.copyPath`,t.copyRelativePath=`${n}.copyRelativePath`,t.revealFileInOS=`${n}.revealFileInOS.${o}`,t.newSolutionFolder=`${n}.newSolutionFolder`,t.renameSolutionFolder=`${n}.renameSolutionFolder`,t.removeSolutionFolder=`${n}.removeSolutionFolder`,t.newFolder=`${n}.newFolder`,t.removeItem=`${n}.removeItem`,t.openProjectsLogsView=`${n}.openProjectsLogsView`,t.hotReload=`${n}.debug.hotReload`,t.showHotReloadPanel=`${n}.debug.showHotReloadPanel`,t.debugProjectLaunch=`${n}.debug.projectDebugLaunch`,t.noDebugProjectLaunch=`${n}.debug.noDebugProjectLaunch`,t.stepIntoProjectLaunch=`${n}.debug.stepIntoProjectLaunch`,t.debugFileLaunch=`${n}.debug.fileLaunch`,t.noDebugFileLaunch=`${n}.debug.noDebugFileLaunch`,t.selectStartupProject=`${n}.debug.selectStartupProject`,t.selectLaunchConfiguration=`${n}.debug.selectLaunchConfiguration`,t.installDotnetSdk=`${n}.installDotnetSdk`,t.installDotnetSdkFromWalkthrough=`${n}.installDotnetSdk.fromWalkthrough`,t.webviewRunCommand=`${n}.webview.runCommand`,t.helperOpenUrl=`${n}.helper.openUrl`,t.syncWithActiveItem=`${n}.syncWithActiveItem`,t.selectActiveConfiguration=`${n}.selectActiveConfiguration`,t.openCoverageReport=`${n}.openCoverageReport`},126:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newFolderActionAsync=void 0;const n=r(7147),o=r(1017),i=r(9496),s=r(9397),a=r(9994),c=r(9994),u=r(7195),l=r(519),d=r(2677),p=r(2181),f=r(1017);async function h(e,t,r){const n=(0,c.getExtensionBrokerService)(),o=new l.ProjectQueryableSpace(n);await u.logger.watch("Add a new folder in a project",(async function(){if(e.node.ProjectGuid!==a.emptyGuid){const n={update:{target:{context:"Projects",query:{$filter:{ProjectsByProjectGuid:[[e.node.ProjectGuid]]},$properties:["Id"]}},steps:[{CreateFolder:{FolderPath:f.join(t,r)}}]}},s=await o.executeAction(n);s.Errors&&(await i.window.showErrorMessage(d.errorStrings.newFolderFailed(e.node.Name)),s.Errors.forEach((e=>{u.logger.log(e.Message)})))}}),{catchUnhandledErrors:!0})}t.default=async function(e){if(!(0,c.isWorkingDirectoryInWorkspace)(e.node.Path))return void u.logger.log(`The selected node's path is located outside the workspace. ${e.node.Path} not in ${(0,s.getOpenedWorkspaceHelper)()?.uri.fsPath}`);if(!e.node.Path)return await i.window.showErrorMessage(d.errorStrings.newFolderFailed(e.node.Name)),void u.logger.log(`The selected node doesn't contain a valid path. ${e.node}`);const t=e.node.NodeType===p.nodeTypes.folder?e.node.Path:(0,o.dirname)(e.node.Path),r=function(e){return(0,n.readdirSync)(e,{withFileTypes:!0}).filter((e=>e.isDirectory())).map((e=>e.name))}(f.dirname(e.node.Path)),a=(0,c.calculateDefaultFolderName)(r),l=await i.window.showInputBox({title:d.promptStrings.newFolderName,value:a,validateInput:async function(e){return e&&0!==e.length?(0,n.existsSync)(f.join(t,e))?d.errorStrings.fileOrFolderAlreadyExists:void 0:d.errorStrings.noName}});l&&await h(e,t,l)},t.newFolderActionAsync=h},1181:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9496),o=r(9994),i=r(9994),s=r(7195),a=r(5979),c=r(2677),u=r(1639);t.default=async function(e){const t=o.getExtensionBrokerService(),r=await(0,u.getExistingChildrenNodesNames)(t,e.node);let l,d=await t.getProxy(a.default.solutionFileService);try{l=await(d?.getSolutionFolders())}finally{d?.dispose()}let p=(0,i.calculateDefaultFolderName)(r);p=(0,i.updateDefaultName)(p,l);const f=(await n.window.showInputBox({title:c.promptStrings.newSolutionFolder,value:p,validateInput:e=>(0,u.validateSolutionFolderName)(e,r,l)}))?.trim();f&&await s.logger.watch("Add a new solution folder",(async function(){try{let r=e.node.ProjectGuid;r&&0!==r.length||(r=o.emptyGuid),d=await t.getProxy(a.default.solutionFileService),await(d?.addSolutionFolder(f,r))}finally{d?.dispose()}}),{catchUnhandledErrors:!0})}},3661:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8388);t.default=async function(){let e=await(0,n.getReportController)();await e.openCoverageReport()}},4424:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7147),o=r(9496),i=r(1017);t.default=async function(e){let t=e?.resourceUri?.fsPath;t&&!(0,n.existsSync)(t)&&(t=void 0),t&&(0,n.lstatSync)(t).isFile()&&(t=i.dirname(t));const r={cwd:t};o.window.createTerminal(r).show()}},4593:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9496),o=r(9279),i=r(5979);t.default=async function(){const e=n.extensions.getExtension(o.EXTENSION_ID);if(!e)throw new Error("Unable to find the extension.");const t=e.exports.serviceBroker,r=await t.getProxy(i.default.logOutputChannelService,{activationArguments:{outputChannelName:"Projects"}});r&&r.show()}},5300:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOpenedSolution=t.reloadSolution=t.closeSolution=t.openDefaultSolution=t.openDefaultSolutionInWorkspace=void 0;const n=r(9496),o=r(9279),i=r(9781),s=r(77),a=r(7195),c=r(5979),u=r(2677),l=r(5010),d=r(6260),p=r(3228),f=r(9411),h="<CreateNew>";async function g(e){if(!f.isAbsolute(e)){const r=n.workspace.workspaceFolders;if(r&&r.length>0){if(1===r.length)return f.join(r[0].uri.fsPath,e);for(var t=0;t<r.length;t++)if(e.startsWith(r[t].name+"/")){const n=f.join(r[t].uri.fsPath,e.substring(r[t].name.length+1));if(await(0,p.fileOrDirectoryExists)(n))return n}for(t=0;t<r.length;t++){const n=f.join(r[t].uri.fsPath,e);if(await(0,p.fileOrDirectoryExists)(n))return n}}}return e}async function v(e){const t=y(),r=new l.TelemetryActivity("open-solution",a.telemetryService),o=await S(2);if(o){if(1===o.length)return w(t),await _(e,o[0],t,r);if(o.length>1)return w(t),a.logger.log("More than one solution files in the workspace. Waiting for the developer to make a choice."),await async function(e){const t=await n.window.showInformationMessage(u.promptStrings.chooseProjectToOpen,u.promptStrings.chooseToOpen,u.promptStrings.doNotOpenSolution);if(t)return t===u.promptStrings.doNotOpenSolution&&t!==u.promptStrings.chooseToOpen?void await e.workspaceState.update("defaultSolution","disable"):await m(e)}(e);if(await E()){const o=n.workspace.workspaceFolders;if(o&&o.length>=1)return await _(e,h,t,r)}else a.logger.log("No C# project is found in the workspace.")}}async function m(e,t){const r=y(),o=new l.TelemetryActivity("open-solution",a.telemetryService);if(w(r),t)return await _(e,t,r,o);const i=await S(),s=await async function(e){return await n.workspace.findFiles("**/*.slnf","**/{node_modules,obj,bin}/**",void 0)}(),c=i.concat(s);let d=!1;const p=n.workspace.workspaceFolders;if(!c)throw new Error("No workspace is opened");if(0===c.length){if(!(await E()&&p&&p.length>=1))throw new Error(u.errorStrings.noSolutionInWorkspace);t=h}else if(1===c.length)t=c[0];else{let e;if(p&&1===p.length){const t=p[0].uri.fsPath;e=c.map((e=>f.relative(t,e.fsPath)))}else e=c.map((e=>e.fsPath));if(!(t=await n.window.showQuickPick(e.sort(),{placeHolder:u.chooseSolutionToOpen})))return;d=!0}return o.addOrUpdateProperties({showedSolutionPicker:String(d)}),await _(e,t,r,o)}function y(){const e=n.extensions.getExtension(o.EXTENSION_ID);if(!e)throw new Error("Unable to find the extension.");return e.exports.serviceBroker}async function _(e,t,r,o,l){if(a.environmentStateManager)return await a.environmentStateManager.runOperation((async()=>a.logger.watch("Open a solution",(()=>async function(e,t,r,o){o.start();try{if(a.environmentStateManager){const s="string"==typeof t?t===h?null:await g(t):t.fsPath,u=a.environmentStateManager.getOpenedSolution();if(u&&u.toLowerCase()===s?.toLowerCase())return void a.logger.log("Solution is already opened.");const v=e.workspaceState.get("configSetting",null),m=await a.logger.watch(`handling solution file "${s}" in Dev Kit server`,(async function(){if(a.environmentStateManager){await a.logger.watch("Clear environment",(async()=>await a.environmentStateManager.closeSolution()));const t=n.workspace.workspaceFolders;let o=[];if(t)for(let e=0;e<t?.length;e++){const r=t[e].uri;"file"===r.scheme&&r.fsPath&&o.push(r.fsPath)}let c,u=s??void 0;if(s){const e=n.workspace.getConfiguration("dotnet").get("automaticallyUpdateGeneratedSolution")??!0;c=await a.environmentStateManager.setSolutionAndFolderWorkspace(s,o,v,e)}else{const t=n.workspace.getConfiguration("dotnet").get("automaticallyCreateSolutionInWorkspace")??!0,r=new d.TelemetryEvent("generate-sln",a.telemetryService);r.addOrUpdateProperties({outside:String(!t)}),r.sendTelemetry();const s=t?null:e.storageUri?.fsPath??null;s&&(a.logger.log(`Generate solution file outside of the workspace at ${s}`,i.LogImportance.low),l=!0),c=await a.environmentStateManager.openNoSolutionWorkspace(o,s,v)}if(1===c.solutions.length&&(a.projectInitializationStatus&&(a.projectInitializationStatus.init(r).catch((e=>a.logger.log(e))),a.projectInitializationStatus.onEnvironmentUpdate(c.version,c.solutions.length)),u=c.solutions[0],!l&&t)){let r=u;t.length>0&&(r=n.workspace.asRelativePath(r),"win32"!==process.platform||f.isAbsolute(r)||(r=r.replace(/\\/g,"/"))),e&&await e.workspaceState.update("defaultSolution",r)}return c}return null}),{telemetry:o}),_=1===m?.solutions.length?m.solutions[0]:void 0;if(_){await async function(){await n.commands.executeCommand("setContext","solutionOpened",!0),await n.commands.executeCommand("setContext","solutionExplorerVisible",!0),async function(){const e=a.environmentStateManager?.getLatestEnvironmentState();e&&await a.logger.watch("Restore solution",(async()=>{const t=y(),r=await t.getProxy(c.default.nugetSolutionRestoreService);r&&(r.setState(),e.projects.length>0&&await r.restoreSolution(),r.dispose())}),{catchUnhandledErrors:!0})}().catch()}();var p=a.environmentStateManager?.getLatestEnvironmentState()?.configuration;a.logger.log(`Selected configuration: ${v}, active configuration: ${p}`)}return _}}catch(e){throw await n.commands.executeCommand("setContext","solutionOpened",!1),new s.SolutionOpenError(u.errorStrings.errorDuringOpenSolution(e?.toString()))}finally{o.end(),o.sendTelemetry()}}(e,t,r,o)))));a.logger.log("Open solution missing environmentStateManager")}async function S(e){return await n.workspace.findFiles("**/*.sln","**/{node_modules,obj,bin}/**",e)}async function E(){const e=await n.workspace.findFiles("**/*.csproj","**/{node_modules,obj,bin}/**",1);return e&&e.length>0&&e[0]}function w(e){a.solutionExplorerProvider?a.solutionExplorerProvider.prepareOpenSolution():async function(e){try{const t=await e.getProxy(c.default.projectQueryExecutionService);t?.dispose()}catch(e){a.logger.log("Failed to get project service"+e)}}(e).catch((e=>{}))}t.openDefaultSolutionInWorkspace=async function(e,t){if(t){if("disable"===t)return void a.logger.log("Opening solution file is disabled in the current workspace.");const r=y();if(w(r),t=await g(t),await(0,p.fileOrDirectoryExists)(t))try{const n=new l.TelemetryActivity("open-solution",a.telemetryService);return void await _(e,t,r,n,!0)}catch(r){a.logger.log(`Failed to open solution '${t}': ${r}`),await e.workspaceState.update("defaultSolution",void 0)}}await v(e)},t.openDefaultSolution=v,t.default=m,t.closeSolution=async function(e){const t=new l.TelemetryActivity("close-solution",a.telemetryService);await a.logger.watch("Close a solution",(async function(){try{if(a.environmentStateManager){await a.logger.watch("Close a solution with environment service",(async function(){await a.environmentStateManager.closeSolution()}),{telemetry:t}),await e.workspaceState.update("defaultSolution","disable");const r=a.environmentStateManager.getLatestEnvironmentState();r&&a.projectInitializationStatus?.onEnvironmentUpdate(r.version,r.solutions.length)}}catch(e){throw new s.SolutionCloseError(u.errorStrings.errorDuringCloseSolution(e?.toString()))}finally{t.end(),t.sendTelemetry()}}),{importance:i.LogImportance.low,telemetry:t}),await n.commands.executeCommand("setContext","solutionOpened",!1)},t.reloadSolution=async function(e){a.logger.log("reload solution"),await a.logger.watch("Reload a solution",(async function(){try{a.environmentStateManager&&await a.logger.watch("Reload a solution with environment service",(async function(){const t=await a.environmentStateManager.loadSolution(e);a.projectInitializationStatus?.onEnvironmentUpdate(t.version,t.solutions.length)}))}catch(e){throw new s.SolutionReloadError(u.errorStrings.errorDuringReloadSolution(e?.toString()))}}))},t.getOpenedSolution=async function(){return a.environmentStateManager?.getOpenedSolution()}},1120:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(695);t.default=async function(e){return(0,n.setSolutionBuildAction)(new n.BuildActionOptions(n.BUILD,!0),e)}},2070:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9496),o=r(9279),i=r(7195),s=r(519),a=r(2181),c=r(4939),u=r(2906),l=r(2677);async function d(e){await n.window.showErrorMessage(l.errorStrings.removeOperationFailed(e))}t.default=async function(e){const t=n.extensions.getExtension(o.EXTENSION_ID);if(!t)throw new Error("Unable to find the extension.");if(!(e=e??await(0,u.getSelectedSolutionTreeNodeInExplorer)())||!e.node)return;if(!await n.window.showWarningMessage(l.promptStrings.removeItemConfirmation(e.node.Name),{modal:!0},l.promptStrings.ok))return;const r=t.exports.serviceBroker;e.node.NodeType===a.nodeTypes.file&&e.node.Flags?.includes(c.TreeFlags.linkedItem)?await async function(e,t){await i.logger.watch("Remove file from a project",(async()=>{const r=new s.ProjectQueryableSpace(t),n={update:{target:{context:"Projects",query:{$filter:{ProjectsByProjectGuid:[[e.node.ProjectGuid]]},$properties:["Id"],$get:{Files:{$filter:{FilesByPath:[[e.node.Path]]},$properties:["Id","Path"]}}}},steps:["Exclude"]}},o=await r.executeAction(n);o.Errors&&(await d(e.node.Name),o.Errors.forEach((e=>{i.logger.log(e.Message)})))}),{catchUnhandledErrors:!0})}(e,r):await d(e.node.Name)}},976:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9496),o=r(9279),i=r(7195),s=r(5979),a=r(8986),c=r(9994),u=r(6260),l=r(9047);t.default=async function(e){const t=n.extensions.getExtension(o.EXTENSION_ID);if(!t)throw new Error("Unable to find the extension.");const r=t.exports.serviceBroker,d=a.NuGetAction.remove,p=new u.TelemetryEvent("nuget/remove-nuget-package",i.telemetryService);try{const t=(0,c.getActiveWorkspaceRoot)(),n=await(0,a.verifyServicePrerequisites)(d,t,r,p);if(!n||!n.isPrerequisiteMet)return void(0,l.cancelAtStepTelemetry)(p,"verify-prerequisites");const o=(0,a.getProjectFromContext)(e),u=(0,a.getPackageFromContext)(e);u?(0,l.addEntrypointTelemetry)(p,"package-dependency-context-menu"):(0,l.addEntrypointTelemetry)(p,"command-palette");const f=o??await(0,a.showProjectPicker)(d,p);if(!f)return void(0,l.cancelAtStepTelemetry)(p,"project-picker");const h=u??await(0,a.showPackagePickerFromPromise)(d,(0,a.retrieveInstalledPackages)(f.fullPath,r,p));if(!h)return void(0,l.cancelAtStepTelemetry)(p,"package-picker");await i.logger.watch("Remove NuGet package",(async function(){const e=await r.getProxy(s.default.nugetCommandsService);try{const t=await(0,l.runWithDurationTelemetry)((async()=>await(e?.removePackage(f.fullPath,h.id))),p,"removePackage");p.addOrUpdateProperties({succeeded:String(t)})}finally{e?.dispose(),(0,l.addCompletedTelemetry)(p)}}),{telemetry:p,catchUnhandledErrors:!0})}finally{p.sendTelemetry()}}},6923:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9496),o=r(9279),i=r(7195),s=r(5979),a=r(2677),c=r(5010),u=r(2906);t.default=async function(e,t){if(!(t=t??await(0,u.getSelectedSolutionTreeNodeInExplorer)())||!t.node)return;if(!await n.window.showWarningMessage(a.promptStrings.removeItemConfirmation(t.node.Name),{modal:!0},a.promptStrings.ok))return;const r=n.extensions.getExtension(o.EXTENSION_ID);if(!r)throw new Error("Unable to find the extension.");const l=r.exports.serviceBroker;await async function(e,t){const r=new c.TelemetryActivity("remove-project",i.telemetryService),n=await t.getProxy(s.default.solutionFileService);try{await i.logger.watch("Remove project",(async()=>{e.node.ProjectGuid&&await(n?.removeProject(e.node.ProjectGuid))}),{telemetry:r})}finally{n?.dispose(),r.end(),r.sendTelemetry()}}(t,l)}},4611:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9496),o=r(9279),i=r(7195),s=r(5979),a=r(2906),c=r(2677);t.default=async function(e){const t=n.extensions.getExtension(o.EXTENSION_ID);if(!t)throw new Error("Unable to find the extension.");if(!(e=e??await(0,a.getSelectedSolutionTreeNodeInExplorer)())||!e.node)return;if(!await n.window.showWarningMessage(c.promptStrings.removeItemConfirmation(e.node.Name),{modal:!0},c.promptStrings.ok))return;const r=t.exports.serviceBroker;await i.logger.watch("Remove a solution folder",(async function(){const t=await r.getProxy(s.default.solutionFileService);try{e.node.ProjectGuid&&await(t?.removeProject(e.node.ProjectGuid))}finally{t?.dispose()}}),{catchUnhandledErrors:!0})}},1574:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9496),o=r(9279),i=r(7195),s=r(5979),a=r(519),c=r(2181),u=r(2906),l=r(9994),d=r(7619),p=r(1017),f=r(2677);function h(e){if(e)throw e.forEach((e=>{i.logger.log(e.Message)})),new Error}async function g(e){await n.window.showErrorMessage(f.errorStrings.renameOperationFailed(e))}t.default=async function(e){const t=n.extensions.getExtension(o.EXTENSION_ID);if(!t)throw new Error("Unable to find the extension.");if(!(e=e??await(0,u.getSelectedSolutionTreeNodeInExplorer)())||!e.node)return;const r=t.exports.serviceBroker;var v=void 0;const m=e.node.Name.lastIndexOf(".");m>0&&(v=[0,m]);const y=await n.window.showInputBox({title:f.promptStrings.newName,value:e.node.Name,valueSelection:v,validateInput:async function(e){if(!e||0===e.length)return f.errorStrings.noName}});y&&y!==e.node.Name&&(e.node.NodeType===c.nodeTypes.project?await async function(e,t,r){if(!e.node.Path||!e.node.ProjectGuid)return void await g(e.node.Name);const n=t+p.extname(e.node.Path),o=new a.ProjectQueryableSpace(r);try{await async function(e,t,r){const n={update:{target:{context:"Projects",query:{$filter:{ProjectsByProjectGuid:[[t]]},$properties:["Id"]}},steps:[{RenameProject:{NewName:e}}]}};h((await r.executeAction(n)).Errors)}(t,e.node.ProjectGuid,o),await async function(e,t,r){await i.logger.watch("Rename Project in Solution File",(async function(){const n=await t.getProxy(s.default.solutionFileService);if(n)try{if(r.node.ProjectGuid&&r.node.Path){const t=p.dirname(r.node.Path),o=p.join(t,e),i=await l.getRelativePathToSolution(o);await(n?.moveProject(r.node.ProjectGuid,i))}}catch(e){throw i.logger.log(`Error renaming project in solution file with error: ${e}`),e}finally{n?.dispose()}}))}(n,r,e),await async function(e,t,r){const n={context:"Projects",query:{$properties:["Path"],ProjectReferences:{$properties:["ReferencedProjectPath"],$where:{"==":[{".":"ReferencedProjectPath"},t]}},$where:{any:{".":"ProjectReferences"}}}},o=await r.executeQuery(n);if(o.Items&&o.Items.length>0){const n=o.Items.filter((e=>e.Path)).map((e=>e.Path)),i=p.dirname(t),s={update:{target:{context:"Projects",query:{$properties:["Path"],$filter:{ProjectsByPath:[n]}}},steps:[{AddProjectReferenceByPath:{ReferenceType:"Reference",ReferencedProjectPath:p.join(i,e)}}]}};h((await r.executeAction(s)).Errors),await async function(e,t){const r={update:{target:{context:"Projects",query:{$get:{ProjectReferences:{$where:{"==":[{".":"ReferencedProjectPath"},t]}}}}},steps:["Delete"]}};h((await e.executeAction(r)).Errors)}(r,t)}}(n,e.node.Path,o)}catch(t){t instanceof Error&&i.logger.log(t.message),await g(e.node.Name)}}(e,y,r):e.parentNode&&e.parentNode.node.NodeType===c.nodeTypes.solutionFolder?await async function(e,t,r){const o=e.parentNode;o?await i.logger.watch("Rename a file in a solution folder",(async function(){const a=await r.getProxy(s.default.solutionFileService);if(a)try{const r=o.node.ProjectGuid;if(void 0!==r&&e.node.Path){const o=p.dirname(e.node.Path),i=await l.getRelativePathToSolution(e.node.Path),s=p.join(o,t),c=await l.getRelativePathToSolution(s);await(a?.removeSolutionItem(r,i));const u=new n.WorkspaceEdit;u.renameFile(n.Uri.file(e.node.Path),n.Uri.file(s)),await n.workspace.applyEdit(u),await(a?.addSolutionItem(r,c))}}finally{a?.dispose()}else await g(e.node.Name),i.logger.log("Error renaming item in Solution Folder with error: SolutionFileServiceProxy is null")}),{catchUnhandledErrors:!0}):await g(e.node.Name)}(e,y,r):e.node.NodeType===c.nodeTypes.file?await async function(e,t,r){await i.logger.watch("Rename file in project",(async()=>{const o=new a.ProjectQueryableSpace(r),s=await(0,d.saveAndCloseFile)(e.node.Path),c={update:{target:{context:"Projects",query:{$filter:{ProjectsByProjectGuid:[[e.node.ProjectGuid]]},$properties:["Id"]}},steps:[{RenameFile:{FilePath:e.node.Path,NewName:t}}]}},u=await o.executeAction(c);if(u.Errors&&(await n.window.showErrorMessage(f.errorStrings.renameOperationFailed(e.node.Name)),u.Errors.forEach((e=>{i.logger.log(e.Message)}))),s){const r=p.join(p.dirname(e.node.Path),t);(0,d.openFileInWorkspace)(r)}}),{catchUnhandledErrors:!0})}(e,y,r):e.node.NodeType===c.nodeTypes.folder?await async function(e,t,r){await i.logger.watch("Rename folder in project",(async()=>{const n=new a.ProjectQueryableSpace(r),o=await(0,d.saveAndCloseFilesInDirectory)(e.node.Path),s={update:{target:{context:"Projects",query:{$filter:{ProjectsByProjectGuid:[[e.node.ProjectGuid]]},$properties:["Id"]}},steps:[{RenameFolder:{FolderPath:e.node.Path,NewName:t}}]}},c=await n.executeAction(s);if(c.Errors&&(await g(e.node.Name),c.Errors.forEach((e=>{i.logger.log(e.Message)}))),o){const r=e.node.Path,n=p.join(p.dirname(r),t)+p.sep;for(const e of o){const t=e.replace(r,n);(0,d.openFileInWorkspace)(t)}}}),{catchUnhandledErrors:!0})}(e,y,r):g(e.node.Name))}},9235:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9496),o=r(9279),i=r(9994),s=r(7195),a=r(5979),c=r(2677),u=r(2906),l=r(1639);t.default=async function(e){const t=n.extensions.getExtension(o.EXTENSION_ID);if(!t)throw new Error("Unable to find the extension.");if(!(e=e??await(0,u.getSelectedSolutionTreeNodeInExplorer)())||!e.node)return;const r=t.exports.serviceBroker,d=e.parentNode?await(0,l.getExistingChildrenNodesNames)(r,e.parentNode.node):[],p=(await n.window.showInputBox({title:c.promptStrings.newSolutionFolder,value:e.node.Name,validateInput:t=>(0,l.validateSolutionFolderName)(t,d,[],e.node.Name)}))?.trim();p&&p!==e.node.Name&&await s.logger.watch("Rename a solution folder",(async function(){const t=await r.getProxy(a.default.solutionFileService);try{let r=e.node.ProjectGuid;r&&0!==r.length||(r=i.emptyGuid),e.node.ProjectGuid&&await(t?.renameSolutionFolder(e.node.ProjectGuid,p))}finally{t?.dispose()}}),{catchUnhandledErrors:!0})}},9658:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2181),o=r(1017),i=r(7195);t.default=async function(e){const t=e.node.Path;if(t){const s=r(7147);try{await s.promises.access(t),void 0!==e.contextValue&&function(e,t){var s="";const a=r(2037).platform().toLowerCase().replace(/[0-9]/g,"").replace("darwin","macos");switch(a){case"win":s="explorer";break;case"linux":s="xdg-open";break;case"macos":s="open"}const c=r(2081);let u;switch(e){case n.nodeTypes.file:case n.nodeTypes.project:case n.nodeTypes.solution:u="win"===a?c.spawn(s,["/e,/select,",t]):"macos"===a?c.spawn(s,["-R",t]):c.spawn(s,[o.dirname(t)]);break;case n.nodeTypes.folder:"win"===a&&(t=t.substring(0,t.length-1)),u=c.spawn(s,[t]);break;default:u=c.spawn(s,[o.dirname(t)])}u.on("error",(e=>{i.logger.log(`Error executing Reveal In Explorer for ${t} ${e}`),u.kill()}))}(e.contextValue,t)}catch(e){return}}}},2624:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.searchFromCommandPalette=t.searchOpenFromCommandPalette=t.searchProjectFromCommandPalette=void 0;const n=r(9496);function o(e){n.commands.executeCommand("workbench.action.quickOpen",">"+e)}t.searchProjectFromCommandPalette=function(){o(".NET: Project")},t.searchOpenFromCommandPalette=function(){o(".NET: Open")},t.searchFromCommandPalette=function(){o(".NET:")}},5113:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9496),o=r(9279),i=r(5979),s=r(7195),a=r(2677),c=r(7195);n.extensions.getExtension(o.EXTENSION_ID),t.default=async function(e){const t=c.environmentStateManager?.getLatestEnvironmentState()?.configuration;if(!t)return;const r=await async function(){const e=n.extensions.getExtension(o.EXTENSION_ID);if(!e)throw new Error("Unable to find the extension.");const t=e.exports.serviceBroker,r=await t.getProxy(i.default.solutionFileService);try{return await(r?.getSolutionConfigurations())}catch(e){return void s.logger.log(`Error fetching the solution configurations: ${e}`)}finally{r?.dispose()}}();if(r){const o=function(e){const t=new Set,r=new Set;return e.forEach((e=>{if(e){var n=e.split("|");n.length>=1&&t.add(n[0].trim()),n.length>=2&&r.add(n[1].trim())}})),{configurationNames:t,platformNames:r}}(r);let i=await n.window.showQuickPick(Array.from(o.configurationNames),{placeHolder:a.promptStrings.selectConfiguration});if(i){let r;if(o.platformNames.size>1){const e=await n.window.showQuickPick(Array.from(o.platformNames),{placeHolder:a.promptStrings.selectPlatform});e&&(r=e)}if(r=r||t.split("|")[1],i=`${i}|${r}`,t!==i){e.workspaceState.update("configSetting",i);const t="workbench.action.reloadWindow",r={title:a.promptStrings.reloadWindow,isCloseAffordance:!1};n.window.showInformationMessage(a.promptStrings.reloadOnConfigurationChange,r).then((e=>e===r&&n.commands.executeCommand(t)))}}}}},5199:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9496),o=r(2677),i=r(8741);t.default=async function(){n.workspace.getConfiguration("csharp.preview").get("improvedLaunchExperience")?(0,i.getActiveLaunchConfigurationService)().pickLaunchConfiguration():n.window.showErrorMessage(o.debugProjectLaunchStrings.errorImprovedLaunchExperienceNotEnabled)}},9546:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9496),o=r(9279),i=r(7407),s=r(2677);t.default=async function(){if(!n.extensions.getExtension(o.EXTENSION_ID))throw new Error("Unable to find the extension.");n.workspace.getConfiguration("csharp.preview").get("improvedLaunchExperience")?i.startupProjectService.pickStartupProject():n.window.showErrorMessage(s.debugProjectLaunchStrings.errorImprovedLaunchExperienceNotEnabled)}},695:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSolutionBuildAction=t.BuildActionOptions=t.SOLUTION_BUILD_AVAILABLE=t.solutionBuildContextVisible=t.SOLUTION_ACTION_ALREADY_INPROGRESS=t.NO_SOLUTION_BUILD_FLAG=t.CLEAN=t.BUILD=void 0;const n=r(9496),o=r(9279),i=r(9397),s=r(9781),a=r(7195),c=r(5010),u=r(2181),l=r(5300);t.BUILD="build",t.CLEAN="clean",t.NO_SOLUTION_BUILD_FLAG="",t.SOLUTION_ACTION_ALREADY_INPROGRESS="Cannot perform this action, a Build, Debug, Deploy, Run, or Clean action is in progress.\n",t.solutionBuildContextVisible="solutionBuildContextVisible",t.SOLUTION_BUILD_AVAILABLE=!0;const d=new class{cachedPromise;outputChannel;logger;constructor(){this.outputChannel??=n.window.createOutputChannel("SolutionBuild"),this.logger??=new s.Logger(this.outputChannel)}};t.BuildActionOptions=class{action;flag;noSolution;constructor(e,t){this.action=e,this.flag=t}},t.setSolutionBuildAction=async function(e,r){if(!n.extensions.getExtension(o.EXTENSION_ID))throw new Error("Unable to find the extension.");const s=await(0,l.getOpenedSolution)();e.noSolution=void 0===s;let p,f="string"==typeof r?r:r?.resourceUri?.fsPath;if(s&&void 0!==r&&"string"!=typeof r&&r.contextValue===u.contextValues.project){p=r.label?.toString();let e=r.parentNode;for(;e&&e.contextValue===u.contextValues.solutionFolder;)p=`${e.label}\\${p}`,e=e.parentNode;p=`/target:${p?.replace(/[%$@;.()']/g,"_")}`}if(!f){if(e.noSolution)return!1;f=s}return await async function(e,r,o,s){const u=new c.TelemetryActivity("invoke-solution-build",a.telemetryService);return u.start(),await a.logger.watch("Solution Build Action",(async()=>{try{if(void 0!==d.cachedPromise)return d.logger.log(t.SOLUTION_ACTION_ALREADY_INPROGRESS),d.outputChannel.show(),!1;t.SOLUTION_BUILD_AVAILABLE=!1,await n.commands.executeCommand("setContext",t.solutionBuildContextVisible,t.SOLUTION_BUILD_AVAILABLE),n.workspace.saveAll(!1);const a=await(0,i.dotnetSolutionBuildActionUsingTask)(e,r,o,s);return d.cachedPromise??=a.success,await d.cachedPromise}catch(e){return!1}finally{d.cachedPromise=void 0,t.SOLUTION_BUILD_AVAILABLE=!0,await n.commands.executeCommand("setContext",t.solutionBuildContextVisible,t.SOLUTION_BUILD_AVAILABLE),u.end(),u.sendTelemetry()}}))}(e.action,f,e.flag,p)}},1639:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSolutionFolderName=t.getExistingChildrenNodesNames=void 0;const n=r(7195),o=r(5979),i=r(2677),s=r(3228),a=r(2181);t.getExistingChildrenNodesNames=async function(e,t){var r=[];return await n.logger.watch("Get existing items",(async function(){const n=await e.getProxy(o.default.solutionExplorerService);try{const e=t.NodeType===a.nodeTypes.solution?await(n?.getRootNodes()):await(n?.getChildrenNodes(t));e&&(r=e?.map((e=>e.Name)))}finally{n?.dispose()}}),{catchUnhandledErrors:!0}),r},t.validateSolutionFolderName=function(e,t,r,n){if(!e||0===e.length)return i.errorStrings.noName;if(e.length>260)return i.errorStrings.pathTooLong;for(const t of'"*<>:|?\\/')if(-1!==e.indexOf(t))return i.errorStrings.pathInvalidChars;if(r.includes(e))return i.errorStrings.solutionContainsItem(e);if(e=e.trim(),!n||!(0,s.equalsInvariantIgnoreCase)(n,e))for(const r of t)if((0,s.equalsInvariantIgnoreCase)(e,r))return i.errorStrings.folderContainsItem(e)}},9994:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExtensionBrokerService=t.updateDefaultName=t.calculateDefaultFolderName=t.doesSolutionContainProject=t.isWorkingDirectoryInWorkspace=t.getRelativePathToSolution=t.parseSolutionFolderFromContextMenu=t.getActiveWorkspaceRoot=t.addProjectToSolution=t.ensureSolutionFile=t.emptyGuid=void 0;const n=r(7147),o=r(9496),i=r(9279),s=r(9397),a=r(77),c=r(7195),u=r(7867),l=r(2677),d=r(3228),p=r(2181),f=r(5300),h=r(1017);t.emptyGuid="00000000-0000-0000-0000-000000000000",t.ensureSolutionFile=async function(e,t,r,i){if(!i){const n=h.parse(r).name,s=n+".sln";await(0,u.dotnetCommand)(a.DotnetCommand.newSln,t,["new","sln","-n",n]),i=h.join(t,s),await(0,f.default)(e,i);const c=o.workspace.asRelativePath(i);await o.workspace.getConfiguration("dotnet").update("defaultSolution",c)}if(!(0,n.existsSync)(i)){const e=h.parse(i);await(0,u.dotnetCommand)(a.DotnetCommand.newSln,e.dir,["new","sln","-n",e.name])}return i},t.addProjectToSolution=async function(e,t,r,n){n?await(0,u.dotnetCommand)(a.DotnetCommand.slnAddIntoFolder,e,["sln",t,"add",r,"--solution-folder",n]):await(0,u.dotnetCommand)(a.DotnetCommand.slnAdd,e,["sln",t,"add",r])},t.getActiveWorkspaceRoot=function(){let e=c.environmentStateManager?.getActiveWorkspaceRoot();if(!e||!(0,n.existsSync)(e))throw new Error(l.errorStrings.noSolution);return e},t.parseSolutionFolderFromContextMenu=function(e){let t;return e?.contextValue===p.contextValues.solutionFolder&&(t=e.path),t},t.getRelativePathToSolution=async function(e){const t=await(0,f.getOpenedSolution)();if(t)return h.relative(h.dirname(t),e);throw new Error(l.errorStrings.noSolution)},t.isWorkingDirectoryInWorkspace=function(e){const t=(0,s.getOpenedWorkspaceHelper)(),r=t?.uri.fsPath,n=(0,d.containsFileOrFolder)(r,e);return n||o.window.showWarningMessage(l.errorStrings.addingOutsideWorkspace(e,r),{modal:!0}),n},t.doesSolutionContainProject=async function(e,t){const r=await(0,s.getAllProjects)(),n=r?.map((e=>e.Name)),i=void 0!==n?.find((t=>(0,d.equalsInvariantIgnoreCase)(t,e)));return i&&!t&&o.window.showWarningMessage(l.errorStrings.solutionContainsItem(e),{modal:!0}),i},t.calculateDefaultFolderName=function(e){const t="NewFolder";var r=[];if(e)for(const n of e)if((0,d.startsWithInvariantIgnoreCase)(n,t)){const e=n.substring(9),t=Number.parseInt(e);t&&t>=1&&r.push(t)}const n=r.sort();var o=1;for(const e of n)if(o===e)o++;else if(e>o)break;return`${t}${o}`},t.updateDefaultName=function e(t,r){return r.includes(t)?e("NewFolder"+(parseInt(t.substring(9))+1),r):t},t.getExtensionBrokerService=function(){const e=o.extensions.getExtension(i.EXTENSION_ID);if(!e)throw new Error("Unable to find the extension");return e.exports.serviceBroker}},4586:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9496),o=r(5979),i=r(519),s=r(2906),a=r(9994),c=r(1017);t.default=async function(e){const t=function(){const e=n.window.activeTextEditor?.document;return void 0!==e?.fileName?e.fileName:""}();let r;if(".sln"===c.extname(t))r=[];else{const e=await async function(e){const t=a.getExtensionBrokerService(),r=new i.ProjectQueryableSpace(t);let n;n=".csproj"===c.extname(e)||".shproj"===c.extname(e)?{context:"Projects",query:{$properties:["Id","Path","Guid"],$filter:{ProjectsByPath:[[e]]}}}:{context:"Projects",query:{$properties:["Id","Files"],Files:{$properties:["Id"],$filter:{FilesByPath:[[e]]}},$where:{any:{".":"Files"}}}};const o=await r.executeQuery(n);return o.Items?.[0]}(t);if(!e)return;const n=a.getExtensionBrokerService(),s=await n.getProxy(o.default.solutionFileService);try{r=await(s?.findActiveItemGuidsPath(e.Id.ProjectGuid))}finally{s?.dispose()}}e?.isCancellationRequested||void 0===r||await(0,s.expandToLocation)(t,r,e)}},7619:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openFileInWorkspace=t.saveAndCloseFilesInDirectory=t.saveAndCloseFile=void 0;const n=r(9496),o=r(1017),i=r(7195);async function s(e){try{await e.save()}catch{}let t=!1;for(;await a(e);)t=!0;return t}async function a(e){for(const t of n.window.tabGroups.all)for(const r of t.tabs)if(r.input instanceof n.TabInputText&&r.input.uri.fsPath===e.fileName)try{return await n.window.tabGroups.close(r),!0}catch{}return!1}t.saveAndCloseFile=async function(e){return!(!e||0===e.length)&&await i.logger.watch("Save and close opened files",(async()=>{const t=n.workspace.textDocuments.find((t=>t.fileName===e));return!(!t||!await s(t))}),{catchUnhandledErrors:!0})},t.saveAndCloseFilesInDirectory=async function(e){if(e&&0!==e.length)return await i.logger.watch("Save and close opended files in directory",(async()=>{let t=[];for(const o of n.workspace.textDocuments)r(o.fileName,e)&&await s(o)&&t.push(o.fileName);if(t.length>0)return t;function r(e,t){return e.length>=t.length&&!o.relative(t,e).startsWith("..")}}),{catchUnhandledErrors:!0})},t.openFileInWorkspace=async function(e){await i.logger.watch("Open file in workspace",(async()=>{const t=await n.workspace.openTextDocument(n.Uri.file(e));await n.window.showTextDocument(t)}),{catchUnhandledErrors:!0})}},5970:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9496),o=r(9279),i=r(7195),s=r(5979),a=r(8986),c=r(9994),u=r(6260),l=r(9047),d=r(9058);t.default=async function(e){const t=n.extensions.getExtension(o.EXTENSION_ID);if(!t)throw new Error("Unable to find the extension.");const r=t.exports.serviceBroker,p=a.NuGetAction.update,f=new u.TelemetryEvent("nuget/update-nuget-package",i.telemetryService);try{const t=new d.NuGetConfigurationSettings;(0,l.addIncludePrereleaseTelemetry)(f,t.includePrerelease);const n=(0,c.getActiveWorkspaceRoot)(),o=await(0,a.verifyServicePrerequisites)(p,n,r,f);if(!o||!o.isPrerequisiteMet)return void(0,l.cancelAtStepTelemetry)(f,"verify-prerequisites");const u=(0,a.getProjectFromContext)(e),h=(0,a.getPackageFromContext)(e);h?(0,l.addEntrypointTelemetry)(f,"package-dependency-context-menu"):(0,l.addEntrypointTelemetry)(f,"command-palette");const g=u??await(0,a.showProjectPicker)(p,f);if(!g)return void(0,l.cancelAtStepTelemetry)(f,"project-picker");const v=h??await(0,a.showPackagePickerFromPromise)(p,(0,a.retrieveOutdatedPackages)(g.fullPath,t.includePrerelease,r,f),t);if(!v)return void(0,l.cancelAtStepTelemetry)(f,"package-picker");const m=await(0,a.showVersionPicker)(p,v,(0,a.retrievePackageVersions)(g.fullPath,v.id,t.includePrerelease,r,f),t);if(!m||m.version===v.version)return void(0,l.cancelAtStepTelemetry)(f,"version-picker");await i.logger.watch("Update NuGet package",(async function(){const e=await r.getProxy(s.default.nugetCommandsService);try{const t=await(0,l.runWithDurationTelemetry)((async()=>await(e?.updatePackage(g.fullPath,v.id,m.version))),f,"updatePackage");f.addOrUpdateProperties({succeeded:String(t)})}finally{e?.dispose(),(0,l.addCompletedTelemetry)(f)}}),{telemetry:f,catchUnhandledErrors:!0})}finally{f.sendTelemetry()}}},8349:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePackageInfo=t.getPackageInfo=void 0;const n=r(1017),o=r(3292);t.getPackageInfo=async function(e){let t=null;try{t=await(0,o.readFile)(n.join(e,"package.json"),"utf-8")}catch{}let r=[];if(t){const e=JSON.parse(t);if(e.dependencies)for(const t in e.dependencies)r.push(s(t))}return r};const i=/^(?<name>.*?)(?:\.(?<target>\w+-\w+))?$/;function s(e){const t=i.exec(e);if(!t?.groups)throw new Error("Unrecognized package id pattern: "+e);return{fullName:e,name:t.groups.name,target:t.groups.target}}t.parsePackageInfo=s},3197:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllComponentsMap=void 0;const n=r(3292),o=r(1017),i=r(8349);t.getAllComponentsMap=async function(e){const t=await async function(e){const t={},r=await(0,n.readdir)(e,{withFileTypes:!0});for(const s of r)if(s.isDirectory()){const a=o.join(e,s.name);if(await c(a),(await(0,n.readdir)(a)).indexOf("platforms")>=0){const u=o.join(a,"platforms"),l=await(0,n.readdir)(u,{withFileTypes:!0});for(const d of l)if(d.isDirectory()){const p=o.join(u,d.name);(await(0,n.readdir)(o.join(p))).indexOf("node_modules")>=0&&await c(o.join(u,d.name))}}async function c(e){const r=await(0,i.getPackageInfo)(e);for(const n of r)t[n.name]=o.resolve(e,"node_modules",n.fullName)}}return t}(e),r=await async function(e){try{const t=await(0,n.readFile)(o.join(e,"package.dev.json"),"utf-8"),r=JSON.parse(t),s={};if(r.dependencies)for(const t in r.dependencies)s[(0,i.parsePackageInfo)(t).name]=o.resolve(e,r.dependencies[t]);return s}catch{return{}}}(e);return Object.freeze({...t,...r})}},8741:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getActiveLaunchConfigurationService=t.setupActiveLaunchConfigurationService=t.LaunchConfigurationQuickPick=t.ActiveLaunchConfigurationService=void 0;const n=r(9496),o=r(9230),i=r(2677),s=r(7407),a=r(8455);class c{name;items;constructor(e,t){this.name=e,this.items=t}}class u{projectStateObserver;startupProjectService;constructor(e,t){this.projectStateObserver=e,this.startupProjectService=t}dispose(){this.startupProjectService?.dispose(),this.projectStateObserver?.dispose()}async pickLaunchConfiguration(){const e=await this.startupProjectService.getOrPickCurrentStartupProject();if(!e)return;const t=this.projectStateObserver.getCurrentProjects().find((t=>t.fullPath===e.fullPath));if(!t)return void n.window.showErrorMessage(i.debugProjectLaunchStrings.errorStartupProjectNotFound);const r=this.createQuickPickItems(t),o=await n.window.showQuickPick(r,{title:i.debugProjectLaunchStrings.selectLaunchConfiguration});return o?(await this.projectStateObserver.setActiveLaunchConfiguration(e.fullPath,o.info.id),o.info.id):void 0}createQuickPickItems(e){const t=[new c("",[])];return e.launchConfigurations.reduce(((e,t)=>{const r=t.groupDisplayName||"";let n=e.find((e=>e.name===r));return n||(n=new c(r,[]),e.push(n)),n.items.push(t),e}),t).flatMap((e=>{let t=[];return""!==e.name&&t.push({label:e.name,kind:n.QuickPickItemKind.Separator}),e.items.forEach((e=>{t.push(new l(e))})),t}))}async getLaunchConfiguration(){const e=await this.startupProjectService.getCurrentStartupProject();if(!e)return;const t=this.projectStateObserver.getCurrentProjects().find((t=>t.fullPath===e.fullPath));return t?t.activeLaunchConfigurationId:void 0}}t.ActiveLaunchConfigurationService=u;class l{info;label;description;detail;iconPath;constructor(e){this.info=e,this.label=e.displayName,this.description=e.description,this.detail=e.details,this.iconPath=(0,a.getIconPath)(e.icon)}}let d;t.LaunchConfigurationQuickPick=l,t.setupActiveLaunchConfigurationService=function(e){if(!d){const t=(0,o.getLaunchableProjectInfoObserver)(),r=new u(t,s.startupProjectService);e.subscriptions.push(r),d=r}},t.getActiveLaunchConfigurationService=function(){if(!d)throw new Error("ActiveLaunchConfigurationService has not been initialized");return d}},6862:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DotnetDynamicConfigurationProvider=void 0;const n=r(9496),o=r(7195),i=r(5979),s=r(6315),a=r(2677),c=r(5010),u=r(3228),l=r(1433),d=r(1249),p=r(1017);class f{info;label;description;constructor(e){this.info=e,this.label=e.displayName,this.description=e.fullPath}}class h{brokeredServiceHost;projectStateObserver;static type="dotnet";launchConfigurationService;constructor(e,t){this.brokeredServiceHost=e,this.projectStateObserver=t,this.launchConfigurationService=(0,u.lazyPromiseLambda)((()=>this.initLaunchConfigurationServiceProxy()))}async dispose(){(await this.launchConfigurationService)?.dispose(),this.projectStateObserver?.dispose()}async provideDebugConfigurations(e,t){const r=new c.TelemetryActivity("DotnetDynamicConfigurationProvider/provideDebugConfigurations",o.telemetryService);try{if(await this.launchConfigurationService){if(n.workspace.getConfiguration("csharp.preview").get("improvedLaunchExperience")){let e=[];if(this.projectStateObserver.getCurrentProjects().length>0){let t={name:a.debugProjectLaunchStrings.startupProjectLaunchConfigName,type:h.type,request:"launch"};e.push(t)}return e}{let t=0,n=[];if(e?.uri?.fsPath&&this.projectStateObserver){const r=e.uri.fsPath.replace(/[\\/]+/g,"/"),o=this.projectStateObserver.getCurrentProjects();for(let e of o){let o=e.fullPath;const i=o.replace(/[\\/]+/g,"/"),s=o.includes("/")?"/":"\\";if(i.startsWith(r+"/"))o="${workspaceFolder}"+o.substring(r.length);else{let e=p.relative(r,o);e?o="${workspaceFolder}"+s+e:t++}n=n.concat(this.createDebugConfigurations(e.displayName,o,e.launchConfigurations))}}return 0===n.length&&0===t||(r.addOrUpdateMeasurements({generatedConfigurationCount:n.length,ignoredProjectCount:t}),r.sendTelemetry()),n}}}catch(e){let t="";"string"==typeof e?t=e.toUpperCase():e instanceof Error&&(t=e.message),r.addOrUpdateProperties({succeeded:"false"}),r.sendTelemetry(),n.window.showErrorMessage(`${l.errorStrings.failProvideDebugConfigurations}${t}`)}return[]}async resolveDebugConfiguration(e,t,r){return void 0===t.type?this.runAndDebug(t,r):t}static configurationPrefix="C#: ";static createDebugConfigurationName(e){return`${h.configurationPrefix}${e}`}createDebugConfigurations(e,t,r){let n=[];r.length>1&&n.push(this.createDebugConfiguration(h.createDebugConfigurationName(`${e} [Default Configuration]`),t,void 0));for(let o of r){const i=h.createDebugConfigurationName(`${e}${r.length>1?` [${o.displayName}]`:""}`);n.push(this.createDebugConfiguration(i,t,o.id))}return n}createDebugConfiguration(e,t,r){let n={name:e,type:h.type,request:"launch",projectPath:t};return r&&(n.launchConfigurationId=r),n}async runAndDebug(e,t){const r=new c.TelemetryActivity("runAndDebug",o.telemetryService),u=await this.brokeredServiceHost.serviceBroker.getProxy(i.default.dotnetDebugConfigurationService);try{if(!u)throw r.addOrUpdateProperties({succeeded:String(!1)}),r.sendTelemetry(),new Error;{const o=this.projectStateObserver.getCurrentProjects();if(!(o&&o.length>0))throw r.addOrUpdateProperties({succeeded:String(!1)}),r.sendTelemetry(),new Error;if(d.compareIdentifiers(n.version,"1.89.0")>=0)return void await n.commands.executeCommand("workbench.action.debug.selectandstart",h.type,{noDebug:e.noDebug});{let i;if(1===o.length&&1===o[0]?.launchConfigurations?.length)i=o[0];else{const e=await n.window.showQuickPick(o.map((e=>new f(e))),{title:a.debugProjectLaunchStrings.selectProject});if(!e)return void n.window.showWarningMessage(a.debugProjectLaunchStrings.warnNoProjectSelected);i=e.info}if(i){const n=await u.resolveDebugConfigurationWithLaunchConfigurationService(i.fullPath,{...e,name:h.createDebugConfigurationName(i.displayName),request:"launch",type:"dotnet",launchConfigurationId:i.activeLaunchConfigurationId},t),o=s.IDotnetDebugConfigurationServiceResultResolver.resolve(n);return o?(r.addOrUpdateProperties({succeeded:String(!0)}),r.sendTelemetry(),o):void 0}}}}catch(e){const t={title:a.promptStrings.moreInformation};n.window.showErrorMessage(a.debugProjectLaunchStrings.errorNoProjectFound,t).then((async e=>{if(e===t){const e="https://aka.ms/vscode/dotnet/debug";n.env.openExternal(n.Uri.parse(e))}}))}finally{u?.dispose()}}async initLaunchConfigurationServiceProxy(){const e=await this.brokeredServiceHost.serviceBroker.getProxy(i.default.launchConfigurationService);if(!e)throw new Error("Could not get the ILaunchConfigurationService proxy.");return e}}t.DotnetDynamicConfigurationProvider=h},7224:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prepareHotReload=t.hotReloadTracker=t.HotReloadTracker=void 0;const n=r(9279),o=r(5979),i=r(7787),s=r(2300),a=r(6716),c=r(979),u=r(8457),l=r(2677),d=r(9496),p=r(4138);class f{hotReloadIcon;initialized=!1;enabled=!1;hasPossibleChange=!1;onChangeListener;onSaveListener;async startHotReload(e,t){await this.onHotReloadAvailabilityChanged(e,t)}async onHotReloadAvailabilityChanged(e,t){let r;switch(e.status){case i.ManagedHotReloadAvailabilityStatus.available:return void this.enable();case i.ManagedHotReloadAvailabilityStatus.disabled:r=l.hotReloadStrings.disabledInSettingsStatus;break;default:r=l.hotReloadStrings.notSupportedForSessionStatus}this.disable(r);let n=l.hotReloadStrings.disabledResult;null!==e.localizedMessage&&(n+=" "+e.localizedMessage),await s.hotReloadLogger.log(new s.HotReloadLogMessage(s.HotReloadVerbosity.minimal,n))}async endHotReload(e){await d.commands.executeCommand("setContext","hotReloadEnabled",!1),this.hotReloadIcon?.hide(),this.enabled=!1,this.onChangeListener?.dispose(),this.onSaveListener?.dispose(),this.onChangeListener=void 0,this.onSaveListener=void 0}async reportHotReloadResult(e){let t=null,r=!0;switch(e){case u.HotReloadResult.applyUpdatesFailure:t=l.hotReloadStrings.applyUpdatesFailureResult;break;case u.HotReloadResult.errorEdits:case u.HotReloadResult.restartRequired:break;case u.HotReloadResult.noChanges:this.hasPossibleChange=!1,r=!1;break;case u.HotReloadResult.applied:case u.HotReloadResult.partiallyApplied:this.hasPossibleChange=!1}null!==t&&await s.hotReloadLogger.log(new s.HotReloadLogMessage(s.HotReloadVerbosity.minimal,t)),r&&(0,a.showHotReloadPanel)()}hasPossibleChanges(){return this.hasPossibleChange}initialize(){this.initialized||(this.hotReloadIcon=function(){const e=d.window.createStatusBarItem("csdevkit.hotreload",d.StatusBarAlignment.Right,1);return e.text="$(flame)",e.command=p.showHotReloadPanel,e}(),this.initialized=!0)}async enable(){this.enabled||(await d.commands.executeCommand("setContext","hotReloadEnabled",!0),this.enabled=!0),this.initialize(),this.onChangeListener||(this.onChangeListener=d.workspace.onDidChangeTextDocument((e=>this.onPossibleChange(e))),this.onSaveListener=d.workspace.onWillSaveTextDocument((e=>this.applyOnSave(e)))),this.hotReloadIcon.show(),this.hotReloadIcon.tooltip=l.hotReloadStrings.availableStatus}async disable(e){this.enabled&&(await d.commands.executeCommand("setContext","hotReloadEnabled",!1),this.enabled=!1),this.hotReloadIcon.tooltip=e}async applyOnSave(e){if(this.enabled&&c.hotReloadOptionService.getIsHotReloadOnSave()&&e.reason===d.TextDocumentSaveReason.Manual)return(0,a.hotReload)()}async onPossibleChange(e){if(!this.enabled||this.hasPossibleChange)return;if("csharp"!==e.document.languageId)return;if(0===e.contentChanges.length)return;const t=d.extensions.getExtension(n.EXTENSION_ID);if(!t)throw new Error("Unable to find the extension.");const r=t.exports.serviceBroker,i=await r.getProxy(o.default.hotReloadService);null!==i&&(this.hasPossibleChange=!0,await i.onChanges()),await s.hotReloadLogger.log(new s.HotReloadLogMessage(s.HotReloadVerbosity.minimal,l.hotReloadStrings.changesDetected))}}t.HotReloadTracker=f,t.hotReloadTracker=new f,t.prepareHotReload=async function(e){e.subscriptions.push(d.commands.registerCommand(p.hotReload,a.hotReload)),e.subscriptions.push(d.commands.registerCommand(p.showHotReloadPanel,a.showHotReloadPanel)),(0,c.listenToHotReloadConfigUpdates)()}},8455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIconPath=void 0;const n=r(9496),o=r(6199),i=/^catalog:\/\/(.+):(.+)/,s=/^icon:\/\/(.+)/;t.getIconPath=function(e){if(!e)return;const t=i.exec(e);if(t){let e=(0,o.getImageCatalog)();if(e){let r=t[1],o=parseInt(t[2]),i=e.getIcon(r,o);if(i)return{light:n.Uri.file(i.light),dark:n.Uri.file(i.dark)}}return}const r=s.exec(e);return r?new n.ThemeIcon(r[1]):void 0}},1232:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupLanguageStatusItems=void 0;const n=r(9496),o=r(7407),i=r(2677),s=r(4138);class a{id;name;commandId;title;tooltip;initialText;documentSelectors=[];languageStatusItems=[];constructor(e,t,r,n,o,i){this.id=e,this.name=t,this.commandId=r,this.title=n,this.tooltip=o,this.initialText=i,this.documentSelectors=this.getDefaultDocumentSelectors()}getDefaultDocumentSelectors(){let e=[];return e.push({language:"csharp",pattern:"**/*.cs"}),e.push({language:"XAML",pattern:"**/*.xaml"}),e.push({language:"xml",pattern:"**/*.{csproj,xml,plist}"}),e.push({language:"plaintext",pattern:"**/*.sln"}),e.push({language:"css",pattern:"**/*.css"}),e.push({language:"aspnetcorerazor",pattern:"**/*.razor"}),e}deactivate(){this.languageStatusItems.forEach((e=>{e.dispose()})),this.languageStatusItems=[]}activate(){this.deactivate();const e={title:this.title,tooltip:this.tooltip,command:this.commandId};let t=0;this.documentSelectors.forEach((r=>{const n=`${this.id}.${t}}`,o=this.createLanguageStatusItem(n,this.name,r,e,this.initialText);this.languageStatusItems.push(o),t++}))}updateStatus(e){this.initialText=e,this.languageStatusItems.forEach((t=>{t.text=e??this.initialText}))}createLanguageStatusItem(e,t,r,o,i){let s=n.languages.createLanguageStatusItem(e,r);return s.name=t,s.command=o,s.text=i,s}setBusy(e){this.languageStatusItems.forEach((t=>{t.busy=e}))}setSeverity(e){this.languageStatusItems.forEach((t=>{t.severity=e}))}setCommand(e,t,r=void 0){this.commandId=e,this.tooltip=t,r&&(this.title=r);const n={title:this.title,tooltip:this.tooltip,command:this.commandId};this.languageStatusItems.forEach((e=>{e.command=n}))}}class c{languageStatusItem;unsubscribe;constructor(e){this.languageStatusItem=new a("csdevkit.debug.selectStartupProjectLanguageStatusItem",i.debugProjectLaunchStrings.selectStartupProject,s.selectStartupProject,i.debugProjectLaunchStrings.startupProjectTitle,i.debugProjectLaunchStrings.startupProjectTooltip,i.debugProjectLaunchStrings.noProjectPlaceholder),this.unsubscribe=e.subscribe(this),this.languageStatusItem.activate()}dispose(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0),this.languageStatusItem?.deactivate(),this.languageStatusItem=void 0}onNext(e){e?this.languageStatusItem?.updateStatus(e.displayName):this.languageStatusItem?.updateStatus(i.debugProjectLaunchStrings.noProjectPlaceholder)}onCompleted(){}onError(e){}}class u{languageStatusItem;unsubscribe;constructor(e){this.languageStatusItem=new a("csdevkit.debug.selectLaunchConfigurationLanguageStatusItem",i.debugProjectLaunchStrings.selectLaunchConfiguration,s.selectLaunchConfiguration,i.debugProjectLaunchStrings.launchConfigurationTitle,i.debugProjectLaunchStrings.launchConfigurationTooltip,i.debugProjectLaunchStrings.noProjectPlaceholder),this.unsubscribe=e.subscribe(this),this.languageStatusItem.activate()}dispose(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0),this.languageStatusItem?.deactivate(),this.languageStatusItem=void 0}onNext(e){if(e){let t=e.launchConfigurations.find((t=>t.id===e.activeLaunchConfigurationId));t?this.languageStatusItem?.updateStatus(t.displayName):this.languageStatusItem?.updateStatus(i.debugProjectLaunchStrings.noProjectPlaceholder)}else this.languageStatusItem?.updateStatus(i.debugProjectLaunchStrings.noProjectPlaceholder)}onCompleted(){}onError(e){}}t.setupLanguageStatusItems=function(e){let t=new c(o.startupProjectService);e.subscriptions.push(t);let r=new u(o.startupProjectService);e.subscriptions.push(r)}},9230:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupLaunchableProjectInfoObserver=t.getLaunchableProjectInfoObserver=t.LaunchableProjectInfoObserver=void 0;const n=r(5979),o=r(3187);class i extends o.Observer{projects;isSubscribed;launchConfigurationService;observers;constructor(){super((()=>this.onNext)),this.projects=[],this.isSubscribed=!1,this.observers=[]}dispose(){this.launchConfigurationService?.dispose()}subscribe(e){return this.observers.push(e),e.onNext(this.projects),()=>{this.observers=this.observers.filter((t=>t!==e))}}async subscribeToLaunchConfigurationService(e){let t;try{const r=await e.serviceBroker.getProxy(n.default.launchConfigurationService);if(!r)throw new Error("Could not get the ILaunchConfigurationService proxy to call subscribe.");t=await r.subscribe(this),this.isSubscribed=!0,this.launchConfigurationService=r}catch(e){this.isSubscribed=!1}return t}async setActiveLaunchConfiguration(e,t,r){if(!this.isSubscribed)throw new Error("LaunchableProjectInfoObserver has not been subscribed to an ILaunchConfigurationService");return await this.launchConfigurationService.setActiveLaunchConfiguration(e,t,r)}getCurrentProjects(){if(!this.isSubscribed)throw new Error("LaunchableProjectInfoObserver has not been subscribed to an ILaunchConfigurationService");return this.projects}onNext(e){this.projects=e;for(const t of this.observers)t.onNext(e)}onCompleted(){this.launchConfigurationService?.dispose();for(const e of this.observers)e.onCompleted();this.observers=[]}}let s;async function a(e,t,r){const n=await r.subscribeToLaunchConfigurationService(t);n&&e.subscriptions.push(n)}t.LaunchableProjectInfoObserver=i,t.getLaunchableProjectInfoObserver=function(){if(!s)throw new Error("LaunchableProjectInfoObserver has not been initialized");return s},t.setupLaunchableProjectInfoObserver=function(e,t){if(!s){let r=new i;t.hasServerProcessLoaded()?a(e,t,r):t.serverProcessLoaded((async()=>a(e,t,r))),s=r}}},7407:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeStartupProjectService=t.startupProjectService=t.StartupProjectService=void 0;const n=r(9496),o=r(9230),i=r(2677),s=r(8455);class a{projectStateObserver;storage;unsubscribeFromProjectStateObserver;constructor(e,t,r){this.projectStateObserver=e,this.storage=t,this.unsubscribeFromProjectStateObserver=r}}class c{state;startupProject;observers;startupProjectStorageKey="csdevkit.debug.startupProject";constructor(){this.observers=[]}initialize(e,t){if(this.state)throw new Error("StartupProjectService is already initialized");this.state=new a(e,t,void 0),this.state.unsubscribeFromProjectStateObserver=e.subscribe(this)}subscribe(e){return this.observers.push(e),e.onNext(this.startupProject),()=>{this.observers=this.observers.filter((t=>t!==e))}}onNext(e){if(!this.state)throw new Error("StartupProjectService has not been initialized");let t;if(this.startupProject&&(t=e.find((e=>e.fullPath===this.startupProject?.fullPath))),!t){let r=this.state.storage.get(this.startupProjectStorageKey);r&&(t=e.find((e=>e.fullPath===r)))}this.startupProject=t;for(const e of this.observers)e.onNext(this.startupProject)}onCompleted(){if(!this.state)throw new Error("StartupProjectService has not been initialized");for(const e of this.observers)e.onCompleted();this.observers=[]}onError(e){if(!this.state)throw new Error("StartupProjectService has not been initialized");for(const t of this.observers)t.onError(e);this.observers=[]}dispose(){this.state&&(this.state.unsubscribeFromProjectStateObserver&&this.state.unsubscribeFromProjectStateObserver(),this.state.projectStateObserver.dispose(),this.state=void 0)}async pickStartupProject(){if(!this.state)throw new Error("StartupProjectService has not been initialized");let e=this.state.projectStateObserver.getCurrentProjects();if(0===e.length)return void n.window.showErrorMessage(i.debugProjectLaunchStrings.errorNoLaunchableProjects);const t=await n.window.showQuickPick(e.map((e=>new u(e))),{title:i.debugProjectLaunchStrings.selectStartupProject});if(t){this.startupProject=t.info,this.state.storage.update(this.startupProjectStorageKey,this.startupProject.fullPath);for(const e of this.observers)e.onNext(this.startupProject)}return t?.info}getCurrentStartupProject(){return this.startupProject}async getOrPickCurrentStartupProject(){return this.startupProject||(this.startupProject=await this.pickStartupProject()),this.startupProject}isInitialized(){return void 0!==this.state}}t.StartupProjectService=c,t.startupProjectService=new c,t.initializeStartupProjectService=function(e){if(!t.startupProjectService.isInitialized()){const r=(0,o.getLaunchableProjectInfoObserver)();t.startupProjectService.initialize(r,e.workspaceState),e.subscriptions.push(t.startupProjectService)}};class u{info;label;description;detail;iconPath;constructor(e){this.info=e,this.label=e.displayName,this.description=e.description,this.detail=e.details,this.iconPath=(0,s.getIconPath)(e.icon)}}},6342:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerDynamicDotnetConfigurationProvider=void 0;const n=r(9496),o=r(9230),i=r(6862);t.registerDynamicDotnetConfigurationProvider=function(e,t){const r=(0,o.getLaunchableProjectInfoObserver)(),s=new i.DotnetDynamicConfigurationProvider(t,r);return e.subscriptions.push(s),e.subscriptions.push(n.debug.registerDebugConfigurationProvider(i.DotnetDynamicConfigurationProvider.type,s,n.DebugConfigurationProviderTriggerKind.Dynamic)),{configurationProvider:s,launchableProjectInfoObserver:r}}},2269:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugLaunch=void 0;const n=r(7147),o=r(1017),i=r(9496),s=r(9279),a=r(9781),c=r(77),u=r(7195),l=r(7867),d=r(5979),p=r(6315),f=r(2677),h=r(5010),g=r(6862);t.debugLaunch=async function(e,t,r,v,m){const y=new h.TelemetryActivity(m,u.telemetryService);r.noDebug&&y.addOrUpdateProperties({noDebug:String(!0)}),r.stopAtEntry&&y.addOrUpdateProperties({stopAtEntry:String(!0)});let _=!1,S=!1;if(n.readFileSync(e).includes("<UseMaui>true</UseMaui>")){if(!i.extensions.getExtension(s.MAUI_EXTENSION_ID)){_=!0;const e="Install the .NET MAUI extension";i.window.showErrorMessage(f.errorStrings.mauiExtensionNotFound,e).then((t=>{t===e&&i.env.openExternal(i.Uri.parse(s.MAUI_EXTENSION_URL))}))}let e=new a.OutputMonitor;if(await(0,l.dotnetCommand)(c.DotnetCommand.checkMauiWorkloads,void 0,["workload","list"],e),0===e.getOutput().match(/maui.\*/g)?.length){S=!0;const e="Install the .NET MAUI workloads";i.window.showErrorMessage(f.errorStrings.mauiWorkloadNotFound,e).then((t=>{t===e&&i.env.openExternal(i.Uri.parse(s.MAUI_WORKLOAD_URL))}))}if(_||S)return!1}const E=await v.getProxy(d.default.dotnetDebugConfigurationService);if(!E)throw new Error("Unable to obtain IDotnetDebugConfigurationService");try{const n=o.basename(e,".csproj"),s=await E.resolveDebugConfigurationWithLaunchConfigurationService(e,{name:g.DotnetDynamicConfigurationProvider.createDebugConfigurationName(n),type:"dotnet",request:"launch",...r},void 0),a=p.IDotnetDebugConfigurationServiceResultResolver.resolve(s);a?(y.addOrUpdateProperties({succeeded:String(!0)}),y.sendTelemetry(),i.debug.startDebugging(t,a,void 0)):null===a&&(y.addOrUpdateProperties({succeeded:String(!1)}),y.sendTelemetry())}finally{E?.dispose()}}},1433:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorStrings=void 0;const n=r(9496),o=r(8472);o.config({bundleFormat:o.BundleFormat.standalone,locale:n.env.language,messageFormat:o.MessageFormat.both});const i=o.loadMessageBundle(r(1017).join(__dirname,"debugger\\strings.ts"));t.errorStrings={failProvideDebugConfigurations:i(0,null)}},6429:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentStateManager=void 0;const n=r(9679),o=r(2361),i=r(7195),s=r(5979),a=r(5010),c=r(3228),u=r(9496),l=r(1017),d=r(9496),p=r(9496),f=r(4138),h=r(2677);class g extends o.EventEmitter{brokeredServiceHost;environmentService;environmentServiceSubscriber;operationInProgress;isDisposing=!1;environmentStateObserver;constructor(e){super(),this.brokeredServiceHost=e,this.environmentService=(0,c.lazyPromiseLambda)((()=>this.initEnvironmentServiceProxy()))}async dispose(){this.isDisposing=!0;try{if(this.environmentServiceSubscriber){const e=await this.environmentService;this.environmentServiceSubscriber?.dispose(),e.dispose()}}catch(e){}}getLatestEnvironmentState(){return this.environmentStateObserver?.getLatestEnvironmentState()}getOpenedSolution(){const e=this.environmentStateObserver?.getLatestEnvironmentState();return e?.solutions[0]}getActiveWorkspace(){const e=u.workspace.workspaceFolders;if(e&&e.length>0){if(1===e.length)return e[0];{const t=this.environmentStateObserver?.getLatestEnvironmentState();if(t){const e=t.solutions[0];if(e){const t=u.workspace.getWorkspaceFolder(u.Uri.file(e));if(t)return t}for(let e=0;e<t.projects.length;e++){const r=t.projects[e].projectId.fullPath;if(r){const e=u.workspace.getWorkspaceFolder(u.Uri.file(r));if(e)return e}}}return e[0]}}}getActiveWorkspaceRoot(){const e=this.getActiveWorkspace();if(e)return e.uri.fsPath;const t=this.getOpenedSolution();return t?l.dirname(t):void 0}async closeSolution(){const e=await this.environmentService;await e.clear()}async setSolutionAndFolderWorkspace(e,t,r,n){const o=await this.environmentService,i=await o.setSolutionWorkspace(e,r,t,n);return this.environmentStateObserver.updateEnvironmentStateIfNeeded(i)}async openNoSolutionWorkspace(e,t,r){const n=await this.environmentService,o=await n.openNoSolutionWorkspace(e,t,r);return this.environmentStateObserver.updateEnvironmentStateIfNeeded(o)}async loadSolution(e){const t=await this.environmentService,r=await t.addSolution(e);return this.environmentStateObserver.updateEnvironmentStateIfNeeded(r)}async runOperation(e){for(;this.operationInProgress;)await this.operationInProgress.catch((()=>{}));const t=e();this.operationInProgress=t.then((()=>this.operationInProgress=void 0));try{return await t}finally{this.operationInProgress=void 0}}async initEnvironmentServiceProxy(){const e=new a.TelemetryActivity("environment-service-initialization",i.telemetryService);let t=performance.now();const r=await this.brokeredServiceHost.serviceBroker.getProxy(s.default.environmentService);let n=performance.now();if(e.addOrUpdateMeasurements({getProxy:n-t}),!r)throw new Error("Could not get the IEnvironmentService proxy.");return t=performance.now(),this.environmentStateObserver=new v((e=>this.emit("environmentStateChanged",e))),r&&(this.environmentServiceSubscriber=await r.subscribe(this.environmentStateObserver)),n=performance.now(),e.addOrUpdateMeasurements({registerObserver:n-t}),this.isDisposing&&this.environmentServiceSubscriber?.dispose(),e.sendTelemetry(),r}}t.EnvironmentStateManager=g;class v extends n.Observer{onUpdateEnvironmentStateCallback;latestEnvironmentState;configurationStatusBarItem;latestConfiguration;getLatestEnvironmentState(){return this.latestEnvironmentState}constructor(e){super((()=>this.onNext)),this.onUpdateEnvironmentStateCallback=e}onNext(e){this.updateEnvironmentStateIfNeeded(e)}updateEnvironmentStateIfNeeded(e){if(!this.latestEnvironmentState||e.version>this.latestEnvironmentState.version){this.latestEnvironmentState=e,0===this.latestEnvironmentState.solutions.length?d.commands.executeCommand("setContext","solutionOpened",!1):d.commands.executeCommand("setContext","solutionOpened",!0),this.onUpdateEnvironmentStateCallback(this.latestEnvironmentState),this.configurationStatusBarItem||(this.configurationStatusBarItem=p.window.createStatusBarItem("csdevkit.configuration",p.StatusBarAlignment.Left,11),this.configurationStatusBarItem.name=h.messageStrings.configurationStatusName,this.configurationStatusBarItem.command=f.selectActiveConfiguration,this.configurationStatusBarItem.tooltip=h.messageStrings.configurationTooltip);const t=this.latestEnvironmentState.configuration;t?(t!==this.latestConfiguration&&(this.configurationStatusBarItem.text=t.replace(/\|/g," "),this.latestConfiguration=t),this.configurationStatusBarItem.show()):this.configurationStatusBarItem.hide()}return this.latestEnvironmentState}}},77:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DotnetCommandError=t.DotnetCommand=t.SolutionCloseError=t.SolutionOpenError=t.SolutionReloadError=t.ExitCodeError=t.ErrorCodeError=void 0;class r extends Error{errorCode;constructor(e,t){super(t),this.errorCode=e,this.name="ErrorCodeError",this.errorCode=e}}t.ErrorCodeError=r;class n extends r{constructor(e,t){super(e,t),this.name="ExitCodeError"}}t.ExitCodeError=n;class o extends Error{constructor(e){super(e),this.name="SolutionReloadError"}}t.SolutionReloadError=o;class i extends Error{constructor(e){super(e),this.name="SolutionOpenError"}}t.SolutionOpenError=i;class s extends Error{constructor(e){super(e),this.name="SolutionCloseError"}}var a;t.SolutionCloseError=s,function(e){e[e.newFile=0]="newFile",e[e.checkMauiTemplate=1]="checkMauiTemplate",e[e.checkMauiWorkloads=2]="checkMauiWorkloads",e[e.addReference=3]="addReference",e[e.newSln=4]="newSln",e[e.slnAddIntoFolder=5]="slnAddIntoFolder",e[e.slnAdd=6]="slnAdd",e[e.slnRemoveProject=7]="slnRemoveProject",e[e.restore=8]="restore",e[e.updateReference=9]="updateReference",e[e.newProject=10]="newProject",e[e.info=11]="info",e[e.sdkCheck=12]="sdkCheck",e[e.dotnetVersion=13]="dotnetVersion",e[e.checkAspireTemplate=14]="checkAspireTemplate",e[e.nugetAddPackage=15]="nugetAddPackage",e[e.nugetUpdatePackage=16]="nugetUpdatePackage",e[e.nugetRemovePackage=17]="nugetRemovePackage",e[e.nugetPackageSearch=18]="nugetPackageSearch",e[e.nugetGetVersions=19]="nugetGetVersions",e[e.nugetListInstalledPackages=20]="nugetListInstalledPackages",e[e.nugetListOutdatedPackages=21]="nugetListOutdatedPackages"}(a||(t.DotnetCommand=a={}));class c extends n{constructor(e,t,r){super(t,r);const n=c.getCommandName(e);this.name="DotnetCommand"+n+"Error"}static getCommandName(e){switch(e){case a.newFile:return"NewFile";case a.checkMauiTemplate:return"CheckMauiTemplate";case a.checkMauiWorkloads:return"CheckMauiWorkloads";case a.addReference:return"AddReference";case a.newSln:return"NewSln";case a.slnAddIntoFolder:return"SlnAddIntoFolder";case a.slnAdd:return"SlnAdd";case a.slnRemoveProject:return"SlnRemoveProject";case a.restore:return"Restore";case a.updateReference:return"UpdateReference";case a.newProject:return"NewProject";case a.info:return"Info";case a.sdkCheck:return"SdkCheck";case a.dotnetVersion:return"DotnetVersion";case a.checkAspireTemplate:return"CheckAspireTemplate";case a.nugetAddPackage:return"NuGetAddPackage";case a.nugetUpdatePackage:return"NuGetUpdatePackage";case a.nugetRemovePackage:return"NuGetRemovePackage";case a.nugetPackageSearch:return"NuGetPackageSearch";case a.nugetGetVersions:return"NuGetGetVersions";case a.nugetListInstalledPackages:return"NuGetListInstalledPackages";case a.nugetListOutdatedPackages:return"NuGetListOutdatedPackages";default:return""}}}t.DotnetCommandError=c},965:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPackageJsonWithCsDevKitExports=t.idsOfExtensionsAllowedToExtendCsDevKit=void 0;const n=r(9279);var o;t.idsOfExtensionsAllowedToExtendCsDevKit=[n.EXTENSION_ID,n.CSHARP_EXTENSION_ID,"ms-dotnettools.dotnet-maui","ms-dotnettools.vscodeintellicode-csharp","ms-dotnettools.vscode-diagnosticshub"],function(e){e.is=function(e){return e&&!!e.csdevkitExports}}(o||(t.IPackageJsonWithCsDevKitExports=o={}))},7195:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=t.dotnetTaskProvider=t.projectInitializationStatus=t.environmentStateManager=t.solutionExplorerTreeView=t.solutionExplorerProvider=t.telemetryService=t.logger=void 0;const n=r(9244),o=r(8388),i=r(9496),s=r(6800),a=r(9397),c=r(9781),u=r(8343),l=r(7631),d=r(4138),p=r(2155),f=r(2614),h=r(1106),g=r(7702),v=r(4462),m=r(6925),y=r(6686),_=r(3771),S=r(31),E=r(634),w=r(9053),b=r(3334),T=r(126),C=r(1181),P=r(4424),I=r(4593),O=r(5300),N=r(1120),A=r(2070),R=r(976),x=r(6923),k=r(4611),D=r(1574),M=r(9235),j=r(9658),L=r(9546),F=r(5199),U=r(2624),B=r(4586),V=r(5970),$=r(3197),H=r(7224),q=r(6342),z=r(6429),G=r(4918),W=r(4145),K=r(4062),X=r(6460),J=r(9998),Q=r(2677),Y=r(5010),Z=r(6661),ee=r(2181),te=r(2906),re=r(9230),ne=r(7407),oe=r(8741),ie=r(1232),se=r(7147),ae=r(2037),ce=r(1017),ue=r(5113),le=r(3661),de=r(5723);let pe,fe,he;async function ge(e,r){e.hasServerProcessLoaded()?await r():e.serverProcessLoaded((async function(){try{await r()}catch(e){t.logger.log("Server process spawn handler failed: "+e,c.LogImportance.high)}}))}function ve(e,t){return(0,X.addDotNetDumpCreationEnvironmentValues)(t),(0,Z.writeCommonPropsToFileAsync)(e)}t.activate=async function(e){let r=null;async function se(e,t){r=e;try{const e=await t();return r+=" (succeeded)",e}catch(e){throw r+=" (failed)",e}}t.logger=new c.Logger(e.extension.packageJSON.displayName);const ae=e.logUri.fsPath;try{await se("initializeTelemetryAsync",(()=>async function(e){t.telemetryService=new Z.TelemetryService(e);try{await t.telemetryService.saveVSCodePropsAsync(e)}catch(e){t.logger.log("Saving VSCode common properties failed: "+e,c.LogImportance.high)}}(e)));const r=new Y.TelemetryActivity("extension-activation",t.telemetryService);await i.commands.executeCommand("setContext","solutionExplorerVisible",!1);const ce=await se("loadOrCreateCachedValue->getAllComponentsMap",(()=>(0,l.loadOrCreateCachedValue)(e,"components",(()=>(0,$.getAllComponentsMap)(e.asAbsolutePath("components")))))),me=await se("prepareBrokeredServices",(()=>(0,u.prepareBrokeredServices)(e,ce,t.logger)));let ye,_e=null;i.workspace.getConfiguration("dotnet").get("preferCSharpExtension")&&(0,G.doesCSharpExtensionSupportDeferral)()?(t.logger.log("C# Dev Kit extension is disabled because the setting 'dotnet.preferCSharpExtension' is set to 'true'"),r.addOrUpdateProperties({disabled:String(!0)})):await(0,G.checkCSharpExtensionVersionCompatibility)(e)&&(!function(e,t){e.subscriptions.push(i.commands.registerCommand(d.openSolution,(t=>(0,O.default)(e,t)))),e.subscriptions.push(i.commands.registerCommand(d.closeSolution,(()=>(0,O.closeSolution)(e)))),e.subscriptions.push(i.commands.registerCommand(d.addNewProject,(t=>(0,g.default)(e,t)))),e.subscriptions.push(i.commands.registerCommand(d.addExistingProject,(t=>(0,f.default)(e,t)))),e.subscriptions.push(i.commands.registerCommand(d.removeProject,(t=>(0,x.default)(e,t)))),e.subscriptions.push(i.commands.registerCommand(d.buildSolution,y.default)),e.subscriptions.push(i.commands.registerCommand(d.rebuildSolution,N.default)),e.subscriptions.push(i.commands.registerCommand(d.cleanSolution,_.default)),e.subscriptions.push(i.commands.registerCommand(d.showEntitlementsStatus,J.showEntitlementsStatusCommand)),e.subscriptions.push(i.commands.registerCommand(d.openInTerminal,P.default)),e.subscriptions.push(i.commands.registerCommand(d.signIntoVsAccount,J.signInCommand)),e.subscriptions.push(i.commands.registerCommand(d.searchProjectFromCommandPalette,U.searchProjectFromCommandPalette)),e.subscriptions.push(i.commands.registerCommand(d.searchOpenFromCommandPalette,U.searchOpenFromCommandPalette)),e.subscriptions.push(i.commands.registerCommand(d.searchFromCommandPalette,U.searchFromCommandPalette)),e.subscriptions.push(i.commands.registerCommand(d.revealFileInOS,j.default)),e.subscriptions.push(i.commands.registerCommand(d.deleteItem,b.default)),e.subscriptions.push(i.commands.registerCommand(d.addNewFile,h.default)),e.subscriptions.push(i.commands.registerCommand(d.addExistingFile,p.default)),e.subscriptions.push(i.commands.registerCommand(d.addProjectReference,m.default)),e.subscriptions.push(i.commands.registerCommand(d.rename,D.default)),e.subscriptions.push(i.commands.registerCommand(d.copyPath,S.copyPath)),e.subscriptions.push(i.commands.registerCommand(d.copyRelativePath,S.copyRelativePath)),e.subscriptions.push(i.commands.registerCommand(d.newSolutionFolder,C.default)),e.subscriptions.push(i.commands.registerCommand(d.renameSolutionFolder,M.default)),e.subscriptions.push(i.commands.registerCommand(d.removeSolutionFolder,k.default)),e.subscriptions.push(i.commands.registerCommand(d.newFolder,T.default)),e.subscriptions.push(i.commands.registerCommand(d.removeItem,A.default)),e.subscriptions.push(i.commands.registerCommand(d.openProjectsLogsView,I.default)),e.subscriptions.push(i.commands.registerCommand(d.debugProjectLaunch,(e=>(0,w.default)(e,{})))),e.subscriptions.push(i.commands.registerCommand(d.noDebugProjectLaunch,(e=>(0,w.default)(e,{noDebug:!0})))),e.subscriptions.push(i.commands.registerCommand(d.stepIntoProjectLaunch,(e=>(0,w.default)(e,{stopAtEntry:!0})))),e.subscriptions.push(i.commands.registerCommand(d.debugFileLaunch,(e=>(0,E.default)(e,{})))),e.subscriptions.push(i.commands.registerCommand(d.noDebugFileLaunch,(e=>(0,E.default)(e,{noDebug:!0})))),e.subscriptions.push(i.commands.registerCommand(d.selectStartupProject,L.default)),e.subscriptions.push(i.commands.registerCommand(d.selectLaunchConfiguration,F.default)),e.subscriptions.push(i.commands.registerCommand(d.installDotnetSdk,(()=>(0,W.showInstallDotnetSdkWebview)(e)))),e.subscriptions.push(i.commands.registerCommand(d.installDotnetSdkFromWalkthrough,(()=>function(e){(0,W.showInstallDotnetSdkWebviewBeside)(e)}(e)))),e.subscriptions.push(i.commands.registerCommand(d.helperOpenUrl,(t=>(0,W.openUrlCmdHandler)(e,"OpenUrl",t)))),e.subscriptions.push(i.commands.registerCommand(d.syncWithActiveItem,B.default)),e.subscriptions.push(i.commands.registerCommand(d.selectActiveConfiguration,(()=>(0,ue.default)(e)))),e.subscriptions.push((0,s.instrumentOperationAsVsCodeCommand)(d.webviewRunCommand,K.webviewCmdLinkHandler)),e.subscriptions.push(i.commands.registerCommand(d.addNuGetPackage,v.default)),e.subscriptions.push(i.commands.registerCommand(d.updateNuGetPackage,V.default)),e.subscriptions.push(i.commands.registerCommand(d.removeNuGetPackage,R.default)),e.subscriptions.push(i.commands.registerCommand(d.openCoverageReport,le.default))}(e,me.serviceBroker),ye=function(e,r){t.environmentStateManager=new z.EnvironmentStateManager(r),t.solutionExplorerProvider=new ee.SolutionExplorerProvider(e,r,t.environmentStateManager),t.projectInitializationStatus=new de.ProjectInitializationStatus;const s=i.window.registerTreeDataProvider("solutionExplorer",t.solutionExplorerProvider);return t.solutionExplorerTreeView=i.window.createTreeView("solutionExplorer",{treeDataProvider:t.solutionExplorerProvider,dragAndDropController:t.solutionExplorerProvider}),(0,te.subscribeToSolutionTreeEvents)(),e.subscriptions.push(s,t.solutionExplorerProvider,t.solutionExplorerTreeView,t.projectInitializationStatus),e.subscriptions.push(i.window.registerWebviewPanelSerializer(d.installDotnetSdk,new W.InstallDotnetSdkViewSerializer(e))),ge(r,(()=>(0,o.createCoverageControllers)(e,r.serviceBroker,Q.codeCoverageStrings))),ge(r,(()=>(0,n.createAndRegisterTestController)(e,r.serviceBroker,(0,o.getCollectionController)(),Q.testExplorerStrings))),{solutionExplorerProvider:t.solutionExplorerProvider}}(e,me),(i.workspace.workspaceFolders&&i.workspace.workspaceFolders.length>0?i.workspace.workspaceFolders[0].uri.fsPath:null)&&(t.dotnetTaskProvider=new a.DotnetTaskProvider,pe=i.tasks.registerTaskProvider(a.DotnetTaskProvider.dotnetType,t.dotnetTaskProvider),(0,te.showSolutionExplorer)(e)),(0,re.setupLaunchableProjectInfoObserver)(e,me),(i.workspace.getConfiguration("csharp.preview").get("improvedLaunchExperience")??!1)&&((0,ne.initializeStartupProjectService)(e),(0,oe.setupActiveLaunchConfigurationService)(e),(0,ie.setupLanguageStatusItems)(e)),_e=await se("registerDynamicDotnetConfigurationProvider",(()=>(0,q.registerDynamicDotnetConfigurationProvider)(e,me))),(0,H.prepareHotReload)(e)),i.window.onDidChangeActiveTextEditor((e=>{let r=i.workspace.getConfiguration("dotnet").get("automaticallySyncWithActiveItem");if(e&&r&&t.solutionExplorerTreeView.visible)try{he&&he.cancel(),he=new i.CancellationTokenSource,(0,B.default)(he.token)}catch(e){}}));const[Se,Ee]=await se("registerIdentityService",(()=>(0,J.registerIdentityService)(e)));return t.telemetryService?.registerForTelLevelChangeEvent(me,e),t.telemetryService?.registerUpdateIsMicrosoftInternal(Se,e),r.end(),r.sendTelemetry(),fe=Z.TelemetryService.getSessionId(i.env.sessionId),t.telemetryService?.sendTelemetryEvent("CSDevKit/Extension/Start"),{serviceBroker:me.serviceBroker,getBrokeredServiceServerPipeName:me.getBrokeredServiceServerPipeName,components:ce,hasServerProcessLoaded:me.hasServerProcessLoaded,serverProcessLoaded:me.serverProcessLoaded,writeCommonPropsAsync:Z.writeCommonPropsToFileAsync,setupTelemetryAsync:ve,setupTelemetryEnvironmentAsync:t=>(0,Z.writeCommonPropsToFileAsync)(e,t),launchChildProcessAsync:(e,t,r,n)=>async function(e,t,r,n,o){return(0,X.launchChildProcess)(e,t,r,n,o)}(ce,e,t,r,n),testHooks:ye?{views:ye,telemetryService:t.telemetryService,identityTestHooks:Ee,getTestController:n.getTestController,logDirectory:ae,debuggerTestExports:_e}:void 0}}catch(e){throw t.logger.reportExceptionTelemetryAndLog("activate",r,"",e,t.telemetryService),e}},t.deactivate=function(){let e="CsDevKit/Extension/Exit",r="deactivate: start";t.telemetryService?.sendTelemetryEvent(e+"/Begin");try{t.logger.log("C# Dev Kit deactivate() is now executing..."),r="deactivate: write session deactivated file",se.writeFile(ce.join(function(){let e=ce.join(ae.tmpdir(),"csdevkit","sessions","deactivated");try{se.existsSync(e)||se.mkdirSync(e,{recursive:!0})}catch(r){t.logger.log(`Failed to create deactivated sessions folder path ${e} due to ${r}`),e=ae.tmpdir()}return e}(),fe?.toLowerCase()+".txt"),"",(e=>{})),r="deactivate: dispose environmentStateManager",t.environmentStateManager?.dispose(),r="deactivate: dispose dotnetTaskProvider",r=pe?.dispose(),t.telemetryService?.sendTelemetryEvent(e,{shutdownReason:"Normal"})}catch(e){throw t.logger.reportExceptionTelemetryAndLog("deactivate",r,"",e,t.telemetryService,{shutdownReason:"Abnormal"}),e}finally{t.telemetryService?.dispose(),t.telemetryService=null}}},4918:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doesCSharpExtensionSupportDeferral=t.checkCSharpExtensionVersionCompatibility=void 0;const n=r(9279),o=r(7195),i=r(1249),s=r(9496),a=r(8472),c=r(6260);a.config({bundleFormat:a.BundleFormat.standalone,locale:s.env.language,messageFormat:a.MessageFormat.both});const u=a.loadMessageBundle(r(1017).join(__dirname,"extensionDependenciesChecks.ts"));t.checkCSharpExtensionVersionCompatibility=async function(e){const t=s.extensions.getExtension(n.CSHARP_EXTENSION_ID),r=t?.packageJSON.version;let a=!0;if(r?i.lt(r,n.CSHARP_EXTENSION_REQUIRED_VERSION)&&(o.logger.log(`The C# extension is installed, but has version ${r} which is incompatible with C# Dev Kit.`),async function(){const t=e.extension.packageJSON.displayName,r=u(0,null,t,n.CSHARP_EXTENSION_REQUIRED_VERSION,n.CSHARP_EXTENSION_ID),o=u(1,null);if(await s.window.showWarningMessage(r,o)===o){const e=s.extensions.getExtension(n.EXTENSION_ID)?.packageJSON.preview;e||s.extensions.getExtension(n.CSHARP_EXTENSION_ID)?.packageJSON.preview?await s.commands.executeCommand("workbench.extensions.action.switchToPreReleaseVersion",n.CSHARP_EXTENSION_ID):await s.commands.executeCommand("workbench.extensions.action.switchToReleaseVersion",n.CSHARP_EXTENSION_ID),await s.commands.executeCommand("workbench.action.reloadWindow")}}().catch((()=>{})),a=!1):(o.logger.log("The C# extension is missing."),a=!1),!a){let e=new c.TelemetryEvent("dependency-update-needed",o.telemetryService);e.addOrUpdateProperties({csharpExtensionCurrentVersion:r,csharpExtensionRequiredVersion:n.CSHARP_EXTENSION_REQUIRED_VERSION}),e.sendTelemetry()}return a},t.doesCSharpExtensionSupportDeferral=function(){const e=s.extensions.getExtension(n.CSHARP_EXTENSION_ID),t=e?.packageJSON.version;return!!t&&i.gte(t,n.CSHARP_EXTENSION_SUPPORTS_DEFERRAL_VERSION)}},336:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EXTENSION_ID=t.RECOMMENDED_VERSION_API_OLD=t.DOTNET_INSTALL_TOOL_EXTENSION_ID=t.OPTION_TO_CHECK_AND_ACQUIRE_ASPNETCORE=t.ACQUIRE_SDK_GLOBAL_API=t.AVAILABLE_VERSIONS_API=t.RECOMMENDED_VERSION_API=t.WEBVIEW_ID=void 0,t.WEBVIEW_ID="csdevkit.installDotnetSdk",t.RECOMMENDED_VERSION_API="dotnet.recommendedVersion",t.AVAILABLE_VERSIONS_API="dotnet.listVersions",t.ACQUIRE_SDK_GLOBAL_API="dotnet.acquireGlobalSDK",t.OPTION_TO_CHECK_AND_ACQUIRE_ASPNETCORE="dotnet.acquireStatus/options",t.DOTNET_INSTALL_TOOL_EXTENSION_ID="ms-dotnettools.vscode-dotnet-runtime",t.RECOMMENDED_VERSION_API_OLD="placeholder.dotnet.oldApiCallWhichNoLongerExists",t.EXTENSION_ID="ms-dotnettools.csdevkit"},4249:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllSuggestedSDKVersions=t.acquireSDK=t.getAlternativeRecommendedVersions=t.getRecommendedVersion=t.apiIsAvailable=void 0;const n=r(336),o=r(9496);function i(e){const t=o.extensions?.getExtension(n.DOTNET_INSTALL_TOOL_EXTENSION_ID),r=t?.packageJSON.version;if(!r)return!1;switch(e){case n.RECOMMENDED_VERSION_API:return r>="2.0.3";case n.AVAILABLE_VERSIONS_API:return r>="2.0.2";case n.ACQUIRE_SDK_GLOBAL_API:return r>="2.0.0";case n.RECOMMENDED_VERSION_API_OLD:return r>="2.0.2";case n.OPTION_TO_CHECK_AND_ACQUIRE_ASPNETCORE:return r>="2.0.9";default:return!1}}t.apiIsAvailable=i;const s={version:"8.0.100",channelVersion:"8.0",supportStatus:"lts",supportPhase:"active"};async function a(){const e={listRuntimes:!1};if(i(n.RECOMMENDED_VERSION_API)){const t=await o.commands.executeCommand(n.RECOMMENDED_VERSION_API,e);if(t&&t.at(0))return t.at(0)}else if(i(n.RECOMMENDED_VERSION_API_OLD)){const t=await o.commands.executeCommand(n.RECOMMENDED_VERSION_API,e);if(t)return{version:t,channelVersion:`${t.split(".").at(0)}.${t.split(".").at(1)}`,supportStatus:Number(t.charAt(0))%2==0?"lts":"sts",supportPhase:"eol"}}return o.window.showWarningMessage("Unable to get latest .NET Installation Data: Please update the .NET Install Tool to version 2.0.2 or later."),s}async function c(){const e={listRuntimes:!1};if(i(n.AVAILABLE_VERSIONS_API)){const t=(await o.commands.executeCommand(n.AVAILABLE_VERSIONS_API,e)).filter((e=>"maintenance"===e.supportPhase||"active"===e.supportPhase)).slice(1,3);if(t)return t}return o.window.showWarningMessage("Unable to get latest .NET Installation Data: Please update the .NET Install Tool to version 2.0.2 or later."),[s,s]}function u(e){return o.window.showErrorMessage(e.message),null}t.getRecommendedVersion=a,t.getAlternativeRecommendedVersions=c,t.acquireSDK=async function(e){const t={version:e.version,requestingExtensionId:n.EXTENSION_ID,installType:"global",architecture:void 0};if(i(n.ACQUIRE_SDK_GLOBAL_API))try{o.window.showInformationMessage("The .NET Install Tool began installing the .NET SDK. You may be asked for permission to complete the installation.");const e=await o.commands.executeCommand(n.ACQUIRE_SDK_GLOBAL_API,t);return e&&e.dotnetPath?(o.window.showInformationMessage(`Installation of the .NET SDK version ${t.version} succeeded.`),e):u(new Error("The .NET Install Tool returned an unexpected result. Please view the 'Output' -> '.NET Install Tool' window for more info."))}catch(e){return u(e instanceof Error?e:new Error("The .NET Install Tool failed to install the .NET SDK. Please view the 'Output' -> '.NET Install Tool' window for more info."))}else o.window.showErrorMessage("Unable to install the .NET SDK: The .NET Install Tool must be updated to version 2.0.0 or later.");return null},t.getAllSuggestedSDKVersions=async function(){return{recommended:await a(),alternatives:await c()}}},4145:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstallDotnetSdkViewSerializer=t.openUrlCmdHandler=t.showInstallDotnetSdkWebviewBeside=t.showInstallDotnetSdkWebview=void 0;const n=r(1017),o=r(9496),i=r(4062),s=r(4249),a=r(336),c=r(6800);t.showInstallDotnetSdkWebview=function(e){u.createOrShow(e.extensionPath)},t.showInstallDotnetSdkWebviewBeside=function(e){u.createOrShow(e.extensionPath,{beside:!0})},t.openUrlCmdHandler=async function(e,t,r){(0,c.sendInfo)(t,{url:r}),o.commands.executeCommand("vscode.open",o.Uri.parse(r))},t.InstallDotnetSdkViewSerializer=class{context;constructor(e){this.context=e}async deserializeWebviewPanel(e,t){u.createOrShow(this.context.extensionPath,{webviewPanel:e})}};class u{static instance;static viewType=a.WEBVIEW_ID;_panel;_extensionPath;_disposables=[];static createOrShow(e,t){let r=o.ViewColumn.Active;if(t?.beside){const e=o.window.activeTextEditor;r=void 0===e||e.viewColumn===o.ViewColumn.One?o.ViewColumn.Two:o.ViewColumn.One}u.instance?u.instance._panel?.reveal():u.instance=new u(e,t?.webviewPanel?t.webviewPanel:r)}constructor(e,t){this._extensionPath=e,t.viewType?this._panel=t:this._panel=o.window.createWebviewPanel(u.viewType,"Install New .NET SDK",t,{enableScripts:!0,localResourceRoots:[o.Uri.file(n.join(this._extensionPath,"out"))],enableCommandUris:!0,retainContextWhenHidden:!0}),this._panel.webview.html=this._getHtmlForWebview(),this._panel.onDidDispose((()=>this.dispose()),null,this._disposables),this._panel.webview.onDidReceiveMessage((e=>{switch(e.command){case"onWillFetchAvailableReleases":return void this.doFetchAvailableReleases();case"onWillFetchAsset":return void this.doFetchAsset(e.primaryAsset,e.payload);case"onWillDownloadDotnetSdk":return void this.doDownloadDotnetSdk(e.payload);case"onWillReloadWindow":this.doReloadWindow()}}),null,this._disposables)}async doFetchAvailableReleases(){const e=await(0,s.getAllSuggestedSDKVersions)();this._panel?.webview.postMessage({command:"onDidFetchAvailableReleases",payload:e})}async doFetchAsset(e,t){this._panel?.webview.postMessage({command:"onDidFetchAsset",primaryAsset:e,payload:t})}async doDownloadDotnetSdk(e){(0,s.acquireSDK)(e)}async doReloadWindow(){await(0,i.webviewCmdLinkHandler)({webview:u.viewType,identifier:"Reload Window",command:"workbench.action.reloadWindow"})}dispose(){for(u.instance=void 0,this._panel?.dispose(),this._panel=void 0;this._disposables.length;){const e=this._disposables.pop();e&&e.dispose()}}_getHtmlForWebview(){const e=o.Uri.file(n.join(this._extensionPath,"out","assets","install-sdk","index.js")),t=this._panel?.webview.asWebviewUri(e);return`<!DOCTYPE html>\n\t\t\t<html lang="en">\n\t\t\t<head>\n\t\t\t\t<meta charset="utf-8">\n\t\t\t\t<meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">\n\t\t\t\t<meta name="theme-color" content="#000000">\n\t\t\t\t<title>React App</title>\n\t\t\t</head>\n\t\t\t<body>\n\t\t\t\t<noscript>You need to enable JavaScript to run this app.</noscript>\n\t\t\t\t<div id="root"></div>\n\n\t\t\t\t<script nonce="${(0,i.getNonce)()}" src="${t}" type="module"><\/script>\n\t\t\t</body>\n\t\t\t</html>`}}},4062:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNonce=t.openExternalLinkFromWebview=t.webviewCmdLinkHandler=t.encodeExternalLinkWithTelemetry=t.encodeCommandUriWithTelemetry=void 0;const n=r(9496),o=r(6800),i=r(6113);function s(e,t,r,n){const o={webview:e,identifier:t,command:r,args:n};return`command:csdevkit.webview.runCommand?${encodeURIComponent(JSON.stringify(o))}`}async function a(e){const{webview:t,identifier:r,command:i,args:s}=e;(0,o.sendInfo)("",{name:"openWebviewUrl",webview:t,identifier:r}),void 0!==s?await n.commands.executeCommand(i,...s):await n.commands.executeCommand(i)}t.encodeCommandUriWithTelemetry=s,t.encodeExternalLinkWithTelemetry=function(e,t,r){return s(e,t,"csdevkit.helper.openUrl",[r])},t.webviewCmdLinkHandler=a,t.openExternalLinkFromWebview=async function(e,t,r){await a({webview:e,identifier:t,command:"csdevkit.helper.openUrl",args:[r]})},t.getNonce=function(){const e=new Uint8Array(16),t=i.getRandomValues(e),r=String.fromCharCode(...t);return btoa(r)}},7867:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dotnetCommand=t.acquireRuntime=void 0;const n=r(2081),o=r(9496),i=r(9279),s=r(77),a=r(7195),c=r(4832),u=r(3228);var l;let d;!function(e){e[e.DisplayAllErrorPopups=0]="DisplayAllErrorPopups",e[e.DisableErrorPopups=1]="DisableErrorPopups"}(l||(l={})),t.acquireRuntime=async function(e){if(d)return d;if(void 0===d){const t=await(0,c.getDotnetInfo)(a.logger),r=await(0,c.findMatchedDotnetFromPath)(e,a.logger,t);let n="string"==typeof r?r:null,s=!1;if(n?a.logger.log(`Using preinstalled .NET runtime at "${n}"`):(n=await async function(e){let t={version:i.NET_RUNTIME_VERSION,requestingExtensionId:i.EXTENSION_ID,mode:"aspnetcore"},r="true"===process.env.AUTOMATED_TESTING?void 0:await o.commands.executeCommand("dotnet.acquireStatus",t);return void 0===r&&(await o.commands.executeCommand("dotnet.showAcquisitionLog"),r=await o.commands.executeCommand("dotnet.acquire",t)),r?.dotnetPath?(await async function(e,t){const r=[e];await o.commands.executeCommand("dotnet.ensureDotnetDependencies",{command:e,arguments:r})}(r.dotnetPath),r.dotnetPath):null}())&&(a.logger.log(`Using local .NET runtime at "${n}"`),s=!0),n){const e=t?await(0,c.findInstalledDotnetFromPath)(a.logger):null;d=s?{path:n,isAcquired:s,globalRuntimeMismatchingReason:r,globalPath:e,dotnetInfo:t}:{path:n,isAcquired:s,globalPath:e,dotnetInfo:t}}else d=null}if(null===d)throw new Error("Could not resolve the dotnet path!");return d},t.dotnetCommand=async function(e,t,r,i,c){try{const e="win32"===process.platform?"dotnet.exe":"dotnet",s=c?a.logger:i??a.logger;await s.watch(`command: "${e}" ${r.join(" ")}`,(async()=>{const s={windowsHide:!0,cwd:t,env:{DOTNET_CLI_UI_LANGUAGE:o.env.language,...process.env}},a=n.execFile(e,r,s);await(0,u.waitForProcess)(a,i)}))}catch(t){throw t instanceof s.ExitCodeError?new s.DotnetCommandError(e,t.errorCode,t.message):t instanceof Error?new s.DotnetCommandError(e,0,t.message):new s.DotnetCommandError(e,0,t?.toString()??"")}}},4832:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDotnetVersion=t.getDotnetInfo=t.findInstalledDotnetFromPath=t.findMatchedDotnetFromPath=t.CompatibleDotnetSearchFailedReason=void 0;const n=r(9496),o=r(2081),i=r(1249),s=r(9279),a=r(3228),c=r(9781),u=r(3292),l=r(1017),d=r(4249),p=r(336);var f;async function h(e){const t=(0,a.isWindows)()?"where.exe":"which";try{const r=await v(t,["dotnet"]);if(!r)return e.log(`Unable to find dotnet from ${t}.`,c.LogImportance.high),null;const n=r.trim().replace(/\r/gm,"").split("\n")[0];if(!await(0,a.exists)(n))return e.log(`dotnet path does not exist: "${n}"`,c.LogImportance.high),null;e.log(`dotnet found at ${n}`,c.LogImportance.low);const o=await(0,u.realpath)(n);return e.log(`dotnet resolved to ${o}`,c.LogImportance.low),o}catch(r){e.log(`Failed to find dotnet from path with "${t} dotnet": ${r}`,c.LogImportance.high);const n=process.env.PATH?.split(l.delimiter);if(n){const t="win32"===process.platform?"dotnet.exe":"dotnet";for(let r=0;r<n.length;r++){const o=l.resolve(n[r],t);if(await(0,a.exists)(o)){e.log(`dotnet found at ${o} from PATH`,c.LogImportance.low);const t=await(0,u.realpath)(o);return e.log(`dotnet resolved to ${t}`,c.LogImportance.low),t}}}}return null}async function g(e){try{let t;const r=n.workspace?.workspaceFolders;r&&r.length>0&&(t=r[0].uri.fsPath);const o=await v("dotnet",["--info"],t,{...process.env,DOTNET_CLI_UI_LANGUAGE:"en-US"});let s,a;e.log(`dotnet --info\n${o}`,c.LogImportance.low);let u=o.replace(/\r/gm,"").split("\n");for(const e of u){let t;(t=/^\s*Version:\s*([^\s].*)$/.exec(e))?s=i.parse(t[1]):(t=/^\s*Architecture:\s*(.*)/.exec(e))&&(a=t[1])}const l={},d=await v("dotnet",["--list-runtimes"]);e.log(`dotnet --list-runtimes\n${d}`,c.LogImportance.low),u=d.split(/\r?\n/);for(const e of u){let t;if(t=/^([\w\.]+) ([^ ]+) \[([^\]]+)\]$/.exec(e)){const e=t[1],r=t[2],n=t[3];e in l?l[e].push({version:i.parse(r),path:n}):l[e]=[{version:i.parse(r),path:n}]}}if(s){const t={version:s,architecture:a,runtimeVersions:l};return e.log(`Returning dotnet info: ${JSON.stringify(t)}`,c.LogImportance.low),t}return e.log("Failed to parse dotnet version information",c.LogImportance.high),null}catch{return e.log("A valid dotnet installation could not be found on the PATH.",c.LogImportance.low),null}}async function v(e,t=[],r=process.cwd(),n=process.env){return new Promise(((i,s)=>{o.execFile(e,t,{windowsHide:!0,maxBuffer:512e3,cwd:r,env:n},((e,t,r)=>{e?s(new Error(`${e}\nSTDOUT:\n${t}\nSTDERR:\n${r}`)):r&&!r.includes("screen size is bogus")?s(new Error(r)):i(t)}))}))}!function(e){e[e.noCandidateFound=0]="noCandidateFound",e[e.mismatchedArchitectureFound=1]="mismatchedArchitectureFound",e[e.mismatchedHigherVersionRuntimeFound=2]="mismatchedHigherVersionRuntimeFound",e[e.mismatchedVersionRuntimeFound=3]="mismatchedVersionRuntimeFound",e[e.disabled=4]="disabled"}(f||(t.CompatibleDotnetSearchFailedReason=f={})),t.findMatchedDotnetFromPath=async function(e,t,r){try{if(void 0===r&&(r=await g(t)),!r)return f.noCandidateFound;const o=await async function(e,t){let r=process.arch;if(e){const n=e.asAbsolutePath("extension.vsixmanifest");if(await(0,a.exists)(n)){const e=await(0,u.readFile)(n,"utf-8"),o=/TargetPlatform="[^"-]+-(.*)"/.exec(e);o?(r=o[1],t.log(`Found extension target platform: ${r}`,c.LogImportance.low)):t.log(`Could not find extension target platform in "${n}. Falling back to ${r}."`,c.LogImportance.high)}else t.log(`Unable to find extension target platform - no vsix manifest file exists at "${n}". Falling back to ${r}.`,c.LogImportance.low)}return r}(e,t);if(o!==r.architecture)return t.log(`The architecture of the .NET runtime (${r.architecture}) does not match the architecture of the extension (${o}).`,c.LogImportance.low),f.mismatchedArchitectureFound;const v=i.parse(`${s.NET_RUNTIME_VERSION}.${s.NET_RUNTIME_VERSION_PATCH}`),m=r.runtimeVersions["Microsoft.NETCore.App"],y=r.runtimeVersions["Microsoft.AspNetCore.App"],_=(0,d.apiIsAvailable)(p.OPTION_TO_CHECK_AND_ACQUIRE_ASPNETCORE);let S=!1,E=!1,w="";for(const e of m){const t=e.version;if(!(t.prerelease?.length>0))if(t.major===v.major){if(t.compare(v)>=0&&(!_||y?.find((e=>0===e.version.compare(t))))){S=!0,w=e.path;break}}else 1!==t.compare(v)||_&&!y?.find((e=>0===e.version.compare(t)))||(E=!0,w=e.path)}if(!S)return t.log("No extension compatible .NET runtime found from installed SDKs.",c.LogImportance.low),E?f.mismatchedHigherVersionRuntimeFound:f.mismatchedVersionRuntimeFound;if("true"===process.env.CSDEVKIT_FORCE_OWN_RUNTIME||"darwin"===process.platform&&n.workspace?.getConfiguration("dotnet")?.get("workingWithTestSignedSdk"))return f.disabled;if(w&&(w=l.dirname(l.dirname(w)),w)){const e=l.join(w,(0,a.isWindows)()?"dotnet.exe":"dotnet");if(await(0,a.exists)(e))return e}const b=await h(t);if(b)return b}catch(e){t.log(`Failed to find dotnet info from path: ${e}`,c.LogImportance.high)}return f.noCandidateFound},t.findInstalledDotnetFromPath=h,t.getDotnetInfo=g,t.getDotnetVersion=async function(e,t){try{const r=await v("dotnet",["--version"],e,{...process.env});return t.log(`dotnet --version\n${r}`,c.LogImportance.low),i.parse(r.replace(/[\r\n]/gm,""))}catch{return t.log(`dotnet --version failed on ${e}.`,c.LogImportance.low),null}}},9058:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NuGetConfigurationSettings=void 0;const n=r(9496);class o{_config=void 0;constructor(e){this._config=this.getConfiguration(e)}getConfiguration(e){const t=n.workspace.getConfiguration(e);if(!t)throw new Error(`Configuration ${t} not found`);return t}getValue(e,t){return this._config?.get(e,t)??t}}class i extends o{static configurationName="nuget";static includePrereleaseKey="includePrereleasePackageVersions";constructor(){super(i.configurationName)}get includePrerelease(){return this.getValue(i.includePrereleaseKey,!1)}}t.NuGetConfigurationSettings=i},8986:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPrereleaseStatusPlaceholder=t.getPackageFromContext=t.getProjectFromContext=t.retrieveOutdatedPackages=t.retrieveInstalledPackages=t.retrievePackageVersions=t.showVersionPicker=t.showPackagePickerFromPromise=t.showProjectPicker=t.verifyServicePrerequisites=t.NuGetAction=void 0;const n=r(9496),o=r(8489),i=r(1249),s=r(9397),a=r(7195),c=r(2677),u=r(5979),l=r(277),d=r(9047),p=r(2181);var f;function h(e,t=void 0){return e===f.add?t?c.nugetStrings.addPackageNameTitle(t):c.nugetStrings.addPackageTitle:e===f.update?t?c.nugetStrings.updatePackageNameTitle(t):c.nugetStrings.updatePackageTitle:e===f.remove?c.nugetStrings.removePackageTitle:""}function g(e,t){return e?c.nugetStrings.prereleaseIncludedSuffix(t):c.nugetStrings.prereleaseNotIncludedSuffix(t)}function v(e){return e===f.update?c.nugetStrings.noPackagesToUpdateResult:e===f.remove?c.nugetStrings.noPackagesToRemoveResult:""}!function(e){e[e.add=0]="add",e[e.update=1]="update",e[e.remove=2]="remove"}(f||(t.NuGetAction=f={})),t.verifyServicePrerequisites=async function(e,t,r,o){return await a.logger.watch("Check NuGet service prerequisites",(async function(){const i=await r.getProxy(u.default.nugetCommandsService);try{const r=await(0,d.runWithDurationTelemetry)((async()=>await(i?.checkPrerequisites(t))),o,"verifyPrerequisites");let s;return r&&!r.isPrerequisiteMet&&r.message&&r.actionText&&i instanceof l.NuGetDotnetCommandsService&&(s=await n.window.showQuickPick([r.actionText,c.promptStrings.cancel],{title:h(e),placeHolder:r.message}),s&&s!==c.promptStrings.cancel&&n.commands.executeCommand("vscode.open",n.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2263657"))),(0,d.addDotnetSdkTelemetry)(o,r?.value??"unknown",s?s===c.promptStrings.cancel?"cancel":"install":void 0),r}finally{i?.dispose()}}),{telemetry:o,catchUnhandledErrors:!0})},t.showProjectPicker=async function(e,t){const r=await(0,d.runWithDurationTelemetry)((async()=>await(0,s.getAllProjects)()),t,"getAllProjects");if((0,d.addResultsCountTelemetry)(t,r?.length??0,"getAllProjects"),r&&r.length>0){const t=r.map((e=>({name:e.Name,fullPath:e.Path}))).sort(((e,t)=>e.name.localeCompare(t.name)));let i;if(1===t.length)i=t[0];else{const r=await n.window.showQuickPick(t.map((e=>new o.ProjectInfoQuickPick(e))),{title:h(e),placeHolder:c.nugetStrings.projectPickerPlaceholder});i=r?.info}return i}},t.showPackagePickerFromPromise=async function(e,t,r){let i;const s=await n.window.showQuickPick(new Promise((async r=>{const n=await t;n&&n.length>0?r(n?.map((e=>new o.NuGetPackageUpdateQuickPick(e)))):r([{label:v(e)}])})),{title:h(e),placeHolder:r?g(r.includePrerelease,c.nugetStrings.packagePickerPlaceholder):c.nugetStrings.packagePickerPlaceholder});return s&&s instanceof o.NuGetPackageUpdateQuickPick&&(i=s.info),i},t.showVersionPicker=async function(e,t,r,s){let a;const u=await n.window.showQuickPick(new Promise((async e=>{const n=await r;let s=!1;const a=[];n&&n.length>0?(n.sort(((e,t)=>{const r=i.parse(e.version,{loose:!0}),n=i.parse(t.version,{loose:!0});return n&&r?i.compare(n,r,{loose:!0}):0})).map((e=>{if(e.version){s||(e.isLatest=s=!0),e.version===t.version&&(e.isCurrent=!0);const r=new o.NuGetPackageVersionQuickPick(e);a.push(r)}})),e(a)):e([{label:c.nugetStrings.noVersionsFoundError}])})),{title:h(e,t.id),placeHolder:g(s.includePrerelease,c.nugetStrings.selectVersionPlaceholder)});return u&&u instanceof o.NuGetPackageVersionQuickPick&&(a=u.info),a},t.retrievePackageVersions=async function(e,t,r,n,o){return await a.logger.watch("Get NuGet package versions",(async function(){const i=await n.getProxy(u.default.nugetCommandsService);try{const n=await(0,d.runWithDurationTelemetry)((async()=>await(i?.getVersions(e,t,r))),o,"getPackageVersions")??[];return(0,d.addResultsCountTelemetry)(o,n.length,"getPackageVersions"),n}finally{i?.dispose()}}),{telemetry:o,catchUnhandledErrors:!0})},t.retrieveInstalledPackages=async function(e,t,r){return await a.logger.watch("Get installed NuGet packages",(async function(){const n=await t.getProxy(u.default.nugetCommandsService);try{const t=await(0,d.runWithDurationTelemetry)((async()=>await(n?.getInstalledPackages(e))),r,"listInstalledPackages")??[];return(0,d.addResultsCountTelemetry)(r,t.length,"listInstalledPackages"),t}finally{n?.dispose()}}),{telemetry:r,catchUnhandledErrors:!0})},t.retrieveOutdatedPackages=async function(e,t,r,n){return await a.logger.watch("Get outdated NuGet packages",(async function(){const o=await r.getProxy(u.default.nugetCommandsService);try{const r=await(0,d.runWithDurationTelemetry)((async()=>await(o?.getOutdatedPackages(e,t))),n,"listOutdatedPackages")??[];return(0,d.addResultsCountTelemetry)(n,r.length,"listOutdatedPackages"),r}finally{o?.dispose()}}),{telemetry:n,catchUnhandledErrors:!0})},t.getProjectFromContext=function(e){let t;if(e?.node?.NodeType===p.nodeTypes.project)t=e.node;else if(e?.node?.NodeType===p.nodeTypes.packageDependency){let r=e;for(;r?.node&&r.node.NodeType!==p.nodeTypes.project;)r=r.parentNode;t=r?.node}if(t&&t.Path)return{name:t.Name,fullPath:t.Path}},t.getPackageFromContext=function(e){const t=e?.node;if(t&&t.NodeType===p.nodeTypes.packageDependency&&t.Description&&t.Description.length>2)return{id:t.Name,version:t.Description.substring(1,t.Description.length-1)}},t.getPrereleaseStatusPlaceholder=g},8489:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NuGetPackageUpdateQuickPick=t.NuGetPackageVersionQuickPick=t.NuGetPackageSearchQuickPick=t.ProjectInfoQuickPick=void 0;const n=r(2677);t.ProjectInfoQuickPick=class{info;label;description;constructor(e){this.info=e,this.label=e.name,this.description=e.fullPath}},t.NuGetPackageSearchQuickPick=class{info;label;description;detail;constructor(e){this.info=e,this.label=e.id}},t.NuGetPackageVersionQuickPick=class{info;label;description;detail;constructor(e){this.info=e,this.label=e.version;const t=[];e.isLatest&&t.push(n.nugetStrings.versionLatestLabel),e.isCurrent&&t.push(n.nugetStrings.versionCurrentLabel),t.length>0&&(this.description=`(${t.join(", ")})`)}},t.NuGetPackageUpdateQuickPick=class{info;label;description;detail;constructor(e){this.info=e,this.label=e.id,this.description=e.version}}},9047:(e,t)=>{"use strict";async function r(e){const t=Date.now();return{result:await e(),durationMilliseconds:Date.now()-t}}Object.defineProperty(t,"__esModule",{value:!0}),t.measureExecutionTime=t.runWithDurationTelemetry=t.addResultsCountTelemetry=t.addDotnetSdkTelemetry=t.addIncludePrereleaseTelemetry=t.addCompletedTelemetry=t.cancelAtStepTelemetry=t.addEntrypointTelemetry=void 0,t.addEntrypointTelemetry=function(e,t){e.addOrUpdateProperties({entrypoint:t})},t.cancelAtStepTelemetry=function(e,t){e.addOrUpdateProperties({wasCompleted:String(!1),canceledAtStep:t})},t.addCompletedTelemetry=function(e){e.addOrUpdateProperties({wasCompleted:String(!0)})},t.addIncludePrereleaseTelemetry=function(e,t){e.addOrUpdateProperties({includePrerelease:String(t)})},t.addDotnetSdkTelemetry=function(e,t,r){e.addOrUpdateProperties({dotnetSdkVersion:t,minDotnetSdkPromptSelected:r})},t.addResultsCountTelemetry=function(e,t,r){e.addOrUpdateMeasurements({[r+"ResultsCount"]:t})},t.runWithDurationTelemetry=async function(e,t,n){if(!t)return e();const{result:o,durationMilliseconds:i}=await r(e);return t.addOrUpdateMeasurements({[n+"Duration"]:i}),o},t.measureExecutionTime=r},114:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r={};process.env.VSSERVER_DOTNET_EventPipeOutputPath&&(r={DOTNET_EnableEventPipe:1,DOTNET_EventPipeConfig:"Microsoft-Windows-DotNETRuntime:0x1F000080018:5",DOTNET_EventPipeOutputPath:process.env.VSSERVER_DOTNET_EventPipeOutputPath,DOTNET_ReadyToRun:0,DOTNET_TieredCompilation:1,DOTNET_TC_CallCounting:0,DOTNET_TC_QuickJitForLoops:1,DOTNET_JitCollect64BitCounts:1}),t.default=r},4594:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getReliabilityMonitorPath=t.scheduleLaunchReliabilityMonitor=void 0;const n=r(1017),o=r(114),i=r(9496),s=r(7195),a=r(6661),c=r(6460),u=r(9781);function l(e){return n.join(e["@microsoft/visualstudio-reliability-monitor"],"Microsoft.VisualStudio.Reliability.Monitor")}t.scheduleLaunchReliabilityMonitor=function(e,t,r){!async function(e,t,r){await Promise.resolve();try{const n=l(t),d=a.TelemetryService.getSessionId(i.env.sessionId),p=s.telemetryService?.getTelemetryLevel()??"off",f={...process.env,...o.default};f.DOTNET_MULTILEVEL_LOOKUP="0",f.DOTNET_ROOT=r,(0,c.addDotNetDumpCreationEnvironmentValues)(f),(0,c.setComponentPathsInEnvironment)(f,t,c.VSSERVER_SHARED_COMPONENT_NAME);const h=[];h.push("--vscodeSessionId",d),h.push("--vscodeTelemetryLevel",p),(0,c.launchChildProcess)(t,n,h,e.extensionPath,f),s.logger.log("Reliability monitor launched.",u.LogImportance.low)}catch(e){s.logger.reportExceptionTelemetryAndLog("launchReliabilityMonitor",null,"CsDevKit.Reliability.Monitor.Launch.Error",e,s.telemetryService)}}(e,t,r)},t.getReliabilityMonitorPath=l},1925:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getServerPath=t.getServiceHubHostEntrypointName=t.launchDotNetServer=t.SERVICEHUB_HOST_COMPONENT_NAME=t.SERVICEHUB_CONTROLLER_COMPONENT_NAME=void 0;const n=r(9679),o=r(3543),i=r(1808),s=r(2600),a=r(9496),c=r(7631),u=r(7195),l=r(7867),d=r(114),p=r(4594),f=r(6460),h=r(5010),g=r(6661),v=r(1017),m=r(5369),y=r(3228),_=r(4832),S=r(9279),E=r(1249),w=r(4249),b=r(336),T="serviceBroker";function C(){return v.join("win32"===process.platform?"\\\\.\\pipe":"/tmp",(0,s.v4)())}function P(){return"Microsoft.VisualStudio.Code.ServiceHost"+("win32"===process.platform?".exe":"")}function I(e){return v.join(e["@microsoft/visualstudio-server"],"Microsoft.VisualStudio.Code.Server")}t.SERVICEHUB_CONTROLLER_COMPONENT_NAME="@microsoft/servicehub-controller-net60",t.SERVICEHUB_HOST_COMPONENT_NAME="@microsoft/visualstudio-code-servicehost",t.launchDotNetServer=async function(e,r,s){let O=null;const N=new h.TelemetryActivity("launch-server",u.telemetryService);async function A(e,t){O=e;try{const e=performance.now(),r=await t(),n=performance.now();return O+=" (succeeded)",{result:r,duration:n-e}}catch(e){throw O+=" (failed)",e}}const R="CsDevKit/Server/Start",x=C(),k=I(r),D=P();let M,j;try{await A("setExecuteBit",(()=>(0,f.setExecuteBit)(r)));const t=await A("acquireRuntime",(()=>(0,l.acquireRuntime)(e)));M=t.result,j=v.dirname(M.path),N.addOrUpdateMeasurements({acquireDotNetProcessDependencies:t.duration})}catch(e){throw u.telemetryService?.sendTelemetryErrorEvent(R,{fault:O??"(missing)"}),e}try{const l={...process.env,...d.default};l.DOTNET_MULTILEVEL_LOOKUP="0",l.DOTNET_ROOT=j,l.DOTNET_PROJECTSYSTEM_HOST_EXECCOMMAND="",l.PRJHOST_DOTNET_ROOT=j,l.PRJHOST_ROLL_FORWARD_TO_PRERELEASE="0",l.PRJHOST_ROLL_FORWARD="Major",l.PRJ_BUILD_DOTNET_HOST=M.globalPath??"",l.DOTNET_ROOT_USER=process.env.DOTNET_ROOT??"EMPTY";let p=!1,h=!1;if(M.globalPath&&M.dotnetInfo){const e=E.parse(`${S.NET_RUNTIME_VERSION}.${S.NET_RUNTIME_VERSION_PATCH}`),t=M.dotnetInfo.runtimeVersions["Microsoft.NETCore.App"];let r=M.globalRuntimeMismatchingReason===_.CompatibleDotnetSearchFailedReason.mismatchedHigherVersionRuntimeFound,n=!1,o=!1;for(const i of t){const t=i.version;if(t.major>e.major?r=!0:t.compare(e)>=0&&(t.prerelease?.length>0&&(o=!0),n=!0),r&&n&&o)break}if(r||o){if(p=!n,!p)if(a.workspace.workspaceFolders&&a.workspace.workspaceFolders.length>0)for(let t=0;t<a.workspace.workspaceFolders.length;t++){const r=await(0,_.getDotnetVersion)(a.workspace.workspaceFolders[t].uri.fsPath,u.logger);if(r){if(r.major>e.major){p=!0;break}o&&r.major===e.major&&r.prerelease?.length>0&&(h=!0)}}else r?p=!0:h=!0;(p||h)&&(l.PRJHOST_DOTNET_ROOT=v.dirname(M.globalPath),l.DEV_KIT_ON_SDK_RUNTIME="1",l.PRJHOST_ROLL_FORWARD_TO_PRERELEASE="1",u.telemetryService?.sendTelemetryEvent("CsDevKit/Server/UseSDKRuntime"),u.logger.log("Project system hosting process will use runtime installed in SDK."),p&&(l.PRJHOST_ROLL_FORWARD="LatestMajor"))}}p||h||M.globalRuntimeMismatchingReason!==_.CompatibleDotnetSearchFailedReason.mismatchedArchitectureFound||u.telemetryService?.sendTelemetryEvent("CsDevKit/Server/mismatchingArchitectureSDK"),l.CSDEVKIT_LOG_DIRECTORY=e.logUri.fsPath,await A("addDotNetDumpCreationEnvironmentValues",(()=>(0,f.addDotNetDumpCreationEnvironmentValues)(l))),(0,f.setComponentPathsInEnvironment)(l,r,t.SERVICEHUB_CONTROLLER_COMPONENT_NAME,t.SERVICEHUB_HOST_COMPONENT_NAME,f.VSSERVER_SHARED_COMPONENT_NAME),l.SERVICEHUB_HOST_ENTRYPOINT=D,p&&"darwin"===process.platform&&M.globalPath&&a.workspace.getConfiguration("dotnet").get("workingWithTestSignedSdk")?(l.DOTNET_PROJECTSYSTEM_HOST_ENTRYPOINT=M.globalPath,l.DOTNET_PROJECTSYSTEM_HOST_EXECCOMMAND="exec",l.DOTNET_PROJECTSYSTEM_HOST_INPUT=v.join(r[t.SERVICEHUB_HOST_COMPONENT_NAME],"Microsoft.VisualStudio.Code.ServiceHost.dll")):(l.DOTNET_PROJECTSYSTEM_HOST_ENTRYPOINT=v.join(r[t.SERVICEHUB_HOST_COMPONENT_NAME],D),l.DOTNET_PROJECTSYSTEM_HOST_INPUT="");const P=(0,w.apiIsAvailable)(b.OPTION_TO_CHECK_AND_ACQUIRE_ASPNETCORE);l.DOTNET_ASPIRESERVER_HOST_ENTRYPOINT=P?M.path:M.globalPath??M.path,l.DOTNET_ASPIRESERVER_HOST_RUNTIMECONFIGFILE=v.join(r[t.SERVICEHUB_HOST_COMPONENT_NAME],"Microsoft.VisualStudio.Code.ServiceHost.AspNet.runtimeconfig.json"),l.DOTNET_ASPIRESERVER_HOST_INPUT=v.join(r[t.SERVICEHUB_HOST_COMPONENT_NAME],"Microsoft.VisualStudio.Code.ServiceHost.dll"),l.ASPIRE_HOST_DOTNET_ROOT=P?l.DOTNET_ROOT:l.PRJHOST_DOTNET_ROOT,l.ASPIRE_HOST_ROLL_FORWARD_TO_PRERELEASE=P?"0":l.PRJHOST_ROLL_FORWARD_TO_PRERELEASE,l.ASPIRE_HOST_ROLL_FORWARD=P?"Major":l.PRJHOST_ROLL_FORWARD,a.workspace.getConfiguration("dotnet").get("preferVisualStudioCodeFileSystemWatcher",void 0)&&(l.ENABLE_VSCODE_FILEWATCHER="true");let I=v.join(e.extensionPath,"components/servicehub");const O=await A("createSocket",(()=>function(e){const t=C(),r=new Promise((async(e,r)=>{try{const n=(0,i.createServer)((t=>{try{n.close(),e(t)}catch(e){r(e)}}));n.listen(t)}catch(e){r(e)}}));return{pipeName:t,socket:r}}()));N.addOrUpdateMeasurements({createSocket:O.duration});const L=g.TelemetryService.getSessionId(a.env.sessionId),F=u.telemetryService?.getTelemetryLevel()??"off",U=process.env.CSDEVKIT_CODE_COVERAGE_OUTPUT,B=!!U,V=[],$=B?"dotnet":k;B&&(await u.logger.watch("Installing dotnet-coverage tool...",(async()=>{const t=(0,f.launchChildProcess)(r,"dotnet",["tool","install","dotnet-coverage"],e.extensionPath,l);await(0,y.waitForProcess)(t)})),u.logger.log(`Launching .NET server with code coverage to ${U}`),V.push("tool","run","dotnet-coverage"),V.push("collect",k),V.push("--output",U)),V.push("--serviceHubConfigPath",v.join(I,"servicehub.config.json")),V.push("--pipe",O.result.pipeName),V.push("--pipe-server",x),V.push("--log-directory",e.logUri.fsPath),V.push("--log-verbosity",process.env.CSDEVKIT_VERBOSITY??"Information"),V.push("--vscodeSessionId",L),V.push("--vscodeTelemetryLevel",F),(0,c.isCacheEnabled)(e)&&V.push("--cache-directory",(0,c.getCacheDirectory)(e));const H=performance.now(),q=await A("launchChildProcess",(()=>(0,f.launchChildProcess)(r,$,V,e.extensionPath,l)));N.addOrUpdateMeasurements({launchChildProcess:q.duration}),q.result.stdout.on("data",(e=>{u.logger.log(`.NET server STDOUT: ${e}`)})),q.result.stderr.on("data",(e=>{u.logger.log(`.NET server STDERR: ${e}`)})),q.result.on("exit",(e=>{u.logger.log(`.NET server exited with ${e}`),u.telemetryService?.sendTelemetryEvent("CsDevKit/Server/Exit",{shutdownReason:"Abnormal"},{exitCode:e??1})}));const z=await O.result.socket,G=await A("mxstream.create",(()=>o.MultiplexingStream.CreateAsync(z)));N.addOrUpdateMeasurements({mxstreamcreate:G.duration});const W=s.getLimitedAccessServiceBroker(n.ServiceAudience.local,m.Map(),n.ClientCredentialsPolicy.requestOverridesDefault);(async function(e,t){const r=await e.offerChannelAsync(T);try{const o=new n.MultiplexingRelayServiceBroker(t,e,!1);n.FrameworkServices.remoteServiceBroker.constructRpc(o,r),await o.completion}finally{r.stream.end()}})(G.result,W).catch((e=>console.log(`Proffer of a service broker failed: ${e}`)));const K=await async function(e){const t=await e.acceptChannelAsync(T);return n.FrameworkServices.remoteServiceBroker.constructRpc(t)}(G.result);s.profferRemoteServiceBroker(K,G.result,n.ServiceSource.otherProcessOnSameMachine,null);const X=performance.now();u.logger.log(`.NET server started and IPC established in ${(X-H).toFixed()}ms`),u.telemetryService?.sendTelemetryEvent(R),N.sendTelemetry()}catch(e){throw u.logger.reportExceptionTelemetryAndLog("launchDotNetServer",O,"",e,u.telemetryService),e}finally{u.telemetryService?.sendTelemetryEvent("CsDevKit/Reliability/Monitor/Launch"),(0,p.scheduleLaunchReliabilityMonitor)(e,r,j)}return{brokeredServiceServerPipeName:x}},t.getServiceHubHostEntrypointName=P,t.getServerPath=I},6460:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.launchChildProcess=t.addDotNetDumpCreationEnvironmentValues=t.setComponentPathsInEnvironment=t.setExecuteBit=t.VSSERVER_SHARED_COMPONENT_NAME=void 0;const n=r(2081),o=r(1017),i=r(3292),s=r(7195),a=r(1925),c=r(4594);t.VSSERVER_SHARED_COMPONENT_NAME="@microsoft/visualstudio-server-shared";t.setExecuteBit=async function(e){if("win32"!==process.platform){const t=o.join(e[a.SERVICEHUB_CONTROLLER_COMPONENT_NAME],"Microsoft.ServiceHub.Controller"),r=o.join(e[a.SERVICEHUB_HOST_COMPONENT_NAME],(0,a.getServiceHubHostEntrypointName)()),n=[(0,a.getServerPath)(e),t,r,(0,c.getReliabilityMonitorPath)(e)];await Promise.all(n.map((e=>(0,i.chmod)(e,"0755"))))}};const u=/[\-/]/g;t.setComponentPathsInEnvironment=function(e,t,...r){for(const n of r)e["COMPONENT_"+n.replace("@","").replace(u,"_").toUpperCase()]=t[n]},t.addDotNetDumpCreationEnvironmentValues=function(e){"win32"!==process.platform&&(e.DOTNET_DbgEnableMiniDump="1",e.DOTNET_DbgMiniDumpType="2",e.DOTNET_DbgMiniDumpName=o.join(function(){const e=r(2037),t=r(7147);let n="";n="linux"===process.platform?o.join(e.homedir(),".cache","Microsoft","csdevkit","dumps"):o.join(e.tmpdir(),"csdevkit","dumps");try{t.existsSync(n)||t.mkdirSync(n,{recursive:!0})}catch(t){s.logger.log(`Failed to create crash dump path ${n} due to ${t}`),n=e.tmpdir()}return n}(),"%e.%d.dmp"),e.DOTNET_EnableCrashReport="1")},t.launchChildProcess=function(e,t,r,i,s){if("win32"===process.platform){const a=function(e){return o.join(e["@microsoft/visualstudio-code-launcher"],"escape-node-job")}(e),c=[];return c.push(t),c.push(...r),n.spawn(a,c,{windowsHide:!0,cwd:i,env:s})}return n.spawn(t,r,{windowsHide:!0,cwd:i,env:s})}},5056:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveDocumentsInformationService=t.ActiveDocumentsChangesEventArgs=void 0;const n=r(2361),o=r(9496);class i{newActiveDocument;newDocuments;closedDocuments;constructor(e,t,r){e&&(this.newActiveDocument=e),t&&(this.newDocuments=t),r&&(this.closedDocuments=r)}}t.ActiveDocumentsChangesEventArgs=i;class s extends n.EventEmitter{isInitialized;constructor(){super()}rpcEventNames=["activeDocumentsChanged"];getActiveDocuments(){this.isInitialized||(o.window.onDidChangeActiveTextEditor((e=>{if(e){const t=e.document.fileName;this.emit("activeDocumentsChanged",new i(t))}})),o.workspace.onDidOpenTextDocument((e=>{const t=e.fileName;this.shouldIgnoreDocument(t)||this.emit("activeDocumentsChanged",new i(void 0,[t]))})),o.workspace.onDidCloseTextDocument((e=>{const t=e.fileName;this.shouldIgnoreDocument(t)||this.emit("activeDocumentsChanged",new i(void 0,[],[t]))})));const e=[],t=o.window.activeTextEditor?.document?.fileName;t&&e.push(t);const r=o.workspace.textDocuments;for(var n=0;n<r.length;n++){const o=r[n].fileName;this.shouldIgnoreDocument(o)||o===t||e.push(o)}return e}shouldIgnoreDocument(e){return e.endsWith(".git")}}t.ActiveDocumentsInformationService=s},1467:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrokeredServiceExportsRegistrar=t.BrokeredServiceExportsRegistrarState=void 0,t.BrokeredServiceExportsRegistrarState=class{registeredServices={}},t.BrokeredServiceExportsRegistrar=class{state;constructor(e){this.state=e}async registerExports(e,t){let r=this.state.registeredServices[e];void 0===r&&(r=[],this.state.registeredServices[e]=r),Array.isArray(t)?r.push(...t):r.push(t)}async getExports(e){const t=this.state.registeredServices[e];return t?[...t]:[]}}},4182:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBuildResult=void 0,t.parseBuildResult=function(e){let t,r=[];const n=/^(?:\s*\d+>)?(\S.*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\)\s*:\s+((?:fatal +)?error|warning|info)\s+(\w+\d+)\s*:\s*(.*)$/gm;do{t=n.exec(e),t&&r.push(t)}while(t);return r}},8242:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertBuildResultsToDiagnostics=t.reportBuildResultsToCSharpExtension=t.startBuild=t.isCSharpExtensionBuildResultServiceAvailable=void 0;const n=r(9496),o=r(5979),i=r(9279),s=r(9491),a=r(7195),c=r(4182);async function u(){const e=n.extensions.getExtension(i.EXTENSION_ID);if(!e)throw new Error("Unable to find the extension: "+i.EXTENSION_ID);const t=e.exports.serviceBroker;return await t.getProxy(o.default.csharpExtensionBuildResultService)}function l(e){const t={};return e.forEach((e=>{const[r,o]=function(e){const t=e[1],r=e[2],o=e[3],i=e[4],a=e[5],c=r.split(","),u=parseInt(c[0])-1,l=parseInt(c[1])-1,d=new n.Range(u,l,u,l);let p;switch(s(d,"Build diagnostic range could not be calculated. Attempted to parse value: "+r),o){case"error":default:p=n.DiagnosticSeverity.Error;break;case"warning":p=n.DiagnosticSeverity.Warning;break;case"info":p=n.DiagnosticSeverity.Information}const f=new n.Diagnostic(d,a,p);return f.code=i,[t,f]}(e),i=t[r];i?i.push(o):t[r]=[o]})),t}t.isCSharpExtensionBuildResultServiceAvailable=async function(){return null!==await u()},t.startBuild=async function(){const e=await u();try{s(e),e?.buildStarted()}finally{e?.dispose()}},t.reportBuildResultsToCSharpExtension=async function(e){a.logger.log("Reporting build results to C# extension.");const t=(0,c.parseBuildResult)(e);if(0===t.length)return void a.logger.log("No problems found in the build");const r=l(t),n=await u();try{s(n),n?.reportBuildResult(r)}finally{n?.dispose()}},t.convertBuildResultsToDiagnostics=l},1855:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BuildService=void 0;const n=r(695);t.BuildService=class{build(e,t){var r=new n.BuildActionOptions(n.BUILD);return(0,n.setSolutionBuildAction)(r,e)}rebuild(e,t){var r=new n.BuildActionOptions(n.BUILD,!0);return(0,n.setSolutionBuildAction)(r,e)}}},1694:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentExportsState=t.ComponentExportsService=void 0;const n=r(7631),o=r(7195),i=r(9781),s=r(3228),a=r(1017),c=r(9496),u=r(965);t.ComponentExportsService=class{state;constructor(e){this.state=e}getExports(e){return this.state.componentExports[e]??null}};class l{componentExports;constructor(e){this.componentExports=e}static async create(e,t){let r={};return r=await(0,n.loadOrCreateCachedValue)(e,"component-exports",(async()=>await l.gatherComponentExports(t,r))),await l.gatherExtensionExports(r),new l(r)}static async gatherComponentExports(e,t){for(const r in e){const n=e[r];await l.tryGetExportsJson(r,n,t)}return t}static async gatherExtensionExports(e){const t=u.idsOfExtensionsAllowedToExtendCsDevKit.map((e=>c.extensions.getExtension(e)));for(const r of t){if(!r)continue;const t=r.packageJSON;t.csdevkitExports&&(this.gatherExports(e,t.csdevkitExports,(e=>a.join(r.extensionPath,e))),o.logger.log(`Read exports from ${r.id} in ${a}.`,i.LogImportance.low))}}static async tryGetExportsJson(e,t,r){try{const n=a.join(t,"exports.json"),c=await(0,s.readJsonFile)(n);this.gatherExports(r,c,(e=>e.replace("$(ComponentPath)",t))),o.logger.log(`Read exports from ${e} in ${a}.`,i.LogImportance.low)}catch(t){o.logger.log(`No exports read from ${e}.`,i.LogImportance.low)}}static gatherExports(e,t,r){for(const n in t){let o=e[n];void 0===o&&(o=[],e[n]=o);let i=t[n];for(let e=0;e<i.length;e++)o.push(r(i[e]))}}}t.ComponentExportsState=l},5979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9679);class o{static helloWorld=Object.freeze({extensionHost:new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("helloVSCodeExtensionHost","1.0"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders),serviceHub:new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("helloServiceHubDotNetHost","0.1"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders),create:function(e){return new n.ServiceJsonRpcDescriptor(e,n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders)}});static environmentService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.NoDelay.EnvironmentService","0.1"));static solutionFileService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.SolutionFileService","0.1"));static buildService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.BuildService","0.1"));static telemetrySessionUpdateService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.Telemetry.TelemetrySessionUpdateService","0.1"));static diagnosticsService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.DiagnosticsService","0.1"));static outOfProcServiceRegistration=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.OutOfProcServiceRegistration","0.1"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders));static solutionExplorerService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.NoDelay.SolutionViewService","0.1"));static projectTreeProvider=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.ProjectSystem.ProjectTreeProvider","0.1"));static projectIconSourceService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.CpsProjectIconSourceService","0.1"));static componentExportsService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.ComponentExportsService","0.1"));static brokeredServiceExportsRegistrar=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.BrokeredServiceExportsRegistrar","0.1"));static errorReportingService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.ErrorReportingService","0.1"));static activeDocumentsInformationService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.ActiveDocumentsInformationService","0.1"));static logOutputChannelService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.LogOutputChannelService","0.1"));static outputChannelService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.OutputChannelService","0.1"));static tokenAcquisitionService=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.TokenAcquisitionService","0.1"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders));static projectQueryExecutionService=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.ProjectSystem.Query.Remoting.QueryExecutionService","0.2"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders));static projectInitializationStatusService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.ProjectSystem.ProjectInitializationStatusService","0.1"));static nugetCommandsService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.NuGetCommandsService","0.1"));static nugetSolutionRestoreService=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.NuGetSolutionRestoreService","0.1"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders));static hotReloadLogger=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.Debugger.HotReloadLogger","0.1"));static hotReloadClientListener=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.Debugger.HotReloadClientListener","0.1"));static hotReloadOptionService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.Debugger.HotReloadOptionService","0.1"));static hotReloadService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.Debugger.HotReloadClientService","0.1"));static launchConfigurationService=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.LaunchConfigurationService",void 0),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders,{protocolMajorVersion:3}));static dotnetDebugConfigurationService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.Debugger.DotnetDebugConfigurationService","0.1"));static vsCodeFileWatcherService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.VsCodeFileWatcherService","0.1"));static templateService=this.create(n.ServiceMoniker.create("Microsoft.TemplateEngine.VSCode.TemplateService","0.1"));static csharpExtensionBuildResultService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.CSharpExtension.BuildResultService","0.1"));static dotnetDebugLaunchService=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.DotnetDebugLaunchService","0.1"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders,{protocolMajorVersion:3}));static workspaceConfigurationOptionsService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.OptionService","0.1"));static startupProjectService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.StartupProjectService","0.1"));static create(e){return Object.freeze(new n.ServiceJsonRpcDescriptor(e,n.Formatters.MessagePack,n.MessageDelimiters.BigEndianInt32LengthHeader,{protocolMajorVersion:3}))}}t.default=o},6315:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IDotnetDebugConfigurationServiceResultResolver=t.LaunchTargetToDebugConfigurationConverter=t.DotnetDebugConfigurationService=t.DEBUGGER_START_DEBUG_TELEMETRY_PROPERTY=t.DotnetDebugConfigurationServiceError=t.DebugTelemetryCode=t.DotnetDebugConfigurationServiceErrorKind=void 0;const n=r(9496),o=r(5979),i=r(8727),s=r(2677),a=r(5010),c=r(7195),u=r(9279),l=r(1249),d=r(9397),p=r(695),f=r(9230),h=r(7407),g=r(519),v=r(6862);let m=r(2037);const y="2.22.8";var _,S;!function(e){e.internalError="internalError",e.launchCancelled="launchCancelled",e.userError="userError"}(_||(t.DotnetDebugConfigurationServiceErrorKind=_={})),function(e){e[e.unknown=0]="unknown",e[e.launchCancelled=1]="launchCancelled",e[e.invalidActivationId=32769]="invalidActivationId",e[e.noLaunchTargets=32770]="noLaunchTargets",e[e.noBrokeredService=36608]="noBrokeredService",e[e.missingExeBeforeBrowserTarget=36609]="missingExeBeforeBrowserTarget",e[e.failedToConvertLaunchTargetToConfig=36610]="failedToConvertLaunchTargetToConfig",e[e.noImplCustomLaunchTarget=36611]="noImplCustomLaunchTarget",e[e.noImplMultipleDebugEngines=36612]="noImplMultipleDebugEngines",e[e.noImplMultipleDebugLaunch=36613]="noImplMultipleDebugLaunch",e[e.noDebugConfig=36614]="noDebugConfig",e[e.failedToFindProjectForFile=36615]="failedToFindProjectForFile",e[e.noValidBrowser=36616]="noValidBrowser",e[e.missingCSharpExtensionExport=36617]="missingCSharpExtensionExport",e[e.noTaskProvider=36624]="noTaskProvider",e[e.missingExeBeforeBrowserInspectUriTarget=36625]="missingExeBeforeBrowserInspectUriTarget",e[e.invalidCSharpExtVersionAspire=36626]="invalidCSharpExtVersionAspire"}(S||(t.DebugTelemetryCode=S={}));class E{kind;message;telemetryCode;constructor(e,t,r){this.kind=e,this.message=t,this.telemetryCode=r}}t.DotnetDebugConfigurationServiceError=E,t.DEBUGGER_START_DEBUG_TELEMETRY_PROPERTY="debuggerStartDebugTelemetry",t.DotnetDebugConfigurationService=class{serviceBroker;brokeredServiceHost;constructor(e,t){this.serviceBroker=e,this.brokeredServiceHost=t}async resolveDebugConfigurationWithLaunchConfigurationService(e,t,r){const i=await this.serviceBroker.getProxy(o.default.launchConfigurationService);if(i)try{const o=n.workspace.getConfiguration("csharp.preview").get("improvedLaunchExperience")??!1;if(o&&!e){const r=(0,f.getLaunchableProjectInfoObserver)().getCurrentProjects();if(0===r.length)return{configurations:[],error:new E(_.userError,s.debugProjectLaunchStrings.errorNoLaunchableProjects,S.failedToFindProjectForFile)};const n=await h.startupProjectService.getOrPickCurrentStartupProject();if(!n)return{configurations:[],error:new E(_.launchCancelled,s.debugProjectLaunchStrings.errorNoStartupProjectSelected,S.launchCancelled)};const o=r.find((e=>e.fullPath===n.fullPath));if(!o)return{configurations:[],error:new E(_.internalError,s.debugProjectLaunchStrings.errorStartupProjectNotFound,S.failedToFindProjectForFile)};t.name=v.DotnetDynamicConfigurationProvider.createDebugConfigurationName(o.displayName),e=o.fullPath}if(!e)return{configurations:[],error:new E(_.userError,s.debugProjectLaunchStrings.errorNoProjectFound,S.failedToFindProjectForFile)};let a={};const c=Date.now();if(!await this.isMAUIProject(e)){let r=await this.buildProject(e);const o=Date.now();a.buildCompletedTimestamp=`0x${o.toString(16)}`,a.totalBuildTime=o-c,t.preLaunchTask||t.preRestartTask||(r||n.window.showWarningMessage(s.dotnetDebugConfigurationServiceStrings.warningMissingBuildTask),t.preRestartTask=r)}if(!o){const n=t.launchConfigurationId;if(n&&!await i.setActiveLaunchConfiguration(e,n,r))return{configurations:[],error:new E(_.userError,s.dotnetDebugConfigurationServiceStrings.invalidLaunchConfigurationId(n),S.invalidActivationId)}}const u=t.noDebug??!1,l="linux"!==m.platform().toLowerCase()&&!n.env.remoteName&&n.env.uiKind!==n.UIKind.Web,d=await i.queryLaunchTargets(e,{noDebug:u,preferSSL:l},r);if(!d||0===d.length)return{configurations:[],error:new E(_.userError,s.debugProjectLaunchStrings.errorNoLaunchTargets(e),S.noLaunchTargets)};t.brokeredServicePipeName=await this.brokeredServiceHost.getBrokeredServiceServerPipeName();const p=await w.convert(t,d,a);return 0!==p.length?{configurations:p}:{configurations:[],error:new E(_.internalError,"Unable to convert launch target to a vscode debug configuration.",S.failedToConvertLaunchTargetToConfig)}}catch(e){if(e instanceof E)return{configurations:[],error:e};{let t;return"string"==typeof e?t=e:e instanceof Error&&(t=e.message),{configurations:[],error:new E(_.internalError,t,S.unknown)}}}finally{i?.dispose()}return{configurations:[],error:new E(_.internalError,"Unable to obtain services to resolve dotnet debug configurations.",S.noBrokeredService)}}async buildProject(e){if(!c.dotnetTaskProvider)throw new E(_.internalError,void 0,S.noTaskProvider);const t=await(0,d.dotnetSolutionBuildActionUsingTask)(p.BUILD,e,void 0,void 0,!0);if(t.taskName&&!await t.success){const t={title:s.promptStrings.yes},r={title:s.promptStrings.no,isCloseAffordance:!0},o={modal:!0,detail:s.dotnetDebugConfigurationServiceStrings.errorBuildDetails(e)};if(await n.window.showErrorMessage(s.dotnetDebugConfigurationServiceStrings.errorBuildTitle,o,t,r)!==t)throw new E(_.launchCancelled,void 0,S.launchCancelled)}return t.taskName}async isMAUIProject(e){let t=!1;if(n.extensions.getExtension(u.MAUI_EXTENSION_ID)){const r=new g.ProjectQueryableSpace(this.serviceBroker),n={context:"Projects",query:{$properties:["Path","Capabilities"],$filter:{ProjectsByCapabilities:["Android | Apple | Maui | UseMaui | UseMauiCore"]}}},o=await r.executeQuery(n);if(o&&o.Items){let r=e.replace(/[\\/]+/g,"/");t=o.Items.some((e=>{if(e&&e.Path){let t=e.Path.replace(/[\\/]+/g,"/");return"win32"!==m.platform()&&"darwin"!==m.platform()||(t=t.toLowerCase(),r=r.toLowerCase()),t===r}return!1}))}}return t}};class w{static async convert(e,r,o){let a=[];for(let u of r){if(u.debugEngines.length>1)throw new E(_.internalError,s.dotnetDebugConfigurationServiceStrings.errorMultipleDebugEngines(u.debugEngines.join(",")),S.noImplMultipleDebugEngines);if(i.ExeLaunchTarget.is(u)){u.isConsoleApp&&(o.projectType="Console");const r=w.convertExeLaunchTarget(e,u);if(r.env&&r.env.DEBUG_SESSION_PORT&&r.env.DEBUG_SESSION_TOKEN&&(o.projectType="Aspire",r.isAspire=!0,!w.doesCSharpExtensionSupportAspire()))throw new E(_.userError,s.dotnetDebugConfigurationServiceStrings.errorAspireLaunchMinimumVersion(y),S.invalidCSharpExtVersionAspire);r[t.DEBUGGER_START_DEBUG_TELEMETRY_PROPERTY]=o,a.push(r)}else if(i.BrowserInspectUriTarget.is(u)){if(!(u.debugEngines&&u.debugEngines.length>0))throw new E(_.internalError,"Missing 'type' on WASMLaunchTarget.",S.failedToConvertLaunchTargetToConfig);{const r=u.debugEngines[0];if("blazorwasm"!==r)throw new E(_.internalError,`Unknown an WASMLaunchTarget type: ${r}.`,S.failedToConvertLaunchTargetToConfig);{const r=a.pop();if(!r)throw new E(_.internalError,"Expected an ExeLaunchTarget type before seeing a BrowserInspectUriTarget for resolving targets.",S.missingExeBeforeBrowserInspectUriTarget);{r[t.DEBUGGER_START_DEBUG_TELEMETRY_PROPERTY].projectType="Blazorwasm";const o=await w.getBrowserType();if(!o)throw new E(_.internalError,"A valid browser is not installed.",S.noValidBrowser);if(l.compareIdentifiers(n.version,"1.85.0")>=0){const t=w.convertBrowserInspectUriLaunchTarget(e,o,u);a.push({...r,serverReadyAction:{action:"startDebugging",config:t,pattern:"\\bNow listening on:\\s+https?://\\S+",killOnServerStop:!0}})}else a.push(w.convertBrowserInspectUriLaunchTarget(e,o,u))}}}}else if(i.BrowserLaunchTarget.is(u)){const e=a.pop();if(!e)throw new E(_.internalError,"Expected an ExeLaunchTarget type before seeing a BrowserLaunchTarget for resolving targets.",S.missingExeBeforeBrowserTarget);{const r=w.convertNoDebugBrowserLaunchTarget(u);e[t.DEBUGGER_START_DEBUG_TELEMETRY_PROPERTY].projectType="Web",a.push({...e,...r})}}else{if(i.CustomLaunchTarget.is(u)){for(var c in e.type=u.debugEngines[0],u.launchOptions&&(e.noDebug=u.launchOptions.noDebug),u.options)e[c]=u.options[c];return[e]}if(i.ErrorLaunchTarget.is(u))throw new E(_.userError,u.userMessage)}}return a}static convertExeLaunchTarget(e,t){let r="internalConsole";return t.isConsoleApp&&(r=this.getDebugOption("console","internalConsole"),"internalConsole"===r&&e.noDebug&&(r="integratedTerminal")),{...e,type:t.debugEngines[0],program:t.executable,args:t.commandLineArguments,cwd:t.directory,env:w.convertEnvironmentVariablesToObj(t.environmentVariables),console:r,checkForDevCert:t.isUsingSSL,launchSettingsProfile:null,debugConsoleVerbosity:this.getDebugOption("debugConsoleVerbosity","minimal")}}static convertBrowserInspectUriLaunchTarget(e,t,r){return{name:e.name+" Browser",type:t,request:"launch",timeout:3e4,webRoot:"${workspaceFolder}",url:r.url,inspectUri:r.inspectUri,noDebug:e.noDebug,cascadeTerminateToConfigurations:[e.name]}}static convertNoDebugBrowserLaunchTarget(e){return{serverReadyAction:{action:"openExternally",pattern:e.pattern??"\\bNow listening on:\\s+https?://\\S+",uriFormat:e.url}}}static getDebugOption(e,t){const r=n.workspace.getConfiguration("csharp.debug");if(r){const t=r.get(e);if(t)return t}return t}static async getBrowserType(){const e=await n.extensions.getExtension(u.CSHARP_EXTENSION_ID),t=e?.packageJSON.version;if(!e||!t)throw new E(_.internalError,"Could not obtain exports from C# Extension ",S.missingCSharpExtensionExport);if(l.compareIdentifiers(t,"2.0.2")<0)throw new E(_.internalError,`The C# extension is installed, but has version ${t} which is incompatible with blazorwasm Debug Launch. Please update your C# Extension.`,S.missingCSharpExtensionExport);return await e.exports.determineBrowserType()}static convertEnvironmentVariablesToObj(e){if(Array.isArray(e)){let t={};for(let r=0;r<e.length;r++){const n=e[r];t[n.Key]=n.Value}return t}return e}static doesCSharpExtensionSupportAspire(){const e=n.extensions.getExtension(u.CSHARP_EXTENSION_ID),t=e?.packageJSON.version;return!!t&&l.gte(t,y)}}t.LaunchTargetToDebugConfigurationConverter=w,t.IDotnetDebugConfigurationServiceResultResolver=class{static resolve(e){const t=new a.TelemetryActivity("DotnetDebugConfigurationService/resolve",c.telemetryService);try{if(e.error){t.addOrUpdateProperties({succeeded:String(!1)});const r=e.error;switch(r.kind){case _.launchCancelled:return void t.addOrUpdateMeasurements({telemetryCode:S.launchCancelled});case _.internalError:case _.userError:t.addOrUpdateMeasurements({telemetryCode:r.telemetryCode??S.unknown});const e=r.message??s.debugProjectLaunchStrings.errorGenericFailedToGetConfigurations;return n.window.showErrorMessage(e),null;default:throw new Error(`Unexpected error kind: '${r.kind}'`)}}const r=e.configurations;if(0===r.length)return t.addOrUpdateProperties({succeeded:String(!1)}),t.addOrUpdateMeasurements({telemetryCode:S.noDebugConfig}),n.window.showErrorMessage(s.debugProjectLaunchStrings.errorNoConfigurations),null;if(1===r.length)return t.addOrUpdateProperties({succeeded:String(!0)}),r[0];if(2===r.length){const e=n.debug.onDidStartDebugSession((t=>{t.name===r[0].name&&(e.dispose(),n.debug.startDebugging(t.workspaceFolder,r[1],t))}));return r[0]}if(r.length>2)return t.addOrUpdateProperties({succeeded:String(!1)}),t.addOrUpdateMeasurements({telemetryCode:S.noImplMultipleDebugLaunch}),n.window.showErrorMessage(s.debugProjectLaunchStrings.errorDebugMultipleConfigurations),null;throw new Error("Unexpected configuration array from IDotnetDebugConfigurationServiceResult.")}finally{t.sendTelemetry()}}}},700:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DotnetDebugLaunchService=void 0;const n=r(9496),o=r(6315);t.DotnetDebugLaunchService=class{brokeredServiceHost;constructor(e){this.brokeredServiceHost=e}async launchTargets(e,t,r){let i={name:e,type:"dotnet",request:"launch",brokeredServicePipeName:await this.brokeredServiceHost.getBrokeredServiceServerPipeName()};const s=await o.LaunchTargetToDebugConfigurationConverter.convert(i,t,{});if(s&&s.length>0){const e={configurations:s},t=o.IDotnetDebugConfigurationServiceResultResolver.resolve(e);if(t)return r.aspireSession&&(t[o.DEBUGGER_START_DEBUG_TELEMETRY_PROPERTY].isAspireLaunch=!0,t.aspireSession=r.aspireSession),await n.debug.startDebugging(void 0,t,void 0)}return!1}}},2485:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorReportingService=void 0;const n=r(9496),o=r(2677),i=r(9279),s=r(5979),a=r(7195),c=r(6260),u=r(4918);t.ErrorReportingService=class{context;constructor(e){this.context=e}async reportError(e,t){var r=void 0;const l=[];if(t?.additionalLogFile&&l.push(o.promptStrings.openLog),t?.openSettingPage&&l.push(o.promptStrings.openSettings),t?.promptToDisableExtension){if(r=new c.TelemetryEvent("prompt-project-unsupported",a.telemetryService),!(0,u.doesCSharpExtensionSupportDeferral)())return r?.addOrUpdateProperties({deferralnotsupported:String(!0)}),void r?.sendTelemetry();l.push(o.promptStrings.disableExtensionButton)}if(t?.doNotShowInWorkspace){t?.promptToDisableExtension?l.push(o.promptStrings.doNotShowAgain):l.push(o.promptStrings.doNotShowInWorkspaceAgain);const e="suppressMessage."+t.doNotShowInWorkspace;if(this.context.workspaceState.get(e))return r?.addOrUpdateProperties({skipped:String(!0)}),void r?.sendTelemetry();r?.addOrUpdateProperties({skipped:String(!1)})}t?.openOutputChannel&&l.push(o.promptStrings.openLogChannel),r?.sendTelemetry();const d=await n.window.showInformationMessage(e,...l);if(t?.additionalLogFile&&d===o.promptStrings.openLog){const e=await n.workspace.openTextDocument(t?.additionalLogFile);e&&await n.window.showTextDocument(e)}else if(!t?.doNotShowInWorkspace||d!==o.promptStrings.doNotShowInWorkspaceAgain&&d!==o.promptStrings.doNotShowAgain){if(t?.openSettingPage&&d===o.promptStrings.openSettings)await n.commands.executeCommand("workbench.action.openSettings",t?.openSettingPage);else if(t?.openOutputChannel&&d===o.promptStrings.openLogChannel){const e=n.extensions.getExtension(i.EXTENSION_ID);if(!e)throw new Error("Unable to find the extension.");const r=await e.exports.serviceBroker.getProxy(s.default.logOutputChannelService,{activationArguments:{outputChannelName:t?.openOutputChannel}});r?.show()}else if(t?.promptToDisableExtension&&d===o.promptStrings.disableExtensionButton){const e=new c.TelemetryEvent("prompt-project-unsupported-action",a.telemetryService);e.addOrUpdateProperties({disableExtension:String(!0)}),e.sendTelemetry(),n.workspace.getConfiguration().update("dotnet.preferCSharpExtension",!0,n.ConfigurationTarget.Workspace)}}else{if(t?.promptToDisableExtension){const e=new c.TelemetryEvent("prompt-project-unsupported-action",a.telemetryService);e.addOrUpdateProperties({donotshowagain:String(!0)}),e.sendTelemetry()}const e="suppressMessage."+t.doNotShowInWorkspace;this.context.workspaceState.update(e,"0")}}async reportAndWaitResume(e){await n.window.showInformationMessage(e,"Resume")}}},5158:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HelloWorld=void 0;const n=r(9679),o=r(5979);t.HelloWorld=class{serviceBroker;constructor(e){this.serviceBroker=e}sayHello(e){return`Hello, ${e}! - with love from VS Code Extension Host`}async callMe(e,t){const r=await this.serviceBroker.getProxy(o.default.helloWorld.create(e));try{if(!r)throw new Error(`No service known by ${n.ServiceMoniker.toString(e)}.`);return await r.sayHello(o.default.helloWorld.extensionHost.moniker.name)}finally{r?.dispose()}}}},7787:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HotReloadClientListener=t.ManagedHotReloadAvailabilityStatus=void 0;const n=r(7224);var o;!function(e){e[e.available=0]="available",e[e.interop=1]="interop",e[e.sqlClr=2]="sqlClr",e[e.minidump=3]="minidump",e[e.attach=4]="attach",e[e.moduleNotLoaded=5]="moduleNotLoaded",e[e.moduleReloaded=6]="moduleReloaded",e[e.notBuilt=8]="notBuilt",e[e.unsupportedEngine=9]="unsupportedEngine",e[e.notSupportedForClr64Version=10]="notSupportedForClr64Version",e[e.notAllowedForModule=11]="notAllowedForModule",e[e.optimized=12]="optimized",e[e.domainNeutralAssembly=13]="domainNeutralAssembly",e[e.reflectionAssembly=14]="reflectionAssembly",e[e.intelliTrace=15]="intelliTrace",e[e.notAllowedForRuntime=16]="notAllowedForRuntime",e[e.internalError=17]="internalError",e[e.unavailable=18]="unavailable",e[e.disabled=19]="disabled",e[e.notAllowedXPlat=20]="notAllowedXPlat"}(o||(t.ManagedHotReloadAvailabilityStatus=o={})),t.HotReloadClientListener=class{onSessionStarted(e,t){return n.hotReloadTracker.startHotReload(e,t)}onHotReloadAvailabilityChanged(e,t){return n.hotReloadTracker.onHotReloadAvailabilityChanged(e,t)}onSessionEnded(e){return n.hotReloadTracker.endHotReload(e)}async onApplyChangesStarted(e){}reportHotReloadResult(e,t){return n.hotReloadTracker.reportHotReloadResult(e)}}},2300:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hotReloadLogger=t.HotReloadLogger=t.HotReloadLogMessage=t.HotReloadDiagnosticErrorLevel=t.HotReloadVerbosity=void 0;const n=r(9496),o=r(9781),i=r(1297),s=r(979);var a,c;!function(e){e[e.minimal=0]="minimal",e[e.detailed=1]="detailed",e[e.diagnostic=2]="diagnostic"}(a||(t.HotReloadVerbosity=a={})),function(e){e[e.info=0]="info",e[e.warning=1]="warning",e[e.error=2]="error"}(c||(t.HotReloadDiagnosticErrorLevel=c={})),t.HotReloadLogMessage=class{verbosity;instanceId;message;errorLevel;projectName;variant;constructor(e,t,r,n){this.verbosity=e,this.message=t,this.instanceId=r??0,this.errorLevel=n??c.info}};class u{outputChannel;logger;constructor(){this.outputChannel=(0,i.lazyLoad)((()=>n.window.createOutputChannel(".NET Hot Reload",{log:!0}))),this.logger=(0,i.lazyLoad)((()=>new o.Logger(this.outputChannel())))}shouldLogMessage(e){switch(s.hotReloadOptionService.getVerbosity()){case"minimal":return e===a.minimal;case"detailed":return e===a.minimal||e===a.detailed;default:return!0}}async log(e,t){if(!this.shouldLogMessage(e.verbosity))return;let r="";e.projectName&&(r+=` ${e.projectName}`,e.variant&&(r+=` (${e.variant})`),r+=":"),0!==e.instanceId&&(r+=`${e.instanceId}:`),r+=` ${e.message}`;let n=!1;switch(e.errorLevel){case c.info:this.outputChannel().info(r);break;case c.warning:this.outputChannel().warn(r);break;case c.error:this.outputChannel().error(r),n=!0}n&&this.outputChannel().show()}}t.HotReloadLogger=u,t.hotReloadLogger=new u},979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listenToHotReloadConfigUpdates=t.hotReloadOptionService=t.HotReloadOptionService=void 0;const n=r(9496);class o{enabled=!1;verbosity="minimal";hotReloadOnSave=!0;isHotReloadEnabled(e,t){return Promise.resolve(this.enabled)}updateConfig(e){this.enabled=n.workspace.getConfiguration("csharp.experimental.debug").get("hotReload")??!1,this.verbosity=e.get("hotReloadVerbosity")??"minimal",this.hotReloadOnSave=e.get("hotReloadOnSave")??!0}getIsHotReloadEnabled(){return this.enabled}getIsHotReloadOnSave(){return this.hotReloadOnSave}getVerbosity(){return this.verbosity}isSettingsEnabled(){return this.enabled}}function i(){const e=n.workspace.getConfiguration("csharp.debug");t.hotReloadOptionService.updateConfig(e)}t.HotReloadOptionService=o,t.hotReloadOptionService=new o,t.listenToHotReloadConfigUpdates=function(){n.workspace.onDidChangeConfiguration(i),i()}},8457:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.HotReloadResult=void 0,function(e){e[e.applied=0]="applied",e[e.noChanges=1]="noChanges",e[e.restartRequired=2]="restartRequired",e[e.errorEdits=3]="errorEdits",e[e.applyUpdatesFailure=4]="applyUpdatesFailure",e[e.partiallyApplied=5]="partiallyApplied"}(r||(t.HotReloadResult=r={}))},8727:(e,t)=>{"use strict";var r,n,o,i,s;Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorLaunchTarget=t.CustomLaunchTarget=t.BrowserInspectUriTarget=t.BrowserLaunchTarget=t.ExeLaunchTarget=void 0,function(e){e.is=function(e){return"executable"in e&&"directory"in e&&"commandLineArguments"in e&&"environmentVariables"in e&&"isConsoleApp"in e&&"isUsingSSL"in e}}(r||(t.ExeLaunchTarget=r={})),function(e){e.is=function(e){return"url"in e}}(n||(t.BrowserLaunchTarget=n={})),function(e){e.is=function(e){return"url"in e&&"inspectUri"in e}}(o||(t.BrowserInspectUriTarget=o={})),function(e){e.is=function(e){return"options"in e}}(i||(t.CustomLaunchTarget=i={})),function(e){e.is=function(e){return"userMessage"in e&&"details"in e}}(s||(t.ErrorLaunchTarget=s={}))},7923:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SolutionRestoreCompletedEventArgs=t.SolutionRestoreStartedEventArgs=void 0,t.SolutionRestoreStartedEventArgs=class{solutionFilePath;constructor(e){this.solutionFilePath=e}},t.SolutionRestoreCompletedEventArgs=class{result;solutionFilePath;constructor(e,t){this.solutionFilePath=e,this.result=t}}},5825:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.workspaceConfigurationOptionsService=void 0;const n=r(9496);t.workspaceConfigurationOptionsService=new class{getOption(e,t){return n.workspace.getConfiguration(e).get(t)}getStringOption(e,t){const r=this.getOption(e,t);if(void 0!==r&&"string"==typeof r)return r;throw new Error(`Unable to find a string from ${t} in ${e}`)}getNumberOption(e,t){const r=this.getOption(e,t);if(void 0!==r&&"number"==typeof r)return r;throw new Error(`Unable to find a number from ${t} in ${e}`)}getBooleanOption(e,t){const r=this.getOption(e,t);if(void 0!==r&&"boolean"==typeof r)return r;throw new Error(`Unable to find a boolean from ${t} in ${e}`)}getJSONStringSection(e,t){const r=this.getOption(e,t);if(void 0!==r)return JSON.stringify(r);throw new Error(`Unable to find anything from ${t} in ${e}`)}}},519:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectQueryableSpace=void 0;const n=r(9679),o=r(7195),i=r(5979);t.ProjectQueryableSpace=class{serviceBroker;constructor(e){this.serviceBroker=e}async executeQuery(e,t){const r=this.serviceBroker;return await o.logger.watch("ExecuteQuery with project query execution service",(async function(){const n=JSON.stringify(e),o=await r.getProxy(i.default.projectQueryExecutionService);try{if(o){const e=await o.ExecuteQueryAsync(n,t);return JSON.parse(e)}}catch(e){throw new Error("Exception while talking to proxy: "+e)}finally{o?.dispose()}}))}async executeAction(e,t){const r=this.serviceBroker;return await o.logger.watch("ExecuteQuery action with project query execution service",(async function(){const n=JSON.stringify(e),o=await r.getProxy(i.default.projectQueryExecutionService);try{if(o){const e=await o.ExecuteRemoteExecutableAsync(n,t);return JSON.parse(e)}}catch(e){throw new Error("Exception while talking to proxy: "+e)}finally{o?.dispose()}}))}async subscribeQuery(e,t){const r=this.serviceBroker;return await o.logger.watch("Subscribe with project query",(async()=>{const n=new s(t),o=JSON.stringify(e),c=await r.getProxy(i.default.projectQueryExecutionService);try{if(c){const e=await c.SubscribeQueryResultsAsync(o,n);return new a(c,e)}}catch(e){throw c?.dispose(),new Error("Exception while talking to proxy: "+e)}}))}};class s extends n.Observer{resultsReceiver;constructor(e){super((t=>{e.onNext(JSON.parse(t))}),(t=>{t?(o.logger.log("queryCompleted Error: "+t),e.onError(t)):(o.logger.log("queryCompleted"),e.onCompleted())})),this.resultsReceiver=e}}class a{executionService;subscription;constructor(e,t){this.executionService=e,this.subscription=t}dispose(){this.subscription.dispose(),this.executionService.dispose()}}},8305:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilteredStartupProjectService=void 0,t.FilteredStartupProjectService=class{service;observers;currentStartupProjectPath;unsubscribe;constructor(e){this.service=e,this.observers=[]}onNext(e){let t=e?.fullPath;if(t!==this.currentStartupProjectPath){this.currentStartupProjectPath=t;for(const e of this.observers)e.onNext(t)}}onCompleted(){for(const e of this.observers)e.onCompleted()}onError(e){for(const t of this.observers)t.onError(e)}subscribe(e){return this.observers.push(e),1===this.observers.length?this.unsubscribe=this.service.subscribe(this):e.onNext(this.currentStartupProjectPath),()=>{this.observers=this.observers.filter((t=>t!==e)),0===this.observers.length&&(this.unsubscribe?.(),this.unsubscribe=void 0)}}async pickStartupProject(){let e=await this.service.pickStartupProject();return e?.fullPath}getCurrentStartupProject(){return this.service.getCurrentStartupProject()?.fullPath}async getOrPickCurrentStartupProject(){let e=await this.service.getOrPickCurrentStartupProject();return e?.fullPath}}},4730:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.VsCodeFileWatcherEventArgs=t.FileSystemWatcherChangeTypes=void 0,function(e){e[e.created=1]="created",e[e.deleted=2]="deleted",e[e.changed=4]="changed"}(r||(t.FileSystemWatcherChangeTypes=r={})),t.VsCodeFileWatcherEventArgs=class{watcherChangeType;fsPath;constructor(e,t){this.watcherChangeType=e,this.fsPath=t}}},2743:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogOutputChannelState=void 0;const n=r(9496),o=r(7195),i=r(9781);class s{outputChannel;constructor(e){this.outputChannel=e}appendError(e){this.outputChannel?this.outputChannel.error(e):o.logger.log(e,i.LogImportance.high)}appendWarning(e){this.outputChannel?this.outputChannel.warn(e):o.logger.log(e,i.LogImportance.normal)}appendLine(e){this.outputChannel?this.outputChannel.appendLine(e):o.logger.log(e)}show(){this.outputChannel?.show(!0)}}class a{outputChannels=new Map;constructor(){}static create(){return new a}createOutputChannel(e){const t=e.activationArguments?.outputChannelName;if(t){let e=this.outputChannels.get(t);return e||(e=n.window.createOutputChannel(t,{log:!0}),this.outputChannels.set(t,e)),new s(e)}return new s}}t.LogOutputChannelState=a},277:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NuGetDotnetCommandsService=void 0;const n=r(1249),o=r(1017),i=r(9781),s=r(7867),a=r(77),c=r(2677),u=r(3228);class l{outputChannel;static interactiveSwitch="--interactive";static includePrereleaseSwitch="--include-prerelease";static prereleaseSwitch="--prerelease";static minRequiredDotnetVersion="8.0.200";outputLogger;constructor(e){this.outputChannel=e,this.outputLogger=(0,u.lazyPromiseLambda)((async()=>new i.NuGetLogger(await this.outputChannel)))}async checkPrerequisites(e){const t=e?(0,o.dirname)(e):void 0,r=new i.OutputMonitor;await(0,s.dotnetCommand)(a.DotnetCommand.dotnetVersion,t,["--version"],r,!0);const u=r.getOutput();if(!u)return{isPrerequisiteMet:!1};const d=n.clean(u);return d?n.gte(d,l.minRequiredDotnetVersion)?{isPrerequisiteMet:!0,value:d}:{isPrerequisiteMet:!1,value:d,message:c.nugetStrings.missingDotnetSdkError,actionText:c.nugetStrings.missingDotnetSdkActionMessage}:{isPrerequisiteMet:!1,message:c.nugetStrings.missingDotnetSdkError,actionText:c.nugetStrings.missingDotnetSdkActionMessage}}async addPackage(e,t,r){return this.executeAddPackage(e,t,r,a.DotnetCommand.nugetAddPackage)}async updatePackage(e,t,r){return this.executeAddPackage(e,t,r,a.DotnetCommand.nugetUpdatePackage)}async executeAddPackage(e,t,r,n){if(!e||!t||!r)return!1;const i=e?(0,o.dirname)(e):void 0,c=["add",e,"package",t,"-v",r,l.interactiveSwitch];return await(0,s.dotnetCommand)(a.DotnetCommand.nugetAddPackage,i,c,await this.outputLogger),!0}async removePackage(e,t){if(!e||!t)return!1;const r=e?(0,o.dirname)(e):void 0,n=["remove",e,"package",t];return await(0,s.dotnetCommand)(a.DotnetCommand.nugetRemovePackage,r,n,await this.outputLogger),!0}async packageSearch(e,t,r){const c=["package","search",t,"--format","json",l.interactiveSwitch];r&&c.push(l.prereleaseSwitch);const u=e?(0,o.dirname)(e):void 0,d=new i.JsonOutputMonitor(await this.outputLogger);await(0,s.dotnetCommand)(a.DotnetCommand.nugetPackageSearch,u,c,d,!0);const p=await this.parseJsonFromOutput(d,"packageSearch");if(p){const e=new Map;return p.searchResult?.forEach((t=>{t.packages.map((e=>({id:e.id,latestVersion:e.latestVersion}))).forEach((t=>{const r=e.get(t.id),o=n.coerce(t.latestVersion),i=n.coerce(r?.version);(!r||o&&i&&n.gt(o,i))&&e.set(t.id,t)}))})),Array.from(e.values())}return[]}async getVersions(e,t,r){const n=["package","search",t,"--exact-match","--format","json",l.interactiveSwitch];r&&n.push(l.prereleaseSwitch);const c=e?(0,o.dirname)(e):void 0,u=new i.JsonOutputMonitor(await this.outputLogger);await(0,s.dotnetCommand)(a.DotnetCommand.nugetGetVersions,c,n,u,!0);const d=await this.parseJsonFromOutput(u,"getVersions");if(d){const e=d.version??0;return d.searchResult.reduce(((t,r)=>t.concat(r.packages.map((t=>this.mapVersionOutput(t,e))))),[])}return[]}async getInstalledPackages(e){return this.listInstalledPackages(e,!1)}async getOutdatedPackages(e,t){return this.listInstalledPackages(e,!0,t)}async listInstalledPackages(e,t,r=!1){let c=a.DotnetCommand.nugetListInstalledPackages;const u=["list",e,"package","--format","json",l.interactiveSwitch];t&&(u.push("--outdated"),c=a.DotnetCommand.nugetListOutdatedPackages,r&&u.push(l.includePrereleaseSwitch));const d=e?(0,o.dirname)(e):void 0,p=new i.JsonOutputMonitor(await this.outputLogger);await(0,s.dotnetCommand)(c,d,u,p,!0);const f=await this.parseJsonFromOutput(p,t?"getOutdatedPackages":"getInstalledPackages");if(f){const e=new Map;return f.projects?.forEach((r=>{r.frameworks?.forEach((r=>{r.topLevelPackages?.filter((e=>!t||this.isVersion(e.latestVersion))).map((e=>({id:e.id,version:e.requestedVersion}))).forEach((t=>{const r=e.get(t.id);r&&!n.gt(t.version,r.version)||e.set(t.id,t)}))}))})),Array.from(e.values())}return[]}async parseJsonFromOutput(e,t){try{const t=e.getOutput();return JSON.parse(t)}catch{const e=await this.outputLogger;return void e?.log(c.nugetStrings.invalidJsonError(t))}}mapVersionOutput(e,t){let r;return r=1===t?{id:e.id,version:e.latestVersion}:2===t?{id:e.id,version:e.version}:{id:e.id,version:e.latestVersion},r}isVersion(e){const t=e?.trim();return t&&!isNaN(t.charAt(0))}}t.NuGetDotnetCommandsService=l},8240:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NuGetSolutionRestoreState=t.NuGetSolutionRestoreService=void 0;const n=r(2361),o=r(9496),i=r(9781),s=r(9994),a=r(77),c=r(7195),u=r(7867),l=r(2677),d=r(7923);class p extends n.EventEmitter{state;rpcEventNames=["solutionRestoreStarted","solutionRestoreCompleted"];startedHandler;completedHandler;constructor(e,t){super(),this.state=e,t.activationArguments?.needEvents&&(this.startedHandler=e=>this.emit("solutionRestoreStarted",e),this.completedHandler=e=>this.emit("solutionRestoreCompleted",e),this.state.on("solutionRestoreStarted",this.startedHandler),this.state.on("solutionRestoreCompleted",this.completedHandler))}dispose(){this.startedHandler&&this.state.off("solutionRestoreStarted",this.startedHandler),this.completedHandler&&this.state.off("solutionRestoreCompleted",this.completedHandler)}async setState(){const e=c.environmentStateManager?.getLatestEnvironmentState();if(!e)throw new Error("Environment state is undefined");this.state.setState(e)}async restoreSolution(){return await this.state.restoreSolution()}async nominateProject(e){return await this.state.nominateProject(e)}isNominationOnGoing(){return this.state.isNominationOnGoing()}}t.NuGetSolutionRestoreService=p;class f extends n.EventEmitter{rootDirectory;solutionFile;totalProjects;projectsNominatedSoFar;cachedRestoreResult;outputChannel;outputLogger;constructor(e){super(),this.outputChannel=e,this.outputLogger=new i.NuGetLogger(this.outputChannel)}static create(e){return new f(e)}setState(e){this.projectsNominatedSoFar=new Set,this.solutionFile=e.solutions[0],this.rootDirectory=(0,s.getActiveWorkspaceRoot)(),this.totalProjects=e.projects.filter((e=>e.projectId.fullPath.endsWith(".csproj"))).length,this.cachedRestoreResult=void 0}async restoreSolution(){if(this.cachedRestoreResult)try{return await this.cachedRestoreResult,!0}catch(e){return!1}try{return c.logger.log("Starting NuGet restore for the solution."),this.emit("solutionRestoreStarted",new d.SolutionRestoreStartedEventArgs(this.solutionFile)),this.cachedRestoreResult=(0,u.dotnetCommand)(a.DotnetCommand.restore,this.rootDirectory,["restore",this.solutionFile,"--interactive"],this.outputLogger,!0),await this.cachedRestoreResult,this.emit("solutionRestoreCompleted",new d.SolutionRestoreCompletedEventArgs(this.solutionFile,!0)),c.logger.log("Completed NuGet restore."),!0}catch(e){return this.emit("solutionRestoreCompleted",new d.SolutionRestoreCompletedEventArgs(this.solutionFile,!1)),this.displayFailureNotification(),c.logger.log(`Completed NuGet restore with error: ${e}`),!1}finally{this.cachedRestoreResult=void 0}}async nominateProject(e){return this.areAllProjectsNominated()?await this.restoreSolution():(this.projectsNominatedSoFar.add(e),!0)}isNominationOnGoing(){return!!this.cachedRestoreResult}areAllProjectsNominated(){return this.projectsNominatedSoFar.size===this.totalProjects}displayFailureNotification(){o.window.showErrorMessage(l.NuGet.restoreFailure,l.showError).then((e=>{e===l.showError&&this.outputChannel.show()}))}}t.NuGetSolutionRestoreState=f},9751:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutputChannelState=void 0;const n=r(9496);class o{outputChannel;constructor(e){this.outputChannel=e}append(e){this.outputChannel.append(e)}appendLine(e){this.outputChannel.appendLine(e)}show(e){this.outputChannel.show(e)}clear(){this.outputChannel?.clear()}}class i{outputChannels=new Map;constructor(){}static create(){return new i}createOutputChannel(e){const t=e.activationArguments?.outputChannelName;if(!t)throw new Error("Missing ServiceActivationOptions.activationArguments.outputChannelName");let r=this.outputChannels.get(t);return r||(r=n.window.createOutputChannel(t),this.outputChannels.set(t,r)),new o(r)}}t.OutputChannelState=i},279:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTemplateService=void 0;const n=r(9496),o=r(2037),i=r(9279),s=r(5979),a=r(4832),c=r(7195),u=r(9994),l=r(2677);let d;t.getTemplateService=async function(){if(d)return d;const e=n.extensions.getExtension(i.EXTENSION_ID);if(!e)throw new Error("Unable to find the extension");const t=e.exports.serviceBroker,r=await t.getProxy(s.default.templateService);if(!r)throw new Error("Unable to get template service from brokered services");const p=n.workspace.workspaceFolders,f=p&&0!==p.length?u.getActiveWorkspaceRoot():(0,o.homedir)(),h=await(0,a.getDotnetVersion)(f,c.logger),g=h?await(0,a.findInstalledDotnetFromPath)(c.logger):null;if(!h||!g)return await n.window.showErrorMessage(l.addNewItemUiStrings.noSdkFound),null;if(!await r.initialize(g,h.version))throw new Error("Unable to initialize template engine host using version: "+h.version+" and path: "+g);return d=r,d}},2188:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VsCodeFileWatcherService=void 0;const n=r(9496),o=r(4730),i=r(2361);class s extends i.EventEmitter{fileSystemWatcher;constructor(e){super();let t=e.activationArguments?.globPattern??"**";const r=e.activationArguments?.basePath,i=!!e.activationArguments?.ignoreCreateEvents&&JSON.parse(e.activationArguments.ignoreCreateEvents.toLowerCase()),s=!!e.activationArguments?.ignoreChangeEvents&&JSON.parse(e.activationArguments.ignoreChangeEvents.toLowerCase()),a=!!e.activationArguments?.ignoreDeleteEvents&&JSON.parse(e.activationArguments.ignoreDeleteEvents.toLowerCase());r&&(t=new n.RelativePattern(r,t)),this.fileSystemWatcher=n.workspace.createFileSystemWatcher(t,i,s,a),this.fileSystemWatcher.onDidCreate((e=>{this.emit("onFileSystemChange",new o.VsCodeFileWatcherEventArgs(o.FileSystemWatcherChangeTypes.created,e.fsPath))})),this.fileSystemWatcher.onDidChange((e=>{this.emit("onFileSystemChange",new o.VsCodeFileWatcherEventArgs(o.FileSystemWatcherChangeTypes.changed,e.fsPath))})),this.fileSystemWatcher.onDidDelete((e=>{this.emit("onFileSystemChange",new o.VsCodeFileWatcherEventArgs(o.FileSystemWatcherChangeTypes.deleted,e.fsPath))}))}rpcEventNames=["onDidChange","onDidCreate","onDidDelete","onFileSystemChange"];dispose(){this.fileSystemWatcher.dispose()}}t.VsCodeFileWatcherService=s},8058:function(e,t,r){"use strict";var n=this&&this.__runInitializers||function(e,t,r){for(var n=arguments.length>2,o=0;o<t.length;o++)r=n?t[o].call(e,r):t[o].call(e);return n?r:void 0},o=this&&this.__esDecorate||function(e,t,r,n,o,i){function s(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,c=n.kind,u="getter"===c?"get":"setter"===c?"set":"value",l=!t&&e?n.static?e:e.prototype:null,d=t||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),p=!1,f=r.length-1;f>=0;f--){var h={};for(var g in n)h[g]="access"===g?{}:n[g];for(var g in n.access)h.access[g]=n.access[g];h.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(e||null))};var v=(0,r[f])("accessor"===c?{get:d.get,set:d.set}:d[u],h);if("accessor"===c){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw new TypeError("Object expected");(a=s(v.get))&&(d.get=a),(a=s(v.set))&&(d.set=a),(a=s(v.init))&&o.unshift(a)}else(a=s(v))&&("field"===c?o.unshift(a):d[u]=a)}l&&Object.defineProperty(l,n.name,d),p=!0},i=this&&this.__setFunctionName||function(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})};Object.defineProperty(t,"__esModule",{value:!0}),t.EntitlementsService=void 0;const s=r(9496),a=r(2196),c=r(8394),u=r(8701),l=r(7359),d=r(3077),p="csdevkit_entitlementCode",f=new Date((new Date).setFullYear((new Date).getFullYear()+1));t.EntitlementsService=(()=>{let e,t,r=[];return class{static{e=[(0,l.catchErrors)(c.EntitlementError.requestFailure),l.addGetEntitlementTelemetry],o(this,t={value:i((async function(e,t){let r=await this.#e(e,t);const n=this.#t();return c.Entitlement.isActive(n)&&!c.Entitlement.isActive(r)&&(r=n),!t||r===this.#r||r instanceof c.Entitlement&&this.#r instanceof c.Entitlement&&r.equals(this.#r)||(this.#r=r,this.#n.fire(r)),r}),"#getEntitlementsInternal")},e,{kind:"method",name:"#getEntitlementsInternal",static:!1,private:!0,access:{has:e=>#o in e,get:e=>e.#o}},null,r)}#i=void n(this,r);#s;#n=new s.EventEmitter;#a;entitlementsChanged=this.#n.event;#r=c.EntitlementError.noEntitlement;constructor(e,t,r){this.#i=e,this.#s=t,this.#i.msSessionChanged((()=>this.#c())),this.#a=r??h.create()}async getEntitlements(e){return this.#o(e,!1)}getRequiredScopes(){return this.#a.getRequiredScopes()}#t(){return(0,d.isInDevBox)()?new c.Entitlement("DevBoxSubscriptionId",c.EntitlementType.devbox,c.EntitlementSourceType.environment,u.identityStrings.devBoxSubscription,c.Entitlement.activeSubscriptionStatus,f,"DevBox programCode","DevBox channel"):(0,d.isInCodeSpaces)()?new c.Entitlement("CodeSpacesSubscriptionId",c.EntitlementType.codespaces,c.EntitlementSourceType.environment,u.identityStrings.codeSpacesSubscription,c.Entitlement.activeSubscriptionStatus,f,"CodeSpaces programCode","CodeSpaces channel"):null}#c(){this.#o({silent:!0},!0).catch((e=>{(0,l.sendErrorEvent)("EntitlementsService","sessionChanged",e)}))}get#o(){return t.value}async#e(e,t){let r=c.EntitlementError.requestFailure;if(a.useEntitlementsCache())if(t)await this.#s.delete(p);else{const e=await this.#s.get(p),t=e?c.Entitlement.deserialize(e):c.EntitlementError.noEntitlement;if(c.Entitlement.isActive(t)&&(r=t,t.isFresh()))return t}try{const t=await this.#a.fetch(this.#i,e);if(t===c.EntitlementError.noSession)return r=c.EntitlementError.noSession,this.#s.delete(p),c.EntitlementError.noSession;c.Entitlement.isActive(r)||(r=t),c.Entitlement.isActive(t)&&(r=t,await this.#s.store(p,t.serialize()))}catch(e){(0,l.sendErrorEvent)("EntitlementsService","requestEntitlementWithCaching",e)}return r}dispose(){this.#i.dispose(),this.#n.dispose()}}})();class h{sources;name="AggregatedEntitlementSource";constructor(e){this.sources=e}async fetch(e,t){let r=c.EntitlementError.requestFailure;for(let n of this.sources){try{r=await n.fetch(e,t)}catch(e){(0,l.sendErrorEvent)(n.name,"fetch entitlements",e)}if(r!==c.EntitlementError.requestFailure)return r}return r}getRequiredScopes(){return this.sources.find((e=>e!==v.instance))?.getRequiredScopes()??[]}static create(){let e=[m.ideBenefitsSource,v.instance];switch(a.entitlementsApiType()){case"Entitlements":e=[m.entitlementsSource,v.instance];break;case"IdeBenefitsOnly":e=[m.ideBenefitsSource]}return new h(e)}}class g{name;url;scopes;constructor(e,t,r){this.name=e,this.url=t,this.scopes=r}async fetch(e,t){const r=await e.getMsAccessToken(this.scopes,{...t,callerId:"EntitlementsService",requestReason:u.identityStrings.entitlementsSignInReason});if(!r)return c.EntitlementError.noSession;const n=await(0,d.httpsGet)(this.url,r);return n?this.parseResponse(n):c.EntitlementError.requestFailure}getRequiredScopes(){return this.scopes}}class v extends g{static instance=new v("LicensingWebSource",v.#u(),["499b84ac-1321-427f-aa17-267ca6975798/.default"]);static#u(){return"https://app.vssps.visualstudio.com/_apis/Licensing/ClientRights/VisualStudio?productVersion=17.0.0.0%20CSDEVKIT&edition=Professional&relType=release&machineId=00000000-0000-0000-0000-00000000000"}fetch(e,t){return super.fetch(e,{silent:!0})}parseResponse(e){const t=v.#l(e);if(!t||!Array.isArray(t))return c.EntitlementError.noEntitlement;const r=t.map((e=>({obj:e,type:v.#d(e?.AuthorizedVSEdition)}))).sort(((e,t)=>t.type-e.type))[0];if(!r||!r.obj)return c.EntitlementError.noEntitlement;const n=r.obj.LicenseFallbackDescription??r.obj.AuthorizedVSEdition;return n?new c.Entitlement("LicensingApiSubscriptionId",r.type,c.EntitlementSourceType.licensingApi,n,c.Entitlement.activeSubscriptionStatus,f,"programCode unavailable","channel unavailable"):c.EntitlementError.noEntitlement}static#d(e){switch(e?.toLowerCase()){case"enterprise":return c.EntitlementType.enterprise;case"ultimate":return c.EntitlementType.ultimate;case"premium":return c.EntitlementType.premium;case"professional":return c.EntitlementType.pro;case"testprofessional":return c.EntitlementType.testPro;default:return c.EntitlementType.none}}static#l(e){const t=e.split(".")[1];if(!t)return;const r=Buffer.from(t,"base64").toString("binary"),n=JSON.parse(r);return n.Rights?JSON.parse(n.Rights):void 0}}class m extends g{static#p="IdeBenefitsSource";static entitlementsSource=new m("EntitlementsSource","https://api.subscriptions.visualstudio.microsoft.com/api/GetMyEntitlements",["https://graph.microsoft.com/.default"]);static ideBenefitsSource=new m(m.#p,a.getIdeBenefitsEndpoint(),["6f1cc985-85e8-487e-b0dd-aa633302a731/.default"]);static#f="LicensingIde";parseResponse(e){const t=JSON.parse(e);if(!t||0===t.length)return c.EntitlementError.noEntitlement;const r=t.filter((e=>e.entitlementType===m.#f)).map(this.#h.bind(this));return 0===r.length?c.EntitlementError.noEntitlement:((0,l.sendReceivedEntitlementsTelemetry)(r),r.filter((e=>e.isActive())).sort(((e,t)=>t.type-e.type)).length>0?r[0]:c.EntitlementError.inactiveEntitlement)}#h(e){return new c.Entitlement(e.benefitDetailGuid,m.#d(e.entitlementCode),this.name===m.#p?c.EntitlementSourceType.ideBenefitsApi:c.EntitlementSourceType.entitlementApi,e.subscriptionLevelName,e.subscriptionStatus?.toLocaleLowerCase(),new Date(e.subscriptionExpirationDate),e.subscriptionProgramCode,e.subscriptionChannel)}static#d(e){switch(e){case"IDE-ENTERPRISE":return c.EntitlementType.enterprise;case"IDE-ULTIMATE":return c.EntitlementType.ultimate;case"IDE-PREMIUM":return c.EntitlementType.premium;case"IDE-PRO":return c.EntitlementType.pro;case"IDE-TESTPRO":return c.EntitlementType.testPro;default:return c.EntitlementType.none}}}},2902:function(e,t,r){"use strict";var n=this&&this.__runInitializers||function(e,t,r){for(var n=arguments.length>2,o=0;o<t.length;o++)r=n?t[o].call(e,r):t[o].call(e);return n?r:void 0},o=this&&this.__esDecorate||function(e,t,r,n,o,i){function s(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,c=n.kind,u="getter"===c?"get":"setter"===c?"set":"value",l=!t&&e?n.static?e:e.prototype:null,d=t||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),p=!1,f=r.length-1;f>=0;f--){var h={};for(var g in n)h[g]="access"===g?{}:n[g];for(var g in n.access)h.access[g]=n.access[g];h.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(e||null))};var v=(0,r[f])("accessor"===c?{get:d.get,set:d.set}:d[u],h);if("accessor"===c){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw new TypeError("Object expected");(a=s(v.get))&&(d.get=a),(a=s(v.set))&&(d.set=a),(a=s(v.init))&&o.unshift(a)}else(a=s(v))&&("field"===c?o.unshift(a):d[u]=a)}l&&Object.defineProperty(l,n.name,d),p=!0},i=this&&this.__setFunctionName||function(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})};Object.defineProperty(t,"__esModule",{value:!0}),t.TokenAcquisitionService=void 0;const s=r(9496),a=r(7359),c="microsoft",u="github",l=["VSCODE_CLIENT_ID:04f0c124-f2bc-4f59-8241-bf6df9866bbd","VSCODE_TENANT:common"];t.TokenAcquisitionService=(()=>{let e,t,r=[];return class{static{e=[(0,a.catchErrors)(void 0),a.addGetSessionTelemetry],o(this,t={value:i((async function(e,t,r){if(!r||!r.callerId?.trim()||!r.requestReason?.trim())throw new Error("Please provide callerId and requestReason in TokenRequestOptions");if(r.createIfNone&&!r.forceNewSession){const n=await this.#g.getSession(e,t,{silent:!0});if(n)return n;r.createIfNone=!1,r.forceNewSession=!0}return!0===r.forceNewSession&&(r.forceNewSession={detail:r.requestReason}),await this.#g.getSession(e,t,r)}),"#getSession")},e,{kind:"method",name:"#getSession",static:!1,private:!0,access:{has:e=>#v in e,get:e=>e.#v}},null,r)}#g=void n(this,r);#m;#y=new s.EventEmitter;#_=new s.EventEmitter;msSessionChanged=this.#y.event;gitHubSessionChanged=this.#_.event;constructor(e){this.#g=e??new d,this.#m=this.#g.onDidChangeSessions((e=>this.#S(e.provider.id)))}async getSessionInfo(e,t){const r=[...e,...l];return await this.#v(c,r,t)??null}getMsAccessToken(e,t){const r=[...e,...l];return this.#E(c,r,t)}getGitHubAccessToken(e,t){return this.#E(u,e,t)}async#E(e,t,r){const n=await this.#v(e,t,r);return n?.accessToken??null}get#v(){return t.value}#S(e){switch(e){case c:this.#y.fire();break;case u:this.#_.fire()}}dispose(){this.#y.dispose(),this.#_.dispose(),this.#m.dispose()}}})();class d{getSession(e,t,r){return s.authentication.getSession(e,t,r)}onDidChangeSessions=s.authentication.onDidChangeSessions}},2196:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.integrationTestMode=t.getIdeBenefitsEndpoint=t.daysEntitlementIsFresh=t.daysEntitlementIsValid=t.daysBetweenSignInPrompts=t.entitlementsApiType=t.showEntitlementExpiryDate=t.useEntitlementsCache=void 0;const n=r(9496);function o(e,t){return n.workspace.getConfiguration("dotnet").get(e,t)}t.useEntitlementsCache=function(){return o("useEntitlementsCache",!0)},t.showEntitlementExpiryDate=function(){return o("showEntitlementExpiryDate",!1)},t.entitlementsApiType=function(){return o("EntitlementsApiType","IdeBenefits")},t.daysBetweenSignInPrompts=function(){return o("daysBetweenSignInPrompts",15)},t.daysEntitlementIsValid=function(){return o("daysEntitlementIsValid",30)},t.daysEntitlementIsFresh=function(){return o("daysEntitlementIsFresh",1)},t.getIdeBenefitsEndpoint=function(){return o("ideBenefitsEndpoint","https://api.subscriptions.visualstudio.microsoft.com/Me/Entitlements/IDEBenefits?api-version=2023-03-26&caller=vscode")},t.integrationTestMode=function(){return!!process.env.AUTOMATED_INTEGRATION_TEST}},8394:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntitlementSourceType=t.EntitlementError=t.EntitlementType=t.Entitlement=void 0;const n=r(3077),o=r(2196);class i{benefitDetailGuid;type;sourceType;subscriptionLevelName;subscriptionStatus;expirationDate;programCode;channel;acquisitionDate;fromCache;static activeSubscriptionStatus="active";constructor(e,t,r,n,o,i,s,a,c=new Date,u=!1){this.benefitDetailGuid=e,this.type=t,this.sourceType=r,this.subscriptionLevelName=n,this.subscriptionStatus=o,this.expirationDate=i,this.programCode=s,this.channel=a,this.acquisitionDate=c,this.fromCache=u}equals(e){return this===e||e&&this.subscriptionLevelName===e.subscriptionLevelName&&this.type===e.type}isActive(){return this.type>s.testPro&&this.subscriptionStatus===i.activeSubscriptionStatus&&(0,n.daysPassedSince)(this.acquisitionDate)<o.daysEntitlementIsValid()}isFresh(){return this.isActive()&&(0,n.daysPassedSince)(this.acquisitionDate)<o.daysEntitlementIsFresh()}serialize(){return JSON.stringify(this)}static deserialize(e){const t=JSON.parse(e);return t&&t.benefitDetailGuid&&t.type&&t.sourceType&&t.subscriptionLevelName&&t.subscriptionStatus&&t.programCode&&t.channel&&t.expirationDate&&t.acquisitionDate?new i(t.benefitDetailGuid,t.type,t.sourceType,t.subscriptionLevelName,t.subscriptionStatus,new Date(t.expirationDate),t.programCode,t.channel,new Date(t.acquisitionDate),!0):null}static isActive(e){return e instanceof i&&e.isActive()}}var s,a,c;t.Entitlement=i,function(e){e[e.devbox=8]="devbox",e[e.codespaces=7]="codespaces",e[e.enterprise=6]="enterprise",e[e.ultimate=5]="ultimate",e[e.premium=4]="premium",e[e.pro=3]="pro",e[e.testPro=2]="testPro",e[e.none=1]="none"}(s||(t.EntitlementType=s={})),function(e){e[e.noSession=1]="noSession",e[e.requestFailure=2]="requestFailure",e[e.noEntitlement=3]="noEntitlement",e[e.inactiveEntitlement=4]="inactiveEntitlement"}(a||(t.EntitlementError=a={})),function(e){e[e.ideBenefitsApi=1]="ideBenefitsApi",e[e.environment=2]="environment",e[e.entitlementApi=3]="entitlementApi",e[e.licensingApi=4]="licensingApi"}(c||(t.EntitlementSourceType=c={}))},5462:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTestHooks=void 0;const n=r(9496),o=r(2196),i=r(8394),s=r(7359);t.getTestHooks=function(){return o.integrationTestMode()?{secretStorage:u.instance,vsCodeAuthentication:a.instance,entlementSource:c.instance,notificationService:l.instance}:null};class a{static instance=new a;didChangeSessionsEmitter=new n.EventEmitter;lastRequestProviderId=void 0;lastRequestScopes=[];lastRequestOptions=void 0;responseToProvide=void 0;onDidChangeSessions=this.didChangeSessionsEmitter.event;getSession(e,t,r){return this.lastRequestProviderId=e,this.lastRequestScopes=t,this.lastRequestOptions=r,Promise.resolve(this.responseToProvide)}}class c{static instance=new c;name="MockEntlementSource";lastRequestOptions=void 0;responseScopesToProvide=[];#w=i.EntitlementError.noSession;getRequiredScopes(){return this.responseScopesToProvide}fetch(e,t){return this.lastRequestOptions=t,Promise.resolve(this.#w)}setResponseEntitlementToProvide(e){this.#w="string"==typeof e?i.Entitlement.deserialize(e)??i.EntitlementError.requestFailure:e}}class u{static instance=new u;typeMap=new Map;didChangeEmitter=new n.EventEmitter;onDidChange=this.didChangeEmitter.event;get(e){return Promise.resolve(this.typeMap.get(e))}store(e,t){return this.typeMap.set(e,t),Promise.resolve(!0)}delete(e){return this.typeMap.delete(e),Promise.resolve(!0)}clear(){this.typeMap.clear()}}class l extends s.NotificationService{static instance=new l;lastRequestMessage;lastRequestOptions=[];responseToProvide;async showNotification(e,t,...r){return this.lastRequestMessage=t,this.lastRequestOptions=r,this.responseToProvide}}},9998:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showEntitlementsStatusCommand=t.signInCommand=t.registerIdentityService=void 0;const n=r(9496),o=r(4138),i=r(2196),s=r(8058),a=r(2902),c=r(3077),u=r(5010),l=r(7359),d=r(8394),p=r(5462),f=r(8701),h=r(7195),g=r(8394),v="lastPromptDate";let m,y=new c.EventBouncer;async function _(e){const t=new u.TelemetryActivity("show-entitlement-command",h.telemetryService);if(!m)return void(0,l.sendErrorEvent)("showEntitlementsStatusCommand","get dependencies");y.stop();const r=await b(m.entitlementsService),n=await T(m.entitlementsService,m.tokenAcquisitionService);if(d.Entitlement.isActive(r)||n)await E(m.notificationService,r,n,"showEntitlementCommand"),t.addOrUpdateProperties({signInRequested:String(!1)});else{const e=await S(m,{messageReason:"showEntitlementCommand"});e&&y.raiseNext(),t.addOrUpdateProperties({signInRequested:String(!0),signInSucceded:String(e)})}t.end(),t.addOrUpdateProperties({caller:e}),(0,l.addAccountInfoToEvent)(t,n),(0,l.addEntitlementInfoToEvent)(t,r),t.sendTelemetry()}async function S(e,t){return await e.secrets.store(v,(new Date).toISOString()),"signInBtn"===await e.notificationService.showNotification({messageReason:`promptToSignIn+${t.messageReason}`,telemetryUpdate:t.telemetryUpdate},f.identityStrings.signInRequest,"signInBtn","dismissBtn")&&await C(e.entitlementsService,e.tokenAcquisitionService)}async function E(e,t,r,n){const o=w(t,r);await e.showNotification({messageReason:`showStatusPopUp+${n}`,telemetryUpdate:e=>{(0,l.addAccountInfoToEvent)(e,r),(0,l.addEntitlementInfoToEvent)(e,t)}},o,"dismissBtn")}function w(e,t){const r=d.Entitlement.isActive(e),n=t?.label?.split(" - ").pop()?.trim();let o=n?`${f.identityStrings.softwareIsLicensedTo} ${n}`:f.identityStrings.softwareIsLicensed;switch(o+=" ",r?e.type:g.EntitlementType.none){case g.EntitlementType.enterprise:case g.EntitlementType.ultimate:o+=f.identityStrings.underVsEnterpriseSubscription;break;case g.EntitlementType.pro:case g.EntitlementType.premium:o+=f.identityStrings.underVsProSubscription;break;case g.EntitlementType.devbox:o+=f.identityStrings.underDevBoxSubscription;break;case g.EntitlementType.codespaces:o+=f.identityStrings.underCodeSpacesSubscription;break;case g.EntitlementType.testPro:case g.EntitlementType.none:default:o+=f.identityStrings.underIndividualLicense}return o+=".",r&&i.showEntitlementExpiryDate()&&(o+=` ${f.identityStrings.expirationDateHeader} ${e.expirationDate.toLocaleDateString()}.`),o}function b(e){return e.getEntitlements({silent:!0})}async function T(e,t,r=!1){const n=await t.getSessionInfo(e.getRequiredScopes(),{callerId:"showEntitlementsStatus",requestReason:f.identityStrings.entitlementsSignInReason,silent:!r,createIfNone:r});return n?.account??null}async function C(e,t){return!!await T(e,t,!0)}t.registerIdentityService=function(e){const t=(0,p.getTestHooks)();m=function(e,t){const r=t?.secretStorage??new l.SecretStorageWithErrorHandling(e.secrets),n=t?.notificationService??l.NotificationService.instance,o=new a.TokenAcquisitionService(t?.vsCodeAuthentication);return{secrets:r,notificationService:n,tokenAcquisitionService:o,entitlementsService:new s.EntitlementsService(o,r,t?.entlementSource)}}(e,t),e.subscriptions.push(m.entitlementsService);const r=async function(e,t){const r=await e.entitlementsService.getEntitlements({createIfNone:!1});!function(e,t,r){const i=n.window.createStatusBarItem("csdevkit.status",n.StatusBarAlignment.Right,0);function s(e){i.text=d.Entitlement.isActive(e)?"$(statusbar-entitlement)":"$(statusbar-no-entitlement)",i.tooltip=w(e,null),i.show()}i.command=o.showEntitlementsStatus,s(r),e.subscriptions.push(i,t(s))}(t,e.entitlementsService.entitlementsChanged,r);const s=y.createEventHandler((e=>{d.Entitlement.isActive(e)&&_("entitlementsChangedEvent")}));t.subscriptions.push(e.entitlementsService.entitlementsChanged(s)),r!==d.EntitlementError.noSession||await async function(e,t){return!!await T(e,t,!1)}(e.entitlementsService,e.tokenAcquisitionService)||await async function(e){const t=await e.secrets.get(v);(t?(0,c.daysPassedSince)(new Date(t))>i.daysBetweenSignInPrompts():await e.secrets.store(v,(new Date).toISOString()))&&await S(e,{messageReason:"periodicalReminder",telemetryUpdate:e=>{e.addOrUpdateProperties({previousReminderDate:t})}})}(e)}(m,e).catch((e=>{(0,l.sendErrorEvent)("registerIdentityService","initialization",e)}));return t&&(t.initPromise=r),[m.tokenAcquisitionService,t]},t.signInCommand=async function(){const e=new u.TelemetryActivity("sign-in-command",h.telemetryService);if(!m)return void(0,l.sendErrorEvent)("signInCommand","get dependencies");let t=d.EntitlementError.noEntitlement;const r=await T(m.entitlementsService,m.tokenAcquisitionService);r?(t=await b(m.entitlementsService),await E(m.notificationService,t,r,"signInCommand")):await C(m.entitlementsService,m.tokenAcquisitionService),e.end(),(0,l.addAccountInfoToEvent)(e,r),(0,l.addEntitlementInfoToEvent)(e,t),e.sendTelemetry()},t.showEntitlementsStatusCommand=async function(){await _("command")}},8701:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.identityStrings=void 0;const n=r(9496),o=r(8472);o.config({bundleFormat:o.BundleFormat.standalone,locale:n.env.language,messageFormat:o.MessageFormat.both});const i=o.loadMessageBundle(r(1017).join(__dirname,"services\\identity\\strings.ts"));t.identityStrings={devBoxSubscription:i(0,null),codeSpacesSubscription:i(1,null),softwareIsLicensed:i(2,null),softwareIsLicensedTo:i(3,null),underVsEnterpriseSubscription:i(4,null),underVsProSubscription:i(5,null),underDevBoxSubscription:i(6,null),underCodeSpacesSubscription:i(7,null),underIndividualLicense:i(8,null),expirationDateHeader:i(9,null),signInRequest:i(10,null),signInBtn:i(11,null),dismissBtn:i(12,null),entitlementsSignInReason:i(13,null)}},7359:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addGetEntitlementTelemetry=t.addGetSessionTelemetry=t.catchErrors=t.SecretStorageWithErrorHandling=t.addSignInRequestInfoToActivity=t.sendErrorEvent=t.addEnvironmentInfoToEvent=t.addAccountInfoToEvent=t.addEntitlementInfoToEvent=t.sendReceivedEntitlementsTelemetry=t.NotificationService=void 0;const n=r(9496),o=r(5010),i=r(3077),s=r(7195),a=r(6260),c=r(8394),u=r(8701),l=r(9781);class d{static instance=new d;async showNotification(e,t,...r){const i=new o.TelemetryActivity("show-notification",s.telemetryService),a=await n.window.showInformationMessage(t,...r.map((e=>u.identityStrings[e]))),c=a?r.find((e=>a===u.identityStrings[e])):void 0;return i.end(),i.addOrUpdateProperties({notificationType:"Information",reason:e.messageReason,response:c}),f(i),e.telemetryUpdate&&e.telemetryUpdate(i),i.sendTelemetry(),c}}function p(e,t){t instanceof c.Entitlement?e.addOrUpdateProperties({entitlementType:c.EntitlementType[t.type],expirationDate:t.expirationDate.toISOString(),benefitDetailGuid:t.benefitDetailGuid,subscriptionLevelName:t.subscriptionLevelName,source:c.EntitlementSourceType[t.sourceType],fromCache:String(t.fromCache),isActive:String(t.isActive()),isFresh:String(t.isFresh()),programCode:t.programCode,channel:t.channel}):e.addOrUpdateProperties({entitlementError:c.EntitlementError[t]})}function f(e){e.addOrUpdateProperties({environmentType:(0,i.isInCodeSpaces)()?"codespaces":(0,i.isInDevBox)()?"devbox":"local"})}function h(e,t,r=null){const n=`${e}: Failed to ${t}. Error: '${r}'`;s.logger.log(n,l.LogImportance.high);const o=r instanceof Error?r:new Error(String(r??n)),a=r instanceof i.ErrorWithProperties?r.properties:{};s.telemetryService?.sendTelemetryErrorEvent("identity-error",{source:e,action:t,errorName:o.name,errorMessage:o.message,errorStack:String(o.stack),...a})}function g(e,t){e.addOrUpdateProperties({silent:String(t.silent),createIfNone:String(t.createIfNone),clearSessionPreference:String(t.clearSessionPreference),forceNewSession:String(t.forceNewSession)})}t.NotificationService=d,t.sendReceivedEntitlementsTelemetry=function(e){for(let t of e){const e=new a.TelemetryEvent("received-entitlement",s.telemetryService);p(e,t),f(e),e.sendTelemetry()}},t.addEntitlementInfoToEvent=p,t.addAccountInfoToEvent=function(e,t){e.addOrUpdateProperties({signedIn:String(!!t)})},t.addEnvironmentInfoToEvent=f,t.sendErrorEvent=h,t.addSignInRequestInfoToActivity=g,t.SecretStorageWithErrorHandling=class{storage;constructor(e){this.storage=e,this.onDidChange=e.onDidChange}async get(e){try{return await this.storage.get(e)}catch(t){return void h("secretStorage",`get secret '${e}' from the store`,t)}}async store(e,t){try{return await this.storage.store(e,t),!0}catch(t){return h("secretStorage",`store secret '${e}' in the store`,t),!1}}async delete(e){try{return await this.storage.delete(e),!0}catch(t){return h("secretStorage",`delete secret '${e}' from the store`,t),!1}}onDidChange},t.catchErrors=function(e){return function(t,r){const n=String(r.name);return async function(...r){let o=e;try{o=await t.call(this,...r)}catch(e){h(n,"running method",e)}return o}}},t.addGetSessionTelemetry=function(e,t){return async function(...t){const r=new o.TelemetryActivity("get-session",s.telemetryService);let n;try{n=await e.call(this,...t)}catch(e){throw r.addOrUpdateProperties({error:e instanceof Error?e.name:"error"}),e}finally{if(r.end(),n?.id){const[e,t,o]=n.id.split("/");r.addOrUpdateProperties({tenantId:e})}const[e,o,i]=t;r.addOrUpdateProperties({succeeded:String(!!n),providerId:e,scopes:o.join(" "),callerId:i.callerId}),f(r),g(r,i),r.sendTelemetry()}return n}},t.addGetEntitlementTelemetry=function(e,t){return async function(...t){const r=new o.TelemetryActivity("get-entitlement",s.telemetryService);let n=c.EntitlementError.requestFailure;try{n=await e.call(this,...t)}catch(e){throw r.addOrUpdateProperties({error:e instanceof Error?e.name:"error"}),e}finally{const e=t[0],o=t[1];r.end(),r.addOrUpdateProperties({succeeded:String(n instanceof c.Entitlement),isSessionUpdated:String(o)}),g(r,e),f(r),p(r,n),r.sendTelemetry()}return n}}},3077:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInDevBox=t.isInCodeSpaces=t.EventBouncer=t.ErrorWithProperties=t.httpsGet=t.daysPassedSince=void 0;const n=r(5687),o=r(9496);t.daysPassedSince=function(e){return Math.floor((Date.now()-e.getTime())/864e5)},t.httpsGet=function(e,t){return new Promise(((r,o)=>{const s={json:!0,headers:{Authorization:"bearer "+t}},a=n.get(e,s,(t=>{let n=[];t.on("data",(e=>n.push(e))),t.on("end",(()=>{const s=n.join(""),a=t.statusCode;a&&a>199&&a<300&&s?r(s):o(new i(`Request to ${e} failed with status code: ${a} and response "${s}"`,{statusCode:String(a),content:s,uri:e}))}))}));a.on("error",(e=>o(e))),a.end()}))};class i extends Error{properties;constructor(e,t){super(e),this.properties=t}}t.ErrorWithProperties=i,t.EventBouncer=class{#b=!1;stop(){this.#b=!1}raiseNext(){this.#b=!0}createEventHandler(e){return t=>{this.#b&&(this.stop(),e(t))}}},t.isInCodeSpaces=function(){return"codespaces"===o.env.remoteName},t.isInDevBox=function(){return"true"===process.env.IsDevBox?.toLocaleLowerCase()}},2677:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startsWithInvariantIgnoreCase=t.equalsInvariantIgnoreCase=t.nugetStrings=t.hotReloadStrings=t.dotnetDebugConfigurationServiceStrings=t.debugProjectLaunchStrings=t.codeCoverageStrings=t.testExplorerStrings=t.fileTemplateStrings=t.projectTemplateStrings=t.messageStrings=t.errorStrings=t.promptStrings=t.addNewItemUiStrings=t.NuGet=t.showError=t.chooseSolutionToOpen=t.openDocument=void 0;const n=r(9496),o=r(8472);o.config({bundleFormat:o.BundleFormat.standalone,locale:n.env.language,messageFormat:o.MessageFormat.both});const i=o.loadMessageBundle(r(1017).join(__dirname,"strings.ts"));t.openDocument=i(0,null),t.chooseSolutionToOpen=i(1,null),t.showError=i(2,null);class s{static restoreFailure=i(3,null);static requiresCredentialsMessage=i(4,null);static showDeviceCodeLoginInfo=i(5,null)}function a(e,t){return 0===e.localeCompare(t,"en",{sensitivity:"accent"})}t.NuGet=s,t.addNewItemUiStrings={noSdkFound:i(6,null),createNewProject:i(7,null),searchForTemplates:i(8,null),nameNewProject:i(9,null),noProjectName:i(10,null),onlyRelative:i(11,null),pathInvalidChars:i(12,null),pathTooLong:i(13,null),projectDirectoryExists:i(14,null),solutionContainsItem:e=>i(15,null,e),locationForNewProject:i(16,null),projectCreatedIn:e=>i(17,null,e),defaultDirectory:i(18,null),chooseDirectory:i(19,null),projectLocation:i(20,null),createProject:i(21,null),showTemplateOptions:i(22,null),createProjectOrViewOptions:i(23,null),selectOption:i(24,null),selectOptionToConfigure:i(25,null),default:i(26,null),selected:i(27,null),configureOption:e=>i(28,null,e),specifyValue:e=>i(29,null,e),trueValue:i(30,null),falseValue:i(31,null),custom:i(32,null),createNewFile:i(33,null),addExistingFileToSolutionFolder:e=>i(34,null,e),addExistingFileToProject:e=>i(35,null,e),yes:i(36,null),cancel:i(37,null),nameNewFile:i(38,null),noFileName:i(39,null),fileExists:i(40,null)},t.promptStrings={selectNewProjectTemplate:i(41,null),nameNewProject:i(42,null),projectCreatedIn:e=>i(43,null,e),defaultDirectory:i(44,null),chooseDirectory:i(45,null),projectLocation:i(46,null),selectNewFileTemplate:i(47,null),selectProject:i(48,null),nameNewFile:i(49,null),addExistingFileToSolutionFolder:e=>i(50,null,e),openExistingFile:e=>i(51,null,e),addExistingFile:i(52,null),selectFile:i(53,null),yes:i(54,null),no:i(55,null),ok:i(56,null),cancel:i(57,null),addExistingProject:i(58,null),deleteConfirmation:e=>i(59,null,e),newFolderName:i(60,null),newSolutionFolder:i(61,null),removeItemConfirmation:e=>i(62,null,e),newName:i(63,null),moreInformation:i(64,null),chooseProjectToOpen:i(65,null),chooseToOpen:i(66,null),chooseProjectFileLabel:i(67,null),projectFilesFilterName:i(68,null),doNotOpenSolution:i(69,null),openProjectLog:i(70,null),openLog:i(71,null),doNotShowInWorkspaceAgain:i(72,null),openSettings:i(73,null),openLogChannel:i(74,null),disableExtensionButton:i(75,null),doNotShowAgain:i(76,null),reloadOnConfigurationChange:i(77,null),reloadWindow:i(78,null),selectConfiguration:i(79,null),selectPlatform:i(80,null),dragDropSolutionNode:(e,t)=>i(81,null,e,t),overwriteExistingItem:e=>i(82,null,e),installMaui:i(83,null)},t.errorStrings={projectDirectoryExists:i(84,null),noProjectName:i(85,null),noName:i(86,null),solutionContainsItem:e=>i(87,null,e),folderContainsItem:e=>i(88,null,e),onlyRelative:i(89,null),pathTooLong:i(90,null),pathInvalidChars:i(91,null),noSolution:i(92,null),noSolutionInWorkspace:i(93,null),errorDuringOpenSolution:e=>i(94,null,e),errorDuringCloseSolution:e=>i(95,null,e),errorDuringReloadSolution:e=>i(96,null,e),addingOutsideWorkspace:(e,t)=>i(97,null,e,t),noFileName:i(98,null),fileExists:i(99,null),addingNewFileFailed:i(100,null),addingNewFileFailedInvalidCharacters:i(101,null),deleteOperationFailed:e=>i(102,null,e),newFolderFailed:e=>i(103,null,e),fileOrFolderAlreadyExists:i(104,null),removeOperationFailed:e=>i(105,null,e),renameOperationFailed:e=>i(106,null,e),addProjectReferenceOnSharedProject:i(107,null),addProjectReferenceNoProjects:i(108,null),mauiWorkloadNotFound:i(109,null),mauiExtensionNotFound:i(110,null),notSupportedDraggedItem:e=>i(111,null,e),errorMovingItem:e=>i(112,null,e)},t.messageStrings={projectsStatusName:i(113,null),noSolutionLoadedStatus:i(114,null),projectsLoadingStatus:e=>i(115,null,e),projectsLoadingInProgress:i(116,null),projectsReadyState:e=>i(117,null,e),noProjectStateToolTip:i(118,null),noProjectStateCodeFileToolTip:i(119,null),fileOutsideOfProjectsToolTip:i(120,null),fileInsideProjectToolTip:e=>i(121,null,e),fileInsideMultipleProjectsToolTip:i(122,null),noSolutionStateToolTip:i(123,null),projectsFailedToLoadToolTip:e=>i(124,null,e),configurationStatusName:i(125,null),configurationTooltip:i(126,null),retrievingInformationForCurrentDocumentInProgress:i(127,null)},t.projectTemplateStrings={aspNETCoreEmpty:i(128,null),aspNETCoreGRPCService:i(129,null),aspNETCoreWebAPI:i(130,null),aspNETCoreWebAppMVC:i(131,null),aspNETCoreWebApp:i(132,null),blazorServerAppEmpty:i(133,null),blazorServerApp:i(134,null),blazorWebAssemblyAppEmpty:i(135,null),blazorWebAssemblyApp:i(136,null),blazorWebAssemblyStandaloneApp:i(137,null),blazorWebApp:i(138,null),classLibrary:i(139,null),consoleApp:i(140,null),msTestTest:i(141,null),nUnit3Test:i(142,null),xUnitTest:i(143,null),razorClassLibrary:i(144,null),dotNetMauiApp:i(145,null),dotNetMauiBlazorHybridApp:i(146,null),dotNetMauiClassLib:i(147,null),dotNetAspireApp:i(148,null),dotNetAspireStarterApp:i(149,null),tagEmpty:i(150,null),tagPWA:i(151,null),tagCommon:i(152,null),tagLibrary:i(153,null),tagConsole:i(154,null),tagTest:i(155,null),tagMobile:i(156,null),tagDesktop:i(157,null),tagClassLibarayType:e=>i(158,null,e)},t.fileTemplateStrings={class:i(159,null),interface:i(160,null),record:i(161,null),enum:i(162,null),struct:i(163,null),custom:i(164,null),protobuf:i(165,null),file:e=>i(166,null,e),page:e=>i(167,null,e),config:e=>i(168,null,e),component:e=>i(169,null,e),localToolManifest:e=>i(170,null,e),dotNetMauiPageCSharp:i(171,null),dotNetMauiPageXaml:i(172,null),dotNetMauiViewCSharp:i(173,null),dotNetMauiViewXaml:i(174,null),dotNEtMauiDictionaryXaml:i(175,null)},t.testExplorerStrings={buildFailed:i(176,null)},t.codeCoverageStrings={invalidCoverageFile:i(177,null)},t.debugProjectLaunchStrings={notSupportedFileExtension:(e,t)=>i(178,null,e,t),errorNoProjectForFile:e=>i(179,null,e),errorNoConfigurations:i(180,null),errorNoLaunchTargets:e=>i(181,null,e),errorDebugMultipleConfigurations:i(182,null),errorNoProjectFound:i(183,null),errorNoOpenFolder:i(184,null),errorGenericFailedToGetConfigurations:i(185,null),selectProject:i(186,null),warnNoProjectSelected:i(187,null),selectStartupProject:i(188,null),startupProjectTitle:i(189,null),errorNoLaunchableProjects:i(190,null),errorImprovedLaunchExperienceNotEnabled:i(191,null),errorNoStartupProjectSelected:i(192,null),errorStartupProjectNotFound:i(193,null),startupProjectLaunchConfigName:i(194,null),selectLaunchConfiguration:i(195,null),startupProjectTooltip:i(196,null),noProjectPlaceholder:i(197,null),launchConfigurationTitle:i(198,null),launchConfigurationTooltip:i(199,null)},t.dotnetDebugConfigurationServiceStrings={errorMultipleDebugEngines:e=>i(200,null,e),invalidLaunchConfigurationId:e=>i(201,null,e),errorBuildTitle:i(202,null),errorBuildDetails:e=>i(203,null,e),warningMissingBuildTask:i(204,null),errorAspireLaunchMinimumVersion:e=>i(205,null,e)},t.hotReloadStrings={disabledInSettingsStatus:i(206,null),notSupportedForSessionStatus:i(207,null),availableStatus:i(208,null),disabledResult:i(209,null),applyUpdatesFailureResult:i(210,null),changesDetected:i(211,null),serviceNotFound:i(212,null),exceptionWhenApplying:i(213,null)},t.nugetStrings={projectPickerPlaceholder:i(214,null),packageSearchPlacholder:i(215,null),packagePickerPlaceholder:i(216,null),versionLatestLabel:i(217,null),versionCurrentLabel:i(218,null),versionOthersLabel:i(219,null),selectVersionPlaceholder:i(220,null),noPackagesFoundError:i(221,null),noVersionsFoundError:i(222,null),noPackagesToUpdateResult:i(223,null),noPackagesToRemoveResult:i(224,null),addPackageTitle:i(225,null),updatePackageTitle:i(226,null),removePackageTitle:i(227,null),addPackageNameTitle:e=>i(228,null,e),updatePackageNameTitle:e=>i(229,null,e),missingDotnetSdkError:i(230,null),missingDotnetSdkActionMessage:i(231,null),invalidJsonError:e=>i(232,null,e),prereleaseIncludedSuffix:e=>i(233,null,e),prereleaseNotIncludedSuffix:e=>i(234,null,e)},t.equalsInvariantIgnoreCase=a,t.startsWithInvariantIgnoreCase=function(e,t){return e.length>=t.length&&(e.startsWith(t)||a(e.substring(0,t.length),t))}},5010:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryActivity=void 0;const n=r(6260);class o extends n.TelemetryEvent{static startTimeMeasurementName="startTimeInMilliseconds";static endTimeMeasurementName="endTimeInMilliseconds";static durationMeasurementName="ActivityDurationInMilliseconds";startTime;endTime;constructor(e,t){super(e,t),this.startTime=Date.now()}start(){this.startTime=Date.now(),this.endTime=void 0}end(){void 0!==this.startTime&&(this.endTime=Date.now())}sendTelemetry(){void 0===this.endTime&&(this.endTime=Date.now()),this.measurements[o.startTimeMeasurementName]=this.startTime,this.measurements[o.endTimeMeasurementName]=this.endTime,this.measurements[o.durationMeasurementName]=this.endTime-this.startTime,super.sendTelemetry()}}t.TelemetryActivity=o},6120:(e,t,r)=>{"use strict";function n(e){}let o;Object.defineProperty(t,"__esModule",{value:!0}),t.telemetryEtwLogger=t.tryLogTelemetryEtwErrorEvent=t.tryLogTelemetryEtwEvent=t.telemetryEtwNullLogger=void 0,t.telemetryEtwNullLogger={logEvent:n,logErrEvent:n,logPerfEvent:n,logInfoEvent:n,logStartCommand:n,logStopCommand:n,logStartUpdateProgram:n,logStopUpdateProgram:n,logStartUpdateGraph:n,logStopUpdateGraph:n,logStartResolveModule:n,logStopResolveModule:n,logStartParseSourceFile:n,logStopParseSourceFile:n,logStartReadFile:n,logStopReadFile:n,logStartBindFile:n,logStopBindFile:n,logStartScheduledOperation:n,logStopScheduledOperation:n};try{o=r(6232)}catch(e){o=void 0}t.tryLogTelemetryEtwEvent=function(e,r,n){if(o){var i=`{"eventname":"${e}","properties":${r?JSON.stringify(r):"{}"},"measures":${n?JSON.stringify(n):"{}"}}`;t.telemetryEtwLogger.logEvent(i)}},t.tryLogTelemetryEtwErrorEvent=function(e,r,n){if(o){var i=`{"eventname":"${e}","properties":${r?JSON.stringify(r):"{}"},"measures":${n?JSON.stringify(n):"{}"}}`;t.telemetryEtwLogger.logErrEvent(i)}},t.telemetryEtwLogger=o||t.telemetryEtwNullLogger},6260:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryEvent=void 0,t.TelemetryEvent=class{eventName;telemetryService;properties;measurements;constructor(e,t){this.eventName=e,this.telemetryService=t,this.properties={},this.measurements={}}addOrUpdateProperties(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const r=e[t];r&&(this.properties[t]=r)}}addOrUpdateMeasurements(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const r=e[t];r&&(this.measurements[t]=r)}}sendTelemetry(){this.telemetryService?.sendTelemetryEvent(this.eventName,this.properties,this.measurements)}}},1990:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readTelemetryFileAsync=t.writeTempJsonFileAsync=void 0;const n=r(7147),o=r(2037),i=r(1017),s=r(7195);function a(e){return i.basename(e)}t.writeTempJsonFileAsync=async function(e,t,r){let c=i.join(o.tmpdir(),`${e}`,`${t}.json`);const u=i.dirname(c);try{await n.promises.mkdir(u,{recursive:!0}),await n.promises.writeFile(c,r)}catch(e){s.logger.reportExceptionTelemetryAndLog("writeTempJsonFileAsync","error writing json file","",e,s.telemetryService)}if("win32"===o.platform()){let r=await async function(e,t,r){if("win32"===process.platform){if(e.indexOf("~")>0){try{e=await n.promises.realpath(e)}catch(e){return void s.logger.reportExceptionTelemetryAndLog("resolveShortPathWindows","error getting windows filepath","",e,s.telemetryService,{faultingFileName:a(r)})}e.indexOf("~")>0&&(e="string"==typeof process.env.LOCALAPPDATA?i.win32.join(process.env.LOCALAPPDATA,"Temp",`${t}`,`${r}.json`):i.win32.join(o.homedir(),"AppData","Local","Temp",`${t}`,`${r}.json`))}return e}}(c,e,t);if(void 0===r)return"";c=r}try{process.on("exit",(e=>{n.unlink(c,(e=>{e&&s.logger.reportExceptionTelemetryAndLog("writeTempJsonFileAsync","error deleting temp file","",e,s.telemetryService)}))}))}catch(e){s.logger.reportExceptionTelemetryAndLog("writeTempJsonFileAsync","error linking process to file for deletion","",e,s.telemetryService)}return c},t.readTelemetryFileAsync=async function(e,t){let r=function(e,t){return i.join(o.tmpdir(),`${e}`,`${t}`)}(e,t);if(!n.existsSync(r))return"";try{return await n.promises.readFile(r,{encoding:"utf8",flag:"r"})}catch(e){s.logger.reportExceptionTelemetryAndLog("readTelemetryFileAsync","error reading file","",e,s.telemetryService,{faultingFileName:a(t)})}return""}},6661:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryService=t.writeCommonPropsToFileAsync=void 0;const n=r(2291),o=r(9496),i=r(9781),s=r(6113),a=r(2037),c=r(1990),u=r(5979),l=r(7147),d=r(6120),p=r(1017);async function f(e,t){if(process.env.CommonPropertyBagPath)return t&&(t.CommonPropertyBagPath=process.env.CommonPropertyBagPath),process.env.CommonPropertyBagPath;const r=e.extension.packageJSON.name,i=e.extension.packageJSON.version,s=h.getSessionId(o.env.sessionId),u=e.extension.packageJSON.publisher;let d="";if("win32"===a.platform()){let t=await(0,c.readTelemetryFileAsync)(r,p.join("Telemetry","Resources.json"));try{t&&t.length>0&&(t=t.replace(/\r?\n|\r/g," ").replace(/\s+/g," ").trim(),d=JSON.parse(t))}catch(t){d="",e.extension.packageJSON.aiKey&&""!==e.extension.packageJSON.aiKey.trim()&&function(e,t){let r=new n.default(e.extension.packageJSON.aiKey),o=p.join(a.tmpdir(),"Telemetry","Resources.json"),i={},s="false";try{l.rmSync(o,{force:!0}),t&&(i.errormessage=t.toString(),t instanceof Error&&(i.exceptionstack=t.stack??""))}catch(t){}finally{l.existsSync(o)||(s="true"),i.methodname="writecommonpropstofileasync/json",i.filedeletesuccess=!l.existsSync(o),r.sendTelemetryErrorEvent("csdevkit/extension/error",i)}}(e,t)}}let f="csdevkit.insider";e.extension.packageJSON.__metadata?.preRelease&&(f=e.extension.packageJSON.__metadata.preRelease?"csdevkit.insider":"csdevkit.release");let g={"common.vscodesessionid":s,"common.extname":u+"."+r,"common.extversion":i,"common.os":a?.platform(),"common.platformversion":(a?.release()??"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.vscodemachineid":o.env.machineId,"common.vscodeversion":o.version,"common.product":o.env.appHost?.toLowerCase(),"common.channelid":f,GlobalStorageUri:e.globalStorageUri.fsPath},v={version:2,commonProperties:{"common.vscodesessionid":s,"common.extname":u+"."+r,"common.extversion":i,"common.os":a?.platform(),"common.platformversion":(a?.release()??"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.vscodemachineid":o.env.machineId,"common.vscodeversion":o.version,"common.product":o.env.appHost?.toLowerCase(),"common.channelid":f},sessionConfiguration:{globalStorageUri:e.globalStorageUri.fsPath,bucketFilters:d}},m=s.split("-");const y=m[0],_=m[m.length-1],S=await(0,c.writeTempJsonFileAsync)(r,y,JSON.stringify(g)),E=await(0,c.writeTempJsonFileAsync)(r,_,JSON.stringify(v));return process.env.CommonPropertyBagPath=`${S}`,process.env.CommonPropertyBagWithConfigPath=`${E}`,S}t.writeCommonPropsToFileAsync=f;class h{telemetryReporter;tokenAcquisitionService;propertyBagFilePath;sessionProperties;telemetryLogger;brokeredService;static getSessionId(e){return"somevalue.sessionid"===e?.toLowerCase()?(0,s.randomUUID)():e}constructor(e){"true"===process.env.EnableTelemetryInOutputWindow&&(this.telemetryLogger=new i.Logger(`${e.extension.packageJSON.displayName} - Telemetry`));try{this.telemetryReporter=new n.default(e.extension.packageJSON.aiKey),e.subscriptions.push(this.telemetryReporter)}catch(e){this.telemetryLogger?.log(`Failed to create TelemetryReporter due to ${e}`)}}getTelemetryLevel(){return"true"===process.env.PERFTEST_TELEMETRY_OPTIN?"all":this.telemetryReporter?.telemetryLevel}sendTelemetryEvent(e,t,r){this.outputTelemetryToLog(e,t,r),this.telemetryReporter?.sendTelemetryEvent(e,t,r),(0,d.tryLogTelemetryEtwEvent)(e,t,r)}sendTelemetryErrorEvent(e,t,r){if(null==e||""===e)return;let n="csdevkit/extension/error",o=t??{};e instanceof Error?(o.exceptiontype=e.name??"",o.exceptionStack=e.stack??""):o.errormessage="string"==typeof e?e:e.toString(),this.outputTelemetryToLog(n,o,r),this.telemetryReporter?.sendTelemetryErrorEvent(n,o,r),(0,d.tryLogTelemetryEtwErrorEvent)(n,o,r)}sendTelemetryException(e,t,r){this.sendTelemetryErrorEvent(e,t,r)}async updateIsMicrosoftInternal(){let e=null;const t=await(this.tokenAcquisitionService?.getSessionInfo([],{silent:!0,callerId:"TelemetryService.updateIsMicrosoftInternal",requestReason:"updateIsMicrosoftInternal"}));if(t){const r=t?.idToken.split(".")[1],n=Buffer.from(r,"base64").toString("binary"),o=JSON.parse(n);e=o?.preferred_username?.toString()??null}let r=null,n=!1;if(e){var o=e.split("@");2===o.length?"microsoft.com"===o[1]?.toLowerCase()&&(n=!0,r=o[0]):this.telemetryLogger?.log(`Invalid email address format: ${e}`)}if(this.brokeredService?.hasServerProcessLoaded()){const e=await(this.brokeredService?.serviceBroker.getProxy(u.default.telemetrySessionUpdateService));try{e&&await e.updateIsMicrosoftInternal(n,r)}catch(e){this.telemetryLogger?.log(`Failed to call ITelemetrySessionUpdateService due to ${e}`)}finally{e?.dispose()}}}outputTelemetryToLog(e,t,r){if(this.telemetryLogger?.log(`Event: ${e}`),this.sessionProperties&&(t=t?{...this.sessionProperties,...t}:this.sessionProperties),this.telemetryLogger){t={...t,locallogtimestamp:this.getLocalLogTimestamp()},this.telemetryLogger.log("Properties");for(const e in t)this.telemetryLogger.log(`  ${e}: ${t[e]}`)}const n=Date.now();if(r?r.hasOwnProperty("startTimeInMilliseconds")||(r.startTimeInMilliseconds=n):r={startTimeInMilliseconds:n},void 0!==r&&this.telemetryLogger){this.telemetryLogger.log("Measurements");for(const e in r)this.telemetryLogger.log(`  ${e}: ${r[e]}`)}this.telemetryLogger?.log("")}getLocalLogTimestamp(){return(new Date).toISOString().replace(/T/," ").replace(/Z/,"")}async saveVSCodePropsAsync(e){if(this.propertyBagFilePath=await f(e),void 0!==this.propertyBagFilePath){const e=l.readFileSync(this.propertyBagFilePath,"utf-8"),t=JSON.parse(e);let r=null;try{const e=process.env.TEST_SESSION_TELEMETRY_PROPS;e&&(r=JSON.parse(e))}catch{}this.sessionProperties=r?{...r,...t}:t}}registerUpdateIsMicrosoftInternal(e,t){this.tokenAcquisitionService=e,this.tokenAcquisitionService.msSessionChanged((()=>this.updateIsMicrosoftInternal())),this.updateIsMicrosoftInternal()}registerForTelLevelChangeEvent(e,t){this.brokeredService=e;const r=this.telemetryReporter?.onDidChangeTelemetryLevel((async e=>{if(this.brokeredService?.hasServerProcessLoaded()){const t=await(this.brokeredService?.serviceBroker.getProxy(u.default.telemetrySessionUpdateService));try{t&&await t.updateTelemetryOptInLevel(e)}catch(e){this.telemetryLogger?.log(`Failed to call ITelemetrySessionUpdateService due to ${e}`)}finally{t?.dispose()}}}));r&&t.subscriptions.push(r)}async dispose(){if(void 0!==this.telemetryReporter)return await this.telemetryReporter.dispose()}}t.TelemetryService=h},3228:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWindows=t.exists=t.containsFileOrFolder=t.waitForProcess=t.endsWithInvariantIgnoreCase=t.startsWithInvariantIgnoreCase=t.equalsInvariantIgnoreCase=t.delay=t.lazyPromiseLambda=t.fileOrDirectoryExists=t.readJsonFile=t.stripBomFromUtf8BufferIfPresent=void 0;const n=r(3292),o=r(7031),i=r(2037),s=r(77),a=r(1017),c=Buffer.from([239,187,191]);function u(e){return e.length>=3&&e.slice(0,3).equals(c)?e.slice(3):e}function l(e,t){return 0===e.localeCompare(t,"en",{sensitivity:"accent"})}t.stripBomFromUtf8BufferIfPresent=u,t.readJsonFile=async function(e){const t=u(await(0,n.readFile)(e));return JSON.parse(t.toString())},t.fileOrDirectoryExists=async function(e){return!!await(0,n.stat)(e).catch((e=>!1))},t.lazyPromiseLambda=function(e){return new o.default(((t,r)=>{try{t(e())}catch(e){r(e)}}))},t.delay=function(e){return new Promise((t=>setTimeout(t,e)))},t.equalsInvariantIgnoreCase=l,t.startsWithInvariantIgnoreCase=function(e,t){return e.length>=t.length&&(e.startsWith(t)||l(e.substring(0,t.length),t))},t.endsWithInvariantIgnoreCase=function(e,t){return e.length>=t.length&&(e.endsWith(t)||l(e.substring(e.length-t.length),t))},t.waitForProcess=async function(e,t){return new Promise((async function(r,n){let o=[];e.stderr?.on("data",(e=>{t?.log(e.toString()),o.push(e.toString())})),e.stdout?.on("data",(e=>t?.log(e.toString().trimEnd()))),e.on("exit",(e=>{e&&0!==e?o.length>0?n(new s.ExitCodeError(e,`Failed with ExitCode(${e})${i.EOL}Details${i.EOL}${o.join("")}`)):n(new s.ExitCodeError(e,`Failed with ExitCode(${e})`)):r(!0)}))}))},t.containsFileOrFolder=function(e,t){if(e=a.normalize(e),(t=a.normalize(t)).length>e.length){const r=a.relative(e,t);if(r)return!r.startsWith("..")&&!a.isAbsolute(r)}else if(t.length===e.length){if(e===t)return!0;const r=process.platform;if(("win32"===r||"darwin"===r)&&l(e,t))return!0}return!1},t.exists=async function(e){try{return await(0,n.stat)(e),!0}catch{return!1}},t.isWindows=function(){return"win32"===process.platform}},6199:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOrCreateImageCatalog=t.getImageCatalog=t.ImageCatalog=void 0;const n=r(7147),o=r(7195),i=r(1017),s=r(3228);class a{imageCatalogPath;imageCatalog;constructor(e,t){this.imageCatalogPath=e,this.imageCatalog=t}getIcon(e,t){const r=e.toLowerCase()+":"+t,s=this.imageCatalog[r];if(s&&this.imageCatalogPath){const e=i.join(this.imageCatalogPath,"svg",s+".16.16.svg"),t=i.join(this.imageCatalogPath,"svg",s+".dark.16.16.svg");if((0,n.existsSync)(e))return{light:e,dark:t};o.logger.log("Requested icon not found: "+s)}return null}}let c;t.ImageCatalog=a,t.getImageCatalog=function(){return c},t.getOrCreateImageCatalog=async function(e){if(!c)try{const t=e.asAbsolutePath("imageCatalog"),r=(e.asAbsolutePath("imageCatalog/imageCatalog.json"),await(0,s.readJsonFile)(e.asAbsolutePath("imageCatalog/imageCatalog.json")));c=new a(t,r)}catch(e){o.logger.log(`Error reading image catalog: ${e}`)}return c}},5723:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectInitializationStatus=void 0;const n=r(9496),o=r(9679),i=r(5979),s=r(7195),a=r(4138),c=r(2677),u=r(519);t.ProjectInitializationStatus=class{statusBarItem;statusObserver;environmentVersion;completedVersion;brokerService;statusService;solutionCount;projectsCount;failedProjectsCount;subscription;activeDocument;activeDocumentVersion;activeProjects;activeProjectsVersion;activeProjectsSubscription;constructor(){this.statusObserver=new o.Observer((e=>{this.onCompleted(e)}),(e=>{e&&s.logger.log(e),this.statusBarItem.hide()})),this.statusBarItem=n.window.createStatusBarItem("csdevkit.projects",n.StatusBarAlignment.Left,12),this.statusBarItem.name=c.messageStrings.projectsStatusName,this.environmentVersion=0,this.completedVersion=0,this.solutionCount=0,this.projectsCount=0,this.failedProjectsCount=0,this.setStatusBarItem(c.messageStrings.noSolutionLoadedStatus,c.messageStrings.noSolutionStateToolTip,void 0,a.openSolution),n.window.onDidChangeActiveTextEditor((e=>{e&&"file"!==e.document?.uri?.scheme||(this.activeDocument=e?.document?.fileName,this.refreshActiveProjects())})),this.activeDocument=n.window.activeTextEditor?.document?.fileName,this.activeDocumentVersion=0}async dispose(){try{this.subscription?.dispose(),this.statusBarItem.dispose(),this.activeProjectsSubscription?.dispose()}catch(e){}}show(){this.statusBarItem.show()}async init(e){try{this.brokerService=e,this.statusService=await e.getProxy(i.default.projectInitializationStatusService),this.statusService?(this.subscription=await this.statusService.subscribeInitializationCompletion(this.statusObserver),this.statusBarItem.show()):this.statusBarItem.hide()}catch(e){s.logger.log(`Failed to listen to project initialization status: ${e?.toString()}`),this.statusBarItem.hide()}}onEnvironmentUpdate(e,t){this.environmentVersion=e,this.solutionCount=t,this.refreshStatus()}onActiveProjectsSubscriptionUpdate(e){if(!e)return;const t=e.Items?.map((e=>e.Name??"")).filter((e=>e));this.activeProjectsVersion=this.activeDocumentVersion,this.activeProjects=t,this.refreshStatus()}onCompleted(e){this.completedVersion=e.environmentStateVersion,this.projectsCount=e.projectsLoadedCount??0,this.failedProjectsCount=e.projectsFailedCount??0,this.activeProjectsSubscription||this.refreshActiveProjects(),this.refreshStatus()}refreshActiveProjects(){if(!this.brokerService)return;this.activeProjectsSubscription?.dispose(),this.activeProjectsSubscription=void 0;const e=++this.activeDocumentVersion;try{this.activeDocument&&this.solutionCount>0?this.activeProjectsSubscription=new l(this.brokerService,this.activeDocument):e===this.activeDocumentVersion&&(this.activeProjectsVersion=e,this.activeProjects=void 0,this.refreshStatus())}catch(e){s.logger.log("Failed to handle active text editor:"+e)}}setStatusBarItem(e,t,r,n){this.statusBarItem.text=e,this.statusBarItem.tooltip=t,this.statusBarItem.backgroundColor=r,this.statusBarItem.command=n}refreshStatus(){if(this.environmentVersion>this.completedVersion)this.setStatusBarItem(c.messageStrings.projectsLoadingStatus("$(loading~spin)"),c.messageStrings.projectsLoadingInProgress,void 0,void 0),this.statusService&&this.statusBarItem.show();else if(this.failedProjectsCount>0)this.setStatusBarItem(c.messageStrings.projectsLoadingStatus(`$(error) ${this.failedProjectsCount}`),c.messageStrings.projectsFailedToLoadToolTip(this.failedProjectsCount),new n.ThemeColor("statusBarItem.errorBackground"),a.openProjectsLogsView);else{const e=this.activeDocument&&this.activeDocument.endsWith(".cs"),t=e?new n.ThemeColor("statusBarItem.warningBackground"):void 0;if(this.projectsCount>0){const e=a.syncWithActiveItem;this.activeDocument?this.activeProjectsVersion&&this.activeProjectsVersion===this.activeDocumentVersion?this.activeProjects&&0!==this.activeProjects.length?1===this.activeProjects.length?this.setStatusBarItem(c.messageStrings.projectsLoadingStatus(`${this.activeProjects[0]}`),c.messageStrings.fileInsideProjectToolTip(`${this.activeProjects[0]}`),void 0,e):this.setStatusBarItem(c.messageStrings.projectsLoadingStatus(`${this.activeProjects.length}`),c.messageStrings.fileInsideMultipleProjectsToolTip+this.activeProjects.join("\n"),void 0,e):this.setStatusBarItem(c.messageStrings.projectsLoadingStatus("0"),c.messageStrings.fileOutsideOfProjectsToolTip,t,e):this.setStatusBarItem(c.messageStrings.projectsLoadingStatus("$(loading~spin)"),c.messageStrings.retrievingInformationForCurrentDocumentInProgress,void 0,e):this.setStatusBarItem(c.messageStrings.projectsLoadingStatus(`${this.projectsCount}`),c.messageStrings.projectsReadyState(`${this.projectsCount}`),void 0,e)}else if(this.solutionCount>0){const r=e?c.messageStrings.noProjectStateCodeFileToolTip:c.messageStrings.noProjectStateToolTip;this.setStatusBarItem(c.messageStrings.projectsLoadingStatus("0"),r,t,a.syncWithActiveItem)}else this.setStatusBarItem(c.messageStrings.noSolutionLoadedStatus,c.messageStrings.noSolutionStateToolTip,t,a.openSolution)}}};class l{activeProjectSubscription;brokerService;isDisposed=!1;constructor(e,t){this.brokerService=e,this.subscribeActiveProjectsAsync(t).catch((e=>s.logger.log("Failed to subscribe to active projects: "+e)))}onNext(e){this.isDisposed||s.projectInitializationStatus?.onActiveProjectsSubscriptionUpdate(e)}onCompleted(){}onError(e){}dispose(){this.isDisposed||(this.isDisposed=!0,this.activeProjectSubscription?.dispose())}async subscribeActiveProjectsAsync(e){if(!this.brokerService)return;const t=new u.ProjectQueryableSpace(this.brokerService),r={context:"Projects",query:{$properties:["Id","Name","Files"],Files:{$properties:["Id","Path"],$filter:{FilesByPath:[[e]]}},$where:{any:{".":"Files"}}}};this.activeProjectSubscription=await t.subscribeQuery(r,this),this.isDisposed&&this.activeProjectSubscription?.dispose()}}},2181:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SolutionExplorerProvider=t.contextValues=t.nodeTypes=void 0;const n=r(9679),o=r(9496),i=r(9496),s=r(4138),a=r(7195),c=r(5979),u=r(2677),l=r(5010),d=r(3228),p=r(9781),f=r(3334),h=r(2677),g=r(6199),v=r(2906),m=r(4939),y=r(1017),_=r(2906);t.nodeTypes={solution:"Solution",solutionFolder:"Solution Folder",file:"File",project:"Project",virtual:"Virtual",folder:"Folder",error:"Error",packageDependency:"PackageDependency"},t.contextValues={solution:"Solution",solutionFolder:"SolutionFolder",project:"Project",folder:"Folder",linkedFile:"LinkedFile",packageDependency:"PackageDependency"},t.SolutionExplorerProvider=class{context;brokeredServiceHost;environmentStateManager;solutionViewService;solutionRoot;_onDidChangeTreeData=new o.EventEmitter;_expandingItems=new Set;_expandedItems=new Map;_expandedProjects=new Set;_projectIcons=new Map;_projects=new Map;decorationProvider;decorationProviderRegistration;refreshCallBack;solutionViewServiceReady;dropMimeTypes;dragMimeTypes;mimeTypeString="application/vnd.code.tree.solutionexplorer";mimeTypeList="text/uri-list";get serviceBroker(){return this.brokeredServiceHost.serviceBroker}imageCatalogPath;projectTreeProvider=(0,d.lazyPromiseLambda)((async()=>{const e=await this.serviceBroker.getProxy(c.default.projectTreeProvider);return e&&(e.on("collectionReset",(e=>this.refresh(Array.isArray(e)?e[0].Id:e.Id))),this.decorationProvider.init(e).catch((e=>a.logger.log(e)))),e}));projectIconProvider=(0,d.lazyPromiseLambda)((async()=>{const e=await this.serviceBroker.getProxy(c.default.projectIconSourceService);if(e){const t=new n.Observer((e=>{if(e&&e.projectIcons)for(let t=0;t<e.projectIcons.length;t++){const r=e.projectIcons[t];if(r?.projectId?.fullPath){this._projectIcons.set(r.projectId.fullPath,r);const e=(0,g.getImageCatalog)();if(e){const t=this._projects.get(r.projectId.fullPath);if(t&&(t.node.IconGuid!==r.iconGuid||t.node.IconId!==r.iconId)){t.node.IconGuid=r.iconGuid,t.node.IconId=r.iconId;const n=this.getIconForNode(e,t.node);n&&(t.iconPath=n,this.abandonPendingTasks(t),this._onDidChangeTreeData.fire(t))}}}}}),(e=>{e&&a.logger.log(e)}));e.subscribe(t)}return e}));projectTypeInfos=(0,d.lazyPromiseLambda)((async()=>{const e=new Map;try{const t=await this.serviceBroker.getProxy(c.default.componentExportsService);if(t){const r=t.getExports("projectSystems");if(r)for(let t=0;t<r?.length;t++){let n;try{n=await(0,d.readJsonFile)(y.join(r[t],"package.json"))}catch{continue}const o=n,i=o.provides?.projectSystems;if(i)for(let t=0;t<i.length;t++){const r=i[t];for(let t=0;t<r.extensions.length;t++)e.set(r.extensions[t],r)}}}return e}catch(e){a.logger.log(`Error reading image catalog: ${e}`)}}));getIconForNode(e,r){return r.NodeType!==t.nodeTypes.file||r.IsMissing?r.NodeType===t.nodeTypes.folder||r.NodeType===t.nodeTypes.solutionFolder?i.ThemeIcon.Folder:e.getIcon(r.IconGuid,r.IconId):i.ThemeIcon.File}constructor(e,t,r){this.context=e,this.brokeredServiceHost=t,this.environmentStateManager=r,this.solutionViewService=(0,d.lazyPromiseLambda)((()=>this.refreshSolutionViewServiceProxy(null))),this.decorationProvider=new w(this),this.decorationProviderRegistration=o.window.registerFileDecorationProvider(this.decorationProvider),this.dropMimeTypes=[this.mimeTypeString,this.mimeTypeList],this.dragMimeTypes=[this.mimeTypeString,this.mimeTypeList]}dispose(){this.decorationProvider.dispose(),this.decorationProviderRegistration.dispose()}onDidChangeTreeData=this._onDidChangeTreeData.event;prepareOpenSolution(){this.projectTreeProvider.catch((e=>{}))}async expandToActiveItemAsync(e,t,r){let n=this.solutionRoot;if(".sln"!==y.extname(e)){if(await s(t,!0))if(n?.node.Path?.toLocaleUpperCase()===e.toLocaleUpperCase())await c(!0);else{const t=await(0,_.getFileVisualPathViaQueryAsync)(n?.node.ProjectGuid,e),r=t?.split("/");if(r&&r.length>1&&!await s(r.slice(0,-1),!1))return;await c(!0)}}else await a.solutionExplorerTreeView.reveal(n,{select:!0});function i(e,t,r){return t.expandedChildren?.find((t=>r?t.node.ProjectGuid===e:t.label===e))}async function s(e,t){for(const o of e){if(!n||r?.isCancellationRequested)return!1;if(n=i(o,n,t),await c(!1),r?.isCancellationRequested)return!1}return!0}async function c(t){if(n&&!r?.isCancellationRequested)if(t){const t=n?.expandedChildren.find((t=>t.label===y.basename(e)));await a.solutionExplorerTreeView.reveal(t,{select:!0})}else n.collapsibleState===o.TreeItemCollapsibleState.Collapsed&&(await a.solutionExplorerTreeView.reveal(n,{expand:!0}),n.collapsibleState=o.TreeItemCollapsibleState.Expanded)}}async expandToAddedFile(e,r){if(e.id)if(e.node.NodeType===t.nodeTypes.solutionFolder){let t=0;const n=this.solutionRoot;for(;t<40;){if(n!==this.solutionRoot&&this.solutionRoot.expandedChildren.length>0){if(e=o(e,this)){const t=(await this.getChildren(e)).find((e=>e.label===r));a.solutionExplorerTreeView.reveal(t,{select:!0})}return}await new Promise((e=>setTimeout(e,50))),t++}}else{a.solutionExplorerTreeView.reveal(e,{select:!1,expand:1});let t=0;for(;t<40;){const o=n(e,r);if(o)return void a.solutionExplorerTreeView.reveal(o,{select:!0});await new Promise((e=>setTimeout(e,50))),t++}}function n(e,t){return e.expandedChildren.find((e=>e.label===t))}function o(e,t){return e.parentNode?n(o(e.parentNode,t),e.label):t.solutionRoot}}refresh(e){if(e){let t=this._expandedItems.get(e);void 0!==t&&(this.abandonPendingTasks(t),this._onDidChangeTreeData.fire(t))}else this.abandonPendingTasks(void 0),this._onDidChangeTreeData.fire(void 0)}abandonPendingTasks(e){if(0!==this._expandingItems.size)if(e){const t=[];this._expandingItems.forEach((r=>{let n=r.parent;for(;n;){if(n===e)return t.push(r),void r.abandon();n=n.parentNode}})),t.length>0&&t.forEach((e=>this._expandingItems.delete(e)))}else this._expandingItems.forEach((e=>e.abandon())),this._expandingItems.clear()}getTreeItem(e){return e}getParent(e){return e.parentNode}async handleDrag(e,r,n){let i=e[0];if(void 0===i)return;if(![t.nodeTypes.file,t.nodeTypes.folder].includes(i.node.NodeType))return void await o.window.showWarningMessage(h.errorStrings.notSupportedDraggedItem(i.node.Name));if(!(0,v.getRelativePathWithinProject)(i,i.node.Path))return void await o.window.showWarningMessage(h.errorStrings.notSupportedDraggedItem(i.node.Name));const s=i.node.NodeType===t.nodeTypes.file&&i.node.Flags?.includes(m.TreeFlags.linkedItem);let a=new b(i.node.Path,i.node.ProjectGuid,i.node.Name,s,i.parentNode?.node.Path);r.set(this.mimeTypeString,new o.DataTransferItem(a))}async handleDrop(e,r,n){const i=r.get(this.mimeTypeString),s=[t.nodeTypes.project,t.nodeTypes.folder];if(!i||!e||!s.includes(e.node.NodeType))return;const a=i.value,c=a.filePath,u=a.name,l=a.isLinkedFile,d=a.parentDirectory;let p;if(l){if(!d)return;p=await g(this.solutionRoot,d),p=p?.expandedChildren.find((e=>e.label===u))}else p=await g(this.solutionRoot,c);async function g(e,t){if(e.node.Path===t)return e;for(const r of e.expandedChildren){const e=await g(r,t);if(e)return e}}p&&await o.window.showWarningMessage(h.promptStrings.dragDropSolutionNode(p.node.Name,e?.node.Name),{modal:!0},h.promptStrings.yes)&&await async function(e,r){const n=await(0,v.calculateNewLocationPathAsync)(e,r);n&&(r.node.NodeType===t.nodeTypes.file?(await(0,v.addFileViaQuery)(e,r,r.node.Path),r.contextValue!==t.contextValues.linkedFile&&await(0,f.default)(p,!0)):r.node.NodeType===t.nodeTypes.folder&&(await(0,v.addFilesFromFolderViaQuery)(e,r,n),await(0,f.default)(p,!0)))}(e,p)}async getChildren(e){void 0===e||e.node.NodeType===t.nodeTypes.solution?(this._expandedItems.clear(),this._projects.clear()):(this._expandedItems.set(e.id,e),this.clearOldExpandedItems(e));const r=this.getChildrenImpl(e),n=new S(e);this._expandingItems.add(n);try{const e=new Promise((async(e,t)=>{n.promiseResolve=e;try{const t=await r;n.isFinished||(n.isFinished=!0,e(t))}catch(e){n.isFinished||(n.isFinished=!0,t(e))}})),t=await e;return t?(this._expandingItems.delete(n),t):[]}catch(e){throw this._expandingItems.delete(n),e}}async getChildrenImpl(e){const r=this.environmentStateManager.getOpenedSolution();if(!r)return this.solutionViewServiceReady||this.refreshCallBack||(this.refreshCallBack=()=>{this.environmentStateManager.getOpenedSolution()&&this.refresh(void 0)},this.environmentStateManager.on("environmentStateChanged",this.refreshCallBack)),[];const n=await this.solutionViewService,o=await this.projectTypeInfos;await this.projectIconProvider;let i=[],s=e?.sourceTreeProvider??null;if(n)if(void 0===e){const e=await n.getSolutionCaption();e&&(i=[{NodeType:t.nodeTypes.solution,Name:e,Path:r,Id:"<solution>",IsExpandable:!0,IsExpanded:!0,IconGuid:"ae27a6b0-e345-4288-96df-5eaf394ee369",IconId:2855,ProjectGuid:""}])}else if(e.node.NodeType===t.nodeTypes.solution)i=await a.logger.watch("Expand solution",(async()=>await n.getRootNodes()),{importance:p.LogImportance.low});else if(e.node.NodeType===t.nodeTypes.project&&e.node.ProjectGuid){let t;if(e.isSupportedProject){this._expandedProjects.has(e.node.ProjectGuid)||(this._expandedProjects.add(e.node.ProjectGuid),t=new l.TelemetryActivity("project-expanded",a.telemetryService));try{await a.logger.watch("Expand project",(async()=>{if(s=await this.projectTreeProvider,s){var r=await s.getChildren(e.node);r.error&&r.error.message&&(i=this.createErrorNodes(r.error.message)),r.items&&(i=r.items)}else t=void 0}),{telemetry:t,importance:p.LogImportance.low})}finally{t&&(t.end(),t.sendTelemetry())}}}else i=s?await a.logger.watch("Expand project node",(async()=>{const t=await(s?.getChildren(e.node));return t?.items??[]}),{importance:p.LogImportance.low}):await a.logger.watch("Expand solution folder",(async()=>await n.getChildrenNodes(e.node)),{importance:p.LogImportance.low});const c=await(0,g.getOrCreateImageCatalog)(this.context);var u=i.map((t=>this.createSolutionExplorerItem(t,s,e,c,o)));return e?e.expandedChildren=u:this.solutionRoot=u[0],u}createErrorNodes(e){return[{NodeType:t.nodeTypes.error,Name:e,IsExpandable:!1,IsExpanded:!0,IconGuid:"ae27a6b0-e345-4288-96df-5eaf394ee369",IconId:2935,ProjectGuid:""}]}createSolutionExplorerItem(e,r,n,o,i){let s,a=!1;if(i&&e.NodeType===t.nodeTypes.project&&e.Path){const t=this._projectIcons.get(e.Path);t&&(e.IconGuid=t.iconGuid,e.IconId=t.iconId),s=!1,a=!0;const r=y.extname(e.Path);if(r){const t=i.get(r.toLocaleLowerCase());if(t){if(e.IconId<0){const r=t?.icon;r?(e.IconGuid=r.catalog,e.IconId=r.id):(e.IconGuid="{ae27a6b0-e345-4288-96df-5eaf394ee369}",e.IconId=165)}t.treeProvider&&(s=!0)}}}if(a)if(s){const t=this.decorationProvider.getProjectExtraState(e.Path);t&&(e.IsMissing??=t.IsMissing,e.Description??=t.Description)}else e.IsExpandable=!1,e.Description="(not supported)";e.IsMissing&&(e.Description="(missing)");const c=this.getIconForNode(o,e),u=new E(e,r,s,n,c,this.environmentStateManager.getOpenedSolution());return i&&e.NodeType===t.nodeTypes.project&&e.Path&&this._projects.set(e.Path,u),u}clearOldExpandedItems(e){for(let r=0;r<e.expandedChildren.length;r++){let n=e.expandedChildren[r];this._expandedItems.delete(n.id),n.node.NodeType===t.nodeTypes.project&&n.node.Path&&this._projects.delete(n.node.Path),this.clearOldExpandedItems(n)}e.expandedChildren=[]}async refreshSolutionViewServiceProxy(e,t){if(e)try{const t=await e;t?.dispose()}catch{}const r=await this.serviceBroker.getProxy(c.default.solutionExplorerService);return r&&(this.solutionViewServiceReady=!0,this.refreshCallBack&&(this.environmentStateManager.off("environmentStateChanged",this.refreshCallBack),this.refreshCallBack=void 0),r.on("workspaceRootChanged",(e=>this.refresh(void 0))),this.projectTreeProvider.catch((e=>{}))),e&&this.refresh(void 0),r}};class S{parent;isFinished;promiseResolve;constructor(e){this.parent=e}abandon(){this.isFinished||(a.logger.log(`abandon pending getChildren from ${this.parent?.id??"root"}`),this.isFinished=!0,this.promiseResolve&&this.promiseResolve(void 0))}}class E extends o.TreeItem{node;sourceTreeProvider;isSupportedProject;expandedChildren=[];path;parentNode;constructor(e,r,n,i,a,c){super(e.DisplayName??e.Name,e.IsExpandable?e.IsExpanded?o.TreeItemCollapsibleState.Expanded:o.TreeItemCollapsibleState.Collapsed:o.TreeItemCollapsibleState.None),this.node=e,this.sourceTreeProvider=r,this.isSupportedProject=n,this.parentNode=i,e.Path&&(e.NodeType===t.nodeTypes.solutionFolder&&c?this.resourceUri=o.Uri.file(y.join(y.dirname(c),e.Path)):this.resourceUri=o.Uri.file(e.Path)),a&&(this.iconPath=a),e.Description&&(this.description=e.Description),function(e){return!!e.Path&&e.Path.length>0&&(e.NodeType===t.nodeTypes.file||e.NodeType===t.nodeTypes.project||e.NodeType===t.nodeTypes.solution)&&!e.IsMissing}(e)&&(this.command={command:"vscode.open",arguments:[this.resourceUri],title:u.openDocument}),this.id=e.Id,this.contextValue=e.NodeType,e.NodeType===t.nodeTypes.solutionFolder&&e.Path?(this.path=`${e.Path.replace("/",y.sep)}`,this.contextValue=t.contextValues.solutionFolder):e.NodeType!==t.nodeTypes.project||n||(this.contextValue=void 0),e.NodeType===t.nodeTypes.file&&e.Flags?.includes(m.TreeFlags.linkedItem)&&(this.contextValue=t.contextValues.linkedFile),e.NodeType===t.nodeTypes.virtual&&(this.tooltip=e.Name),e.NodeType===t.nodeTypes.error&&(this.command={command:s.openProjectsLogsView,title:u.promptStrings.openProjectLog})}}class w extends n.Observer{solutionExplorerProvider;_onDidChangeFileDecorations=new o.EventEmitter;projectFileStates=new Map;subscription;constructor(e){super((e=>{if(e.items){for(let t=0;t<e.items.length;t++){const r=e.items[t],n=r.Path;n&&(r.Description?(this.projectFileStates.set(n,r),this._onDidChangeFileDecorations.fire(o.Uri.file(n))):this.projectFileStates.delete(n)&&this._onDidChangeFileDecorations.fire(o.Uri.file(n)))}this.solutionExplorerProvider.refresh()}}),(e=>{e&&a.logger.log(e)})),this.solutionExplorerProvider=e}async init(e){this.subscription=await e.subscribeTreeAttachedNodesState(this)}dispose(){this.subscription?.dispose()}getProjectExtraState(e){return this.projectFileStates.get(e)}onDidChangeFileDecorations=this._onDidChangeFileDecorations.event;provideFileDecoration(e,t){const r=this.projectFileStates.get(e.fsPath);if(r&&r.Description){const e=new o.FileDecoration(void 0,r.Description,new o.ThemeColor("list.errorForeground"));return e.propagate=!0,e}}}class b{filePath;projectGuid;name;isLinkedFile;parentDirectory;constructor(e,t,r,n=!1,o){this.filePath=e,this.projectGuid=t,this.name=r,this.isLinkedFile=n,this.parentDirectory=o}}},2906:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRelativePathWithinProject=t.addFilesFromFolderViaQuery=t.addFileViaQuery=t.calculateNewLocationPathAsync=t.getFileVisualPathViaQueryAsync=t.expandToLocation=t.expandToNewNode=t.subscribeToSolutionTreeEvents=t.getSelectedSolutionTreeNodeInExplorer=t.showSolutionExplorer=void 0;const n=r(9496),o=r(9279),i=r(9781),s=r(3334),a=r(126),c=r(695),u=r(7195),l=r(519),d=r(2677),p=r(5300),f=r(2181),h=r(1017),g=r(7147),v="selectedSolutionExplorerNodeType";let m;async function y(e,t,r,o,i){const s=S(),a=_(e,e.node.Path);if(!a)return;const c=void 0!==o?h.join(a,o):a,l=void 0!==i?!i:t.contextValue!==f.contextValues.linkedFile;let p={update:{target:{context:"Projects",query:{$properties:["Id","Path","Guid"],$filter:{ProjectsByProjectGuid:[[e.node.ProjectGuid]]}}},steps:[{AddFiles:{ItemsPath:[r],TargetFolder:c,ItemType:null,CopyFile:l}}]}};const g=await s.executeAction(p);g.Errors&&(await n.window.showErrorMessage(d.errorStrings.errorMovingItem(t.node.Name)),g.Errors.forEach((e=>{u.logger.log(e.Message)})))}function _(e,t){if(e.node.NodeType===f.nodeTypes.project){const r=h.normalize(h.relative(e.node.Path,t)).split(h.sep).filter((e=>".."!==e));return h.join(...r)}if(e.node.NodeType!==f.nodeTypes.solutionFolder)return _(e.parentNode,t)}function S(){const e=n.extensions.getExtension(o.EXTENSION_ID);if(!e)throw new Error("Extension not found");const t=e.exports.serviceBroker;return new l.ProjectQueryableSpace(t)}t.showSolutionExplorer=function(e){process.nextTick((()=>{(async function(e){let t,r=n.workspace.getConfiguration("dotnet").get("defaultSolution",void 0);if(r||(r=e.workspaceState.get("defaultSolution")),r)t=!0;else{const e=await n.workspace.findFiles("**/*.{csproj}","**/node_modules/**",1);t=e&&e.length>0}t?"true"!==process.env.DisableOpenDefaultSolution?await(0,p.openDefaultSolutionInWorkspace)(e,r).catch((e=>u.logger.log("Failed to open solution "+e))):u.logger.log("Loading solution file is disabled."):u.logger.log("No C# project is found in the workspace."),await n.commands.executeCommand("setContext","solutionExplorerVisible",t),await n.commands.executeCommand("setContext",c.solutionBuildContextVisible,c.SOLUTION_BUILD_AVAILABLE),u.projectInitializationStatus?.show()})(e).catch((e=>u.logger.log("Failed to load solution explorer"+e)))}))},t.getSelectedSolutionTreeNodeInExplorer=async function(){const e=u.solutionExplorerTreeView.selection[0];return e&&e.node&&e!==m&&(await n.commands.executeCommand("setContext",v,e.contextValue),m=e),m},t.subscribeToSolutionTreeEvents=function(){u.solutionExplorerTreeView.onDidChangeSelection((async e=>{if(e.selection.length>0&&e.selection[0]instanceof n.TreeItem){const t=e.selection[0];if(t.node)return await n.commands.executeCommand("setContext",v,t.contextValue),void(m=t)}m=void 0}))},t.expandToNewNode=async function(e,t){u.logger.watch("Expand solution node",(async()=>{u.solutionExplorerProvider&&await u.solutionExplorerProvider.expandToAddedFile(e,t)}),{importance:i.LogImportance.low,catchUnhandledErrors:!0})},t.expandToLocation=async function(e,t,r){u.logger.watch("Expand to active item",(async()=>{u.solutionExplorerProvider&&!r?.isCancellationRequested&&await u.solutionExplorerProvider.expandToActiveItemAsync(e,t,r)}),{importance:i.LogImportance.low,catchUnhandledErrors:!0})},t.getFileVisualPathViaQueryAsync=async function(e,t){const r=S(),n={context:"Projects",query:{$properties:["Id","Files"],Files:{$properties:["Id","VisualPath"],$filter:{FilesByPath:[[t]]}},$filter:{ProjectsByProjectGuid:[[e]]}}},o=await r.executeQuery(n);if(!o)return;let i=o.Items?.[0];const s=i.Files?.[0]?.VisualPath;return s},t.calculateNewLocationPathAsync=async function(e,t){let r;if(r=e.node.NodeType===f.nodeTypes.project?h.join(h.dirname(e.node.Path),t.node.Name):h.join(e.node.Path,t.node.Name),g.existsSync(r)){if(!await n.window.showWarningMessage(d.promptStrings.overwriteExistingItem(t.node.Name),{modal:!0},d.promptStrings.yes))return;const r=e.expandedChildren.find((e=>e.node.Name===t.node.Name));await(0,s.default)(r,!0)}return t.node.NodeType===f.nodeTypes.folder?h.dirname(r):r},t.addFileViaQuery=y,t.addFilesFromFolderViaQuery=async function(e,t,r){const n=S();let o;o={context:"Projects",query:{$properties:["Id","Folders"],Folders:{$properties:["Id","RelativePath","Files"],Files:{$properties:["Id","FileName","Path","LinkPath"]}},$filter:{ProjectsByProjectGuid:[[t.node.ProjectGuid]]}}};const i=await n.executeQuery(o);if(!i)return;const s=i.Items[0].Folders;if(!s)return;const c=h.normalize(_(t,t.node.Path));for(const n of s){const o=h.normalize(n.RelativePath);if(o.startsWith(c)){const i=o.split(h.sep),s=i.indexOf(t.node.Name);let c=h.join(...i.slice(s)),u=h.join(r,c);g.existsSync(u)||await(0,a.newFolderActionAsync)(e,u,"");const l=n.Files;if(!l)continue;for(const r of l){const n=r.LinkPath.length>0;await y(e,t,r.Path,c,n)}}}},t.getRelativePathWithinProject=_},4939:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TreeFlags=void 0,t.TreeFlags={linkedItem:"LinkedItem"}},800:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.loadMessageBundle=t.localize=t.format=t.setPseudo=t.isPseudo=t.isDefined=t.BundleFormat=t.MessageFormat=void 0;var n,o,i,s=r(1926);function a(e){return void 0!==e}function c(e,r){return t.isPseudo&&(e=""+e.replace(/[aouei]/g,"$&$&")+""),0===r.length?e:e.replace(/\{(\d+)\}/g,(function(e,t){var n=t[0],o=r[n],i=e;return"string"==typeof o?i=o:"number"!=typeof o&&"boolean"!=typeof o&&null!=o||(i=String(o)),i}))}(i=t.MessageFormat||(t.MessageFormat={})).file="file",i.bundle="bundle",i.both="both",(o=t.BundleFormat||(t.BundleFormat={})).standalone="standalone",o.languagePack="languagePack",function(e){e.is=function(e){var t=e;return t&&a(t.key)&&a(t.comment)}}(n||(n={})),t.isDefined=a,t.isPseudo=!1,t.setPseudo=function(e){t.isPseudo=e},t.format=c,t.localize=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return c(t,r)},t.loadMessageBundle=function(e){return(0,s.default)().loadMessageBundle(e)},t.config=function(e){return(0,s.default)().config(e)}},1926:(e,t)=>{"use strict";var r;function n(){if(void 0===r)throw new Error("No runtime abstraction layer installed");return r}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");r=e}}(n||(n={})),t.default=n},8472:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.loadMessageBundle=t.BundleFormat=t.MessageFormat=void 0;var n=r(1017),o=r(7147),i=r(1926),s=r(800),a=r(800);Object.defineProperty(t,"MessageFormat",{enumerable:!0,get:function(){return a.MessageFormat}}),Object.defineProperty(t,"BundleFormat",{enumerable:!0,get:function(){return a.BundleFormat}});var c,u,l=Object.prototype.toString;function d(e){return"[object String]"===l.call(e)}function p(e){return JSON.parse(o.readFileSync(e,"utf8"))}function f(e){return function(t,r){for(var n,o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];return n=t,"[object Number]"===l.call(n)?t>=e.length?void console.error("Broken localize call found. Index out of bounds. Stacktrace is\n: ".concat(new Error("").stack)):(0,s.format)(e[t],o):d(r)?(console.warn("Message ".concat(r," didn't get externalized correctly.")),(0,s.format)(r,o)):void console.error("Broken localize call found. Stacktrace is\n: ".concat(new Error("").stack))}}function h(e,t){return c[e]=t,t}function g(e){try{return function(e){var t=p(n.join(e,"nls.metadata.json")),r=Object.create(null);for(var o in t){var i=t[o];r[o]=i.messages}return r}(e)}catch(e){return void console.log("Generating default bundle from meta data failed.",e)}}function v(e,t){var r;if(!0===u.languagePackSupport&&void 0!==u.cacheRoot&&void 0!==u.languagePackId&&void 0!==u.translationsConfigFile&&void 0!==u.translationsConfig)try{r=function(e,t){var r,i,s,a=n.join(u.cacheRoot,"".concat(e.id,"-").concat(e.hash,".json")),c=!1,l=!1;try{return r=JSON.parse(o.readFileSync(a,{encoding:"utf8",flag:"r"})),i=a,s=new Date,o.utimes(i,s,s,(function(){})),r}catch(e){if("ENOENT"===e.code)l=!0;else{if(!(e instanceof SyntaxError))throw e;console.log("Syntax error parsing message bundle: ".concat(e.message,".")),o.unlink(a,(function(e){e&&console.error("Deleting corrupted bundle ".concat(a," failed."))})),c=!0}}if(r=function(e,t){var r=u.translationsConfig[e.id];if(r){var o=p(r).contents,i=p(n.join(t,"nls.metadata.json")),s=Object.create(null);for(var a in i){var c=i[a],l=o["".concat(e.outDir,"/").concat(a)];if(l){for(var f=[],h=0;h<c.keys.length;h++){var g=c.keys[h],v=l[d(g)?g:g.key];void 0===v&&(v=c.messages[h]),f.push(v)}s[a]=f}else s[a]=c.messages}return s}}(e,t),!r||c)return r;if(l)try{o.writeFileSync(a,JSON.stringify(r),{encoding:"utf8",flag:"wx"})}catch(e){if("EEXIST"===e.code)return r;throw e}return r}(e,t)}catch(e){console.log("Load or create bundle failed ",e)}if(!r){if(u.languagePackSupport)return g(t);var i=function(e){for(var t=u.language;t;){var r=n.join(e,"nls.bundle.".concat(t,".json"));if(o.existsSync(r))return r;var i=t.lastIndexOf("-");t=i>0?t.substring(0,i):void 0}if(void 0===t&&(r=n.join(e,"nls.bundle.json"),o.existsSync(r)))return r}(t);if(i)try{return p(i)}catch(e){console.log("Loading in the box message bundle failed.",e)}r=g(t)}return r}function m(e){if(!e)return s.localize;var t=n.extname(e);if(t&&(e=e.substr(0,e.length-t.length)),u.messageFormat===s.MessageFormat.both||u.messageFormat===s.MessageFormat.bundle){var r=function(e){for(var t,r=n.dirname(e);t=n.join(r,"nls.metadata.header.json"),!o.existsSync(t);){var i=n.dirname(r);if(i===r){t=void 0;break}r=i}return t}(e);if(r){var i=n.dirname(r),a=c[i];if(void 0===a)try{var l=JSON.parse(o.readFileSync(r,"utf8"));try{var d=v(l,i);a=h(i,d?{header:l,nlsBundle:d}:null)}catch(e){console.error("Failed to load nls bundle",e),a=h(i,null)}}catch(e){console.error("Failed to read header file",e),a=h(i,null)}if(a){var g=e.substr(i.length+1).replace(/\\/g,"/"),m=a.nlsBundle[g];return void 0===m?(console.error("Messages for file ".concat(e," not found. See console for details.")),function(){return"Messages not found."}):f(m)}}}if(u.messageFormat===s.MessageFormat.both||u.messageFormat===s.MessageFormat.file)try{var y=p(function(e){var t;if(u.cacheLanguageResolution&&t);else{if(s.isPseudo||!u.language)t=".nls.json";else for(var r=u.language;r;){var n=".nls."+r+".json";if(o.existsSync(e+n)){t=n;break}var i=r.lastIndexOf("-");i>0?r=r.substring(0,i):(t=".nls.json",r=null)}u.cacheLanguageResolution}return e+t}(e));return Array.isArray(y)?f(y):(0,s.isDefined)(y.messages)&&(0,s.isDefined)(y.keys)?f(y.messages):(console.error("String bundle '".concat(e,"' uses an unsupported format.")),function(){return"File bundle has unsupported format. See console for details"})}catch(e){"ENOENT"!==e.code&&console.error("Failed to load single file bundle",e)}return console.error("Failed to load message bundle for file ".concat(e)),function(){return"Failed to load message bundle. See console for details."}}function y(e){return e&&(d(e.locale)&&(u.locale=e.locale.toLowerCase(),u.language=u.locale,c=Object.create(null)),void 0!==e.messageFormat&&(u.messageFormat=e.messageFormat),e.bundleFormat===s.BundleFormat.standalone&&!0===u.languagePackSupport&&(u.languagePackSupport=!1)),(0,s.setPseudo)("pseudo"===u.locale),m}!function(){if(u={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:s.MessageFormat.bundle},d(process.env.VSCODE_NLS_CONFIG))try{var e=JSON.parse(process.env.VSCODE_NLS_CONFIG),t=void 0;if(e.availableLanguages){var r=e.availableLanguages["*"];d(r)&&(t=r)}if(d(e.locale)&&(u.locale=e.locale.toLowerCase()),void 0===t?u.language=u.locale:"en"!==t&&(u.language=t),function(e){return!0===e||!1===e}(e._languagePackSupport)&&(u.languagePackSupport=e._languagePackSupport),d(e._cacheRoot)&&(u.cacheRoot=e._cacheRoot),d(e._languagePackId)&&(u.languagePackId=e._languagePackId),d(e._translationsConfigFile)){u.translationsConfigFile=e._translationsConfigFile;try{u.translationsConfig=p(u.translationsConfigFile)}catch(t){if(e._corruptedFile){var i=n.dirname(e._corruptedFile);o.exists(i,(function(t){t&&o.writeFile(e._corruptedFile,"corrupted","utf8",(function(e){console.error(e)}))}))}}}}catch(e){}(0,s.setPseudo)("pseudo"===u.locale),c=Object.create(null)}(),t.loadMessageBundle=m,t.config=y,i.default.install(Object.freeze({loadMessageBundle:m,config:y}))},9602:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},4411:(e,t,r)=>{"use strict";function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var r=0,o=arguments.length;r<o;r++)t.push(arguments[r]);return t}function o(e,t,r){var n=t===e.head?new a(r,null,t,e):new a(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}function i(e,t){e.tail=new a(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function s(e,t){e.head=new a(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function a(e,t,r,n){if(!(this instanceof a))return new a(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=n,n.Node=a,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)i(this,arguments[e]);return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)s(this,arguments[e]);return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,o=this.head;null!==o;)r.push(e.call(t,o.value,this)),o=o.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,o=this.tail;null!==o;)r.push(e.call(t,o.value,this)),o=o.prev;return r},n.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var o=0;null!==n;o++)r=e(r,n.value,o),n=n.next;return r},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var o=this.length-1;null!==n;o--)r=e(r,n.value,o),n=n.prev;return r},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=0,i=this.head;null!==i&&o<e;o++)i=i.next;for(;null!==i&&o<t;o++,i=i.next)r.push(i.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=this.length,i=this.tail;null!==i&&o>t;o--)i=i.prev;for(;null!==i&&o>e;o--,i=i.prev)r.push(i.value);return r},n.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;var s=[];for(n=0;i&&n<t;n++)s.push(i.value),i=this.removeNode(i);for(null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev),n=0;n<r.length;n++)i=o(this,i,r[n]);return s},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{r(9602)(n)}catch(e){}},9166:e=>{"use strict";e.exports=require("applicationinsights-native-metrics")},9496:e=>{"use strict";e.exports=require("vscode")},6232:e=>{"use strict";e.exports=require("@microsoft/typescript-etw")},9491:e=>{"use strict";e.exports=require("assert")},8705:e=>{"use strict";e.exports=require("async_hooks")},2081:e=>{"use strict";e.exports=require("child_process")},6206:e=>{"use strict";e.exports=require("console")},2057:e=>{"use strict";e.exports=require("constants")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},3639:e=>{"use strict";e.exports=require("domain")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3292:e=>{"use strict";e.exports=require("fs/promises")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},8188:e=>{"use strict";e.exports=require("module")},1808:e=>{"use strict";e.exports=require("net")},9411:e=>{"use strict";e.exports=require("node:path")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},2781:e=>{"use strict";e.exports=require("stream")},9512:e=>{"use strict";e.exports=require("timers")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={exports:{}};return t[e].call(i.exports,i,i.exports,n),i.exports}n.m=t,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>e+".extension.js",n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e={179:1},n.f.require=(t,r)=>{e[t]||(t=>{var r=t.modules,o=t.ids,i=t.runtime;for(var s in r)n.o(r,s)&&(n.m[s]=r[s]);i&&i(n);for(var a=0;a<o.length;a++)e[o[a]]=1})(require("./"+n.u(t)))};var o=n(7195);module.exports=o})();
// SIG // Begin signature block
// SIG // MIIlrgYJKoZIhvcNAQcCoIIlnzCCJZsCAQExDzANBglg
// SIG // hkgBZQMEAgEFADB3BgorBgEEAYI3AgEEoGkwZzAyBgor
// SIG // BgEEAYI3AgEeMCQCAQEEEBDgyQbOONQRoqMAEEvTUJAC
// SIG // AQACAQACAQACAQACAQAwMTANBglghkgBZQMEAgEFAAQg
// SIG // gWT0eLs+iAtjF/zEXBEtdMzp5o+kR1MqKrCVw35DCpag
// SIG // ggtnMIIE7zCCA9egAwIBAgITMwAABVfPkN3H0cCIjAAA
// SIG // AAAFVzANBgkqhkiG9w0BAQsFADB+MQswCQYDVQQGEwJV
// SIG // UzETMBEGA1UECBMKV2FzaGluZ3RvbjEQMA4GA1UEBxMH
// SIG // UmVkbW9uZDEeMBwGA1UEChMVTWljcm9zb2Z0IENvcnBv
// SIG // cmF0aW9uMSgwJgYDVQQDEx9NaWNyb3NvZnQgQ29kZSBT
// SIG // aWduaW5nIFBDQSAyMDEwMB4XDTIzMTAxOTE5NTExMloX
// SIG // DTI0MTAxNjE5NTExMlowdDELMAkGA1UEBhMCVVMxEzAR
// SIG // BgNVBAgTCldhc2hpbmd0b24xEDAOBgNVBAcTB1JlZG1v
// SIG // bmQxHjAcBgNVBAoTFU1pY3Jvc29mdCBDb3Jwb3JhdGlv
// SIG // bjEeMBwGA1UEAxMVTWljcm9zb2Z0IENvcnBvcmF0aW9u
// SIG // MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA
// SIG // rNP5BRqxQTyYzc7lY4sbAK2Huz47DGso8p9wEvDxx+0J
// SIG // gngiIdoh+jhkos8Hcvx0lOW32XMWZ9uWBMn3+pgUKZad
// SIG // OuLXO3LnuVop+5akCowquXhMS3uzPTLONhyePNp74iWb
// SIG // 1StajQ3uGOx+fEw00mrTpNGoDeRj/cUHOqKb/TTx2TCt
// SIG // 7z32yj/OcNp5pk+8A5Gg1S6DMZhJjZ39s2LVGrsq8fs8
// SIG // y1RP3ZBb2irsMamIOUFSTar8asexaAgoNauVnQMqeAdE
// SIG // tNScUxT6m/cNfOZjrCItHZO7ieiaDk9ljrCS9QVLldjI
// SIG // JhadWdjiAa8JHXgeecBvJhe2s9XVho5OTQIDAQABo4IB
// SIG // bjCCAWowHwYDVR0lBBgwFgYKKwYBBAGCNz0GAQYIKwYB
// SIG // BQUHAwMwHQYDVR0OBBYEFGVIsKghPtVDZfZAsyDVZjTC
// SIG // rXm3MEUGA1UdEQQ+MDykOjA4MR4wHAYDVQQLExVNaWNy
// SIG // b3NvZnQgQ29ycG9yYXRpb24xFjAUBgNVBAUTDTIzMDg2
// SIG // NSs1MDE1OTcwHwYDVR0jBBgwFoAU5vxfe7siAFjkck61
// SIG // 9CF0IzLm76wwVgYDVR0fBE8wTTBLoEmgR4ZFaHR0cDov
// SIG // L2NybC5taWNyb3NvZnQuY29tL3BraS9jcmwvcHJvZHVj
// SIG // dHMvTWljQ29kU2lnUENBXzIwMTAtMDctMDYuY3JsMFoG
// SIG // CCsGAQUFBwEBBE4wTDBKBggrBgEFBQcwAoY+aHR0cDov
// SIG // L3d3dy5taWNyb3NvZnQuY29tL3BraS9jZXJ0cy9NaWND
// SIG // b2RTaWdQQ0FfMjAxMC0wNy0wNi5jcnQwDAYDVR0TAQH/
// SIG // BAIwADANBgkqhkiG9w0BAQsFAAOCAQEAyi7DQuZQIWdC
// SIG // y9r24eaW4WAzNYbRIN/nYv+fHw77U3E/qC8KvnkT7iJX
// SIG // lGit+3mhHspwiQO1r3SSvRY72QQuBW5KoS7upUqqZVFH
// SIG // ic8Z+ttKnH7pfqYXFLM0GA8gLIeH43U8ybcdoxnoiXA9
// SIG // fd8iKCM4za5ZVwrRlTEo68sto4lOKXM6dVjo1qwi/X89
// SIG // Gb0fNdWGQJ4cj+s7tVfKXWKngOuvISr3X2c1aetBfGZK
// SIG // p7nDqWtViokBGBMJBubzkHcaDsWVnPjCenJnDYAPu0ny
// SIG // W29F1/obCiMyu02/xPXRCxfPOe97LWPgLrgKb2SwLBu+
// SIG // mlP476pcq3lFl+TN7ltkoTCCBnAwggRYoAMCAQICCmEM
// SIG // UkwAAAAAAAMwDQYJKoZIhvcNAQELBQAwgYgxCzAJBgNV
// SIG // BAYTAlVTMRMwEQYDVQQIEwpXYXNoaW5ndG9uMRAwDgYD
// SIG // VQQHEwdSZWRtb25kMR4wHAYDVQQKExVNaWNyb3NvZnQg
// SIG // Q29ycG9yYXRpb24xMjAwBgNVBAMTKU1pY3Jvc29mdCBS
// SIG // b290IENlcnRpZmljYXRlIEF1dGhvcml0eSAyMDEwMB4X
// SIG // DTEwMDcwNjIwNDAxN1oXDTI1MDcwNjIwNTAxN1owfjEL
// SIG // MAkGA1UEBhMCVVMxEzARBgNVBAgTCldhc2hpbmd0b24x
// SIG // EDAOBgNVBAcTB1JlZG1vbmQxHjAcBgNVBAoTFU1pY3Jv
// SIG // c29mdCBDb3Jwb3JhdGlvbjEoMCYGA1UEAxMfTWljcm9z
// SIG // b2Z0IENvZGUgU2lnbmluZyBQQ0EgMjAxMDCCASIwDQYJ
// SIG // KoZIhvcNAQEBBQADggEPADCCAQoCggEBAOkOZFB5Z7XE
// SIG // 4/0JAEyelKz3VmjqRNjPxVhPqaV2fG1FutM5krSkHvn5
// SIG // ZYLkF9KP/UScCOhlk84sVYS/fQjjLiuoQSsYt6JLbklM
// SIG // axUH3tHSwokecZTNtX9LtK8I2MyI1msXlDqTziY/7Ob+
// SIG // NJhX1R1dSfayKi7VhbtZP/iQtCuDdMorsztG4/BGScEX
// SIG // ZlTJHL0dxFViV3L4Z7klIDTeXaallV6rKIDN1bKe5QO1
// SIG // Y9OyFMjByIomCll/B+z/Du2AEjVMEqa+Ulv1ptrgiwtI
// SIG // d9aFR9UQucboqu6Lai0FXGDGtCpbnCMcX0XjGhQebzfL
// SIG // GTOAaolNo2pmY3iT1TDPlR8CAwEAAaOCAeMwggHfMBAG
// SIG // CSsGAQQBgjcVAQQDAgEAMB0GA1UdDgQWBBTm/F97uyIA
// SIG // WORyTrX0IXQjMubvrDAZBgkrBgEEAYI3FAIEDB4KAFMA
// SIG // dQBiAEMAQTALBgNVHQ8EBAMCAYYwDwYDVR0TAQH/BAUw
// SIG // AwEB/zAfBgNVHSMEGDAWgBTV9lbLj+iiXGJo0T2UkFvX
// SIG // zpoYxDBWBgNVHR8ETzBNMEugSaBHhkVodHRwOi8vY3Js
// SIG // Lm1pY3Jvc29mdC5jb20vcGtpL2NybC9wcm9kdWN0cy9N
// SIG // aWNSb29DZXJBdXRfMjAxMC0wNi0yMy5jcmwwWgYIKwYB
// SIG // BQUHAQEETjBMMEoGCCsGAQUFBzAChj5odHRwOi8vd3d3
// SIG // Lm1pY3Jvc29mdC5jb20vcGtpL2NlcnRzL01pY1Jvb0Nl
// SIG // ckF1dF8yMDEwLTA2LTIzLmNydDCBnQYDVR0gBIGVMIGS
// SIG // MIGPBgkrBgEEAYI3LgMwgYEwPQYIKwYBBQUHAgEWMWh0
// SIG // dHA6Ly93d3cubWljcm9zb2Z0LmNvbS9QS0kvZG9jcy9D
// SIG // UFMvZGVmYXVsdC5odG0wQAYIKwYBBQUHAgIwNB4yIB0A
// SIG // TABlAGcAYQBsAF8AUABvAGwAaQBjAHkAXwBTAHQAYQB0
// SIG // AGUAbQBlAG4AdAAuIB0wDQYJKoZIhvcNAQELBQADggIB
// SIG // ABp071dPKXvEFoV4uFDTIvwJnayCl/g0/yosl5US5eS/
// SIG // z7+TyOM0qduBuNweAL7SNW+v5X95lXflAtTx69jNTh4b
// SIG // YaLCWiMa8IyoYlFFZwjjPzwek/gwhRfIOUCm1w6zISnl
// SIG // paFpjCKTzHSY56FHQ/JTrMAPMGl//tIlIG1vYdPfB9XZ
// SIG // cgAsaYZ2PVHbpjlIyTdhbQfdUxnLp9Zhwr/ig6sP4Gub
// SIG // ldZ9KFGwiUpRpJpsyLcfShoOaanX3MF+0Ulwqratu3JH
// SIG // Yxf6ptaipobsqBBEm2O2smmJBsdGhnoYP+jFHSHVe/kC
// SIG // Iy3FQcu/HUzIFu+xnH/8IktJim4V46Z/dlvRU3mRhZ3V
// SIG // 0ts9czXzPK5UslJHasCqE5XSjhHamWdeMoz7N4XR3HWF
// SIG // nIfGWleFwr/dDY+Mmy3rtO7PJ9O1Xmn6pBYEAackZ3PP
// SIG // TU+23gVWl3r36VJN9HcFT4XG2Avxju1CCdENduMjVngi
// SIG // Jja+yrGMbqod5IXaRzNij6TJkTNfcR5Ar5hlySLoQiEl
// SIG // ihwtYNk3iUGJKhYP12E8lGhgUu/WR5mggEDuFYF3Ppzg
// SIG // UxgaUB04lZseZjMTJzkXeIc2zk7DX7L1PUdTtuDl2wth
// SIG // PSrXkizON1o+QEIxpB8QCMJWnL8kXVECnWp50hfT2sGU
// SIG // jgd7JXFEqwZq5tTG3yOalnXFMYIZnzCCGZsCAQEwgZUw
// SIG // fjELMAkGA1UEBhMCVVMxEzARBgNVBAgTCldhc2hpbmd0
// SIG // b24xEDAOBgNVBAcTB1JlZG1vbmQxHjAcBgNVBAoTFU1p
// SIG // Y3Jvc29mdCBDb3Jwb3JhdGlvbjEoMCYGA1UEAxMfTWlj
// SIG // cm9zb2Z0IENvZGUgU2lnbmluZyBQQ0EgMjAxMAITMwAA
// SIG // BVfPkN3H0cCIjAAAAAAFVzANBglghkgBZQMEAgEFAKCB
// SIG // rjAZBgkqhkiG9w0BCQMxDAYKKwYBBAGCNwIBBDAcBgor
// SIG // BgEEAYI3AgELMQ4wDAYKKwYBBAGCNwIBFTAvBgkqhkiG
// SIG // 9w0BCQQxIgQgwJb3ENX+i06sBIHr1CzS+tJc5tF8FcV6
// SIG // bzCugH7TGdwwQgYKKwYBBAGCNwIBDDE0MDKgFIASAE0A
// SIG // aQBjAHIAbwBzAG8AZgB0oRqAGGh0dHA6Ly93d3cubWlj
// SIG // cm9zb2Z0LmNvbTANBgkqhkiG9w0BAQEFAASCAQAhLrnI
// SIG // 9MvU4t3t4eaPPwYQEgTPMi6Ga8rQO2ybhSrpAF/tSydP
// SIG // /pXaC4bU5dcgnXSpu4T5RNgvnhF+rxVJlREUUmMW2qbt
// SIG // IMkOzk8HfrlJycr2exLSlpIoaT+sRb+J4+c5nld1DONL
// SIG // 8+X378IGeuJWbFsbPR1Oc/VTmjc4JYKp/y8JV+MmlAZ9
// SIG // 6Orzf00wGaYlZIh6ZfETvcinT/NnW/aIBkRRz57Cj3MF
// SIG // ynTT6gV1WPjV3AxBbscKX78uuRsLwt2UWNuG/Msklmxg
// SIG // WQbIF2IHlTnkdBU9aURTrCang7VoYp5qoZkLl6c50GWr
// SIG // MRfc0K1MdQ9xh3mfax4mQgptlbkboYIXKTCCFyUGCisG
// SIG // AQQBgjcDAwExghcVMIIXEQYJKoZIhvcNAQcCoIIXAjCC
// SIG // Fv4CAQMxDzANBglghkgBZQMEAgEFADCCAVkGCyqGSIb3
// SIG // DQEJEAEEoIIBSASCAUQwggFAAgEBBgorBgEEAYRZCgMB
// SIG // MDEwDQYJYIZIAWUDBAIBBQAEIMi9itBXY2CwWeY5FHYT
// SIG // ZtIwaLECdPZSJrgd8ovSSffoAgZml78LSr0YEzIwMjQw
// SIG // ODA1MjEwMDQzLjAxMVowBIACAfSggdikgdUwgdIxCzAJ
// SIG // BgNVBAYTAlVTMRMwEQYDVQQIEwpXYXNoaW5ndG9uMRAw
// SIG // DgYDVQQHEwdSZWRtb25kMR4wHAYDVQQKExVNaWNyb3Nv
// SIG // ZnQgQ29ycG9yYXRpb24xLTArBgNVBAsTJE1pY3Jvc29m
// SIG // dCBJcmVsYW5kIE9wZXJhdGlvbnMgTGltaXRlZDEmMCQG
// SIG // A1UECxMdVGhhbGVzIFRTUyBFU046OEQ0MS00QkY3LUIz
// SIG // QjcxJTAjBgNVBAMTHE1pY3Jvc29mdCBUaW1lLVN0YW1w
// SIG // IFNlcnZpY2WgghF4MIIHJzCCBQ+gAwIBAgITMwAAAePf
// SIG // vZuaHGiDIgABAAAB4zANBgkqhkiG9w0BAQsFADB8MQsw
// SIG // CQYDVQQGEwJVUzETMBEGA1UECBMKV2FzaGluZ3RvbjEQ
// SIG // MA4GA1UEBxMHUmVkbW9uZDEeMBwGA1UEChMVTWljcm9z
// SIG // b2Z0IENvcnBvcmF0aW9uMSYwJAYDVQQDEx1NaWNyb3Nv
// SIG // ZnQgVGltZS1TdGFtcCBQQ0EgMjAxMDAeFw0yMzEwMTIx
// SIG // OTA3MjlaFw0yNTAxMTAxOTA3MjlaMIHSMQswCQYDVQQG
// SIG // EwJVUzETMBEGA1UECBMKV2FzaGluZ3RvbjEQMA4GA1UE
// SIG // BxMHUmVkbW9uZDEeMBwGA1UEChMVTWljcm9zb2Z0IENv
// SIG // cnBvcmF0aW9uMS0wKwYDVQQLEyRNaWNyb3NvZnQgSXJl
// SIG // bGFuZCBPcGVyYXRpb25zIExpbWl0ZWQxJjAkBgNVBAsT
// SIG // HVRoYWxlcyBUU1MgRVNOOjhENDEtNEJGNy1CM0I3MSUw
// SIG // IwYDVQQDExxNaWNyb3NvZnQgVGltZS1TdGFtcCBTZXJ2
// SIG // aWNlMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKC
// SIG // AgEAvqQNaB5Gn5/FIFQPo3/K4QmleCDMF40bkoHwz0Bs
// SIG // hZ4SiQmA6CGUyDwmaqQ2wHhaXU0RdHtwvq+U8KxYYsyH
// SIG // KqaxxC7fr/yHZvHpNTgzx1VkR3pXhT6X2Cm175UX3WQ4
// SIG // jfl86onp5AMzBIFDlz0SU8VSKNMDvNXtjk9FitLgUv2n
// SIG // j3hOJ0KkEQfk3oA7m7zA0D+Mo73hmR+OC7uwsXxJR2tz
// SIG // UZE0STYX3UvenFH7fYWy5BNmLyGq2sWkQ5HFvJKCJAE/
// SIG // dwft8+V43U3KeExF/pPtcLUvQ9HIrL0xnpMFau7Yd5aK
// SIG // +TEi57WctBv87+fSPZBV3jZl/QCtcH9WrniBDwki9QfR
// SIG // xu/JYzw+iaEWLqrYXuF7jeOGvHK+fVeLWnAc5Wxsfbpj
// SIG // EMpNbGXbSF9At3PPhFVOjxwVEx1ALGUqRKehw9ap9X/g
// SIG // fkA9I9eTSvwJz9wya9reDgS+6kXgSttI7RQ2cJG/tQPG
// SIG // VIaLCIaSafLneaq0Bns0t4+EW3B/GnoBMiiOXwleOvf5
// SIG // udBZQIMJ3k5qnnh8Z4ZhTwrE6iGbPrTgGBPXh7exFYAG
// SIG // lb6hdhILIVDdJlDf8s1NVvL0Q2y4SHZQhApZTuW/tyGs
// SIG // GscIPDSMz5bA6NhRLtjEwCFpLI5qGlu50Au9FRelCEQs
// SIG // Wg7q07H/rqHOqCNJM4Rjem7joEUCAwEAAaOCAUkwggFF
// SIG // MB0GA1UdDgQWBBSxrg1mvjUVt6Fnxj56nabZiJipAzAf
// SIG // BgNVHSMEGDAWgBSfpxVdAF5iXYP05dJlpxtTNRnpcjBf
// SIG // BgNVHR8EWDBWMFSgUqBQhk5odHRwOi8vd3d3Lm1pY3Jv
// SIG // c29mdC5jb20vcGtpb3BzL2NybC9NaWNyb3NvZnQlMjBU
// SIG // aW1lLVN0YW1wJTIwUENBJTIwMjAxMCgxKS5jcmwwbAYI
// SIG // KwYBBQUHAQEEYDBeMFwGCCsGAQUFBzAChlBodHRwOi8v
// SIG // d3d3Lm1pY3Jvc29mdC5jb20vcGtpb3BzL2NlcnRzL01p
// SIG // Y3Jvc29mdCUyMFRpbWUtU3RhbXAlMjBQQ0ElMjAyMDEw
// SIG // KDEpLmNydDAMBgNVHRMBAf8EAjAAMBYGA1UdJQEB/wQM
// SIG // MAoGCCsGAQUFBwMIMA4GA1UdDwEB/wQEAwIHgDANBgkq
// SIG // hkiG9w0BAQsFAAOCAgEAt76bLqnU08wRbW3vRrxjaEbG
// SIG // PqyINK6UYCzhTGaR/PEwCJziPT4ZM9sfGTX3eZDQVE9r
// SIG // 121tFtp7NXQYuQSxRZMYXa0/pawN2Xn+UPjBRDvoCsU5
// SIG // 6dwKkrmy8TSw7QXKGskdnEwsI5yW93q8Ag86RkBiKEEf
// SIG // 9FdzHNuKWI4Kv//fDtESewu46n/u+VckCwbOYl6wE//Q
// SIG // RGrGMq509a4EbP+p1GUm06Xme/01mTIuKDgPmHL2nYRz
// SIG // XNqi2IuIecn2aWwkRxQOFiPw+dicmOOwLG/7InNqjZpQ
// SIG // eIhDMxsWr4zTxzy4ER/6zfthtlDtcAXHB7YRUkBTClaO
// SIG // a0ndvfNJZMyYVa6cWvZouTq9V5LS7UzIR8S/7RsOT43e
// SIG // OawLBsuQz0VoOLurYe1SffPqTsCcRNzbx0C8t/+KipSt
// SIG // VhPAGttEfhdUUS9ohD6Lt6wNCJxZbV0IMD8nfE6gIQJX
// SIG // rzrXWOuJqN91WDyjRan4UKDkIBS2yWA4W6JhQuBzGerO
// SIG // SY/aLnxkRrSubgtnKYcHOwgxTTIya5WYCRjFt0QOLleq
// SIG // Vki6k+mqYPr98uMPi5vRIQS206mDSenStr8w0J+/+1WE
// SIG // m3PnCCIQgpf6zhqRrAt9j7XrEMHrg2bQegaz8bLzbe6U
// SIG // ibgbKtRyk1nGde8To5kyMj9XUCBICDxT+F4xa5lNZVQw
// SIG // ggdxMIIFWaADAgECAhMzAAAAFcXna54Cm0mZAAAAAAAV
// SIG // MA0GCSqGSIb3DQEBCwUAMIGIMQswCQYDVQQGEwJVUzET
// SIG // MBEGA1UECBMKV2FzaGluZ3RvbjEQMA4GA1UEBxMHUmVk
// SIG // bW9uZDEeMBwGA1UEChMVTWljcm9zb2Z0IENvcnBvcmF0
// SIG // aW9uMTIwMAYDVQQDEylNaWNyb3NvZnQgUm9vdCBDZXJ0
// SIG // aWZpY2F0ZSBBdXRob3JpdHkgMjAxMDAeFw0yMTA5MzAx
// SIG // ODIyMjVaFw0zMDA5MzAxODMyMjVaMHwxCzAJBgNVBAYT
// SIG // AlVTMRMwEQYDVQQIEwpXYXNoaW5ndG9uMRAwDgYDVQQH
// SIG // EwdSZWRtb25kMR4wHAYDVQQKExVNaWNyb3NvZnQgQ29y
// SIG // cG9yYXRpb24xJjAkBgNVBAMTHU1pY3Jvc29mdCBUaW1l
// SIG // LVN0YW1wIFBDQSAyMDEwMIICIjANBgkqhkiG9w0BAQEF
// SIG // AAOCAg8AMIICCgKCAgEA5OGmTOe0ciELeaLL1yR5vQ7V
// SIG // gtP97pwHB9KpbE51yMo1V/YBf2xK4OK9uT4XYDP/XE/H
// SIG // ZveVU3Fa4n5KWv64NmeFRiMMtY0Tz3cywBAY6GB9alKD
// SIG // RLemjkZrBxTzxXb1hlDcwUTIcVxRMTegCjhuje3XD9gm
// SIG // U3w5YQJ6xKr9cmmvHaus9ja+NSZk2pg7uhp7M62AW36M
// SIG // EBydUv626GIl3GoPz130/o5Tz9bshVZN7928jaTjkY+y
// SIG // OSxRnOlwaQ3KNi1wjjHINSi947SHJMPgyY9+tVSP3PoF
// SIG // VZhtaDuaRr3tpK56KTesy+uDRedGbsoy1cCGMFxPLOJi
// SIG // ss254o2I5JasAUq7vnGpF1tnYN74kpEeHT39IM9zfUGa
// SIG // RnXNxF803RKJ1v2lIH1+/NmeRd+2ci/bfV+Autuqfjbs
// SIG // Nkz2K26oElHovwUDo9Fzpk03dJQcNIIP8BDyt0cY7afo
// SIG // mXw/TNuvXsLz1dhzPUNOwTM5TI4CvEJoLhDqhFFG4tG9
// SIG // ahhaYQFzymeiXtcodgLiMxhy16cg8ML6EgrXY28MyTZk
// SIG // i1ugpoMhXV8wdJGUlNi5UPkLiWHzNgY1GIRH29wb0f2y
// SIG // 1BzFa/ZcUlFdEtsluq9QBXpsxREdcu+N+VLEhReTwDwV
// SIG // 2xo3xwgVGD94q0W29R6HXtqPnhZyacaue7e3PmriLq0C
// SIG // AwEAAaOCAd0wggHZMBIGCSsGAQQBgjcVAQQFAgMBAAEw
// SIG // IwYJKwYBBAGCNxUCBBYEFCqnUv5kxJq+gpE8RjUpzxD/
// SIG // LwTuMB0GA1UdDgQWBBSfpxVdAF5iXYP05dJlpxtTNRnp
// SIG // cjBcBgNVHSAEVTBTMFEGDCsGAQQBgjdMg30BATBBMD8G
// SIG // CCsGAQUFBwIBFjNodHRwOi8vd3d3Lm1pY3Jvc29mdC5j
// SIG // b20vcGtpb3BzL0RvY3MvUmVwb3NpdG9yeS5odG0wEwYD
// SIG // VR0lBAwwCgYIKwYBBQUHAwgwGQYJKwYBBAGCNxQCBAwe
// SIG // CgBTAHUAYgBDAEEwCwYDVR0PBAQDAgGGMA8GA1UdEwEB
// SIG // /wQFMAMBAf8wHwYDVR0jBBgwFoAU1fZWy4/oolxiaNE9
// SIG // lJBb186aGMQwVgYDVR0fBE8wTTBLoEmgR4ZFaHR0cDov
// SIG // L2NybC5taWNyb3NvZnQuY29tL3BraS9jcmwvcHJvZHVj
// SIG // dHMvTWljUm9vQ2VyQXV0XzIwMTAtMDYtMjMuY3JsMFoG
// SIG // CCsGAQUFBwEBBE4wTDBKBggrBgEFBQcwAoY+aHR0cDov
// SIG // L3d3dy5taWNyb3NvZnQuY29tL3BraS9jZXJ0cy9NaWNS
// SIG // b29DZXJBdXRfMjAxMC0wNi0yMy5jcnQwDQYJKoZIhvcN
// SIG // AQELBQADggIBAJ1VffwqreEsH2cBMSRb4Z5yS/ypb+pc
// SIG // FLY+TkdkeLEGk5c9MTO1OdfCcTY/2mRsfNB1OW27DzHk
// SIG // wo/7bNGhlBgi7ulmZzpTTd2YurYeeNg2LpypglYAA7AF
// SIG // vonoaeC6Ce5732pvvinLbtg/SHUB2RjebYIM9W0jVOR4
// SIG // U3UkV7ndn/OOPcbzaN9l9qRWqveVtihVJ9AkvUCgvxm2
// SIG // EhIRXT0n4ECWOKz3+SmJw7wXsFSFQrP8DJ6LGYnn8Atq
// SIG // gcKBGUIZUnWKNsIdw2FzLixre24/LAl4FOmRsqlb30mj
// SIG // dAy87JGA0j3mSj5mO0+7hvoyGtmW9I/2kQH2zsZ0/fZM
// SIG // cm8Qq3UwxTSwethQ/gpY3UA8x1RtnWN0SCyxTkctwRQE
// SIG // cb9k+SS+c23Kjgm9swFXSVRk2XPXfx5bRAGOWhmRaw2f
// SIG // pCjcZxkoJLo4S5pu+yFUa2pFEUep8beuyOiJXk+d0tBM
// SIG // drVXVAmxaQFEfnyhYWxz/gq77EFmPWn9y8FBSX5+k77L
// SIG // +DvktxW/tM4+pTFRhLy/AsGConsXHRWJjXD+57XQKBqJ
// SIG // C4822rpM+Zv/Cuk0+CQ1ZyvgDbjmjJnW4SLq8CdCPSWU
// SIG // 5nR0W2rRnj7tfqAxM328y+l7vzhwRNGQ8cirOoo6CGJ/
// SIG // 2XBjU02N7oJtpQUQwXEGahC0HVUzWLOhcGbyoYIC1DCC
// SIG // Aj0CAQEwggEAoYHYpIHVMIHSMQswCQYDVQQGEwJVUzET
// SIG // MBEGA1UECBMKV2FzaGluZ3RvbjEQMA4GA1UEBxMHUmVk
// SIG // bW9uZDEeMBwGA1UEChMVTWljcm9zb2Z0IENvcnBvcmF0
// SIG // aW9uMS0wKwYDVQQLEyRNaWNyb3NvZnQgSXJlbGFuZCBP
// SIG // cGVyYXRpb25zIExpbWl0ZWQxJjAkBgNVBAsTHVRoYWxl
// SIG // cyBUU1MgRVNOOjhENDEtNEJGNy1CM0I3MSUwIwYDVQQD
// SIG // ExxNaWNyb3NvZnQgVGltZS1TdGFtcCBTZXJ2aWNloiMK
// SIG // AQEwBwYFKw4DAhoDFQA9iJe7w5FDiG8py4TsYrQI6DFa
// SIG // eqCBgzCBgKR+MHwxCzAJBgNVBAYTAlVTMRMwEQYDVQQI
// SIG // EwpXYXNoaW5ndG9uMRAwDgYDVQQHEwdSZWRtb25kMR4w
// SIG // HAYDVQQKExVNaWNyb3NvZnQgQ29ycG9yYXRpb24xJjAk
// SIG // BgNVBAMTHU1pY3Jvc29mdCBUaW1lLVN0YW1wIFBDQSAy
// SIG // MDEwMA0GCSqGSIb3DQEBBQUAAgUA6ltHzTAiGA8yMDI0
// SIG // MDgwNTIwNDUwMVoYDzIwMjQwODA2MjA0NTAxWjB0MDoG
// SIG // CisGAQQBhFkKBAExLDAqMAoCBQDqW0fNAgEAMAcCAQAC
// SIG // AgkqMAcCAQACAhLHMAoCBQDqXJlNAgEAMDYGCisGAQQB
// SIG // hFkKBAIxKDAmMAwGCisGAQQBhFkKAwKgCjAIAgEAAgMH
// SIG // oSChCjAIAgEAAgMBhqAwDQYJKoZIhvcNAQEFBQADgYEA
// SIG // ks8U28UhUlXxdd8Vil9TdLGTstm5qMEm9T4QQimARdYA
// SIG // MiOs4wNYiJL+ql5mdmofvuDORmR+MtU8Xdy6nYtj+r6h
// SIG // GWNcgzdFhOoS6QtYi9G8flSiC9XTIxLITF4gcqggvT/q
// SIG // mCDp1yXbX2PRSA7qap8ZEEom0V9qebd6Iclf+k0xggQN
// SIG // MIIECQIBATCBkzB8MQswCQYDVQQGEwJVUzETMBEGA1UE
// SIG // CBMKV2FzaGluZ3RvbjEQMA4GA1UEBxMHUmVkbW9uZDEe
// SIG // MBwGA1UEChMVTWljcm9zb2Z0IENvcnBvcmF0aW9uMSYw
// SIG // JAYDVQQDEx1NaWNyb3NvZnQgVGltZS1TdGFtcCBQQ0Eg
// SIG // MjAxMAITMwAAAePfvZuaHGiDIgABAAAB4zANBglghkgB
// SIG // ZQMEAgEFAKCCAUowGgYJKoZIhvcNAQkDMQ0GCyqGSIb3
// SIG // DQEJEAEEMC8GCSqGSIb3DQEJBDEiBCDse8QjeIWhwTkE
// SIG // zwwyoAAh+BWlIDvqDoGV6R6H4jsUsTCB+gYLKoZIhvcN
// SIG // AQkQAi8xgeowgecwgeQwgb0EIDPUI6vlsP5k90SBCNa9
// SIG // wha4MlxBt2Crw12PTHIy5iYqMIGYMIGApH4wfDELMAkG
// SIG // A1UEBhMCVVMxEzARBgNVBAgTCldhc2hpbmd0b24xEDAO
// SIG // BgNVBAcTB1JlZG1vbmQxHjAcBgNVBAoTFU1pY3Jvc29m
// SIG // dCBDb3Jwb3JhdGlvbjEmMCQGA1UEAxMdTWljcm9zb2Z0
// SIG // IFRpbWUtU3RhbXAgUENBIDIwMTACEzMAAAHj372bmhxo
// SIG // gyIAAQAAAeMwIgQgHnbmGBCBCuqeAKFCtoHtHbuoJ3iH
// SIG // QlH7njzX3DTKmdMwDQYJKoZIhvcNAQELBQAEggIALXwa
// SIG // xrtuLXEWNrAJckTxhIpQLAAPVbHAKG9L3h1/TRlRFc4s
// SIG // ZbNL/S8Hd3d6Ni+DJDOfaO8QnDjJrC08zknI1O3pvyOm
// SIG // P8MmF3kt2Z9JgKMhqfY1cDVVKS0IgWGNYEOca6PaeOPt
// SIG // YMhyh0FrC10QFqUmlMgGl/zmsNMCCd1iAfYYnRXuhM62
// SIG // 2KFsSnm3674GyGIr+k5AwKoot4/i2sn6RfYdraCmK/x5
// SIG // 2bUImwcfgstkslvoQvFthQ3yGUaRTUBhCHH+VSFiqpYA
// SIG // tSQJAt1c9C2jlsMry7djQJVkj48HmYDoRlqZPmRopH4C
// SIG // xnTECmHwY2Gw4FXpAIR69C4CoF+IEXNutjgmv0xCuy10
// SIG // qe1sfqurK/cuTHbCNQ740t/HVNgABDhHjG5UvvdZlGfM
// SIG // UhMr/Qe171lCgLelCZW4TVTmfD4ASFqo3Efc80kAvzfK
// SIG // DZxj+SWTTaAy7Kq9HzSH9LlM/ULvBkIRGnMovpvCMAQ1
// SIG // aX38WdtAmKtgJ2j1WoqJ+X6JbtZjgoZhUrt4Sg2HvWff
// SIG // HMFYabxIzSn0pub99Er8H4+3YbrKa1L2Jq+UyCDi5jQj
// SIG // YMNKFi08FAz+cSxm0D2UGTtKbkOTynVQCK3mzac+4SIp
// SIG // vBObygGxyN7bO7T1ugxEF4M7k39Del2HTP7dVWatHJ+x
// SIG // gHFSIsot/XsjTvOgTbo=
// SIG // End signature block
