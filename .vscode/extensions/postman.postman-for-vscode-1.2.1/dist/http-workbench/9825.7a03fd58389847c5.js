(self.webpackChunkhttp_workbench=self.webpackChunkhttp_workbench||[]).push([[9825],{99951:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ACCESS_TOKENS_KEY:()=>Ye,AUTH_OPTIONS:()=>j,AuthPanel:()=>fn,OAuth2TokenFetcher:()=>_t,SHARED_OAUTH2_TOKEN_ID:()=>R,composeAuthSessionId:()=>bn,decomposeAuthSessionId:()=>xn,defaultAuthSession:()=>Un,getAllOAuth2AccessTokens:()=>et,getAuthSession:()=>An,getAuthSessionById:()=>Tn,getOAuth2AccessToken:()=>Xe,getStorage:()=>Cn,getTokenIdForAuthSession:()=>Zn,getTokenStorage:()=>rt,getTokenValuesForAuthSession:()=>qn,getTokenValuesForTokenId:()=>In,hasAuthSession:()=>jn,initialAuthState:()=>_,isTokenAutoRefreshable:()=>yt,isTokenExpired:()=>kt,removeOAuth2AccessToken:()=>at,removeSession:()=>Sn,setAuthSession:()=>wn,setAuthSessionById:()=>_n,setOAuth2AccessToken:()=>tt,subscribeToAuthSession:()=>Rn,subscribeToOAuth2AccessTokens:()=>st,supportedAuthOptions:()=>w,updateOAuth2Token:()=>nt,useAuthSession:()=>On,useAuthSessionSafe:()=>En,useOAuth2Tokens:()=>wt});var n=a(40540),s=a.n(n),r=a(59530),o=a.n(r),i=a(7560),l=a(50297),u=a(58560),c=a(37110),d=a(68206),h=a(74269),p=a(63622),v=a(88131),k=a(52322);let m,y,f,b=e=>e;const x=o()(d.Z)(m||(m=b`
  &:not(:focus) {
    border-color: var(--border-color-default);
    background-color: var(--background-color-secondary);
  }
`)),g=({name:e,label:t,onChange:a,value:n,type:s="text"})=>(0,v.usePostmanInputFeatureFlag)()?(0,k.jsx)(v.AuthInput,{onChange:t=>{a(t,e)},suggestions:[],value:n,placeholder:t,ariaLabel:t,dataTestId:`${e}-input`}):(0,k.jsx)(x,{onChange:t=>{a(t.target.value,e)},name:e,value:n,placeholder:t,type:s,"data-testid":`${e}-input`}),T=o()(h.Z)(y||(y=b`
  .aether-dropdown__control:not(:focus) {
    border-color: var(--border-color-default);
    background-color: var(--background-color-secondary);
  }

  .aether-dropdown__control .aether-dropdown__single-value {
    color: var(--content-color-secondary);
    font-weight: 600;
    font-size: var(--text-size-s);
  }
`)),A=o()(p.ZP)(f||(f=b`
  color: var(--content-color-primary);
`)),j={apikey:"apikey",basic:"basic",bearer:"bearer",noauth:"noauth",inherit:"inherit"},_={noauth:[],apikey:[],bearer:[],basic:[],inherit:null,oauth2:[{key:"addTokenTo",value:"header"}],awsv4:[],oauth1:[{key:"signatureMethod",value:"HMAC-SHA1"},{key:"version",value:"1.0"},{key:"addParamsToHeader",value:!1},{key:"addEmptyParamsToSign",value:!1}]},w=[{label:"Inherit auth from parent",value:"inherit"},{label:"No Auth",value:"noauth"},{label:"API Key",value:"apikey"},{label:"Basic Auth",value:"basic"},{label:"Bearer Token",value:"bearer"},{label:"OAuth 2.0",value:"oauth2"},{label:"AWS Signature",value:"awsv4"},{label:"OAuth 1.0",value:"oauth1"}],S=[{label:"JWT Bearer",value:"jwt"},{label:"Digest Auth",value:"digest"},{label:"Hawk Authentication",value:"hawk"},{label:"NTLM Authentication [Beta]",value:"ntlm"},{label:"Akamai EdgeGrid",value:"edgegrid"}],R="shared-token";var C=a(39245),P=a(71453);let q;const Z=o()(C.Link)(q||(q=(e=>e)`
  display: inline-flex;
  align-items: center;
  text-decoration: underline;
  color: var(--content-color-secondary);
`)),I=()=>(0,k.jsxs)(Z,{type:"link-default",to:"https://go.pstmn.io/docs-auth",target:"_blank",rel:"noopener noreferer",children:["authorization",(0,k.jsx)(P.Z,{})]}),U=()=>{const e=(0,n.useContext)(yn).authState;return(0,n.useMemo)((()=>S.find((t=>t.value===e.activeAuthType))),[e])},O=()=>{const e=s().useContext(yn).disabledAuthTypes;return w.filter((t=>!(null!=e&&e.includes(t.value))))};let E,z,H,F,V=e=>e;const D=o().div(E||(E=V`
  flex: 0.35;
  padding: var(--spacing-m);
  border-right: var(--border-width-default) var(--border-style-solid)
    var(--border-color-default);
  height: 100%;
  box-sizing: border-box;
`)),N=o()(u.Z)(z||(z=V`
  align-items: center;
  padding: var(--spacing-s) var(--spacing-zero);
  flex-wrap: wrap;
`)),B=o().div(H||(H=V`
  flex: 1;
`)),K=o().div(F||(F=V`
  padding: var(--spacing-s) var(--spacing-zero);
`)),L=(0,l.observer)((()=>{const e=s().useContext(yn),t=e.authState,a=e.setAuthState,n=O(),r=U();return(0,k.jsxs)(D,{"data-testid":"auth-type-selector",children:[(0,k.jsxs)(N,{children:[(0,k.jsx)(B,{children:(0,k.jsx)(c.Z,{text:"Type",htmlFor:"auth-type-selector-dropdown"})}),(0,k.jsx)(B,{children:(0,k.jsx)(T,{onChange:({value:e})=>{a((0,i.Z)({},t,{activeAuthType:e}))},options:n,value:n.find((e=>e.value===t.activeAuthType)),id:"auth-type-selector-dropdown",isSearchable:!1,isClearable:!1,viaPortal:!0,placeholder:r?r.label:""})})]}),"noauth"!==t.activeAuthType&&(0,k.jsxs)(K,{children:["The authorization header will be automatically generated when you send the request. Learn more about"," ",(0,k.jsx)(I,{})]})]})}));let M;const $=o()(u.Z)(M||(M=(e=>e)`
  width: 100%;
  height: 100%;
  align-items: center;
  justify-content: center;
`)),G=()=>(0,k.jsx)($,{children:"This request is not inheriting any authorization helper at the moment."});let W,J,Q=e=>e;const Y=o()(u.Z)(W||(W=Q`
  align-items: center;
  padding-top: var(--spacing-s);
  max-width: 500px;
`)),X=o().div(J||(J=Q`
  flex: 1;
`)),ee=(0,l.observer)((()=>{const e=s().useContext(yn),t=e.authState,a=e.setAuthState,r=(0,n.useCallback)((e=>{if(!e)return a((0,i.Z)({},t,{bearer:[]}));a((0,i.Z)({},t,{bearer:[{key:"token",value:e}]}))}),[t,a]),o=(0,n.useMemo)((()=>{var e;return(null==(e=t.bearer)||null==(e=e.find((e=>"token"===e.key)))?void 0:e.value)||""}),[t]);return(0,k.jsxs)(Y,{"data-testid":"bearer-auth",children:[(0,k.jsx)(X,{children:(0,k.jsx)(A,{children:"Token"})}),(0,k.jsx)(X,{children:(0,k.jsx)(g,{name:"token",label:"token",value:o,onChange:r})})]})}));let te,ae,ne=e=>e;const se=o()(u.Z)(te||(te=ne`
  align-items: center;
  padding-top: var(--spacing-s);
  max-width: 500px;
`)),re=o().div(ae||(ae=ne`
  flex: 1;
`)),oe=[{key:"username",label:"Username",type:"text"},{key:"password",label:"Password",type:"password"}],ie=(0,l.observer)((()=>{const e=s().useContext(yn),t=e.authState,a=e.setAuthState,r=(0,n.useCallback)(((e,n)=>{var s;if(!e)return a((0,i.Z)({},t,{basic:(null==(s=t.basic)?void 0:s.filter((e=>e.key!==n)))||null}));const r=[...t.basic||[]],o=r.findIndex((e=>e.key===n));if(-1===o)return a((0,i.Z)({},t,{basic:[...t.basic||[],{key:n,value:e}]}));r[o].value=e,a((0,i.Z)({},t,{basic:r}))}),[t,a]),o=e=>{var a;return(null==(a=t.basic)||null==(a=a.find((t=>t.key===e)))?void 0:a.value)||""};return(0,k.jsx)(k.Fragment,{children:oe.map((({key:e,label:t,type:a})=>(0,k.jsxs)(se,{"data-testid":"basic-input",children:[(0,k.jsx)(re,{children:(0,k.jsx)(A,{children:t})}),(0,k.jsx)(re,{children:(0,k.jsx)(g,{name:e,label:t,value:o(e),onChange:r,type:a})})]},e)))})}));let le,ue,ce=e=>e;const de=o()(u.Z)(le||(le=ce`
  align-items: center;
  padding-top: var(--spacing-s);
  max-width: 500px;
`)),he=o().div(ue||(ue=ce`
  flex: 1;
`)),pe=[{key:"key",label:"Key"},{key:"value",label:"Value"},{key:"in",label:"Add To",type:"select",options:[{label:"Headers",value:""},{label:"Query Params",value:"query"}]}],ve=(0,l.observer)((()=>{const e=s().useContext(yn),t=e.authState,a=e.setAuthState,r=(0,n.useCallback)(((e,n)=>{var s;if(!e)return a((0,i.Z)({},t,{apikey:(null==(s=t.apikey)?void 0:s.filter((e=>e.key!==n)))||null}));const r=[...t.apikey||[]],o=r.findIndex((e=>e.key===n));if(-1===o)return a((0,i.Z)({},t,{apikey:[...t.apikey||[],{key:n,value:e}]}));r[o].value=e,a((0,i.Z)({},t,{apikey:r}))}),[t,a]),o=(0,n.useCallback)((e=>{var n;return e.value?a((0,i.Z)({},t,{apikey:[...t.apikey||[],{key:"in",value:e.value}]})):a((0,i.Z)({},t,{apikey:(null==(n=t.apikey)?void 0:n.filter((e=>"in"!==e.key)))||null}))}),[t,a]),l=e=>{var a;return(null==(a=t.apikey)||null==(a=a.find((t=>t.key===e)))?void 0:a.value)||""};return(0,k.jsx)(k.Fragment,{children:pe.map((({key:e,label:a,type:n,options:s})=>{return(0,k.jsxs)(de,{"data-testid":"apikey-input",children:[(0,k.jsx)(he,{children:(0,k.jsx)(A,{children:a})}),(0,k.jsx)(he,{children:"select"===n&&null!=s&&s.length?(0,k.jsx)(T,{isClearable:!1,options:s,value:(null==(i=t.apikey)?void 0:i.find((e=>"in"===e.key)))?{label:"Query Params",value:"query"}:{label:"Headers",value:""},onChange:o,name:e,"aria-label":"add auth to",viaPortal:!0}):(0,k.jsx)(g,{name:e,label:a,value:l(e),onChange:r})})]},e);var i}))})}));var ke=a(74962),me=a(25637),ye=a(1078),fe=a(81397),be=a(31987),xe=a(38163),ge=a(80605),Te=a(98244),Ae=a(26663),je=a.n(Ae),_e=a(26246),we=a(91500),Se=a.n(we),Re=a(60398),Ce=a(84452),Pe=a(21466),qe=a(5634);const Ze="authorization_code",Ie="authorization_code_with_pkce",Ue="implicit",Oe={authorization_code:"Authorization Code",authorization_code_with_pkce:"Authorization Code (With PKCE)",implicit:"Implicit",password_credentials:"Password Credentials",client_credentials:"Client Credentials"},Ee={S256:"SHA-256",plain:"Plain"},ze={header:"Send as Basic Auth header",body:"Send client credentials in body"},He="request_url",Fe="request_body",Ve="request_header",De={[Fe]:"Request Body",[He]:"Request URL",[Ve]:"Request Headers"},Ne={grant_type:Oe,client_authentication:ze,challengeAlgorithm:Ee},Be={header:"Request Headers",queryParams:"Request URL"},Ke="id_token",Le="access_token",Me={[Le]:"Access token",[Ke]:"ID token"},$e={accessTokenUrl:"",refreshTokenUrl:"",refreshToken:"",client_authentication:"header",authUrl:"",clientId:"",clientSecret:"",grant_type:"authorization_code",password:"",redirect_uri:je().OAUTH2_CALLBACK_URL,scope:"",state:"",username:"",challengeAlgorithm:"S256",code_verifier:"",name:"Untitled Token",authRequestParams:[],tokenRequestParams:[],refreshRequestParams:[],addTokenTo:"header"},Ge=[{key:"tokenName",label:"Token Name"},{key:"grant_type",label:"Grant Type",type:"select",options:Object.keys(Oe).map((e=>({label:Oe[e],value:e})))},{key:"redirect_uri",label:"Callback URL",disabled:!0},{key:"authUrl",label:"Auth URL"},{key:"accessTokenUrl",label:"Access Token URL"},{key:"clientId",label:"Client ID"},{key:"clientSecret",label:"Client Secret"},{key:"username",label:"Username"},{key:"password",label:"Password"},{key:"challengeAlgorithm",label:"Code Challenge Method",type:"select",options:Object.keys(Ee).map((e=>({label:Ee[e],value:e})))},{key:"code_verifier",label:"Code Verifier"},{key:"scope",label:"Scope"},{key:"state",label:"State"},{key:"client_authentication",label:"Client Authentication",type:"select",options:Object.keys(ze).map((e=>({label:ze[e],value:e})))}],We={authorization_code:new Set(["tokenName","grant_type","redirect_uri","authUrl","accessTokenUrl","clientId","clientSecret","scope","state","client_authentication"]),authorization_code_with_pkce:new Set(["tokenName","grant_type","redirect_uri","authUrl","accessTokenUrl","clientId","clientSecret","challengeAlgorithm","code_verifier","scope","state","client_authentication"]),implicit:new Set(["tokenName","grant_type","redirect_uri","authUrl","clientId","scope","state","client_authentication"]),password_credentials:new Set(["tokenName","grant_type","accessTokenUrl","clientId","clientSecret","username","password","scope","client_authentication"]),client_credentials:new Set(["tokenName","grant_type","accessTokenUrl","clientId","clientSecret","scope","client_authentication"])};var Je=a(29875);const Qe=new Je.KVStorage("oauth2-access-tokens"),Ye="access-tokens",Xe=async e=>{const t=await Qe.get(Ye);return t?t[e]:null},et=async()=>await Qe.get(Ye)||{},tt=async(e,t)=>{const a=(n=t,JSON.parse(JSON.stringify(n)));var n;let s=await Qe.get(Ye);return s||(s={}),s[e]=a,Qe.set(Ye,s)},at=async e=>{let t=await Qe.get(Ye);return t||(t={}),delete t[e],Qe.set(Ye,t)},nt=async(e,t)=>{const a=await Qe.get(Ye);if(!a||a&&!a[e])return;const n=(0,i.Z)({},a[e].data,t.data),s=(0,i.Z)({},a[e],t);s.data=n,await tt(e,s)},st=e=>Qe.subscribe(Ye,e),rt=()=>Qe,ot=(e,t)=>{const a=[];for(const n of e)if(n){const e={key:n.key,value:n.value,enabled:n.enabled,send_as:t};n.options&&(e.send_as=n.options.value),a.push(e)}return a};function it(e){const t=[];for(const a of e)if(a){const e={key:a.key,value:a.value,type:"text",enabled:a.enabled};a.send_as&&(e.options={value:a.send_as,label:De[a.send_as]}),t.push(e)}return t}function lt(e,t){if(!e||!Array.isArray(e))return;const a=e.find((e=>(null==e?void 0:e.key)===t&&!0===(null==e?void 0:e.enabled)));return null==a?void 0:a.value}function ut(e,t){let a=t;for(const t of e)t.enabled&&(a=`${a}${a.includes("?")?"&":"?"}${t.key}=${t.value}`);return a}function ct(e,t){for(const a of e)if(a.enabled)switch(a.send_as){case He:t.url=ut([a],t.url);break;case Ve:if(!a.key)continue;t.headerData.push({key:a.key,value:a.value,enabled:!0,type:"text"});break;default:t.data.push({key:a.key,value:a.value,enabled:!0,type:"text"})}return t}var dt=a(98276),ht=a(77986);const pt=e=>{var t;const a=null==e?void 0:e.timestamp,n=null==e||null==(t=e.data)?void 0:t.expires_in;if(a&&n)return Number(a)+1e3*Number(n)},vt=e=>e?{refresh_token:e.data.refresh_token||"",accessTokenUrl:e.data.accessTokenUrl||"",refreshTokenUrl:e.data.refreshTokenUrl||"",clientId:e.data.clientId||"",clientSecret:e.data.clientSecret||"",refreshRequestParams:e.data.refreshRequestParams||""}:null,kt=(e,t)=>{if(!e)return!1;t||(t=0);const a=pt(e);return!!a&&a<Date.now()+1e3*t},mt=e=>{if(!e)return!1;const t=vt(e);return(null==t?void 0:t.refresh_token)&&((null==t?void 0:t.refreshTokenUrl)||(null==t?void 0:t.accessTokenUrl))},yt=e=>!!e&&kt(e,59)&&(null==e?void 0:e.isTokenAutoRefreshEnabled)&&mt(e),ft=e=>{let t=e.toString("base64");return t=t.split("=")[0],t=t.replace(/\+/g,"-"),t=t.replace(/\//g,"_"),t},bt=e=>{for(const t of Object.keys($e))e[t]||(e[t]=Se()($e[t]));const{tokenName:t,grant_type:a,authUrl:n,accessTokenUrl:s,refreshTokenUrl:r,refresh_token:o,client_authentication:i,clientId:l,clientSecret:u,redirect_uri:c,scope:d,state:h,username:p,password:v,challengeAlgorithm:k,code_verifier:m,authRequestParams:y,tokenRequestParams:f,refreshRequestParams:b}=e;return{tokenName:t,grant_type:a,authUrl:n,accessTokenUrl:s,refreshTokenUrl:r,refreshToken:o,client_authentication:i,clientId:l,clientSecret:u,redirect_uri:c,scope:d,state:h,username:p,password:v,challengeAlgorithm:k,code_verifier:m,authRequestParams:y,tokenRequestParams:f,refreshRequestParams:b}},xt=new Set(["iso-2022-cn","iso-2022-cn-ext"]),gt="authorization_code",Tt="authorization_code_with_pkce",At="implicit",jt="client_credentials",_t=new class{constructor(){this.tokenGenerationCallback=null,this.tokenRefreshCallback=null,this.resolveVariablesPromise=null,this.resolveVariablesPromiseResolve=null,this.resolveVariablesPromiseReject=null,this.timeoutId=null,this.id=null,this.params=null,Pe.VSCodeCommunicationsService.subscribe("OAUTH2_CALLBACK",(e=>{this.handleAuthCallback(e)})),Pe.VSCodeCommunicationsService.subscribe("RESOLVED_VARIABLES",(e=>{var t;if(!e)return;const{id:a,resolvedObject:n}=e;a===this.id&&(null==(t=this.resolveVariablesPromiseResolve)||t.call(this,n))}))}async getResolvedParams(e,t,a){if(!t||0===t.length)return e;const n=function(){const e={};return e.promise=new Promise(((t,a)=>{e.resolve=t,e.reject=a})),e}();return this.resolveVariablesPromise=n.promise,this.resolveVariablesPromiseResolve=n.resolve,this.resolveVariablesPromiseReject=n.reject,(0,dt.resolveVariablesInObject)(e,t,a),setTimeout((()=>{var e;null==(e=this.resolveVariablesPromiseReject)||e.call(this,new Error("Failed to resolve variables"))}),1e4),this.resolveVariablesPromise}handleRedirectToBrowser(e){if(!e.startsWith("https")&&!e.startsWith("http"))return this.finishAuthorizationFlow(new Error("Invalid protocol for auth URL. Only HTTP and HTTPS protocol are allowed."));(0,C.openExternalLink)(e)}async startAuthorization(e,t,a){if(this.id)throw new Error("OAuth2 authorization already in progress");let n=e;if(this.id=(0,Re.v4)(),a)try{n=await this.getResolvedParams(Se()(e),a,this.id)}finally{this.resolveVariablesPromise=null,this.resolveVariablesPromiseResolve=null,this.resolveVariablesPromiseReject=null}var s;if(this.params=bt(n),!this.params)return null==(s=this.finishAuthorizationFlow)?void 0:s.call(this,new Error("OAuth2 authorization params not provided"));switch(this.tokenGenerationCallback=t,this.timeoutId=setTimeout((()=>{this.finishAuthorizationFlow(new Error("OAuth2 authorization timed out"))}),3e4),this.params.grant_type){case gt:case Tt:return this.handleAuthorizationCodeType();case At:return this.handleImplicitType();case"password_credentials":return this.handlePasswordCredentialsType();case jt:return this.handleClientCredentialsType();default:var r;return null==(r=this.finishAuthorizationFlow)?void 0:r.call(this,new Error("Could not complete OAuth 2.0 authorization, grant type is invalid"))}}async refreshTokenByTokenId(e,t){const a=await Xe(e),n=a&&vt(a);n&&this.refreshToken(n,t)}async refreshToken(e,t){if(this.id)throw new Error("OAuth2 authorization already in progress");this.params=bt(e);const a=(0,Re.v4)();var n;if(this.id=a,this.tokenRefreshCallback=t,!this.params)return null==(n=this.finishAuthorizationFlow)?void 0:n.call(this,new Error("OAuth2 authorization params not provided"));this.timeoutId=setTimeout((()=>{this.finishRefreshFlow(new Error("OAuth2 authorization timed out"))}),3e4);const s=this.params.refreshTokenUrl||this.params.accessTokenUrl,r=lt(this.params.refreshRequestParams,"grant_type"),o=lt(this.params.refreshRequestParams,"refresh_token"),i=this.getOAuth2TokenRequest(s);!o&&i.data.push({key:"refresh_token",value:this.params.refreshToken,enabled:!0,type:"text"}),!r&&i.data.push({key:"grant_type",value:"refresh_token",enabled:!0,type:"text"}),this.addClientAuthentication(i,this.params);const l=ct(this.params.refreshRequestParams,i);this.requestAccessToken(l,{refresh:!0})}handleClientCredentialsType(){const{params:e}=this;var t,a;if(!e)return null==(t=this.finishAuthorizationFlow)?void 0:t.call(this,new Error("OAuth2TokenFetcher: params not found"));if(!e.accessTokenUrl)return null==(a=this.finishAuthorizationFlow)?void 0:a.call(this,new Error("OAuth2TokenFetcher: tokenUrl not found"));const n=this.getOAuth2TokenRequest(e.accessTokenUrl),s=lt(e.tokenRequestParams,"grant_type"),r=lt(e.tokenRequestParams,"scope"),o=lt(e.tokenRequestParams,"client_id"),i=lt(e.tokenRequestParams,"client_secret");!s&&n.data.push({key:"grant_type",value:jt,type:"text",enabled:!0}),!r&&n.data.push({key:"scope",value:e.scope,type:"text",enabled:!0}),(!o||!i)&&this.addClientAuthentication(n,e);const l=ct(e.tokenRequestParams,n);this.requestAccessToken(l)}handlePasswordCredentialsType(){const{params:e}=this;var t,a;if(!e)return null==(t=this.finishAuthorizationFlow)?void 0:t.call(this,new Error("OAuth2TokenFetcher: params not found"));if(!e.accessTokenUrl||"string"!=typeof e.accessTokenUrl)return null==(a=this.finishAuthorizationFlow)?void 0:a.call(this,new Error("OAuth2TokenFetcher: tokenUrl not found"));const n=this.getOAuth2TokenRequest(e.accessTokenUrl),s=lt(e.tokenRequestParams,"grant_type"),r=lt(e.tokenRequestParams,"username"),o=lt(e.tokenRequestParams,"password"),i=lt(e.tokenRequestParams,"scope"),l=lt(e.tokenRequestParams,"client_id"),u=lt(e.tokenRequestParams,"client_secret"),c=lt(e.tokenRequestParams,"redirect_uri");(!l||!u)&&this.addClientAuthentication(n,e),!s&&n.data.push({key:"grant_type",value:"password",type:"text",enabled:!0}),!r&&n.data.push({key:"username",value:e.username,type:"text",enabled:!0}),!o&&n.data.push({key:"password",value:e.password,type:"text",enabled:!0}),!i&&n.data.push({key:"scope",value:e.scope,type:"text",enabled:!0}),!c&&n.data.push({key:"redirect_uri",value:e.redirect_uri,type:"text",enabled:!0});const d=ct(e.tokenRequestParams,n);this.requestAccessToken(d)}handleAuthorizationCodeType(){if(!this.params)return;let e=this.params.authUrl;if(!e)return this.finishAuthorizationFlow(new Error("Auth URL not found"));const t=lt(this.params.authRequestParams,"response_type"),a=lt(this.params.authRequestParams,"client_id"),n=lt(this.params.authRequestParams,"state"),s=lt(this.params.authRequestParams,"scope"),r=lt(this.params.authRequestParams,"redirect_uri");if(e+=e.includes("?")?"&":"?",!t&&(e+=`response_type=${encodeURIComponent("code")}`),!a&&(e+=`&client_id=${encodeURIComponent(this.params.clientId)}`),!n&&this.params.state&&(e+=`&state=${encodeURIComponent(this.params.state)}`),!s&&this.params.scope&&(e+=`&scope=${encodeURIComponent(this.params.scope)}`),!r&&this.params.redirect_uri&&(e+=`&redirect_uri=${encodeURIComponent(this.params.redirect_uri)}`),this.params.grant_type===Tt){const t=lt(this.params.authRequestParams,"code_challenge"),a=lt(this.params.authRequestParams,"code_challenge_method");this.params.code_verifier=this.params.code_verifier||((e=32)=>{const t=qe.O6(e);return ft(t)})(),!t&&(e+=`&code_challenge=${encodeURIComponent(((e,t)=>{if(!e||"plain"===t)return e||"";const a=qe.js("sha256").update(e).digest();return ft(a)})(this.params.code_verifier,this.params.challengeAlgorithm))}`),!a&&(e+=`&code_challenge_method=${encodeURIComponent(this.params.challengeAlgorithm)}`)}e=ut(this.params.authRequestParams,e),this.handleRedirectToBrowser(e)}handleImplicitType(){if(!this.params)return;let e=this.params.authUrl;const t=lt(this.params.authRequestParams,"response_type"),a=lt(this.params.authRequestParams,"client_id"),n=lt(this.params.authRequestParams,"state"),s=lt(this.params.authRequestParams,"scope"),r=lt(this.params.authRequestParams,"redirect_uri");e+=e.includes("?")?"&":"?",!t&&(e+=`response_type=${encodeURIComponent("token")}`),!a&&(e+=`&client_id=${encodeURIComponent(this.params.clientId)}`),!n&&this.params.state&&(e+=`&state=${encodeURIComponent(this.params.state)}`),!s&&this.params.scope&&(e+=`&scope=${encodeURIComponent(this.params.scope)}`),!r&&this.params.redirect_uri&&(e+=`&redirect_uri=${encodeURIComponent(this.params.redirect_uri)}`),e=ut(this.params.authRequestParams,e),this.handleRedirectToBrowser(e)}handleAuthCallback(e){if(!this.params||!this.id)return;var t,a,n,s;if(this.params.grant_type===At)return e.access_token?null==(t=this.finishAuthorizationFlow)?void 0:t.call(this,null,e):null==(a=this.finishAuthorizationFlow)?void 0:a.call(this,new Error("OAuth2TokenFetcher~Implicit: access_token not found"));if(!e.code)return null==(n=this.finishAuthorizationFlow)?void 0:n.call(this,new Error("OAuth2TokenFetcher: code not found"));if(!this.params.accessTokenUrl)return null==(s=this.finishAuthorizationFlow)?void 0:s.call(this,new Error("OAuth2TokenFetcher: tokenUrl not found"));const r=lt(this.params.tokenRequestParams,"grant_type"),o=lt(this.params.tokenRequestParams,"client_id"),i=lt(this.params.tokenRequestParams,"client_secret"),l=lt(this.params.tokenRequestParams,"redirect_uri"),u=lt(this.params.tokenRequestParams,"code_verifier"),c=lt(this.params.tokenRequestParams,"code"),d=this.getOAuth2TokenRequest(this.params.accessTokenUrl);!r&&d.data.push({key:"grant_type",value:gt,type:"text",enabled:!0}),!c&&d.data.push({key:"code",value:e.code,type:"text",enabled:!0}),!l&&d.data.push({key:"redirect_uri",value:this.params.redirect_uri,type:"text",enabled:!0}),this.params.grant_type===Tt&&!u&&d.data.push({key:"code_verifier",value:this.params.code_verifier,type:"text",enabled:!0}),(!o||!i)&&this.addClientAuthentication(d,this.params);const h=ct(this.params.tokenRequestParams,d);this.requestAccessToken(h)}addClientAuthentication(e,t){if("body"!==t.client_authentication)e.auth={type:"basic",basic:[{key:"username",value:t.clientId},{key:"password",value:t.clientSecret}]};else{if(e.data.push({key:"client_id",value:t.clientId,enabled:!0,type:"string"}),t.grant_type===Tt&&!t.clientSecret)return;e.data.push({key:"client_secret",value:t.clientSecret,enabled:!0,type:"string"})}}getOAuth2TokenRequest(e){if(!this.params||!this.id)throw new Error("OAuth2TokenFetcher: params or id not found");return{id:this.id,method:"POST",dataMode:"urlencoded",url:e,headerData:[{key:"Content-Type",value:"application/x-www-form-urlencoded",type:"text",enabled:!0}],auth:{type:"noauth"},data:[]}}finishAuthorizationFlow(e,t){var a;if(!this.id||!this.params)throw new Error("OAuth2TokenFetcher: params or id not found");const n=this.params.tokenName||"Untitled Token",s=this.params.accessTokenUrl,r=this.params.refreshTokenUrl,o=this.params.clientId,l=this.params.clientSecret,u=this.params.refreshRequestParams;var c,d;if(this.id=null,this.params=null,this.timeoutId&&clearTimeout(this.timeoutId),e)return null==(c=this.tokenGenerationCallback)?void 0:c.call(this,e);if(!t)return null==(d=this.tokenGenerationCallback)?void 0:d.call(this,new Error("OAuth2TokenFetcher: authResponse not found"));const h={name:n||"Untitled Token",id:(0,Re.v4)(),timestamp:Date.now(),data:(0,i.Z)({},t,{accessTokenUrl:s,clientId:o,clientSecret:l,refreshRequestParams:u,refreshTokenUrl:r})};null==(a=this.tokenGenerationCallback)||a.call(this,null,h)}finishRefreshFlow(e,t){var a;if(this.id||this.params){var n,s;if(this.id=null,this.params=null,e)return null==(n=this.tokenRefreshCallback)?void 0:n.call(this,e);if(this.timeoutId&&clearTimeout(this.timeoutId),!t)return null==(s=this.tokenRefreshCallback)?void 0:s.call(this,new Error("OAuth2TokenFetcher: authResponse not found"));null==(a=this.tokenRefreshCallback)||a.call(this,null,t)}}async requestAccessToken(e,t){var a=this;(0,Ce.sendRequestViaAgent)(e,{variables:{},runOptionsOverrides:{timeout:{global:null,request:3e4,script:null}},exception:({error:e})=>null!=t&&t.refresh?this.finishRefreshFlow(e):this.finishAuthorizationFlow(e),response:async function({error:e,response:n}){if(e)return null!=t&&t.refresh?a.finishRefreshFlow(e):void a.finishAuthorizationFlow(e);if(!n||!n.stream)return null!=t&&t.refresh?a.finishRefreshFlow(new Error("OAuth2TokenFetcher: response not found")):a.finishAuthorizationFlow(new Error("OAuth2TokenFetcher: response not found"));n.stream instanceof ArrayBuffer&&(n.stream=new Uint8Array(n.stream));const s=(r=n.stream,o=n.contentInfo.charset,xt.has(o)?"":("utf-16"===o&&r.length>=2&&254===r[0]&&255===r[1]&&(o="utf-16be"),new TextDecoder(o||"utf8").decode(r)));var r,o;return null!=t&&t.refresh?a.finishRefreshFlow(null,JSON.parse(s)):a.finishAuthorizationFlow(null,JSON.parse(s))},console:()=>null,start:()=>null,responseStart:()=>null,assertion:()=>null,script:()=>null})}},wt=()=>{const{value:e,setValue:t}=(0,Je.useKVStorage)(rt(),Ye),a=(a,n)=>{const s=null==e?void 0:e[a];if(s){for(const e of Object.keys(n.data))s.data[e]=n.data[e];return n.name&&(s.name=n.name),n.timestamp&&(s.timestamp=n.timestamp),e[a]=s,t(e)}};return{oAuth2Tokens:e,createOAuth2Token:(a,n)=>{const s=e||{};return s[a]=n,t(s)},updateOAuth2Token:a,updateKeyInOAuth2Token:(t,n,s)=>{const r=null==e?void 0:e[t];r&&(r.data[n]=s,a(t,r))},deleteOAuth2TokenById:a=>{if(null==e?void 0:e[a])return delete e[`${a}`],t(e)},deleteAllOAuth2Token:()=>t({}),deleteAllExpiredOAuth2Token:()=>{if(e){for(const[t,a]of Object.entries(e))kt(a)&&delete e[`${t}`];return t(e)}}}};let St,Rt,Ct=e=>e;const Pt=o()(u.Z)(St||(St=Ct`
  align-items: center;
  padding-top: var(--spacing-s);
  padding-bottom: var(--spacing-s);
  max-width: 500px;
`)),qt=o().div(Rt||(Rt=Ct`
  flex: 1;
`)),Zt=()=>{const e=s().useContext(yn),t=e.authState,a=e.setAuthState,n=(e,n)=>{if(!e)return a((0,i.Z)({},t,{oauth2:t.oauth2.filter((e=>e.key!==n))}));const s=[...t.oauth2],r=s.findIndex((e=>e.key===n));if(-1===r)return a((0,i.Z)({},t,{oauth2:[...t.oauth2,{key:n,value:e}]}));const o=[...s];return o[r]={key:s[r].key,value:e},a((0,i.Z)({},t,{oauth2:o}))},r=e=>{var a;return(null==(a=t.oauth2.find((t=>t.key===e)))?void 0:a.value)||$e[e]},o=(e,s,o,l,u)=>"redirect_uri"===e?(0,k.jsx)(x,{onChange:e=>{n(e.target.value,e.target.name)},name:e,value:r(e),placeholder:s,isDisabled:u}):"select"===o?l&&0!==(null==l?void 0:l.length)?(0,k.jsx)(T,{isClearable:!1,options:l,value:{value:r(e),label:Ne[e][r(e)]},onChange:n=>{((e,n)=>{if(!n.value)return a((0,i.Z)({},t,{oauth2:t.oauth2.filter((t=>t.key!==e))}));const s=[...t.oauth2],r=s.findIndex((t=>t.key===e));if(-1===r)return a((0,i.Z)({},t,{oauth2:[...t.oauth2,{key:e,value:n.value}]}));const o=[...s];o[r]={key:s[r].key,value:n.value},a((0,i.Z)({},t,{oauth2:o}))})(e,n)},name:e,"aria-label":"add auth to",viaPortal:!0,isDisabled:!1,isSearchable:!1}):null:(0,k.jsx)(g,{onChange:(e,t)=>{n(e,t)},name:e,value:r(e),label:s});return(0,k.jsx)(k.Fragment,{children:Ge.filter((({key:e})=>We[r("grant_type")].has(e))).map((({key:e,label:t,type:a,options:n,disabled:s})=>(0,k.jsxs)(Pt,{"data-testid":`oauth2-input-${e}`,children:[(0,k.jsx)(qt,{children:(0,k.jsx)(A,{children:t})}),(0,k.jsx)(qt,{children:o(e,t,a,n,s)})]},e)))})};var It=a(35736),Ut=a(35482),Ot=a(70068),Et=a(56880);let zt,Ht,Ft,Vt=e=>e;const Dt=o().div(zt||(zt=Vt`
  display: flex;
  margin-top: var(--spacing-xs);
  align-items: center;
  justify-content: left;
`)),Nt=o()(p.ZP)(Ht||(Ht=Vt`
  margin-left: var(--spacing-xs);
  margin-right: var(--spacing-xs);
`)),Bt=o()(It.Z)(Ft||(Ft=Vt`
  margin-left: var(--spacing-xs);
`)),Kt=()=>{var e,t;const a=s().useContext(yn).authSessionState,[r,o]=(0,n.useState)(!1),{oAuth2Tokens:l,updateOAuth2Token:u}=wt(),c=null==(e=a.oauth2)||null==(e=e.find((e=>"token_id"===e.key)))?void 0:e.value,d=c?null==l?void 0:l[c]:null,h=(e,t)=>{if(e)return void o(!1);if(!t)return void o(!1);const a=d;a&&(a.data=(0,i.Z)({},a.data,t.access_token&&{access_token:t.access_token},t.id_token&&{id_token:t.id_token},t.refresh_token&&{refresh_token:t.refresh_token},t.expires_in&&{expires_in:t.expires_in},t.token_type&&{token_type:t.token_type}),a.timestamp=Date.now(),u(a.id,a),o(!1),Et.AnalyticsService.addEventV2({category:"authorization",action:"manual_token_refresh_successful",label:"oauth2"}))},v=()=>{if(!d)return;const e=vt(d);e?(o(!0),_t.refreshToken(e,h),Et.AnalyticsService.addEventV2({category:"authorization",action:"manual_token_refresh",label:"oauth2"})):o(!1)};if(null==d||null==(t=d.data)||!t.refresh_token)return null;const m=pt(d)||0,y=Date.now(),f=vt(d),b=mt(d);if(!f||!b)return;if(r)return(0,k.jsxs)(Dt,{children:[(0,k.jsx)(p.ZP,{hasBottomSpacing:!0,color:"content-color-secondary",children:"Refreshing token"}),(0,k.jsx)(Bt,{})]});if(!m)return(0,k.jsx)(Dt,{children:(0,k.jsx)(p.ZP,{type:"link-default",hasBottomSpacing:!0,children:(0,k.jsx)("div",{onClick:v,children:"Refresh"})})});const x=Number(m),g=new Date(x).toDateString()===new Date(y).toDateString();let T=null;if(kt(d))T=(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Ut.Z,{name:"icon-state-error-stroke",color:"content-color-error"}),(0,k.jsx)(Nt,{hasBottomSpacing:!0,color:"content-color-error",children:"Token expired."})]});else if(g){const e=(e=>`Expires at ${(0,ht.format)(e,"h:mm aaaa")} today.`)(x);T=(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Ot.Z,{color:"content-color-secondary"}),(0,k.jsx)(Nt,{hasBottomSpacing:!0,color:"content-color-secondary",children:e})]})}return(0,k.jsxs)(Dt,{children:[T,(0,k.jsx)(p.ZP,{type:"link-default",hasBottomSpacing:!0,children:(0,k.jsx)("div",{onClick:v,children:"Refresh"})})]})},Lt=()=>{var e,t;const a=s().useContext(yn).authSessionState,{oAuth2Tokens:n,updateKeyInOAuth2Token:r}=wt(),o=null==(e=a.oauth2)||null==(e=e.find((e=>"token_id"===e.key)))?void 0:e.value,i=o?null==n?void 0:n[o]:null,l=(null==i||null==(t=i.data)?void 0:t.token_key)||Le;if(null!=i&&i.data[Ke])return(0,k.jsxs)(Pt,{"data-testid":"oauth2-input-token-key",children:[(0,k.jsx)(qt,{children:(0,k.jsx)(A,{children:"Token Type"})}),(0,k.jsx)(qt,{children:(0,k.jsx)(T,{isClearable:!1,options:Object.keys(Me).map((e=>({value:e,label:Me[e],isOptionDisabled:e=>{var t;return null==i||null==(t=i.data)?void 0:t[null==e?void 0:e.value]}}))),placeholder:"Select Token Type",value:{value:l,label:Me[l]},onChange:e=>(e=>{i&&r(i.id,"token_key",e.value)})(e),name:"token","aria-label":"Select token",viaPortal:!0,isDisabled:!1,isSearchable:!1})})]},"token_key")};var Mt=a(56415),$t=a(3341);let Gt;const Wt=o().div(Gt||(Gt=(e=>e)`
  display: flex;
  align-items: center;
  cursor: pointer;
  margin-bottom: var(--spacing-xs);
  margin-top: var(--spacing-xs);
`)),Jt=e=>{const{onToggleAdvancedFields:t,title:a,isOpen:n}=e;return(0,k.jsxs)(Wt,{onClick:()=>t(),children:[n?(0,k.jsx)(Mt.Z,{}):(0,k.jsx)($t.Z,{}),(0,k.jsx)("div",{children:(0,k.jsx)(c.Z,{type:"primary",text:a||"Advanced configuration"})})]})};var Qt=a(19956);const Yt=()=>{const e=s().useContext(yn),t=e.authState,a=e.setAuthState,n=(e,n)=>{const s=[...t.oauth2],r=s.findIndex((t=>t.key===e));return-1===r||(s[r].value=n,a((0,i.Z)({},t,{oauth2:s}))),a((0,i.Z)({},t,{oauth2:[...t.oauth2,{key:e,value:n}]}))},r=e=>{var a;return(null==(a=t.oauth2.find((t=>t.key===e)))?void 0:a.value)||$e[e]},o=r("authRequestParams"),l=r("tokenRequestParams"),c=r("refreshRequestParams"),d=Object.keys(De).map((e=>({value:e,label:De[e]}))),h=r("grant_type"),p=[Ze,Ie,Ue].includes(h),v=h!==Ue;return(0,k.jsxs)(u.Z,{direction:"column",children:[(0,k.jsxs)(Pt,{"data-testid":"oauth2-input-refreshTokenUrl",children:[(0,k.jsx)(qt,{children:(0,k.jsx)(A,{children:"Refresh Token URL"})}),(0,k.jsx)(qt,{children:(0,k.jsx)(g,{onChange:(e,n)=>{((e,n)=>{if(!e)return a((0,i.Z)({},t,{oauth2:t.oauth2.filter((e=>e.key!==n))}));const s=[...t.oauth2],r=s.findIndex((e=>e.key===n));if(-1===r)return a((0,i.Z)({},t,{oauth2:[...t.oauth2,{key:n,value:e}]}));s[r].value=e,a((0,i.Z)({},t,{oauth2:s}))})(e,n)},name:"refreshTokenUrl",value:r("refreshTokenUrl"),label:r("refreshTokenUrl")||"Enter Refresh Token URL"})})]},"refreshTokenUrl"),p&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Pt,{"data-testid":"oauth2-input-authRequestParams",children:(0,k.jsx)(qt,{children:(0,k.jsx)(A,{children:"Auth Request"})})},"authRequestParams"),(0,k.jsx)(qt,{children:(0,k.jsx)(Qt.KeyValueEditor,{tableName:"Auth Request",allowedColumns:["key","value"],showColumns:["key","value"],values:it(o),onChange:e=>{n("authRequestParams",ot(e,He))},disableSorting:!0,nonEditableKeys:!1,nonEditableValues:!1,nonEditableToggles:!1,disableBulkEdit:!0,enableVariableSuggestions:!0,optionsDropdownValues:[{label:"Text",value:"text"}]})})]}),v&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Pt,{"data-testid":"oauth2-input-tokenRequestParams",children:(0,k.jsx)(qt,{children:(0,k.jsx)(A,{children:"Token Request"})})},"tokenRequestParams"),(0,k.jsx)(qt,{children:(0,k.jsx)(Qt.KeyValueEditor,{tableName:"Token Request",allowedColumns:["key","value","options"],showColumns:["key","value","options"],values:it(l),onChange:e=>{n("tokenRequestParams",ot(e,Fe))},disableSorting:!0,nonEditableKeys:!1,nonEditableValues:!1,nonEditableToggles:!1,disableBulkEdit:!0,enableVariableSuggestions:!0,optionsDropdownValues:d})})]}),(0,k.jsx)(Pt,{"data-testid":"oauth2-input-refreshRequestParams",children:(0,k.jsx)(qt,{children:(0,k.jsx)(A,{children:"Refresh Request"})})},"refreshRequestParams"),(0,k.jsx)(qt,{children:(0,k.jsx)(Qt.KeyValueEditor,{tableName:"Refresh Request",allowedColumns:["key","value","options"],showColumns:["key","value","options"],values:it(c),onChange:e=>{n("refreshRequestParams",ot(e,Fe))},disableSorting:!0,nonEditableKeys:!1,nonEditableValues:!1,nonEditableToggles:!1,disableBulkEdit:!0,enableVariableSuggestions:!0,optionsDropdownValues:d})})]})};var Xt=a(10099);let ea,ta,aa,na,sa,ra,oa,ia,la=e=>e;const ua=o().div(ea||(ea=la`
  border-bottom: 1px solid var(--border-color-default);
`)),ca=o()(ke.Z)(ta||(ta=la`
  margin-top: var(--spacing-m);
  margin-bottom: var(--spacing-m);
`)),da=o()(u.Z)(aa||(aa=la`
  padding-right: var(--spacing-l);
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  display: block;
  word-break: break-all;
  white-space: nowrap;
`)),ha=o().div(na||(na=la`
  display: flex;
  margin-top: var(--spacing-xs);
  align-items: center;
  justify-content: left;
`)),pa=o().div(sa||(sa=la`
  margin-top: var(--spacing-xxl);
`)),va=o().div(ra||(ra=la`
  margin-top: var(--spacing-l);
  margin-right: var(--spacing-l);
  display: flex;
  justify-content: space-between;
`)),ka=o().div(oa||(oa=la`
  margin-top: var(--spacing-l);
  margin-right: var(--spacing-l);
  display: flex;
  justify-content: space-between;
`)),ma=o().div(ia||(ia=la`
  display: flex;
  justify-content: space-between;
  width: 100%;
  padding-right: var(--spacing-s);
  align-items: center;
`)),ya=()=>{var e;const t=s().useContext(yn),a=t.authState,r=t.authSessionState,o=t.setAuthSessionState,l=t.setAuthState,[u,c]=(0,n.useState)(!1),d=_e.Modals.getModals(),h=(0,n.useRef)(null),[v,m]=(0,n.useState)(null),[y,f]=(0,n.useState)(!1),{oAuth2Tokens:b,createOAuth2Token:j,updateKeyInOAuth2Token:_,updateOAuth2Token:w}=wt(),{data:S}=(0,dt.useActiveAndDynamicVariables)(),{addToast:P}=(0,me.ZP)(),q=null==r||null==(e=r.oauth2)||null==(e=e.find((e=>"token_id"===e.key)))?void 0:e.value,Z=q?null==b?void 0:b[q]:null,I=e=>{o("token_id",e)};(0,n.useEffect)((()=>{m(null)}),[b,r]);const U=(0,Xt.useActiveWorkspaceId)(),O=(0,C.useNavigate)(),E=e=>{const t=a.oauth2.filter((e=>!("tokenType"===e.key||"accessToken"===e.key)));if(!e)return l((0,i.Z)({},a,{oauth2:t}));t.push({key:"tokenType",value:e.tokenType},{key:"accessToken",value:e.accessToken}),l((0,i.Z)({},a,{oauth2:t}))},z=e=>{var t;return(null==(t=a.oauth2.find((t=>t.key===e)))?void 0:t.value)||$e[e]},H=(e,t)=>t?t.data.error?(c(!1),void P({status:"error",description:"Authentication failed"})):(P({status:"success",description:"Authentication successful"}),j(t.id,t),(e=>{e&&I(e.id)})(t),c(!1),void Et.AnalyticsService.addEventV2({category:"authorization",action:"get_access_token_successful",label:"oauth2"})):(c(!1),void P({status:"error",description:"Authentication failed"})),F=()=>{var e;let t=(null==Z||null==(e=Z.data)?void 0:e.token_key)===Ke?Z.data.id_token:null==Z?void 0:Z.data.access_token;return q===R&&(t=z("accessToken")),null!==v?v:t},V=()=>Z&&null!=Z&&Z.data.access_token&&(null==Z?void 0:Z.data.access_token)===z("accessToken")||q===R&&z("accessToken")?"yes":"no",D=()=>Z&&void 0!==Z?{value:null==Z?void 0:Z.id,label:null==Z?void 0:Z.name}:q&&q===R&&Boolean(z("accessToken"))?{value:R,label:"Shared Token"}:null;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(Pt,{"data-testid":"oauth2-input-tokens",children:[(0,k.jsx)(qt,{children:(0,k.jsx)(A,{children:"Token"})}),(0,k.jsxs)(qt,{children:[(0,k.jsx)(T,{isClearable:!1,options:(()=>{let e=[];return e=Object.values(b||{}).map((e=>({value:e.id,label:e.name}))),z("accessToken")&&(e=[{value:R,label:"Shared Token"},...e]),0===e.length?[]:e})(),placeholder:"Available Tokens",customOptionComponent:e=>{const{label:t,value:a}=e;return a===R?(0,k.jsxs)(ma,{children:[t,(0,k.jsx)(Te.Z,{color:"content-color-success"})]}):(0,k.jsxs)(da,{children:[" ",t," "]})},value:D(),onChange:e=>{null!=e&&e.value&&I(e.value)},name:"token","aria-label":"Select token",viaPortal:!0,isDisabled:!1,isSearchable:!1},`${D()}`),(0,k.jsx)(ha,{children:(0,k.jsx)(p.ZP,{type:"link-default",hasBottomSpacing:!0,children:(0,k.jsx)("div",{onClick:()=>{O(`/workspace/${U}/openManageTokensTab`,{},{customNavEvent:C.OPEN_EXTENSION_URL})},children:"Manage Tokens"})})})]})]},"token"),Lt(),(0,k.jsxs)(Pt,{"data-testid":"oauth2-input-token_value",children:[(0,k.jsx)(qt,{}),(0,k.jsxs)(qt,{children:[(0,k.jsx)(x,{onChange:e=>{const t=e.target.value;m(t),h.current&&clearTimeout(h.current);const a=setTimeout((()=>{(e=>{var t;let a=Z;if(!a)return a={id:(0,Re.v4)(),name:"Untitled Token",timestamp:Date.now(),data:{[Le]:e,token_type:"Bearer"}},j(a.id,a),I(a.id);const n=(null==Z||null==(t=Z.data)?void 0:t.token_key)===Ke?Ke:Le;_(a.id,n,e)})(t),h.current=null}),1e3);h.current=a},name:"access_token",value:F(),placeholder:"Enter Token Here",isDisabled:!1}),Kt()]})]},"token_value"),(0,k.jsxs)(Pt,{"data-testid":"oauth2-input-headerPrefix",children:[(0,k.jsx)(qt,{children:(0,k.jsx)(A,{children:"Header Prefix"})}),(0,k.jsx)(qt,{children:(0,k.jsx)(g,{onChange:(e,t)=>{((e,t)=>{if(!e)return l((0,i.Z)({},a,{oauth2:a.oauth2.filter((e=>e.key!==t))}));const n=[...a.oauth2],s=n.findIndex((e=>e.key===t));if(-1===s)return l((0,i.Z)({},a,{oauth2:[...a.oauth2,{key:t,value:e}]}));n[s].value=e,l((0,i.Z)({},a,{oauth2:n}))})(e,t)},name:"headerPrefix",value:z("headerPrefix")||"Bearer",label:"Enter Prefix Here"})})]},"headerPrefix"),(0,k.jsxs)(Pt,{"data-testid":"oauth2-input-addTokenTo",children:[(0,k.jsx)(qt,{children:(0,k.jsx)(A,{children:"Add authorization data to"})}),(0,k.jsx)(qt,{children:(0,k.jsx)(T,{isClearable:!1,options:Object.keys(Be).map((e=>({value:e,label:Be[e]}))),value:{value:z("addTokenTo"),label:Be[z("addTokenTo")]},onChange:e=>{((e,t)=>{if(!t.value)return l((0,i.Z)({},a,{oauth2:a.oauth2.filter((t=>t.key!==e))}));const n=[...a.oauth2],s=n.findIndex((t=>t.key===e));if(-1===s)return l((0,i.Z)({},a,{oauth2:[...a.oauth2,{key:e,value:t.value}]}));n[s].value=t.value,l((0,i.Z)({},a,{oauth2:n}))})("addTokenTo",e)},name:"addTokenTo","aria-label":"add auth to",viaPortal:!0,isDisabled:!1,isSearchable:!1})})]},"addTokenTo"),(0,k.jsxs)(pa,{children:[(0,k.jsxs)(va,{children:[(0,k.jsx)(ke.Z,{type:"h6",text:"Auto-refresh token",color:"content-color-secondary"}),(()=>{const e=q?null==b?void 0:b[q]:null,t=e&&mt(e),a=(0,k.jsx)(ye.Z,{name:"Refresh Token",onChange:t=>{const a=e;a&&(a.isTokenAutoRefreshEnabled=t,w(q,a))},isDisabled:!t,isChecked:t&&e.isTokenAutoRefreshEnabled});if(t)return a;const n=e?vt(e):null;let s;return q===R&&Boolean(z("accessToken"))?s="Shared token cannot be auto-refreshed. Generate a new token to refresh it automatically on expire.":n?n.refresh_token?n.accessTokenUrl||(s="Access token URL is not present. Generate a new token to refresh it automatically on expire."):s="Refresh token is not present. Generate a new token to refresh it automatically on expire.":s="Select a token from available tokens to refresh it automatically on expire.",(0,k.jsx)(fe.Z,{content:s,children:a})})()]}),(0,k.jsx)(p.ZP,{type:"para",hasBottomSpacing:!0,color:"content-color-secondary",children:"Your expired token will be auto-refreshed before sending a request."})]}),(0,k.jsx)(ua,{}),(0,k.jsxs)(ka,{children:[(0,k.jsx)(ke.Z,{type:"h6",text:"Share Token",color:"content-color-secondary"}),(0,k.jsxs)(be.Z,{name:"share-token",value:V(),onChange:async e=>{if(e===V())return;const t="yes"===e?"Sync Token":"Disable Token Sharing",a="yes"===e?"Sharing this token will allow anyone with access to this request to view and potentially use it.":"People with access to this request will no longer be able to see or use this token. They will be able to generate their own access token instead.",n="yes"===e?"Share":"Disable Share",s=await d.showWarningDialog({uid:"share-token",subject:t,message:a,options:[{title:"Cancel",isDefaultOnDismiss:!0},{title:n,isPrimary:!0}]});if(s&&"Share"===s.title){const e=Z&&Z.data.token_type,t=F();E({tokenType:"string"==typeof e?e:"",accessToken:"string"==typeof t?t:""})}else s&&"Disable Share"===s.title&&E()},children:[(0,k.jsx)(xe.Z,{value:"yes",label:"Yes",id:"yes",isDisabled:!Z&&q!==R||q===R&&!z("accessToken")}),(0,k.jsx)(xe.Z,{value:"no",label:"No",id:"no",isDisabled:!Z&&q!==R||q===R&&!z("accessToken")})]})]}),(0,k.jsx)(p.ZP,{type:"para",hasBottomSpacing:!0,color:"content-color-secondary",children:"This will allow anyone with access to this request to view and use it."}),(0,k.jsx)(ua,{}),(0,k.jsx)(ca,{type:"h4",text:"Configure New Token"}),Zt(),(0,k.jsx)(Jt,{onToggleAdvancedFields:()=>{f(!y)},isOpen:y}),y&&Yt(),(0,k.jsx)(Pt,{children:(0,k.jsx)(ge.Z,{onClick:()=>{const e={};for(const t of a.oauth2)e[t.key]=Se()(t.value);e.redirect_uri=je().OAUTH2_CALLBACK_URL,c(!0),_t.startAuthorization(e,H,S||[]).catch((()=>{c(!1),P({status:"error",description:"Authentication failed"})})),Et.AnalyticsService.addEventV2({category:"authorization",action:"get_access_token",label:"oauth2"})},type:"primary",text:"Generate Access Token",isLoading:u})})]})},fa=(0,l.observer)((()=>(0,k.jsx)(me.VW,{children:(0,k.jsx)(ya,{})})));var ba=a(49437),xa=a(80047);let ga;const Ta=o()(u.Z)(ga||(ga=(e=>e)`
  overflow: hidden;
`));function Aa({description:e}){return(0,k.jsx)(Ta,{direction:"column",height:"100%",justifyContent:"center",alignItems:"center",children:(0,k.jsx)(ba.Z,{title:"Coming Soon",description:e,children:(0,k.jsx)(xa.Z,{name:"illustration-no-custom-domain"})})})}let ja;const _a=o()(u.Z)(ja||(ja=(e=>e)`
  width: 100%;
  height: 100%;
  align-items: center;
  justify-content: center;
`)),wa=()=>{const e=s().useContext(yn).authDescriptions;return(0,k.jsx)(_a,{children:(null==e?void 0:e.inherit)||"This request is inheriting auth from parent"})};let Sa,Ra,Ca,Pa,qa=e=>e;const Za=o()(u.Z)(Sa||(Sa=qa`
  align-items: center;
  padding-top: var(--spacing-l);
  max-width: 500px;
`)),Ia=o()(u.Z)(Ra||(Ra=qa`
  align-items: center;
  padding-top: var(--spacing-l);
  padding-bottom: var(--spacing-s);
  max-width: 500px;
  margin-left: -4px;
`)),Ua=o().div(Ca||(Ca=qa`
  flex: 1;
`)),Oa=o()(h.Z)(Pa||(Pa=qa`
  .aether-dropdown__control:not(:focus) {
    border-color: var(--border-color-default);
    background-color: var(--background-color-secondary);
  }

  .aether-dropdown__control .aether-dropdown__single-value {
    color: var(--content-color-secondary);
    font-weight: 600;
    font-size: var(--text-size-s);
  }
`)),Ea=[{key:"accessKey",label:"AccessKey",type:"text"},{key:"secretKey",label:"SecretKey",type:"text"}],za=[{key:"region",label:"AWS Region",type:"text",infoText:"The region that is receiving the request (default value: us-east-1)",placeHolder:"e.g. us-east-1"},{key:"service",label:"Service Name",type:"text",infoText:"The service that is receiving the request.",placeHolder:"e.g. s3"},{key:"sessionToken",label:"Session Token",type:"text",infoText:"Only required when using temporary security credentials.",placeHolder:"Session Token"}],Ha={key:"addAuthDataToQuery",label:"Add authorization data to",options:[{label:"Request Headers",value:!1},{label:"Request URL",value:!0}]},Fa=(0,l.observer)((()=>{const e=s().useContext(yn),t=e.authState,a=e.setAuthState,r=(0,n.useCallback)(((e,n)=>{var s;if(!e)return a((0,i.Z)({},t,{awsv4:(null==(s=t.awsv4)?void 0:s.filter((e=>e.key!==n)))||null}));const r=[...t.awsv4||[]],o=r.findIndex((e=>e.key===n));if(-1===o)return a((0,i.Z)({},t,{awsv4:[...t.awsv4||[],{key:n,value:e}]}));r[o].value=e,a((0,i.Z)({},t,{awsv4:r}))}),[t,a]),o=e=>{var a;return(null==(a=t.awsv4)||null==(a=a.find((t=>t.key===e)))?void 0:a.value)||""},[l,u]=(0,n.useState)(!1);return(0,k.jsxs)(k.Fragment,{children:[Ea.map((({key:e,label:t,type:a})=>(0,k.jsxs)(Za,{"data-testid":"aws-signature-basic-input",children:[(0,k.jsx)(Ua,{children:(0,k.jsx)(c.Z,{text:t})}),(0,k.jsx)(Ua,{children:(0,k.jsx)(g,{name:e,label:t,value:o(e),onChange:r,type:a})})]},e))),(0,k.jsxs)(Za,{children:[(0,k.jsx)(Ua,{children:(0,k.jsx)(c.Z,{text:Ha.label})}),(0,k.jsx)(Ua,{children:(0,k.jsx)(Oa,{isClearable:!1,options:Ha.options,value:o("addAuthDataToQuery")?{label:"Request URL",value:!0}:{label:"Request Headers",value:!1},onChange:e=>r(e.value,"addAuthDataToQuery"),"aria-label":"add auth to",viaPortal:!0})})]}),(0,k.jsx)(Ia,{children:(0,k.jsx)(Jt,{onToggleAdvancedFields:()=>{u(!l)},isOpen:l})}),l&&(0,k.jsx)(p.ZP,{type:"small",children:"Postman auto-generates default values for some of these fields unless a value is specified."}),l&&za.map((({key:e,label:t,type:a,infoText:n,placeHolder:s})=>(0,k.jsxs)(Za,{"data-testid":"aws-signature-advance-input",children:[(0,k.jsx)(Ua,{children:(0,k.jsx)(c.Z,{text:t,infoText:n})}),(0,k.jsx)(Ua,{children:(0,k.jsx)(g,{name:e,label:s,value:o(e),onChange:r,type:a})})]},e)))]})}));var Va=a(91217),Da=a(80519);let Na,Ba,Ka,La,Ma,$a,Ga,Wa,Ja=e=>e;const Qa=o()(u.Z)(Na||(Na=Ja`
  align-items: center;
  padding-top: var(--spacing-l);
  max-width: 500px;
`)),Ya=o()(u.Z)(Ba||(Ba=Ja`
  align-items: center;
  padding-top: var(--spacing-l);
  padding-bottom: var(--spacing-s);
  max-width: 500px;
  margin-left: -4px;
`)),Xa=o().div(Ka||(Ka=Ja`
  flex: 1;
`)),en=o()(h.Z)(La||(La=Ja`
  .aether-dropdown__control:not(:focus) {
    border-color: var(--border-color-default);
    background-color: var(--background-color-secondary);
  }

  .aether-dropdown__control .aether-dropdown__single-value {
    color: var(--content-color-secondary);
    font-weight: 600;
    font-size: var(--text-size-s);
  }
`)),tn=o().div(Ma||(Ma=Ja`
  display: flex;
  flex-direction: column;
  gap: var(--spacing-l);
`)),an=o().div($a||($a=Ja`
  margin: var(--spacing-l) 0;
  border-bottom: 1px solid var(--border-color-default);
`)),nn=o().label(Ga||(Ga=Ja`
  display: flex;
  gap: var(--spacing-s);
  user-select: none;
  color: var(--content-color-primary);
  font-size: var(--text-size-m);
  width: max-content;
  height: var(--size-s);
  line-height: 1.8;
  vertical-align: middle;
  padding: var(--spacing-zero) var(--spacing-m);
  border: var(--button-outline-border);
  border-color: var(--button-outline-border-color);
  box-sizing: border-box;
  border-radius: var(--border-radius-default);

  &:hover {
    cursor: pointer;
    border-color: var(--button-outline-hover-border-color);
  }
`)),sn=o()(Va.Z)(Wa||(Wa=Ja`
  min-height: 80px;
`)),rn=[{key:"consumerKey",label:"Consumer Key",type:"text",infoText:"A value used by the Consumer to identify itself to the Service Provider",placeHolder:"Consumer Key"},{key:"consumerSecret",label:"Consumer Secret",type:"text",disableIfRSA:!0,infoText:"A secret used by the Consumer to establish ownership of the Consumer Key.",placeHolder:"Consumer Secret"},{key:"token",label:"Access Token",type:"text",placeHolder:"Access Token"},{key:"tokenSecret",label:"Token Secret",type:"text",disableIfRSA:!0,infoText:"A secret used by the Consumer to establish ownership of a given Token.",placeHolder:"Token Secret"}],on=[{key:"callback",label:"Callback URL",type:"text",infoText:"An absolute URL where the service provider will redirect to after obtaining user authorization.",placeHolder:"Callback URL"},{key:"verifier",label:"Verifier",type:"text",infoText:"The verification code given by the service provider after obtaining user authorization.",placeHolder:"Verifier"},{key:"timestamp",label:"Timestamp",type:"text",placeHolder:"Timestamp"},{key:"nonce",label:"Nonce",type:"text",infoText:"A random string generated by the client.",placeHolder:"Nonce"},{key:"version",label:"Version",type:"text",placeHolder:"e.g. 1.0"},{key:"realm",label:"Realm",type:"text",infoText:"This is a string specified by the server in the WWW-Authenticate response header. It should contain at least the name of the host performing the authentication and might additionally indicate the collection of users who might have access",placeHolder:"testrealm@example.com"}],ln={key:"signatureMethod",label:"Signature Method",infoText:"The signature method the Consumer used to sign the request.",options:[{label:"HMAC-SHA1",value:"HMAC-SHA1"},{label:"HMAC-SHA256",value:"HMAC-SHA256"},{label:"HMAC-SHA512",value:"HMAC-SHA512"},{label:"RSA-SHA1",value:"RSA-SHA1"},{label:"RSA-SHA256",value:"RSA-SHA256"},{label:"RSA-SHA512",value:"RSA-SHA512"},{label:"PLAINTEXT",value:"PLAINTEXT"}]},un={key:"addParamsToHeader",label:"Add authorization data to",options:[{label:"Request Headers",value:"header"},{label:"Request Body/Request URL",value:"url"}]},cn=(0,l.observer)((()=>{const e=s().useContext(yn),t=e.authState,a=e.setAuthState,r=(0,n.useCallback)(((e,n)=>{var s;if(!e)return a((0,i.Z)({},t,{oauth1:(null==(s=t.oauth1)?void 0:s.filter((e=>e.key!==n)))||null}));const r=[...t.oauth1||[]],o=r.findIndex((e=>e.key===n));if(-1===o)return a((0,i.Z)({},t,{oauth1:[...t.oauth1||[],{key:n,value:e}]}));r[o].value=e,a((0,i.Z)({},t,{oauth1:r}))}),[t,a]),o=e=>{var a;return(null==(a=t.oauth1)||null==(a=a.find((t=>t.key===e)))?void 0:a.value)||""},[l,u]=(0,n.useState)(!1),d=()=>o("signatureMethod").includes("RSA");return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(Qa,{children:[(0,k.jsx)(Xa,{children:(0,k.jsx)(c.Z,{text:ln.label,infoText:ln.infoText})}),(0,k.jsx)(Xa,{children:(0,k.jsx)(en,{isClearable:!1,options:ln.options,value:(()=>{const e=o("signatureMethod");return e?{label:e,value:e}:{label:"HMAC-SHA1",value:"HMAC-SHA1"}})(),onChange:e=>r(e.value,"signatureMethod"),"aria-label":"add auth to",viaPortal:!0})})]}),rn.map((({key:e,label:t,type:a,infoText:n,disableIfRSA:s})=>s&&d()?null:(0,k.jsxs)(Qa,{"data-testid":"oauth1-basic-input",children:[(0,k.jsx)(Xa,{children:(0,k.jsx)(c.Z,{text:t,infoText:n})}),(0,k.jsx)(Xa,{children:(0,k.jsx)(g,{name:e,label:t,value:o(e),onChange:r,type:a})})]},e))),d()&&(0,k.jsxs)(Qa,{children:[(0,k.jsx)(Xa,{children:(0,k.jsx)(c.Z,{text:"Private Key",infoText:"RSA private key in PEM format for signing the request."})}),(0,k.jsxs)(Xa,{children:[(0,k.jsx)("input",{type:"file",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.addEventListener("load",(e=>{const t=e.target.result;r(t,"privateKey")})),e.readAsText(t)}},id:"upload",hidden:!0}),(0,k.jsx)(nn,{htmlFor:"upload",children:(0,k.jsx)("span",{children:"Select file"})})]})]}),d()&&(0,k.jsxs)(Qa,{children:[(0,k.jsx)(Xa,{}),(0,k.jsx)(Xa,{children:(0,k.jsx)(sn,{value:o("privateKey"),onChange:e=>{r(e.target.value,"privateKey")},placeholder:"-----BEGIN RSA PRIVATE KEY-----\nprivate key in PEM format\n-----END RSA PRIVATE KEY-----"})})]}),(0,k.jsxs)(Qa,{children:[(0,k.jsx)(Xa,{children:(0,k.jsx)(c.Z,{text:un.label})}),(0,k.jsx)(Xa,{children:(0,k.jsx)(en,{isClearable:!1,options:un.options,value:o("addParamsToHeader")?{label:"Request Headers",value:"headers"}:{label:"Request Body/Request URL",value:"url"},onChange:e=>"url"===(null==e?void 0:e.value)?r(!1,"addParamsToHeader"):r(!0,"addParamsToHeader"),"aria-label":"add auth to",viaPortal:!0})})]}),(0,k.jsx)(Ya,{children:(0,k.jsx)(Jt,{onToggleAdvancedFields:()=>{u(!l)},isOpen:l})}),l&&(0,k.jsx)(p.ZP,{type:"small",children:"Postman auto-generates default values for some of these fields unless a value is specified."}),l&&on.map((({key:e,label:t,type:a,infoText:n,placeHolder:s})=>(0,k.jsxs)(Qa,{"data-testid":"oauth1-advance-input",children:[(0,k.jsx)(Xa,{children:(0,k.jsx)(c.Z,{text:t,infoText:n})}),(0,k.jsx)(Xa,{children:(0,k.jsx)(g,{name:e,label:s,value:o(e),onChange:r,type:a})})]},e))),l&&(0,k.jsx)(an,{}),l&&(0,k.jsxs)(tn,{children:[(0,k.jsx)(Da.Z,{isChecked:o("includeBodyHash"),label:(0,k.jsx)(c.Z,{text:"Include body hash",infoText:"OAuth Request Body Hash extension provides support for request body integrity check for content types other than application/x-www-form-urlencoded. If this option is selected, the oauth_body_hash parameter will be calculated and added to the request."}),onChange:e=>{r(e,"includeBodyHash")}}),(0,k.jsx)(Da.Z,{isChecked:o("addEmptyParamsToSign"),label:(0,k.jsx)(c.Z,{text:"Add empty parameters to signature",infoText:"Some implementations of OAuth1.0 require empty parameters to be added to the signature. If this option is selected, any of the above fields which have been left empty will be included in the authorization data."}),onChange:e=>{r(e,"addEmptyParamsToSign")}}),o("addParamsToHeader")&&(0,k.jsx)(Da.Z,{isChecked:!o("disableHeaderEncoding")||!1,label:(0,k.jsx)(c.Z,{text:" Encode the parameters in the Authorization header"}),onChange:e=>{r(!e,"disableHeaderEncoding")}})]})]})}));let dn;const hn=o().div(dn||(dn=(e=>e)`
  flex: 0.65;
  padding: var(--spacing-m);
  overflow: auto;
  box-sizing: border-box;
`)),pn=(0,l.observer)((()=>{const e=s().useContext(yn),t=e.authState,a=U();if(a)return(0,k.jsx)(Aa,{description:`Support for ${(null==a?void 0:a.label)||"this auth method"} is coming soon.`});switch(t.activeAuthType){case"noauth":var n;return null==(n=e.authDescriptions)?void 0:n.noauth;case"bearer":return(0,k.jsx)(ee,{});case"basic":return(0,k.jsx)(ie,{});case"apikey":return(0,k.jsx)(ve,{});case"inherit":return(0,k.jsx)(wa,{});case"oauth2":return(0,k.jsx)(fa,{});case"awsv4":return(0,k.jsx)(Fa,{});case"oauth1":return(0,k.jsx)(cn,{});default:return(0,k.jsx)(G,{})}})),vn=()=>(0,k.jsx)(hn,{children:(0,k.jsx)(pn,{})});let kn;const mn=o().div(kn||(kn=(e=>e)`
  display: flex;
  min-height: 0;
  flex: 1;
  font-size: var(--text-size-m);
  color: var(--content-color-secondary);
  border-top: var(--border-width-default) var(--border-style-solid)
    var(--border-color-default);
`)),yn=s().createContext({}),fn=e=>(0,k.jsx)(yn.Provider,{value:e,children:(0,k.jsxs)(mn,{className:"auth-editor",role:"tabpanel",children:[(0,k.jsx)(L,{}),(0,k.jsx)(vn,{})]})}),bn=({model:e,modelId:t})=>e&&t?[e,t].join("/"):"",xn=e=>{const t=String(e).split("/");if(2!==t.length)return"";const[a,n]=t;return a&&n?{model:a,modelId:n}:""},gn=new Je.KVStorage("auth-session"),Tn=e=>gn.get(e),An=e=>{const t=bn(e);return Tn(t)},jn=e=>{const t=bn(e);return gn.has(t)},_n=(e,t)=>{const a=(n=t,JSON.parse(JSON.stringify(n)));var n;return gn.set(e,a)},wn=(e,t)=>{const a=bn(e);return _n(a,t)},Sn=e=>{const t=bn(e);return gn.remove(t)},Rn=(e,t)=>{const a=bn(e);return gn.subscribe(a,t)},Cn=()=>gn,Pn=async e=>{var t;const a=await Xe(e);if(a)return[{key:"accessToken",value:(null==(t=a.data)?void 0:t.token_key)===Ke?null==a?void 0:a.data[Ke]:null==a?void 0:a.data[Le]},{key:"tokenType",value:null==a?void 0:a.data.tokenType}]},qn=async e=>{var t;const a=bn(e),n=await Tn(a);if(!n)return;const s=null==(t=n.oauth2.find((e=>"token_id"===e.key)))?void 0:t.value;return{type:"oauth2",oauth2:await Pn(s)||[]}},Zn=async e=>{var t;const a=bn(e),n=await Tn(a);if(n)return null==(t=n.oauth2.find((e=>"token_id"===e.key)))?void 0:t.value},In=async e=>({type:"oauth2",oauth2:await Pn(e)||[]}),Un={id:"",type:"oauth2",oauth2:[]},On=e=>(0,Je.useKVStorage)(Cn(),bn(e)),En=({model:e,modelId:t})=>{const a=e&&t?bn({model:e,modelId:t}):"";return(0,Je.useKVStorage)(Cn(),a)}},38087:()=>{},74854:()=>{},66602:()=>{}}]);
//# sourceMappingURL=9825.7a03fd58389847c5.js.map