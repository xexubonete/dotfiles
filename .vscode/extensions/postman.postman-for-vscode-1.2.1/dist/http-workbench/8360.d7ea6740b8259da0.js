"use strict";(self.webpackChunkhttp_workbench=self.webpackChunkhttp_workbench||[]).push([[8360],{58360:(e,t,n)=>{n.r(t),n.d(t,{ResponsePreviewPanel:()=>A});var r=n(7560),o=n(40540),i=n.n(o),c=n(60398),s=n(50297),a=n(58560),l=n(98283),u=n(59530),d=n.n(u),h=n(35736),p=n(49437),f=n(63622),m=n(80605),v=n(80047),w=n(52322);const g=["title","loading","error","onRetry","src","srcDoc"];let y,b,j=e=>e;const x=d()(a.Z)(y||(y=j`
  /**
   * Since iframe content can have any background, we do not want Postman themes to affect
   * the visibility of content inside the iframe. Thus we are forcing the background to be light.
   */
  background-color: var(--grey-00);
  flex: 1;
`)),k=d().iframe(b||(b=j`
  width: 100%;
  height: 100%;
  border: 0;

  ${0};
`),(e=>e.hidden?"display: none":"")),Z="https://dl-preview-container.pstmn.io/iframe-viewer-container/v1",R=(e,t)=>{e&&(t&&t(),e.src="",e.src=Z)};function C(e,t){const{title:n,loading:i,error:c,onRetry:s,src:u,srcDoc:d}=e,y=(0,l.Z)(e,g),b=(0,o.useRef)(null),j=(0,o.useRef)(s);return j.current=s,(0,o.useEffect)((()=>{R(b.current,j.current)}),[u,d]),(0,w.jsxs)(x,{height:"100%",width:"100%",children:[i&&(0,w.jsx)(a.Z,{width:"100%",height:"100%",justifyContent:"center",children:(0,w.jsx)(h.Z,{description:"Loading"})}),c&&(0,w.jsx)(p.Z,{title:"Preview failed to load",description:(0,w.jsx)(f.ZP,{children:"That wasn't supposed to happen. Reload the preview or try again later."}),primaryAction:(0,w.jsx)(m.Z,{type:"primary",text:"Reload the preview",onClick:()=>R(b.current,j.current)}),children:(0,w.jsx)(v.Z,{name:"illustration-check-internet-connection"})}),(0,w.jsx)(k,(0,r.Z)({hidden:i||c,title:n,src:Z,ref:e=>{b.current=e,t&&("function"==typeof t?t(e):t.current=e)},allow:"fullscreen 'none'; payment 'none';",sandbox:"allow-forms allow-scripts"},y))]})}const P=i().forwardRef(C),T=`<meta http-equiv="Content-Security-Policy" content="${["default-src 'none'","script-src 'none'","style-src http: https: 'unsafe-inline'","img-src http: https: data:","font-src http: https:","connect-src http: https:","media-src http: https:","object-src 'none'","child-src 'none'","frame-src 'none'"].join("; ")}">`,S=(e,t,n)=>{var o,i;t.length>0&&n&&(null==(o=n.contentWindow)||o.postMessage((0,r.Z)({namespace:"containerFrame",id:e},"error"===(i=t)[0]?{type:"error",data:i[1]}:{type:"getContent",data:{type:i[0],value:i[1]}}),"*"))};function $(e){const{title:t,name:n,src:r,srcdoc:i}=e,[c,s]=(0,o.useState)(!0),[a,l]=(0,o.useState)(!1),u=(0,o.useRef)(null);return(0,o.useEffect)((()=>{let e=setTimeout((()=>l(!0)),5e3);function t(t){if(!t||!t.data||"containerFrame"!==t.data.namespace||t.data.id!==n)return;e&&clearTimeout(e),e=null,s(!1);const{type:o}=t.data;switch(o){case"getContent":{let e=null;i?e=["srcdoc",T+i]:r&&(e=["src",r]),e&&S(n,e,u.current);break}default:S(n,["error",`Invalid message type received: ${o}`],u.current)}}return window.addEventListener("message",t),()=>{e&&clearTimeout(e),window.removeEventListener("message",t)}}),[n,r,i]),r||i?(0,w.jsx)(P,{loading:c,error:a,title:t,name:n,ref:u,src:r,srcDoc:i,onRetry:()=>s(!0)}):null}var E=n(64019),D=n(59596);const L=(0,c.v4)(),A=(0,s.observer)((function(){const e=(()=>{var e,t;const[n,r]=(0,D.HX)(),[o]=(0,D.Ik)(),i=null!=(e=null==o?void 0:o.mimeType)?e:"plain",c=null!=(t=null==o?void 0:o.contentType)?t:"text/plain";if((0,E.n)(i)){const e=r?`data:${c};base64,${function(e){if(e instanceof Uint8Array){const t=[...e].map((e=>String.fromCodePoint(e))).join("");return globalThis.btoa(t)}return null}(r)}`:void 0;return{src:e}}return{srcdoc:null!=n?n:void 0}})();return(0,w.jsx)(a.Z,{height:"100%",children:(0,w.jsx)($,(0,r.Z)({title:"Preview",name:L},e))})}))}}]);
//# sourceMappingURL=8360.d7ea6740b8259da0.js.map