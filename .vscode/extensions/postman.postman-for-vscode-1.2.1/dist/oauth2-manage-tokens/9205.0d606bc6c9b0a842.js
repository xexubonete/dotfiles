"use strict";(self.webpackChunkoauth2_manage_tokens=self.webpackChunkoauth2_manage_tokens||[]).push([[9205],{29205:(e,n,t)=>{t.r(n),t.d(n,{default:()=>he});var r=t(7560),o=t(68367),a=t(39778),i=t(71534),s=t(34613),l=t(40505),c=t.n(l),d=t(59530),u=t.n(d),p=t(40540),g=t(21180),v=t(1765),f=t(76971);const x=(0,f.createCommand)();function m({onKeyPress:e}){const[n]=(0,v.useLexicalComposerContext)();return(0,p.useEffect)((()=>n.registerCommand(f.KEY_DOWN_COMMAND,(e=>(n.dispatchCommand(x,e),!1)),f.COMMAND_PRIORITY_LOW))),(0,p.useEffect)((()=>n.registerCommand(x,(n=>e(n)),f.COMMAND_PRIORITY_LOW)),[n,e]),null}function b(){const[e]=(0,v.useLexicalComposerContext)();return(0,p.useEffect)((()=>e.registerNodeTransform(f.LineBreakNode,(e=>{e.remove()}))),[e]),null}function h({onPaste:e}){const[n]=(0,v.useLexicalComposerContext)();return(0,p.useEffect)((()=>n.registerCommand(f.PASTE_COMMAND,(n=>(e(n),!1)),f.COMMAND_PRIORITY_LOW)),[n,e]),null}function y({onChange:e,value:n}){const[t]=(0,v.useLexicalComposerContext)();return(0,p.useEffect)((()=>t.registerTextContentListener((n=>{e(n)}))),[t,e]),(0,p.useEffect)((()=>{t.update((()=>{const e=(0,f.$getRoot)(),r=e.getTextContent();if(r===n||!r&&!n)return;const o=t.getRootElement()===document.activeElement;(0,f.$setSelection)(null);const a=e.getFirstChild(),i=(0,f.$createParagraphNode)(),s=(0,f.$createTextNode)(n);i.append(s),null==a||a.replace(i),o&&i.selectEnd()}))}),[t,n]),null}var C=t(21730),_=t.n(C),E=t(6443),w=t(19578),I=t(52322);const M=({domNode:e,value:n})=>{if(!e||!e.outerHTML)return null;e.className=n?"resolved-variable":"unresolved-variable";const t=(0,I.jsx)("span",{dangerouslySetInnerHTML:{__html:e.outerHTML}});return(0,I.jsx)(E.Z,{trigger:t,value:n})};class j extends f.TextNode{constructor(e,n,t){super(n,t),this.__variable=void 0,this.__variable=e}canInsertTextAfter(){return!1}createDOM(e){const n=super.createDOM(e),t=this.__variable,r=document.createElement("div"),o=(0,I.jsx)(w.ThemeContextProvider,{children:(0,I.jsx)(M,{value:t,domNode:n})});return _().render(o,r),r.firstChild}updateDOM(){return!0}}class k extends j{static getType(){return"unresolved-variable-node"}static clone(e){return new k(null,e.__text,e.__key)}}function N(e){return new k(null,e)}var O=t(98366);class T extends j{static getType(){return"resolved-variable-node"}static clone(e){return new T(e.__variable,e.__text,e.__key)}get variable(){return this.__variable}}function R(e,n){const t=(0,O.E0)(e,n);return new T(t,e)}function A(e,n){const t=(0,f.$createTextNode)(n);return e.replace(t),e.remove(),t}function L(e,n,t,r,o){const[a]=(0,v.useLexicalComposerContext)();(0,p.useEffect)((()=>{if(r.current)return a.registerNodeTransform(e,n);a.setEditable(!1);const o=a.registerNodeTransform(e,n);return requestAnimationFrame((()=>{a.setEditable(t)})),o}),[...o])}const D=(e,n,t)=>{L(f.TextNode,(n=>{n.getTextContent()&&function(e,n=[]){const t=e.getTextContent(),r=(0,O.rn)(t);let o=e;for(const e of r){var a;if(!o)return;const r=e.lastIndex-(t.length-(null==(a=o.__text)?void 0:a.length)||0);let s;if(r===e.name.length){const e=o.splitText(r);s=e[0],o=e[1]}else{var i;s=o.splitText(r-e.name.length)[1];const n=null==(i=s)?void 0:i.splitText(e.name.length);s=null==n?void 0:n[0],o=null==n?void 0:n[1]}if(!s)return;const l=(0,O.Q0)(e.name,n)?R(e.name,n):N(e.name);s.replace(l),s.remove()}}(n,e)}),t.isEditable,t.isEditorInFocus,[e])};function S(e,n){if(typeof e!=typeof n)return!1;const t=typeof e;return["string","number","boolean","undefined"].includes(typeof e)?e===n:Array.isArray(e)&&Array.isArray(n)?e.length===n.length&&e.every(((e,t)=>S(e,n[t]))):"object"===t&&(null===e&&null===n||null!==e&&null!==n&&!Array.isArray(e)&&!Array.isArray(n)&&Object.keys(e).length===Object.keys(n).length&&Object.keys(e).every((t=>S(e[t],n[t]))))}const P=(e,n,t)=>{L(T,(n=>{const t=n.getTextContent();if((0,O.CS)(t,e))!function(e,n){const t=N(n);e.replace(t),e.remove()}(n,t);else if((0,O.yG)(t)){if(!S((0,O.E0)(t,e),n.variable)){const r=R(t,e);n.replace(r)}}else A(n,t)}),t.isEditable,t.isEditorInFocus,[e])},F=(e,n,t)=>{L(k,(n=>{const t=n.getTextContent();(0,O.Q0)(t,e)?function(e,n,t){const r=R(n,t);e.replace(r),e.remove()}(n,t,e):(0,O.yG)(t)||A(n,t)}),t.isEditable,t.isEditorInFocus,[e])};var H=t(76802);function z({variables:e,isEditable:n,autofocus:t=!1}){const[r]=(0,v.useLexicalComposerContext)(),[o]=function(e,n){const t=(0,p.useRef)(n);return(0,p.useEffect)((()=>(0,H.mergeRegister)(e.registerCommand(f.FOCUS_COMMAND,(()=>(t.current=!0,!1)),f.COMMAND_PRIORITY_HIGH),e.registerCommand(f.BLUR_COMMAND,(()=>(t.current=!1,!1)),f.COMMAND_PRIORITY_HIGH))),[e]),[t]}(r,null!=t&&t);return D(e,r,{isEditable:n,isEditorInFocus:o}),P(e,r,{isEditable:n,isEditorInFocus:o}),F(e,r,{isEditable:n,isEditorInFocus:o}),null}var Y=t(10892),V=t(20856),W=t(95362),K=t(70262),G=t(98276);const $=(0,p.forwardRef)((({name:e,scope:n,type:t,onClick:r,onMouseEnter:o,isSelected:a,toggleMaskValue:i,isMasked:s},l)=>(0,I.jsxs)(q,{onMouseEnter:o,isSelected:a,ref:l,role:"option","aria-label":e,"aria-selected":a,onMouseDown:e=>{null==r||r(),e.preventDefault()},children:[(0,I.jsx)(Q,{scope:n,"aria-label":`scope: ${n}`,role:"presentation",children:n[0].toUpperCase()}),(0,I.jsxs)(B,{children:[(0,I.jsx)(Z,{"aria-label":`key: ${e}`,role:"presentation",children:e}),t===G.SECRET&&(0,I.jsx)(U,{onMouseDown:e=>{i(),e.stopPropagation()},onMouseLeave:()=>{i(!0)},children:s?(0,I.jsx)(W.Z,{}):(0,I.jsx)(K.Z,{})})]})]}))),B=u().div.withConfig({displayName:"suggestion-menu-variable-tile__VariableKeyWrapper",componentId:"sc-12lghp2-0"})(["flex:auto;overflow:hidden;text-overflow:ellipsis;display:flex;"]),U=u().div.withConfig({displayName:"suggestion-menu-variable-tile__SecretIconContainer",componentId:"sc-12lghp2-1"})(["display:flex;margin-left:auto;margin-right:var(--spacing-xs);align-items:center;"]),Z=u().div.withConfig({displayName:"suggestion-menu-variable-tile__VariableName",componentId:"sc-12lghp2-2"})(["color:var(--content-color-primary);margin-left:var(--spacing-s);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:11px;font-weight:var(--text-weight-medium);"]),q=u().div.withConfig({displayName:"suggestion-menu-variable-tile__VariableTileWrapper",componentId:"sc-12lghp2-3"})(["display:flex;padding:5px;border-bottom:1px solid var(--border-color-default);justify-content:flex-start;background-color:",";min-height:var(--text-size-l);cursor:pointer;align-items:center;"],(e=>e.isSelected?"var(--highlight-background-color-secondary)":"transparent")),Q=u().div.withConfig({displayName:"suggestion-menu-variable-tile__ScopeFirstLetter",componentId:"sc-12lghp2-4"})(["display:inline-flex;height:17px;width:17px;justify-content:center;border-radius:1px;flex:none;text-align:center;line-height:17px;color:var(--content-color-constant);font-weight:var(--text-weight-m);font-size:var(--text-size-m);background-color:",";"],(e=>{switch(e.scope){case"globals":return"var(--base-color-info)";case"collection":return"var(--base-color-warning)";case"environment":return"var(--base-color-success)";default:return""}})),J=$;function X({label:e,value:n,isMasked:t,isOverridden:r}){if(!1===n)return null;const o="string"==typeof n&&t?"*".repeat(n.length):n;return(0,I.jsxs)(ee,{children:[(0,I.jsx)(ne,{children:e}),(0,I.jsx)(te,{isOverridden:r,children:"string"==typeof n?o:n})]})}const ee=u().div.withConfig({displayName:"suggestion-menu-value-tile__ValueTileWrapper",componentId:"sc-120pa9u-0"})(["display:flex;margin:var(--spacing-xs);"]),ne=u().div.withConfig({displayName:"suggestion-menu-value-tile__LabelTile",componentId:"sc-120pa9u-1"})(["flex:0.3;margin-right:var(--spacing-xs);color:var(--content-color-secondary);"]),te=u().div.withConfig({displayName:"suggestion-menu-value-tile__LabelValue",componentId:"sc-120pa9u-2"})(["flex:0.7;margin:0 var(--spacing-xs);overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;",";"],(({isOverridden:e})=>e&&"text-decoration: line-through;")),re=({variable:e})=>{const{scope:n,overriddenBy:t}=e;if(!t)return null;const r={globals:"global",collection:"collection",environment:"environment"},o=r[n],a=r[t.scope];return t.scope===n?(0,I.jsxs)(se,{children:["The value is overridden because duplicates of this variable are active in the ",a,". You can enable or disable variables on the ",a," page."]}):(0,I.jsxs)(se,{children:["This variable exists in both ",a," and ",o," ","scopes. ",(0,I.jsx)("span",{style:{textTransform:"capitalize"},children:a})," variables overwrite ",o," variables."]})},oe=({item:e,isMasked:n})=>{if(!e)return(0,I.jsx)(ae,{});const t={globals:"Global",collection:"Collection",environment:"Environment"}[e.variable.scope],r=Boolean(e.variable.overriddenBy);return(0,I.jsxs)(ae,{children:["dynamic"===e.variable.type?(0,I.jsx)(X,{label:"VALUE",value:(0,O.Fn)(e.variable.description)}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(X,{label:"INITIAL",value:(0,O.Fn)(e.variable.value),isMasked:e.variable.type===G.SECRET&&n,isOverridden:r}),(0,I.jsx)(X,{label:"CURRENT",value:(0,O.Fn)(e.variable.sessionValue),isMasked:e.variable.type===G.SECRET&&n,isOverridden:r})]}),r&&(0,I.jsx)(X,{label:"",value:(0,I.jsx)(ie,{children:"OVERRIDDEN"})}),(0,I.jsx)(X,{label:"SCOPE",value:t}),r&&(0,I.jsx)(re,{variable:e.variable})]})},ae=u().div.withConfig({displayName:"suggestion-menu-variable-detail__DetailWrapper",componentId:"sc-ns37kh-0"})(["flex:0.6;height:100%;padding:0 var(--spacing-xs);overflow:hidden auto;box-sizing:border-box;display:flex;flex-direction:column;font-size:var(--text-size-xs);color:var(--content-color-primary);text-align:left;"]),ie=u().div.withConfig({displayName:"suggestion-menu-variable-detail__OverriddenLabel",componentId:"sc-ns37kh-1"})(["background:var(--base-color-warning);border-radius:2px;padding:1px 2px;color:var(--content-color-constant);width:fit-content;font-size:var(--text-size-xs);line-height:12px;"]),se=u().div.withConfig({displayName:"suggestion-menu-variable-detail__OverrideDescriptionWrapper",componentId:"sc-ns37kh-2"})(["font-size:var(--text-size-xs);padding:var(--spacing-xs);border-top:1px solid var(--border-color-default);color:var(--content-color-secondary);margin-top:var(--spacing-s);line-height:var(--line-height-s);"]);class le extends Y.MenuOption{constructor(e,n){super(e),this.variable=void 0,this.variable=(0,r.Z)({},n,{sessionValue:(0,O.Fn)(n.sessionValue),value:(0,O.Fn)(n.value),key:(0,O.Fn)(n.key)})}}function ce(e){const n=e.lastIndexOf("{{");return-1==n?null:{leadOffset:n,matchingString:e.slice(n+2,e.length),replaceableString:e.slice(n,e.length)}}function de({variables:e,onEnter:n}){const[t]=(0,v.useLexicalComposerContext)(),[r,o]=(0,p.useState)(null);(0,p.useEffect)((()=>t.registerCommand(f.KEY_ENTER_COMMAND,(()=>null===r&&(n(),!1)),f.COMMAND_PRIORITY_HIGH)),[r,t,n]),(0,p.useEffect)((()=>t.registerCommand(x,(e=>!(null===r||!["ArrowDown","ArrowUp","Tab","Enter"].includes(e.key))),f.COMMAND_PRIORITY_HIGH)),[t,r]);const a=e.map((e=>new le(e.id,e))),[i,s]=(0,p.useState)(a);return(0,p.useEffect)((()=>{const n=e.filter((e=>{const n=(0,O.Fn)(e.key).toLowerCase();return!r||n.includes(r.toLowerCase())})).map(((e,n)=>new le(String(n),e)));s(n)}),[r,e]),(0,I.jsx)(Y.LexicalTypeaheadMenuPlugin,{onSelectOption:(e,n,r)=>{t.update((()=>{const t=(0,f.$createTextNode)(`{{${(0,O.Fn)(e.variable.key)}}}`);null==n||n.replace(t),t.select(),r(),o(null)}))},onQueryChange:o,menuRenderFn:(e,n)=>{const[t,r]=(0,p.useState)(!0),[o,a]=(0,p.useState)(!0);if(!e.current)return null;const i=n.options;if(0===i.length)return null;const s="number"==typeof n.selectedIndex?i[n.selectedIndex]:void 0;return(0,I.jsx)(V.ZP,{isOpen:t,onClickOutside:()=>r(!1),placement:"bottom-start",triggerRef:e.current,padding:"var(--spacing-s)",maxWidth:"initial",children:(0,I.jsxs)(ue,{id:"variable-suggestions","aria-label":"variable suggestions",role:"listbox",children:[(0,I.jsx)(pe,{children:i.map(((e,t)=>(0,I.jsx)(J,{ref:e.ref,onClick:()=>{n.selectOptionAndCleanUp(e)},onMouseEnter:()=>{n.setHighlightedIndex(t)},isSelected:n.selectedIndex===t,scope:e.variable.scope,name:e.variable.key,type:e.variable.type,toggleMaskValue:e=>a("boolean"==typeof e?e:!o),isMasked:n.selectedIndex!==t||o},e.key)))}),(0,I.jsx)(oe,{item:s,isMasked:o})]})})},options:i,triggerFn:ce})}const ue=u().div.withConfig({displayName:"variable-suggestion-plugin__StyledWrapper",componentId:"sc-1b8nnqb-0"})(["border-radius:var(--border-radius-default);height:196px;width:386px;box-shadow:0 1px 4px 0 rgb(0 0 0 / 37%);background-color:var(--background-color-primary);display:flex;flex-direction:row;"]),pe=u().div.withConfig({displayName:"variable-suggestion-plugin__LeftSideWrapper",componentId:"sc-1b8nnqb-1"})(["flex:0.4;height:100%;box-sizing:border-box;overflow:hidden auto;display:flex;flex-direction:column;border-right:var(--border-width-default) solid var(--border-color-default);font-family:var(--font-family-default);"]),ge=(e,n)=>{(0,p.useEffect)((()=>{if(n)return(0,H.mergeRegister)(e.registerCommand(f.BLUR_COMMAND,(()=>(n(!1),!1)),f.COMMAND_PRIORITY_HIGH),e.registerCommand(f.CLICK_COMMAND,(()=>(n(!0),!1)),f.COMMAND_PRIORITY_HIGH),e.registerCommand(f.KEY_DOWN_COMMAND,(e=>1===e.key.length?(n(!0),!1):!(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey||("Escape"===e.key?(n(!1),1):"Backspace"!==e.key||(n(!0),1)))),f.COMMAND_PRIORITY_HIGH))}),[e,n])};function ve({onHardFocus:e}){const[n]=(0,v.useLexicalComposerContext)();return ge(n,e),null}function fe({autofocus:e=!1}){const[n]=(0,v.useLexicalComposerContext)();return(0,p.useEffect)((()=>{e&&n.focus()}),[n]),null}const xe={namespace:"editor",theme:{paragraph:"editor-paragraph",root:"editor-root"},onError(e){throw e},nodes:[T,k]};function me(){return(0,I.jsx)(c(),{onError:e=>{(0,g.logError)(e,{stack:void 0,appId:"variable-suggestions",crash:!0,errorElementId:"postman-input"})},children:(0,I.jsx)("div",{children:"Snap! something went wrong"})})}function be(e){var n;const t=(0,r.Z)({},xe,{editable:e.isEditable}),i=null==(n=(0,G.useActiveAndDynamicVariables)())?void 0:n.data;return(0,I.jsxs)(o.LexicalComposer,{initialConfig:t,children:[(0,I.jsxs)(Ee,{children:[(0,I.jsx)(a.PlainTextPlugin,{contentEditable:(0,I.jsx)(Ce,{className:"content-editable",ariaLabel:e.ariaLabel,"data-testid":e.dataTestId,isEditable:e.isEditable}),placeholder:(0,I.jsx)(ye,{text:e.placeholder}),ErrorBoundary:me}),(0,I.jsx)(s.HistoryPlugin,{}),(0,I.jsx)(y,{onChange:n=>e.onChange(n),value:e.value}),e.allowEnter?null:(0,I.jsx)(b,{}),e.onHardFocus&&(0,I.jsx)(ve,{onHardFocus:e.onHardFocus}),(0,I.jsx)(m,{onKeyPress:e.onKeyDown}),(0,I.jsx)(h,{onPaste:e.onPaste}),(0,I.jsx)(fe,{autofocus:e.autofocus})]}),(0,I.jsx)(z,{variables:i||[],isEditable:e.isEditable,autofocus:e.autofocus}),(0,I.jsx)(de,{variables:i||[],onEnter:e.onEnter})]})}const he=(0,p.memo)(be);function ye({text:e}){return(0,I.jsx)(_e,{className:"placeholder",children:e})}const Ce=u()(i.ContentEditable).withConfig({displayName:"lexical-component__StyledEditorInput",componentId:"sc-1p50xnu-0"})(["position:absolute;top:var(--spacing-zero);left:var(--spacing-zero);width:100%;background-color:",";color:var(--content-color-primary);outline:none;margin-top:auto;font-size:var(--font-size-default);display:flex;align-items:center;overflow:auto;line-height:1.5;.editor-paragraph{width:100%;margin:var(--spacing-zero);}:focus{z-index:10;}:focus .editor-paragraph{padding:0 var(--spacing-s);}:not(:focus) .editor-paragraph{text-overflow:ellipsis;overflow:hidden;white-space:nowrap !important;}.variable{color:var(--base-color-brand);text-decoration:none;&:hover{opacity:0.7;}}.unresolved-variable{color:var(--content-color-error);background:var(--background-color-error);padding:2px;}.resolved-variable{color:var(--base-color-brand);text-decoration:none;padding:2px;}"],(e=>e.isEditable?"var(--background-color-primary)":"var(--background-color-secondary)")),_e=u().div.withConfig({displayName:"lexical-component__StyledPlaceholder",componentId:"sc-1p50xnu-1"})(["position:relative;display:flex;align-items:center;padding:0 var(--spacing-s);top:0;left:0;z-index:20;user-select:none;pointer-events:none;height:100%;color:var(--content-color-tertiary);line-height:1.5;"]),Ee=u().div.withConfig({displayName:"lexical-component__StyledEditorContainer",componentId:"sc-1p50xnu-2"})(["background-color:var(--background-color-primary);position:relative;font-size:var(--font-size-default);width:100%;"])}}]);
//# sourceMappingURL=9205.0d606bc6c9b0a842.js.map