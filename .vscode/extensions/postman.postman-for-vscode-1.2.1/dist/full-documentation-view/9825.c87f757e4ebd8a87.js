(self.webpackChunkfull_documentation_view=self.webpackChunkfull_documentation_view||[]).push([[9825],{99951:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ACCESS_TOKENS_KEY:()=>qe,AUTH_OPTIONS:()=>b,AuthPanel:()=>ka,OAuth2TokenFetcher:()=>rt,SHARED_OAUTH2_TOKEN_ID:()=>A,composeAuthSessionId:()=>ya,decomposeAuthSessionId:()=>fa,defaultAuthSession:()=>qa,getAllOAuth2AccessTokens:()=>Oe,getAuthSession:()=>xa,getAuthSessionById:()=>ba,getOAuth2AccessToken:()=>Ze,getStorage:()=>Ca,getTokenIdForAuthSession:()=>Pa,getTokenStorage:()=>He,getTokenValuesForAuthSession:()=>Ra,getTokenValuesForTokenId:()=>Ia,hasAuthSession:()=>_a,initialAuthState:()=>x,isTokenAutoRefreshable:()=>Qe,isTokenExpired:()=>Ge,removeOAuth2AccessToken:()=>Ne,removeSession:()=>wa,setAuthSession:()=>Aa,setAuthSessionById:()=>Ta,setOAuth2AccessToken:()=>Ue,subscribeToAuthSession:()=>ja,subscribeToOAuth2AccessTokens:()=>ze,supportedAuthOptions:()=>_,updateOAuth2Token:()=>Ee,useAuthSession:()=>Za,useAuthSessionSafe:()=>Oa,useOAuth2Tokens:()=>ot});var n=a(540540),s=a.n(n),r=a(159530),o=a.n(r),i=a(607560),l=a(250297),u=a(458560),d=a(337110),c=a(34967),h=a(864382),p=a(963622),m=a(988131),v=a(552322);const k=o()(c.Z).withConfig({displayName:"components__Input",componentId:"sc-jxbkzv-0"})(["&:not(:focus){border-color:var(--border-color-default);background-color:var(--background-color-secondary);}"]),y=({name:e,label:t,onChange:a,value:n,type:s="text"})=>(0,m.usePostmanInputFeatureFlag)()?(0,v.jsx)(m.AuthInput,{onChange:t=>{a(t,e)},suggestions:[],value:n,placeholder:t,ariaLabel:t,dataTestId:`${e}-input`}):(0,v.jsx)(k,{onChange:t=>{a(t.target.value,e)},name:e,value:n,placeholder:t,type:s,"data-testid":`${e}-input`}),f=o()(h.Z).withConfig({displayName:"components__Select",componentId:"sc-jxbkzv-1"})([".aether-dropdown__control:not(:focus){border-color:var(--border-color-default);background-color:var(--background-color-secondary);}.aether-dropdown__control .aether-dropdown__single-value{color:var(--content-color-secondary);font-weight:600;font-size:var(--text-size-s);}"]),g=o()(p.ZP).withConfig({displayName:"components__Label",componentId:"sc-jxbkzv-2"})(["color:var(--content-color-primary);"]),b={apikey:"apikey",basic:"basic",bearer:"bearer",noauth:"noauth",inherit:"inherit"},x={noauth:[],apikey:[],bearer:[],basic:[],inherit:null,oauth2:[{key:"addTokenTo",value:"header"}],awsv4:[],oauth1:[{key:"signatureMethod",value:"HMAC-SHA1"},{key:"version",value:"1.0"},{key:"addParamsToHeader",value:!1},{key:"addEmptyParamsToSign",value:!1}]},_=[{label:"Inherit auth from parent",value:"inherit"},{label:"No Auth",value:"noauth"},{label:"API Key",value:"apikey"},{label:"Basic Auth",value:"basic"},{label:"Bearer Token",value:"bearer"},{label:"OAuth 2.0",value:"oauth2"},{label:"AWS Signature",value:"awsv4"},{label:"OAuth 1.0",value:"oauth1"}],T=[{label:"JWT Bearer",value:"jwt"},{label:"Digest Auth",value:"digest"},{label:"Hawk Authentication",value:"hawk"},{label:"NTLM Authentication [Beta]",value:"ntlm"},{label:"Akamai EdgeGrid",value:"edgegrid"}],A="shared-token";var w=a(339245),j=a(71453);const C=o()(w.Link).withConfig({displayName:"authorization-desc-link__AuthorizationLink",componentId:"sc-189u5l5-0"})(["display:inline-flex;align-items:center;text-decoration:underline;color:var(--content-color-secondary);"]),S=()=>(0,v.jsxs)(C,{type:"link-default",to:"https://go.pstmn.io/docs-auth",target:"_blank",rel:"noopener noreferer",children:["authorization",(0,v.jsx)(j.Z,{})]}),R=()=>{const e=(0,n.useContext)(va).authState;return(0,n.useMemo)((()=>T.find((t=>t.value===e.activeAuthType))),[e])},P=()=>{const e=s().useContext(va).disabledAuthTypes;return _.filter((t=>!(null!=e&&e.includes(t.value))))},I=o().div.withConfig({displayName:"auth-type-selector__AuthTypeSection",componentId:"sc-lvj2yu-0"})(["flex:0.35;padding:var(--spacing-m);border-right:var(--border-width-default) var(--border-style-solid) var(--border-color-default);height:100%;box-sizing:border-box;"]),q=o()(u.Z).withConfig({displayName:"auth-type-selector__AuthTypeWrapper",componentId:"sc-lvj2yu-1"})(["align-items:center;padding:var(--spacing-s) var(--spacing-zero);flex-wrap:wrap;"]),Z=o().div.withConfig({displayName:"auth-type-selector__AuthFlexContentWrapper",componentId:"sc-lvj2yu-2"})(["flex:1;"]),O=o().div.withConfig({displayName:"auth-type-selector__AutoAuthTypeDescription",componentId:"sc-lvj2yu-3"})(["padding:var(--spacing-s) var(--spacing-zero);"]),U=(0,l.observer)((()=>{const e=s().useContext(va),t=e.authState,a=e.setAuthState,n=P(),r=R();return(0,v.jsxs)(I,{"data-testid":"auth-type-selector",children:[(0,v.jsxs)(q,{children:[(0,v.jsx)(Z,{children:(0,v.jsx)(d.Z,{text:"Type",htmlFor:"auth-type-selector-dropdown"})}),(0,v.jsx)(Z,{children:(0,v.jsx)(f,{onChange:({value:e})=>{a((0,i.Z)({},t,{activeAuthType:e}))},options:n,value:n.find((e=>e.value===t.activeAuthType)),id:"auth-type-selector-dropdown",isSearchable:!1,isClearable:!1,viaPortal:!0,placeholder:r?r.label:""})})]}),"noauth"!==t.activeAuthType&&(0,v.jsxs)(O,{children:["The authorization header will be automatically generated when you send the request. Learn more about"," ",(0,v.jsx)(S,{})]})]})})),N=o()(u.Z).withConfig({displayName:"default__DefaultAuthModeContainer",componentId:"sc-1t90ldu-0"})(["width:100%;height:100%;align-items:center;justify-content:center;"]),E=()=>(0,v.jsx)(N,{children:"This request is not inheriting any authorization helper at the moment."}),z=o()(u.Z).withConfig({displayName:"bearer__BearerTokenAuthWrapper",componentId:"sc-rh1mkt-0"})(["align-items:center;padding-top:var(--spacing-s);max-width:500px;"]),H=o().div.withConfig({displayName:"bearer__BearerTokenAuthContentWrapper",componentId:"sc-rh1mkt-1"})(["flex:1;"]),F=(0,l.observer)((()=>{const e=s().useContext(va),t=e.authState,a=e.setAuthState,r=(0,n.useCallback)((e=>{if(!e)return a((0,i.Z)({},t,{bearer:[]}));a((0,i.Z)({},t,{bearer:[{key:"token",value:e}]}))}),[t,a]),o=(0,n.useMemo)((()=>{var e;return(null==(e=t.bearer)||null==(e=e.find((e=>"token"===e.key)))?void 0:e.value)||""}),[t]);return(0,v.jsxs)(z,{"data-testid":"bearer-auth",children:[(0,v.jsx)(H,{children:(0,v.jsx)(g,{children:"Token"})}),(0,v.jsx)(H,{children:(0,v.jsx)(y,{name:"token",label:"token",value:o,onChange:r})})]})})),V=o()(u.Z).withConfig({displayName:"basic__BasicAuthWrapper",componentId:"sc-a7izfe-0"})(["align-items:center;padding-top:var(--spacing-s);max-width:500px;"]),D=o().div.withConfig({displayName:"basic__BasicAuthContentWrapper",componentId:"sc-a7izfe-1"})(["flex:1;"]),B=[{key:"username",label:"Username",type:"text"},{key:"password",label:"Password",type:"password"}],L=(0,l.observer)((()=>{const e=s().useContext(va),t=e.authState,a=e.setAuthState,r=(0,n.useCallback)(((e,n)=>{var s;if(!e)return a((0,i.Z)({},t,{basic:(null==(s=t.basic)?void 0:s.filter((e=>e.key!==n)))||null}));const r=[...t.basic||[]],o=r.findIndex((e=>e.key===n));if(-1===o)return a((0,i.Z)({},t,{basic:[...t.basic||[],{key:n,value:e}]}));r[o].value=e,a((0,i.Z)({},t,{basic:r}))}),[t,a]),o=e=>{var a;return(null==(a=t.basic)||null==(a=a.find((t=>t.key===e)))?void 0:a.value)||""};return(0,v.jsx)(v.Fragment,{children:B.map((({key:e,label:t,type:a})=>(0,v.jsxs)(V,{"data-testid":"basic-input",children:[(0,v.jsx)(D,{children:(0,v.jsx)(g,{children:t})}),(0,v.jsx)(D,{children:(0,v.jsx)(y,{name:e,label:t,value:o(e),onChange:r,type:a})})]},e)))})})),K=o()(u.Z).withConfig({displayName:"api-key__APIKeyAuthWrapper",componentId:"sc-6hvh8k-0"})(["align-items:center;padding-top:var(--spacing-s);max-width:500px;"]),W=o().div.withConfig({displayName:"api-key__APIKeyAuthContentWrapper",componentId:"sc-6hvh8k-1"})(["flex:1;"]),M=[{key:"key",label:"Key"},{key:"value",label:"Value"},{key:"in",label:"Add To",type:"select",options:[{label:"Headers",value:""},{label:"Query Params",value:"query"}]}],$=(0,l.observer)((()=>{const e=s().useContext(va),t=e.authState,a=e.setAuthState,r=(0,n.useCallback)(((e,n)=>{var s;if(!e)return a((0,i.Z)({},t,{apikey:(null==(s=t.apikey)?void 0:s.filter((e=>e.key!==n)))||null}));const r=[...t.apikey||[]],o=r.findIndex((e=>e.key===n));if(-1===o)return a((0,i.Z)({},t,{apikey:[...t.apikey||[],{key:n,value:e}]}));r[o].value=e,a((0,i.Z)({},t,{apikey:r}))}),[t,a]),o=(0,n.useCallback)((e=>{var n;return e.value?a((0,i.Z)({},t,{apikey:[...t.apikey||[],{key:"in",value:e.value}]})):a((0,i.Z)({},t,{apikey:(null==(n=t.apikey)?void 0:n.filter((e=>"in"!==e.key)))||null}))}),[t,a]),l=e=>{var a;return(null==(a=t.apikey)||null==(a=a.find((t=>t.key===e)))?void 0:a.value)||""};return(0,v.jsx)(v.Fragment,{children:M.map((({key:e,label:a,type:n,options:s})=>{return(0,v.jsxs)(K,{"data-testid":"apikey-input",children:[(0,v.jsx)(W,{children:(0,v.jsx)(g,{children:a})}),(0,v.jsx)(W,{children:"select"===n&&null!=s&&s.length?(0,v.jsx)(f,{isClearable:!1,options:s,value:(null==(i=t.apikey)?void 0:i.find((e=>"in"===e.key)))?{label:"Query Params",value:"query"}:{label:"Headers",value:""},onChange:o,name:e,"aria-label":"add auth to",viaPortal:!0}):(0,v.jsx)(y,{name:e,label:a,value:l(e),onChange:r})})]},e);var i}))})}));var G=a(474962),J=a(925637),Q=a(201078),Y=a(981397),X=a(31987),ee=a(538163),te=a(80605),ae=a(498244),ne=a(926663),se=a.n(ne),re=a(226246),oe=a(991500),ie=a.n(oe),le=a(960398),ue=a(584452),de=a(221466),ce=a(405634);const he="authorization_code",pe="authorization_code_with_pkce",me="implicit",ve={authorization_code:"Authorization Code",authorization_code_with_pkce:"Authorization Code (With PKCE)",implicit:"Implicit",password_credentials:"Password Credentials",client_credentials:"Client Credentials"},ke={S256:"SHA-256",plain:"Plain"},ye={header:"Send as Basic Auth header",body:"Send client credentials in body"},fe="request_url",ge="request_body",be="request_header",xe={[ge]:"Request Body",[fe]:"Request URL",[be]:"Request Headers"},_e={grant_type:ve,client_authentication:ye,challengeAlgorithm:ke},Te={header:"Request Headers",queryParams:"Request URL"},Ae="id_token",we="access_token",je={[we]:"Access token",[Ae]:"ID token"},Ce={accessTokenUrl:"",refreshTokenUrl:"",refreshToken:"",client_authentication:"header",authUrl:"",clientId:"",clientSecret:"",grant_type:"authorization_code",password:"",redirect_uri:se().OAUTH2_CALLBACK_URL,scope:"",state:"",username:"",challengeAlgorithm:"S256",code_verifier:"",name:"Untitled Token",authRequestParams:[],tokenRequestParams:[],refreshRequestParams:[],addTokenTo:"header"},Se=[{key:"tokenName",label:"Token Name"},{key:"grant_type",label:"Grant Type",type:"select",options:Object.keys(ve).map((e=>({label:ve[e],value:e})))},{key:"redirect_uri",label:"Callback URL",disabled:!0},{key:"authUrl",label:"Auth URL"},{key:"accessTokenUrl",label:"Access Token URL"},{key:"clientId",label:"Client ID"},{key:"clientSecret",label:"Client Secret"},{key:"username",label:"Username"},{key:"password",label:"Password"},{key:"challengeAlgorithm",label:"Code Challenge Method",type:"select",options:Object.keys(ke).map((e=>({label:ke[e],value:e})))},{key:"code_verifier",label:"Code Verifier"},{key:"scope",label:"Scope"},{key:"state",label:"State"},{key:"client_authentication",label:"Client Authentication",type:"select",options:Object.keys(ye).map((e=>({label:ye[e],value:e})))}],Re={authorization_code:new Set(["tokenName","grant_type","redirect_uri","authUrl","accessTokenUrl","clientId","clientSecret","scope","state","client_authentication"]),authorization_code_with_pkce:new Set(["tokenName","grant_type","redirect_uri","authUrl","accessTokenUrl","clientId","clientSecret","challengeAlgorithm","code_verifier","scope","state","client_authentication"]),implicit:new Set(["tokenName","grant_type","redirect_uri","authUrl","clientId","scope","state","client_authentication"]),password_credentials:new Set(["tokenName","grant_type","accessTokenUrl","clientId","clientSecret","username","password","scope","client_authentication"]),client_credentials:new Set(["tokenName","grant_type","accessTokenUrl","clientId","clientSecret","scope","client_authentication"])};var Pe=a(429875);const Ie=new Pe.KVStorage("oauth2-access-tokens"),qe="access-tokens",Ze=async e=>{const t=await Ie.get(qe);return t?t[e]:null},Oe=async()=>await Ie.get(qe)||{},Ue=async(e,t)=>{const a=(n=t,JSON.parse(JSON.stringify(n)));var n;let s=await Ie.get(qe);return s||(s={}),s[e]=a,Ie.set(qe,s)},Ne=async e=>{let t=await Ie.get(qe);return t||(t={}),delete t[e],Ie.set(qe,t)},Ee=async(e,t)=>{const a=await Ie.get(qe);if(!a||a&&!a[e])return;const n=(0,i.Z)({},a[e].data,t.data),s=(0,i.Z)({},a[e],t);s.data=n,await Ue(e,s)},ze=e=>Ie.subscribe(qe,e),He=()=>Ie,Fe=(e,t)=>{const a=[];for(const n of e)if(n){const e={key:n.key,value:n.value,enabled:n.enabled,send_as:t};n.options&&(e.send_as=n.options.value),a.push(e)}return a};function Ve(e){const t=[];for(const a of e)if(a){const e={key:a.key,value:a.value,type:"text",enabled:a.enabled};a.send_as&&(e.options={value:a.send_as,label:xe[a.send_as]}),t.push(e)}return t}function De(e,t){if(!e||!Array.isArray(e))return;const a=e.find((e=>(null==e?void 0:e.key)===t&&!0===(null==e?void 0:e.enabled)));return null==a?void 0:a.value}function Be(e,t){let a=t;for(const t of e)t.enabled&&(a=`${a}${a.includes("?")?"&":"?"}${t.key}=${t.value}`);return a}function Le(e,t){for(const a of e)if(a.enabled)switch(a.send_as){case fe:t.url=Be([a],t.url);break;case be:if(!a.key)continue;t.headerData.push({key:a.key,value:a.value,enabled:!0,type:"text"});break;default:t.data.push({key:a.key,value:a.value,enabled:!0,type:"text"})}return t}var Ke=a(298276),We=a(977986);const Me=e=>{var t;const a=null==e?void 0:e.timestamp,n=null==e||null==(t=e.data)?void 0:t.expires_in;if(a&&n)return Number(a)+1e3*Number(n)},$e=e=>e?{refresh_token:e.data.refresh_token||"",accessTokenUrl:e.data.accessTokenUrl||"",refreshTokenUrl:e.data.refreshTokenUrl||"",clientId:e.data.clientId||"",clientSecret:e.data.clientSecret||"",refreshRequestParams:e.data.refreshRequestParams||""}:null,Ge=(e,t)=>{if(!e)return!1;t||(t=0);const a=Me(e);return!!a&&a<Date.now()+1e3*t},Je=e=>{if(!e)return!1;const t=$e(e);return(null==t?void 0:t.refresh_token)&&((null==t?void 0:t.refreshTokenUrl)||(null==t?void 0:t.accessTokenUrl))},Qe=e=>!!e&&Ge(e,59)&&(null==e?void 0:e.isTokenAutoRefreshEnabled)&&Je(e),Ye=e=>{let t=e.toString("base64");return t=t.split("=")[0],t=t.replace(/\+/g,"-"),t=t.replace(/\//g,"_"),t},Xe=e=>{for(const t of Object.keys(Ce))e[t]||(e[t]=ie()(Ce[t]));const{tokenName:t,grant_type:a,authUrl:n,accessTokenUrl:s,refreshTokenUrl:r,refresh_token:o,client_authentication:i,clientId:l,clientSecret:u,redirect_uri:d,scope:c,state:h,username:p,password:m,challengeAlgorithm:v,code_verifier:k,authRequestParams:y,tokenRequestParams:f,refreshRequestParams:g}=e;return{tokenName:t,grant_type:a,authUrl:n,accessTokenUrl:s,refreshTokenUrl:r,refreshToken:o,client_authentication:i,clientId:l,clientSecret:u,redirect_uri:d,scope:c,state:h,username:p,password:m,challengeAlgorithm:v,code_verifier:k,authRequestParams:y,tokenRequestParams:f,refreshRequestParams:g}},et=new Set(["iso-2022-cn","iso-2022-cn-ext"]),tt="authorization_code",at="authorization_code_with_pkce",nt="implicit",st="client_credentials",rt=new class{constructor(){this.tokenGenerationCallback=null,this.tokenRefreshCallback=null,this.resolveVariablesPromise=null,this.resolveVariablesPromiseResolve=null,this.resolveVariablesPromiseReject=null,this.timeoutId=null,this.id=null,this.params=null,de.VSCodeCommunicationsService.subscribe("OAUTH2_CALLBACK",(e=>{this.handleAuthCallback(e)})),de.VSCodeCommunicationsService.subscribe("RESOLVED_VARIABLES",(e=>{var t;if(!e)return;const{id:a,resolvedObject:n}=e;a===this.id&&(null==(t=this.resolveVariablesPromiseResolve)||t.call(this,n))}))}async getResolvedParams(e,t,a){if(!t||0===t.length)return e;const n=function(){const e={};return e.promise=new Promise(((t,a)=>{e.resolve=t,e.reject=a})),e}();return this.resolveVariablesPromise=n.promise,this.resolveVariablesPromiseResolve=n.resolve,this.resolveVariablesPromiseReject=n.reject,(0,Ke.resolveVariablesInObject)(e,t,a),setTimeout((()=>{var e;null==(e=this.resolveVariablesPromiseReject)||e.call(this,new Error("Failed to resolve variables"))}),1e4),this.resolveVariablesPromise}handleRedirectToBrowser(e){if(!e.startsWith("https")&&!e.startsWith("http"))return this.finishAuthorizationFlow(new Error("Invalid protocol for auth URL. Only HTTP and HTTPS protocol are allowed."));(0,w.openExternalLink)(e)}async startAuthorization(e,t,a){if(this.id)throw new Error("OAuth2 authorization already in progress");let n=e;if(this.id=(0,le.v4)(),a)try{n=await this.getResolvedParams(ie()(e),a,this.id)}finally{this.resolveVariablesPromise=null,this.resolveVariablesPromiseResolve=null,this.resolveVariablesPromiseReject=null}var s;if(this.params=Xe(n),!this.params)return null==(s=this.finishAuthorizationFlow)?void 0:s.call(this,new Error("OAuth2 authorization params not provided"));switch(this.tokenGenerationCallback=t,this.timeoutId=setTimeout((()=>{this.finishAuthorizationFlow(new Error("OAuth2 authorization timed out"))}),3e4),this.params.grant_type){case tt:case at:return this.handleAuthorizationCodeType();case nt:return this.handleImplicitType();case"password_credentials":return this.handlePasswordCredentialsType();case st:return this.handleClientCredentialsType();default:var r;return null==(r=this.finishAuthorizationFlow)?void 0:r.call(this,new Error("Could not complete OAuth 2.0 authorization, grant type is invalid"))}}async refreshTokenByTokenId(e,t){const a=await Ze(e),n=a&&$e(a);n&&this.refreshToken(n,t)}async refreshToken(e,t){if(this.id)throw new Error("OAuth2 authorization already in progress");this.params=Xe(e);const a=(0,le.v4)();var n;if(this.id=a,this.tokenRefreshCallback=t,!this.params)return null==(n=this.finishAuthorizationFlow)?void 0:n.call(this,new Error("OAuth2 authorization params not provided"));this.timeoutId=setTimeout((()=>{this.finishRefreshFlow(new Error("OAuth2 authorization timed out"))}),3e4);const s=this.params.refreshTokenUrl||this.params.accessTokenUrl,r=De(this.params.refreshRequestParams,"grant_type"),o=De(this.params.refreshRequestParams,"refresh_token"),i=this.getOAuth2TokenRequest(s);!o&&i.data.push({key:"refresh_token",value:this.params.refreshToken,enabled:!0,type:"text"}),!r&&i.data.push({key:"grant_type",value:"refresh_token",enabled:!0,type:"text"}),this.addClientAuthentication(i,this.params);const l=Le(this.params.refreshRequestParams,i);this.requestAccessToken(l,{refresh:!0})}handleClientCredentialsType(){const{params:e}=this;var t,a;if(!e)return null==(t=this.finishAuthorizationFlow)?void 0:t.call(this,new Error("OAuth2TokenFetcher: params not found"));if(!e.accessTokenUrl)return null==(a=this.finishAuthorizationFlow)?void 0:a.call(this,new Error("OAuth2TokenFetcher: tokenUrl not found"));const n=this.getOAuth2TokenRequest(e.accessTokenUrl),s=De(e.tokenRequestParams,"grant_type"),r=De(e.tokenRequestParams,"scope"),o=De(e.tokenRequestParams,"client_id"),i=De(e.tokenRequestParams,"client_secret");!s&&n.data.push({key:"grant_type",value:st,type:"text",enabled:!0}),!r&&n.data.push({key:"scope",value:e.scope,type:"text",enabled:!0}),(!o||!i)&&this.addClientAuthentication(n,e);const l=Le(e.tokenRequestParams,n);this.requestAccessToken(l)}handlePasswordCredentialsType(){const{params:e}=this;var t,a;if(!e)return null==(t=this.finishAuthorizationFlow)?void 0:t.call(this,new Error("OAuth2TokenFetcher: params not found"));if(!e.accessTokenUrl||"string"!=typeof e.accessTokenUrl)return null==(a=this.finishAuthorizationFlow)?void 0:a.call(this,new Error("OAuth2TokenFetcher: tokenUrl not found"));const n=this.getOAuth2TokenRequest(e.accessTokenUrl),s=De(e.tokenRequestParams,"grant_type"),r=De(e.tokenRequestParams,"username"),o=De(e.tokenRequestParams,"password"),i=De(e.tokenRequestParams,"scope"),l=De(e.tokenRequestParams,"client_id"),u=De(e.tokenRequestParams,"client_secret"),d=De(e.tokenRequestParams,"redirect_uri");(!l||!u)&&this.addClientAuthentication(n,e),!s&&n.data.push({key:"grant_type",value:"password",type:"text",enabled:!0}),!r&&n.data.push({key:"username",value:e.username,type:"text",enabled:!0}),!o&&n.data.push({key:"password",value:e.password,type:"text",enabled:!0}),!i&&n.data.push({key:"scope",value:e.scope,type:"text",enabled:!0}),!d&&n.data.push({key:"redirect_uri",value:e.redirect_uri,type:"text",enabled:!0});const c=Le(e.tokenRequestParams,n);this.requestAccessToken(c)}handleAuthorizationCodeType(){if(!this.params)return;let e=this.params.authUrl;if(!e)return this.finishAuthorizationFlow(new Error("Auth URL not found"));const t=De(this.params.authRequestParams,"response_type"),a=De(this.params.authRequestParams,"client_id"),n=De(this.params.authRequestParams,"state"),s=De(this.params.authRequestParams,"scope"),r=De(this.params.authRequestParams,"redirect_uri");if(e+=e.includes("?")?"&":"?",!t&&(e+=`response_type=${encodeURIComponent("code")}`),!a&&(e+=`&client_id=${encodeURIComponent(this.params.clientId)}`),!n&&this.params.state&&(e+=`&state=${encodeURIComponent(this.params.state)}`),!s&&this.params.scope&&(e+=`&scope=${encodeURIComponent(this.params.scope)}`),!r&&this.params.redirect_uri&&(e+=`&redirect_uri=${encodeURIComponent(this.params.redirect_uri)}`),this.params.grant_type===at){const t=De(this.params.authRequestParams,"code_challenge"),a=De(this.params.authRequestParams,"code_challenge_method");this.params.code_verifier=this.params.code_verifier||((e=32)=>{const t=ce.O6(e);return Ye(t)})(),!t&&(e+=`&code_challenge=${encodeURIComponent(((e,t)=>{if(!e||"plain"===t)return e||"";const a=ce.js("sha256").update(e).digest();return Ye(a)})(this.params.code_verifier,this.params.challengeAlgorithm))}`),!a&&(e+=`&code_challenge_method=${encodeURIComponent(this.params.challengeAlgorithm)}`)}e=Be(this.params.authRequestParams,e),this.handleRedirectToBrowser(e)}handleImplicitType(){if(!this.params)return;let e=this.params.authUrl;const t=De(this.params.authRequestParams,"response_type"),a=De(this.params.authRequestParams,"client_id"),n=De(this.params.authRequestParams,"state"),s=De(this.params.authRequestParams,"scope"),r=De(this.params.authRequestParams,"redirect_uri");e+=e.includes("?")?"&":"?",!t&&(e+=`response_type=${encodeURIComponent("token")}`),!a&&(e+=`&client_id=${encodeURIComponent(this.params.clientId)}`),!n&&this.params.state&&(e+=`&state=${encodeURIComponent(this.params.state)}`),!s&&this.params.scope&&(e+=`&scope=${encodeURIComponent(this.params.scope)}`),!r&&this.params.redirect_uri&&(e+=`&redirect_uri=${encodeURIComponent(this.params.redirect_uri)}`),e=Be(this.params.authRequestParams,e),this.handleRedirectToBrowser(e)}handleAuthCallback(e){if(!this.params||!this.id)return;var t,a,n,s;if(this.params.grant_type===nt)return e.access_token?null==(t=this.finishAuthorizationFlow)?void 0:t.call(this,null,e):null==(a=this.finishAuthorizationFlow)?void 0:a.call(this,new Error("OAuth2TokenFetcher~Implicit: access_token not found"));if(!e.code)return null==(n=this.finishAuthorizationFlow)?void 0:n.call(this,new Error("OAuth2TokenFetcher: code not found"));if(!this.params.accessTokenUrl)return null==(s=this.finishAuthorizationFlow)?void 0:s.call(this,new Error("OAuth2TokenFetcher: tokenUrl not found"));const r=De(this.params.tokenRequestParams,"grant_type"),o=De(this.params.tokenRequestParams,"client_id"),i=De(this.params.tokenRequestParams,"client_secret"),l=De(this.params.tokenRequestParams,"redirect_uri"),u=De(this.params.tokenRequestParams,"code_verifier"),d=De(this.params.tokenRequestParams,"code"),c=this.getOAuth2TokenRequest(this.params.accessTokenUrl);!r&&c.data.push({key:"grant_type",value:tt,type:"text",enabled:!0}),!d&&c.data.push({key:"code",value:e.code,type:"text",enabled:!0}),!l&&c.data.push({key:"redirect_uri",value:this.params.redirect_uri,type:"text",enabled:!0}),this.params.grant_type===at&&!u&&c.data.push({key:"code_verifier",value:this.params.code_verifier,type:"text",enabled:!0}),(!o||!i)&&this.addClientAuthentication(c,this.params);const h=Le(this.params.tokenRequestParams,c);this.requestAccessToken(h)}addClientAuthentication(e,t){if("body"!==t.client_authentication)e.auth={type:"basic",basic:[{key:"username",value:t.clientId},{key:"password",value:t.clientSecret}]};else{if(e.data.push({key:"client_id",value:t.clientId,enabled:!0,type:"string"}),t.grant_type===at&&!t.clientSecret)return;e.data.push({key:"client_secret",value:t.clientSecret,enabled:!0,type:"string"})}}getOAuth2TokenRequest(e){if(!this.params||!this.id)throw new Error("OAuth2TokenFetcher: params or id not found");return{id:this.id,method:"POST",dataMode:"urlencoded",url:e,headerData:[{key:"Content-Type",value:"application/x-www-form-urlencoded",type:"text",enabled:!0}],auth:{type:"noauth"},data:[]}}finishAuthorizationFlow(e,t){var a;if(!this.id||!this.params)throw new Error("OAuth2TokenFetcher: params or id not found");const n=this.params.tokenName||"Untitled Token",s=this.params.accessTokenUrl,r=this.params.refreshTokenUrl,o=this.params.clientId,l=this.params.clientSecret,u=this.params.refreshRequestParams;var d,c;if(this.id=null,this.params=null,this.timeoutId&&clearTimeout(this.timeoutId),e)return null==(d=this.tokenGenerationCallback)?void 0:d.call(this,e);if(!t)return null==(c=this.tokenGenerationCallback)?void 0:c.call(this,new Error("OAuth2TokenFetcher: authResponse not found"));const h={name:n||"Untitled Token",id:(0,le.v4)(),timestamp:Date.now(),data:(0,i.Z)({},t,{accessTokenUrl:s,clientId:o,clientSecret:l,refreshRequestParams:u,refreshTokenUrl:r})};null==(a=this.tokenGenerationCallback)||a.call(this,null,h)}finishRefreshFlow(e,t){var a;if(this.id||this.params){var n,s;if(this.id=null,this.params=null,e)return null==(n=this.tokenRefreshCallback)?void 0:n.call(this,e);if(this.timeoutId&&clearTimeout(this.timeoutId),!t)return null==(s=this.tokenRefreshCallback)?void 0:s.call(this,new Error("OAuth2TokenFetcher: authResponse not found"));null==(a=this.tokenRefreshCallback)||a.call(this,null,t)}}async requestAccessToken(e,t){var a=this;(0,ue.sendRequestViaAgent)(e,{variables:{},runOptionsOverrides:{timeout:{global:null,request:3e4,script:null}},exception:({error:e})=>null!=t&&t.refresh?this.finishRefreshFlow(e):this.finishAuthorizationFlow(e),response:async function({error:e,response:n}){if(e)return null!=t&&t.refresh?a.finishRefreshFlow(e):void a.finishAuthorizationFlow(e);if(!n||!n.stream)return null!=t&&t.refresh?a.finishRefreshFlow(new Error("OAuth2TokenFetcher: response not found")):a.finishAuthorizationFlow(new Error("OAuth2TokenFetcher: response not found"));n.stream instanceof ArrayBuffer&&(n.stream=new Uint8Array(n.stream));const s=(r=n.stream,o=n.contentInfo.charset,et.has(o)?"":("utf-16"===o&&r.length>=2&&254===r[0]&&255===r[1]&&(o="utf-16be"),new TextDecoder(o||"utf8").decode(r)));var r,o;return null!=t&&t.refresh?a.finishRefreshFlow(null,JSON.parse(s)):a.finishAuthorizationFlow(null,JSON.parse(s))},console:()=>null,start:()=>null,responseStart:()=>null,assertion:()=>null,script:()=>null})}},ot=()=>{const{value:e,setValue:t}=(0,Pe.useKVStorage)(He(),qe),a=(a,n)=>{const s=null==e?void 0:e[a];if(s){for(const e of Object.keys(n.data))s.data[e]=n.data[e];return n.name&&(s.name=n.name),n.timestamp&&(s.timestamp=n.timestamp),e[a]=s,t(e)}};return{oAuth2Tokens:e,createOAuth2Token:(a,n)=>{const s=e||{};return s[a]=n,t(s)},updateOAuth2Token:a,updateKeyInOAuth2Token:(t,n,s)=>{const r=null==e?void 0:e[t];r&&(r.data[n]=s,a(t,r))},deleteOAuth2TokenById:a=>{if(null==e?void 0:e[a])return delete e[`${a}`],t(e)},deleteAllOAuth2Token:()=>t({}),deleteAllExpiredOAuth2Token:()=>{if(e){for(const[t,a]of Object.entries(e))Ge(a)&&delete e[`${t}`];return t(e)}}}},it=o()(u.Z).withConfig({displayName:"oauth2-standard-wrappers__OAuth2AuthWrapper",componentId:"sc-nw4etj-0"})(["align-items:center;padding-top:var(--spacing-s);padding-bottom:var(--spacing-s);max-width:500px;"]),lt=o().div.withConfig({displayName:"oauth2-standard-wrappers__OAuth2AuthContentWrapper",componentId:"sc-nw4etj-1"})(["flex:1;"]),ut=()=>{const e=s().useContext(va),t=e.authState,a=e.setAuthState,n=(e,n)=>{if(!e)return a((0,i.Z)({},t,{oauth2:t.oauth2.filter((e=>e.key!==n))}));const s=[...t.oauth2],r=s.findIndex((e=>e.key===n));if(-1===r)return a((0,i.Z)({},t,{oauth2:[...t.oauth2,{key:n,value:e}]}));const o=[...s];return o[r]={key:s[r].key,value:e},a((0,i.Z)({},t,{oauth2:o}))},r=e=>{var a;return(null==(a=t.oauth2.find((t=>t.key===e)))?void 0:a.value)||Ce[e]},o=(e,s,o,l,u)=>"redirect_uri"===e?(0,v.jsx)(k,{onChange:e=>{n(e.target.value,e.target.name)},name:e,value:r(e),placeholder:s,isDisabled:u}):"select"===o?l&&0!==(null==l?void 0:l.length)?(0,v.jsx)(f,{isClearable:!1,options:l,value:{value:r(e),label:_e[e][r(e)]},onChange:n=>{((e,n)=>{if(!n.value)return a((0,i.Z)({},t,{oauth2:t.oauth2.filter((t=>t.key!==e))}));const s=[...t.oauth2],r=s.findIndex((t=>t.key===e));if(-1===r)return a((0,i.Z)({},t,{oauth2:[...t.oauth2,{key:e,value:n.value}]}));const o=[...s];o[r]={key:s[r].key,value:n.value},a((0,i.Z)({},t,{oauth2:o}))})(e,n)},name:e,"aria-label":"add auth to",viaPortal:!0,isDisabled:!1,isSearchable:!1}):null:(0,v.jsx)(y,{onChange:(e,t)=>{n(e,t)},name:e,value:r(e),label:s});return(0,v.jsx)(v.Fragment,{children:Se.filter((({key:e})=>Re[r("grant_type")].has(e))).map((({key:e,label:t,type:a,options:n,disabled:s})=>(0,v.jsxs)(it,{"data-testid":`oauth2-input-${e}`,children:[(0,v.jsx)(lt,{children:(0,v.jsx)(g,{children:t})}),(0,v.jsx)(lt,{children:o(e,t,a,n,s)})]},e)))})};var dt=a(835736),ct=a(535482),ht=a(370068),pt=a(756880);const mt=o().div.withConfig({displayName:"oauth2-refresh-cta__StyledRefreshCTAWrapper",componentId:"sc-p5t6o7-0"})(["display:flex;margin-top:var(--spacing-xs);align-items:center;justify-content:left;"]),vt=o()(p.ZP).withConfig({displayName:"oauth2-refresh-cta__StyledExpiryInfoWrapper",componentId:"sc-p5t6o7-1"})(["margin-left:var(--spacing-xs);margin-right:var(--spacing-xs);"]),kt=o()(dt.Z).withConfig({displayName:"oauth2-refresh-cta__StyledSpinner",componentId:"sc-p5t6o7-2"})(["margin-left:var(--spacing-xs);"]),yt=()=>{var e,t;const a=s().useContext(va).authSessionState,[r,o]=(0,n.useState)(!1),{oAuth2Tokens:l,updateOAuth2Token:u}=ot(),d=null==(e=a.oauth2)||null==(e=e.find((e=>"token_id"===e.key)))?void 0:e.value,c=d?null==l?void 0:l[d]:null,h=(e,t)=>{if(e)return void o(!1);if(!t)return void o(!1);const a=c;a&&(a.data=(0,i.Z)({},a.data,t.access_token&&{access_token:t.access_token},t.id_token&&{id_token:t.id_token},t.refresh_token&&{refresh_token:t.refresh_token},t.expires_in&&{expires_in:t.expires_in},t.token_type&&{token_type:t.token_type}),a.timestamp=Date.now(),u(a.id,a),o(!1),pt.AnalyticsService.addEventV2({category:"authorization",action:"manual_token_refresh_successful",label:"oauth2"}))},m=()=>{if(!c)return;const e=$e(c);e?(o(!0),rt.refreshToken(e,h),pt.AnalyticsService.addEventV2({category:"authorization",action:"manual_token_refresh",label:"oauth2"})):o(!1)};if(null==c||null==(t=c.data)||!t.refresh_token)return null;const k=Me(c)||0,y=Date.now(),f=$e(c),g=Je(c);if(!f||!g)return;if(r)return(0,v.jsxs)(mt,{children:[(0,v.jsx)(p.ZP,{hasBottomSpacing:!0,color:"content-color-secondary",children:"Refreshing token"}),(0,v.jsx)(kt,{})]});if(!k)return(0,v.jsx)(mt,{children:(0,v.jsx)(p.ZP,{type:"link-default",hasBottomSpacing:!0,children:(0,v.jsx)("div",{onClick:m,children:"Refresh"})})});const b=Number(k),x=new Date(b).toDateString()===new Date(y).toDateString();let _=null;if(Ge(c))_=(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(ct.Z,{name:"icon-state-error-stroke",color:"content-color-error"}),(0,v.jsx)(vt,{hasBottomSpacing:!0,color:"content-color-error",children:"Token expired."})]});else if(x){const e=(e=>`Expires at ${(0,We.format)(e,"h:mm aaaa")} today.`)(b);_=(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(ht.Z,{color:"content-color-secondary"}),(0,v.jsx)(vt,{hasBottomSpacing:!0,color:"content-color-secondary",children:e})]})}return(0,v.jsxs)(mt,{children:[_,(0,v.jsx)(p.ZP,{type:"link-default",hasBottomSpacing:!0,children:(0,v.jsx)("div",{onClick:m,children:"Refresh"})})]})},ft=()=>{var e,t;const a=s().useContext(va).authSessionState,{oAuth2Tokens:n,updateKeyInOAuth2Token:r}=ot(),o=null==(e=a.oauth2)||null==(e=e.find((e=>"token_id"===e.key)))?void 0:e.value,i=o?null==n?void 0:n[o]:null,l=(null==i||null==(t=i.data)?void 0:t.token_key)||we;if(null!=i&&i.data[Ae])return(0,v.jsxs)(it,{"data-testid":"oauth2-input-token-key",children:[(0,v.jsx)(lt,{children:(0,v.jsx)(g,{children:"Token Type"})}),(0,v.jsx)(lt,{children:(0,v.jsx)(f,{isClearable:!1,options:Object.keys(je).map((e=>({value:e,label:je[e],isOptionDisabled:e=>{var t;return null==i||null==(t=i.data)?void 0:t[null==e?void 0:e.value]}}))),placeholder:"Select Token Type",value:{value:l,label:je[l]},onChange:e=>(e=>{i&&r(i.id,"token_key",e.value)})(e),name:"token","aria-label":"Select token",viaPortal:!0,isDisabled:!1,isSearchable:!1})})]},"token_key")};var gt=a(756415),bt=a(303341);const xt=o().div.withConfig({displayName:"auth-advanced-toggle__StyledAdvancedToggleWrapper",componentId:"sc-gvkwux-0"})(["display:flex;align-items:center;cursor:pointer;margin-bottom:var(--spacing-xs);margin-top:var(--spacing-xs);"]),_t=e=>{const{onToggleAdvancedFields:t,title:a,isOpen:n}=e;return(0,v.jsxs)(xt,{onClick:()=>t(),children:[n?(0,v.jsx)(gt.Z,{}):(0,v.jsx)(bt.Z,{}),(0,v.jsx)("div",{children:(0,v.jsx)(d.Z,{type:"primary",text:a||"Advanced configuration"})})]})};var Tt=a(19956);const At=()=>{const e=s().useContext(va),t=e.authState,a=e.setAuthState,n=(e,n)=>{const s=[...t.oauth2],r=s.findIndex((t=>t.key===e));return-1===r||(s[r].value=n,a((0,i.Z)({},t,{oauth2:s}))),a((0,i.Z)({},t,{oauth2:[...t.oauth2,{key:e,value:n}]}))},r=e=>{var a;return(null==(a=t.oauth2.find((t=>t.key===e)))?void 0:a.value)||Ce[e]},o=r("authRequestParams"),l=r("tokenRequestParams"),d=r("refreshRequestParams"),c=Object.keys(xe).map((e=>({value:e,label:xe[e]}))),h=r("grant_type"),p=[he,pe,me].includes(h),m=h!==me;return(0,v.jsxs)(u.Z,{direction:"column",children:[(0,v.jsxs)(it,{"data-testid":"oauth2-input-refreshTokenUrl",children:[(0,v.jsx)(lt,{children:(0,v.jsx)(g,{children:"Refresh Token URL"})}),(0,v.jsx)(lt,{children:(0,v.jsx)(y,{onChange:(e,n)=>{((e,n)=>{if(!e)return a((0,i.Z)({},t,{oauth2:t.oauth2.filter((e=>e.key!==n))}));const s=[...t.oauth2],r=s.findIndex((e=>e.key===n));if(-1===r)return a((0,i.Z)({},t,{oauth2:[...t.oauth2,{key:n,value:e}]}));s[r].value=e,a((0,i.Z)({},t,{oauth2:s}))})(e,n)},name:"refreshTokenUrl",value:r("refreshTokenUrl"),label:r("refreshTokenUrl")||"Enter Refresh Token URL"})})]},"refreshTokenUrl"),p&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(it,{"data-testid":"oauth2-input-authRequestParams",children:(0,v.jsx)(lt,{children:(0,v.jsx)(g,{children:"Auth Request"})})},"authRequestParams"),(0,v.jsx)(lt,{children:(0,v.jsx)(Tt.KeyValueEditor,{tableName:"Auth Request",allowedColumns:["key","value"],showColumns:["key","value"],values:Ve(o),onChange:e=>{n("authRequestParams",Fe(e,fe))},disableSorting:!0,nonEditableKeys:!1,nonEditableValues:!1,nonEditableToggles:!1,disableBulkEdit:!0,enableVariableSuggestions:!0,optionsDropdownValues:[{label:"Text",value:"text"}]})})]}),m&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(it,{"data-testid":"oauth2-input-tokenRequestParams",children:(0,v.jsx)(lt,{children:(0,v.jsx)(g,{children:"Token Request"})})},"tokenRequestParams"),(0,v.jsx)(lt,{children:(0,v.jsx)(Tt.KeyValueEditor,{tableName:"Token Request",allowedColumns:["key","value","options"],showColumns:["key","value","options"],values:Ve(l),onChange:e=>{n("tokenRequestParams",Fe(e,ge))},disableSorting:!0,nonEditableKeys:!1,nonEditableValues:!1,nonEditableToggles:!1,disableBulkEdit:!0,enableVariableSuggestions:!0,optionsDropdownValues:c})})]}),(0,v.jsx)(it,{"data-testid":"oauth2-input-refreshRequestParams",children:(0,v.jsx)(lt,{children:(0,v.jsx)(g,{children:"Refresh Request"})})},"refreshRequestParams"),(0,v.jsx)(lt,{children:(0,v.jsx)(Tt.KeyValueEditor,{tableName:"Refresh Request",allowedColumns:["key","value","options"],showColumns:["key","value","options"],values:Ve(d),onChange:e=>{n("refreshRequestParams",Fe(e,ge))},disableSorting:!0,nonEditableKeys:!1,nonEditableValues:!1,nonEditableToggles:!1,disableBulkEdit:!0,enableVariableSuggestions:!0,optionsDropdownValues:c})})]})};var wt=a(10099);const jt=o().div.withConfig({displayName:"oauth2__StyledLine",componentId:"sc-16h4gio-0"})(["border-bottom:1px solid var(--border-color-default);"]),Ct=o()(G.Z).withConfig({displayName:"oauth2__StyledHeading",componentId:"sc-16h4gio-1"})(["margin-top:var(--spacing-m);margin-bottom:var(--spacing-m);"]),St=o()(u.Z).withConfig({displayName:"oauth2__StyledToken",componentId:"sc-16h4gio-2"})(["padding-right:var(--spacing-l);flex:1;overflow:hidden;text-overflow:ellipsis;display:block;word-break:break-all;white-space:nowrap;"]),Rt=o().div.withConfig({displayName:"oauth2__StyledManageTokenCTAWrapper",componentId:"sc-16h4gio-3"})(["display:flex;margin-top:var(--spacing-xs);align-items:center;justify-content:left;"]),Pt=o().div.withConfig({displayName:"oauth2__StyledAutoRefreshTokenToggleWrapper",componentId:"sc-16h4gio-4"})(["margin-top:var(--spacing-xxl);"]),It=o().div.withConfig({displayName:"oauth2__StyledAutoRefreshTokenToggle",componentId:"sc-16h4gio-5"})(["margin-top:var(--spacing-l);margin-right:var(--spacing-l);display:flex;justify-content:space-between;"]),qt=o().div.withConfig({displayName:"oauth2__StyledShareTokenRadioButtons",componentId:"sc-16h4gio-6"})(["margin-top:var(--spacing-l);margin-right:var(--spacing-l);display:flex;justify-content:space-between;"]),Zt=o().div.withConfig({displayName:"oauth2__StyledSharedTokenMenuOption",componentId:"sc-16h4gio-7"})(["display:flex;justify-content:space-between;width:100%;padding-right:var(--spacing-s);align-items:center;"]),Ot=()=>{var e;const t=s().useContext(va),a=t.authState,r=t.authSessionState,o=t.setAuthSessionState,l=t.setAuthState,[u,d]=(0,n.useState)(!1),c=re.Modals.getModals(),h=(0,n.useRef)(null),[m,b]=(0,n.useState)(null),[x,_]=(0,n.useState)(!1),{oAuth2Tokens:T,createOAuth2Token:j,updateKeyInOAuth2Token:C,updateOAuth2Token:S}=ot(),{data:R}=(0,Ke.useActiveAndDynamicVariables)(),{addToast:P}=(0,J.ZP)(),I=null==r||null==(e=r.oauth2)||null==(e=e.find((e=>"token_id"===e.key)))?void 0:e.value,q=I?null==T?void 0:T[I]:null,Z=e=>{o("token_id",e)};(0,n.useEffect)((()=>{b(null)}),[T,r]);const O=(0,wt.useActiveWorkspaceId)(),U=(0,w.useNavigate)(),N=e=>{const t=a.oauth2.filter((e=>!("tokenType"===e.key||"accessToken"===e.key)));if(!e)return l((0,i.Z)({},a,{oauth2:t}));t.push({key:"tokenType",value:e.tokenType},{key:"accessToken",value:e.accessToken}),l((0,i.Z)({},a,{oauth2:t}))},E=e=>{var t;return(null==(t=a.oauth2.find((t=>t.key===e)))?void 0:t.value)||Ce[e]},z=(e,t)=>t?t.data.error?(d(!1),void P({status:"error",description:"Authentication failed"})):(P({status:"success",description:"Authentication successful"}),j(t.id,t),(e=>{e&&Z(e.id)})(t),d(!1),void pt.AnalyticsService.addEventV2({category:"authorization",action:"get_access_token_successful",label:"oauth2"})):(d(!1),void P({status:"error",description:"Authentication failed"})),H=()=>{var e;let t=(null==q||null==(e=q.data)?void 0:e.token_key)===Ae?q.data.id_token:null==q?void 0:q.data.access_token;return I===A&&(t=E("accessToken")),null!==m?m:t},F=()=>q&&null!=q&&q.data.access_token&&(null==q?void 0:q.data.access_token)===E("accessToken")||I===A&&E("accessToken")?"yes":"no",V=()=>q&&void 0!==q?{value:null==q?void 0:q.id,label:null==q?void 0:q.name}:I&&I===A&&Boolean(E("accessToken"))?{value:A,label:"Shared Token"}:null;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(it,{"data-testid":"oauth2-input-tokens",children:[(0,v.jsx)(lt,{children:(0,v.jsx)(g,{children:"Token"})}),(0,v.jsxs)(lt,{children:[(0,v.jsx)(f,{isClearable:!1,options:(()=>{let e=[];return e=Object.values(T||{}).map((e=>({value:e.id,label:e.name}))),E("accessToken")&&(e=[{value:A,label:"Shared Token"},...e]),0===e.length?[]:e})(),placeholder:"Available Tokens",customOptionComponent:e=>{const{label:t,value:a}=e;return a===A?(0,v.jsxs)(Zt,{children:[t,(0,v.jsx)(ae.Z,{color:"content-color-success"})]}):(0,v.jsxs)(St,{children:[" ",t," "]})},value:V(),onChange:e=>{null!=e&&e.value&&Z(e.value)},name:"token","aria-label":"Select token",viaPortal:!0,isDisabled:!1,isSearchable:!1},`${V()}`),(0,v.jsx)(Rt,{children:(0,v.jsx)(p.ZP,{type:"link-default",hasBottomSpacing:!0,children:(0,v.jsx)("div",{onClick:()=>{U(`/workspace/${O}/openManageTokensTab`,{},{customNavEvent:w.OPEN_EXTENSION_URL})},children:"Manage Tokens"})})})]})]},"token"),ft(),(0,v.jsxs)(it,{"data-testid":"oauth2-input-token_value",children:[(0,v.jsx)(lt,{}),(0,v.jsxs)(lt,{children:[(0,v.jsx)(k,{onChange:e=>{const t=e.target.value;b(t),h.current&&clearTimeout(h.current);const a=setTimeout((()=>{(e=>{var t;let a=q;if(!a)return a={id:(0,le.v4)(),name:"Untitled Token",timestamp:Date.now(),data:{[we]:e,token_type:"Bearer"}},j(a.id,a),Z(a.id);const n=(null==q||null==(t=q.data)?void 0:t.token_key)===Ae?Ae:we;C(a.id,n,e)})(t),h.current=null}),1e3);h.current=a},name:"access_token",value:H(),placeholder:"Enter Token Here",isDisabled:!1}),yt()]})]},"token_value"),(0,v.jsxs)(it,{"data-testid":"oauth2-input-headerPrefix",children:[(0,v.jsx)(lt,{children:(0,v.jsx)(g,{children:"Header Prefix"})}),(0,v.jsx)(lt,{children:(0,v.jsx)(y,{onChange:(e,t)=>{((e,t)=>{if(!e)return l((0,i.Z)({},a,{oauth2:a.oauth2.filter((e=>e.key!==t))}));const n=[...a.oauth2],s=n.findIndex((e=>e.key===t));if(-1===s)return l((0,i.Z)({},a,{oauth2:[...a.oauth2,{key:t,value:e}]}));n[s].value=e,l((0,i.Z)({},a,{oauth2:n}))})(e,t)},name:"headerPrefix",value:E("headerPrefix")||"Bearer",label:"Enter Prefix Here"})})]},"headerPrefix"),(0,v.jsxs)(it,{"data-testid":"oauth2-input-addTokenTo",children:[(0,v.jsx)(lt,{children:(0,v.jsx)(g,{children:"Add authorization data to"})}),(0,v.jsx)(lt,{children:(0,v.jsx)(f,{isClearable:!1,options:Object.keys(Te).map((e=>({value:e,label:Te[e]}))),value:{value:E("addTokenTo"),label:Te[E("addTokenTo")]},onChange:e=>{((e,t)=>{if(!t.value)return l((0,i.Z)({},a,{oauth2:a.oauth2.filter((t=>t.key!==e))}));const n=[...a.oauth2],s=n.findIndex((t=>t.key===e));if(-1===s)return l((0,i.Z)({},a,{oauth2:[...a.oauth2,{key:e,value:t.value}]}));n[s].value=t.value,l((0,i.Z)({},a,{oauth2:n}))})("addTokenTo",e)},name:"addTokenTo","aria-label":"add auth to",viaPortal:!0,isDisabled:!1,isSearchable:!1})})]},"addTokenTo"),(0,v.jsxs)(Pt,{children:[(0,v.jsxs)(It,{children:[(0,v.jsx)(G.Z,{type:"h6",text:"Auto-refresh token",color:"content-color-secondary"}),(()=>{const e=I?null==T?void 0:T[I]:null,t=e&&Je(e),a=(0,v.jsx)(Q.Z,{name:"Refresh Token",onChange:t=>{const a=e;a&&(a.isTokenAutoRefreshEnabled=t,S(I,a))},isDisabled:!t,isChecked:t&&e.isTokenAutoRefreshEnabled});if(t)return a;const n=e?$e(e):null;let s;return I===A&&Boolean(E("accessToken"))?s="Shared token cannot be auto-refreshed. Generate a new token to refresh it automatically on expire.":n?n.refresh_token?n.accessTokenUrl||(s="Access token URL is not present. Generate a new token to refresh it automatically on expire."):s="Refresh token is not present. Generate a new token to refresh it automatically on expire.":s="Select a token from available tokens to refresh it automatically on expire.",(0,v.jsx)(Y.Z,{content:s,children:a})})()]}),(0,v.jsx)(p.ZP,{type:"para",hasBottomSpacing:!0,color:"content-color-secondary",children:"Your expired token will be auto-refreshed before sending a request."})]}),(0,v.jsx)(jt,{}),(0,v.jsxs)(qt,{children:[(0,v.jsx)(G.Z,{type:"h6",text:"Share Token",color:"content-color-secondary"}),(0,v.jsxs)(X.Z,{name:"share-token",value:F(),onChange:async e=>{if(e===F())return;const t="yes"===e?"Sync Token":"Disable Token Sharing",a="yes"===e?"Sharing this token will allow anyone with access to this request to view and potentially use it.":"People with access to this request will no longer be able to see or use this token. They will be able to generate their own access token instead.",n="yes"===e?"Share":"Disable Share",s=await c.showWarningDialog({uid:"share-token",subject:t,message:a,options:[{title:"Cancel",isDefaultOnDismiss:!0},{title:n,isPrimary:!0}]});if(s&&"Share"===s.title){const e=q&&q.data.token_type,t=H();N({tokenType:"string"==typeof e?e:"",accessToken:"string"==typeof t?t:""})}else s&&"Disable Share"===s.title&&N()},children:[(0,v.jsx)(ee.Z,{value:"yes",label:"Yes",id:"yes",isDisabled:!q&&I!==A||I===A&&!E("accessToken")}),(0,v.jsx)(ee.Z,{value:"no",label:"No",id:"no",isDisabled:!q&&I!==A||I===A&&!E("accessToken")})]})]}),(0,v.jsx)(p.ZP,{type:"para",hasBottomSpacing:!0,color:"content-color-secondary",children:"This will allow anyone with access to this request to view and use it."}),(0,v.jsx)(jt,{}),(0,v.jsx)(Ct,{type:"h4",text:"Configure New Token"}),ut(),(0,v.jsx)(_t,{onToggleAdvancedFields:()=>{_(!x)},isOpen:x}),x&&At(),(0,v.jsx)(it,{children:(0,v.jsx)(te.Z,{onClick:()=>{const e={};for(const t of a.oauth2)e[t.key]=ie()(t.value);e.redirect_uri=se().OAUTH2_CALLBACK_URL,d(!0),rt.startAuthorization(e,z,R||[]).catch((()=>{d(!1),P({status:"error",description:"Authentication failed"})})),pt.AnalyticsService.addEventV2({category:"authorization",action:"get_access_token",label:"oauth2"})},type:"primary",text:"Generate Access Token",isLoading:u})})]})},Ut=(0,l.observer)((()=>(0,v.jsx)(J.VW,{children:(0,v.jsx)(Ot,{})})));var Nt=a(749437),Et=a(680047);const zt=o()(u.Z).withConfig({displayName:"coming-soon__ComingSoonWrapper",componentId:"sc-1g7v7ck-0"})(["overflow:hidden;"]);function Ht({description:e}){return(0,v.jsx)(zt,{direction:"column",height:"100%",justifyContent:"center",alignItems:"center",children:(0,v.jsx)(Nt.Z,{title:"Coming Soon",description:e,children:(0,v.jsx)(Et.Z,{name:"illustration-no-custom-domain"})})})}const Ft=o()(u.Z).withConfig({displayName:"inherit__InheritAuthModeContainer",componentId:"sc-1fnmbns-0"})(["width:100%;height:100%;align-items:center;justify-content:center;"]),Vt=()=>{const e=s().useContext(va).authDescriptions;return(0,v.jsx)(Ft,{children:(null==e?void 0:e.inherit)||"This request is inheriting auth from parent"})},Dt=o()(u.Z).withConfig({displayName:"aws-signature__AuthWrapper",componentId:"sc-1x9z6sr-0"})(["align-items:center;padding-top:var(--spacing-l);max-width:500px;"]),Bt=o()(u.Z).withConfig({displayName:"aws-signature__AdvanceToggle",componentId:"sc-1x9z6sr-1"})(["align-items:center;padding-top:var(--spacing-l);padding-bottom:var(--spacing-s);max-width:500px;margin-left:-4px;"]),Lt=o().div.withConfig({displayName:"aws-signature__AuthContentWrapper",componentId:"sc-1x9z6sr-2"})(["flex:1;"]),Kt=o()(h.Z).withConfig({displayName:"aws-signature__Select",componentId:"sc-1x9z6sr-3"})([".aether-dropdown__control:not(:focus){border-color:var(--border-color-default);background-color:var(--background-color-secondary);}.aether-dropdown__control .aether-dropdown__single-value{color:var(--content-color-secondary);font-weight:600;font-size:var(--text-size-s);}"]),Wt=[{key:"accessKey",label:"AccessKey",type:"text"},{key:"secretKey",label:"SecretKey",type:"text"}],Mt=[{key:"region",label:"AWS Region",type:"text",infoText:"The region that is receiving the request (default value: us-east-1)",placeHolder:"e.g. us-east-1"},{key:"service",label:"Service Name",type:"text",infoText:"The service that is receiving the request.",placeHolder:"e.g. s3"},{key:"sessionToken",label:"Session Token",type:"text",infoText:"Only required when using temporary security credentials.",placeHolder:"Session Token"}],$t={key:"addAuthDataToQuery",label:"Add authorization data to",options:[{label:"Request Headers",value:!1},{label:"Request URL",value:!0}]},Gt=(0,l.observer)((()=>{const e=s().useContext(va),t=e.authState,a=e.setAuthState,r=(0,n.useCallback)(((e,n)=>{var s;if(!e)return a((0,i.Z)({},t,{awsv4:(null==(s=t.awsv4)?void 0:s.filter((e=>e.key!==n)))||null}));const r=[...t.awsv4||[]],o=r.findIndex((e=>e.key===n));if(-1===o)return a((0,i.Z)({},t,{awsv4:[...t.awsv4||[],{key:n,value:e}]}));r[o].value=e,a((0,i.Z)({},t,{awsv4:r}))}),[t,a]),o=e=>{var a;return(null==(a=t.awsv4)||null==(a=a.find((t=>t.key===e)))?void 0:a.value)||""},[l,u]=(0,n.useState)(!1);return(0,v.jsxs)(v.Fragment,{children:[Wt.map((({key:e,label:t,type:a})=>(0,v.jsxs)(Dt,{"data-testid":"aws-signature-basic-input",children:[(0,v.jsx)(Lt,{children:(0,v.jsx)(d.Z,{text:t})}),(0,v.jsx)(Lt,{children:(0,v.jsx)(y,{name:e,label:t,value:o(e),onChange:r,type:a})})]},e))),(0,v.jsxs)(Dt,{children:[(0,v.jsx)(Lt,{children:(0,v.jsx)(d.Z,{text:$t.label})}),(0,v.jsx)(Lt,{children:(0,v.jsx)(Kt,{isClearable:!1,options:$t.options,value:o("addAuthDataToQuery")?{label:"Request URL",value:!0}:{label:"Request Headers",value:!1},onChange:e=>r(e.value,"addAuthDataToQuery"),"aria-label":"add auth to",viaPortal:!0})})]}),(0,v.jsx)(Bt,{children:(0,v.jsx)(_t,{onToggleAdvancedFields:()=>{u(!l)},isOpen:l})}),l&&(0,v.jsx)(p.ZP,{type:"small",children:"Postman auto-generates default values for some of these fields unless a value is specified."}),l&&Mt.map((({key:e,label:t,type:a,infoText:n,placeHolder:s})=>(0,v.jsxs)(Dt,{"data-testid":"aws-signature-advance-input",children:[(0,v.jsx)(Lt,{children:(0,v.jsx)(d.Z,{text:t,infoText:n})}),(0,v.jsx)(Lt,{children:(0,v.jsx)(y,{name:e,label:s,value:o(e),onChange:r,type:a})})]},e)))]})}));var Jt=a(591217),Qt=a(265848);const Yt=o()(u.Z).withConfig({displayName:"oauth1__AuthWrapper",componentId:"sc-1jg4lk5-0"})(["align-items:center;padding-top:var(--spacing-l);max-width:500px;"]),Xt=o()(u.Z).withConfig({displayName:"oauth1__AdvanceToggle",componentId:"sc-1jg4lk5-1"})(["align-items:center;padding-top:var(--spacing-l);padding-bottom:var(--spacing-s);max-width:500px;margin-left:-4px;"]),ea=o().div.withConfig({displayName:"oauth1__AuthContentWrapper",componentId:"sc-1jg4lk5-2"})(["flex:1;"]),ta=o()(h.Z).withConfig({displayName:"oauth1__Select",componentId:"sc-1jg4lk5-3"})([".aether-dropdown__control:not(:focus){border-color:var(--border-color-default);background-color:var(--background-color-secondary);}.aether-dropdown__control .aether-dropdown__single-value{color:var(--content-color-secondary);font-weight:600;font-size:var(--text-size-s);}"]),aa=o().div.withConfig({displayName:"oauth1__CheckboxWrapper",componentId:"sc-1jg4lk5-4"})(["display:flex;flex-direction:column;gap:var(--spacing-l);"]),na=o().div.withConfig({displayName:"oauth1__StyledLine",componentId:"sc-1jg4lk5-5"})(["margin:var(--spacing-l) 0;border-bottom:1px solid var(--border-color-default);"]),sa=o().label.withConfig({displayName:"oauth1__StyledFileUploaderLabel",componentId:"sc-1jg4lk5-6"})(["display:flex;gap:var(--spacing-s);user-select:none;color:var(--content-color-primary);font-size:var(--text-size-m);width:max-content;height:var(--size-s);line-height:1.8;vertical-align:middle;padding:var(--spacing-zero) var(--spacing-m);border:var(--button-outline-border);border-color:var(--button-outline-border-color);box-sizing:border-box;border-radius:var(--border-radius-default);&:hover{cursor:pointer;border-color:var(--button-outline-hover-border-color);}"]),ra=o()(Jt.Z).withConfig({displayName:"oauth1__StyledTextArea",componentId:"sc-1jg4lk5-7"})(["min-height:80px;"]),oa=[{key:"consumerKey",label:"Consumer Key",type:"text",infoText:"A value used by the Consumer to identify itself to the Service Provider",placeHolder:"Consumer Key"},{key:"consumerSecret",label:"Consumer Secret",type:"text",disableIfRSA:!0,infoText:"A secret used by the Consumer to establish ownership of the Consumer Key.",placeHolder:"Consumer Secret"},{key:"token",label:"Access Token",type:"text",placeHolder:"Access Token"},{key:"tokenSecret",label:"Token Secret",type:"text",disableIfRSA:!0,infoText:"A secret used by the Consumer to establish ownership of a given Token.",placeHolder:"Token Secret"}],ia=[{key:"callback",label:"Callback URL",type:"text",infoText:"An absolute URL where the service provider will redirect to after obtaining user authorization.",placeHolder:"Callback URL"},{key:"verifier",label:"Verifier",type:"text",infoText:"The verification code given by the service provider after obtaining user authorization.",placeHolder:"Verifier"},{key:"timestamp",label:"Timestamp",type:"text",placeHolder:"Timestamp"},{key:"nonce",label:"Nonce",type:"text",infoText:"A random string generated by the client.",placeHolder:"Nonce"},{key:"version",label:"Version",type:"text",placeHolder:"e.g. 1.0"},{key:"realm",label:"Realm",type:"text",infoText:"This is a string specified by the server in the WWW-Authenticate response header. It should contain at least the name of the host performing the authentication and might additionally indicate the collection of users who might have access",placeHolder:"testrealm@example.com"}],la={key:"signatureMethod",label:"Signature Method",infoText:"The signature method the Consumer used to sign the request.",options:[{label:"HMAC-SHA1",value:"HMAC-SHA1"},{label:"HMAC-SHA256",value:"HMAC-SHA256"},{label:"HMAC-SHA512",value:"HMAC-SHA512"},{label:"RSA-SHA1",value:"RSA-SHA1"},{label:"RSA-SHA256",value:"RSA-SHA256"},{label:"RSA-SHA512",value:"RSA-SHA512"},{label:"PLAINTEXT",value:"PLAINTEXT"}]},ua={key:"addParamsToHeader",label:"Add authorization data to",options:[{label:"Request Headers",value:"header"},{label:"Request Body/Request URL",value:"url"}]},da=(0,l.observer)((()=>{const e=s().useContext(va),t=e.authState,a=e.setAuthState,r=(0,n.useCallback)(((e,n)=>{var s;if(!e)return a((0,i.Z)({},t,{oauth1:(null==(s=t.oauth1)?void 0:s.filter((e=>e.key!==n)))||null}));const r=[...t.oauth1||[]],o=r.findIndex((e=>e.key===n));if(-1===o)return a((0,i.Z)({},t,{oauth1:[...t.oauth1||[],{key:n,value:e}]}));r[o].value=e,a((0,i.Z)({},t,{oauth1:r}))}),[t,a]),o=e=>{var a;return(null==(a=t.oauth1)||null==(a=a.find((t=>t.key===e)))?void 0:a.value)||""},[l,u]=(0,n.useState)(!1),c=()=>o("signatureMethod").includes("RSA");return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(Yt,{children:[(0,v.jsx)(ea,{children:(0,v.jsx)(d.Z,{text:la.label,infoText:la.infoText})}),(0,v.jsx)(ea,{children:(0,v.jsx)(ta,{isClearable:!1,options:la.options,value:(()=>{const e=o("signatureMethod");return e?{label:e,value:e}:{label:"HMAC-SHA1",value:"HMAC-SHA1"}})(),onChange:e=>r(e.value,"signatureMethod"),"aria-label":"add auth to",viaPortal:!0})})]}),oa.map((({key:e,label:t,type:a,infoText:n,disableIfRSA:s})=>s&&c()?null:(0,v.jsxs)(Yt,{"data-testid":"oauth1-basic-input",children:[(0,v.jsx)(ea,{children:(0,v.jsx)(d.Z,{text:t,infoText:n})}),(0,v.jsx)(ea,{children:(0,v.jsx)(y,{name:e,label:t,value:o(e),onChange:r,type:a})})]},e))),c()&&(0,v.jsxs)(Yt,{children:[(0,v.jsx)(ea,{children:(0,v.jsx)(d.Z,{text:"Private Key",infoText:"RSA private key in PEM format for signing the request."})}),(0,v.jsxs)(ea,{children:[(0,v.jsx)("input",{type:"file",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.addEventListener("load",(e=>{const t=e.target.result;r(t,"privateKey")})),e.readAsText(t)}},id:"upload",hidden:!0}),(0,v.jsx)(sa,{htmlFor:"upload",children:(0,v.jsx)("span",{children:"Select file"})})]})]}),c()&&(0,v.jsxs)(Yt,{children:[(0,v.jsx)(ea,{}),(0,v.jsx)(ea,{children:(0,v.jsx)(ra,{value:o("privateKey"),onChange:e=>{r(e.target.value,"privateKey")},placeholder:"-----BEGIN RSA PRIVATE KEY-----\nprivate key in PEM format\n-----END RSA PRIVATE KEY-----"})})]}),(0,v.jsxs)(Yt,{children:[(0,v.jsx)(ea,{children:(0,v.jsx)(d.Z,{text:ua.label})}),(0,v.jsx)(ea,{children:(0,v.jsx)(ta,{isClearable:!1,options:ua.options,value:o("addParamsToHeader")?{label:"Request Headers",value:"headers"}:{label:"Request Body/Request URL",value:"url"},onChange:e=>"url"===(null==e?void 0:e.value)?r(!1,"addParamsToHeader"):r(!0,"addParamsToHeader"),"aria-label":"add auth to",viaPortal:!0})})]}),(0,v.jsx)(Xt,{children:(0,v.jsx)(_t,{onToggleAdvancedFields:()=>{u(!l)},isOpen:l})}),l&&(0,v.jsx)(p.ZP,{type:"small",children:"Postman auto-generates default values for some of these fields unless a value is specified."}),l&&ia.map((({key:e,label:t,type:a,infoText:n,placeHolder:s})=>(0,v.jsxs)(Yt,{"data-testid":"oauth1-advance-input",children:[(0,v.jsx)(ea,{children:(0,v.jsx)(d.Z,{text:t,infoText:n})}),(0,v.jsx)(ea,{children:(0,v.jsx)(y,{name:e,label:s,value:o(e),onChange:r,type:a})})]},e))),l&&(0,v.jsx)(na,{}),l&&(0,v.jsxs)(aa,{children:[(0,v.jsx)(Qt.Z,{isChecked:o("includeBodyHash"),label:(0,v.jsx)(d.Z,{text:"Include body hash",infoText:"OAuth Request Body Hash extension provides support for request body integrity check for content types other than application/x-www-form-urlencoded. If this option is selected, the oauth_body_hash parameter will be calculated and added to the request."}),onChange:e=>{r(e,"includeBodyHash")}}),(0,v.jsx)(Qt.Z,{isChecked:o("addEmptyParamsToSign"),label:(0,v.jsx)(d.Z,{text:"Add empty parameters to signature",infoText:"Some implementations of OAuth1.0 require empty parameters to be added to the signature. If this option is selected, any of the above fields which have been left empty will be included in the authorization data."}),onChange:e=>{r(e,"addEmptyParamsToSign")}}),o("addParamsToHeader")&&(0,v.jsx)(Qt.Z,{isChecked:!o("disableHeaderEncoding")||!1,label:(0,v.jsx)(d.Z,{text:" Encode the parameters in the Authorization header"}),onChange:e=>{r(!e,"disableHeaderEncoding")}})]})]})})),ca=o().div.withConfig({displayName:"auth-mode-specific-panel__AuthModeSpecificPanelWrapper",componentId:"sc-ujmr36-0"})(["flex:0.65;padding:var(--spacing-m);overflow:auto;box-sizing:border-box;"]),ha=(0,l.observer)((()=>{const e=s().useContext(va),t=e.authState,a=R();if(a)return(0,v.jsx)(Ht,{description:`Support for ${(null==a?void 0:a.label)||"this auth method"} is coming soon.`});switch(t.activeAuthType){case"noauth":var n;return null==(n=e.authDescriptions)?void 0:n.noauth;case"bearer":return(0,v.jsx)(F,{});case"basic":return(0,v.jsx)(L,{});case"apikey":return(0,v.jsx)($,{});case"inherit":return(0,v.jsx)(Vt,{});case"oauth2":return(0,v.jsx)(Ut,{});case"awsv4":return(0,v.jsx)(Gt,{});case"oauth1":return(0,v.jsx)(da,{});default:return(0,v.jsx)(E,{})}})),pa=()=>(0,v.jsx)(ca,{children:(0,v.jsx)(ha,{})}),ma=o().div.withConfig({displayName:"auth-panel__AuthPanelWrapper",componentId:"sc-14bce5s-0"})(["display:flex;min-height:0;flex:1;font-size:var(--text-size-m);color:var(--content-color-secondary);border-top:var(--border-width-default) var(--border-style-solid) var(--border-color-default);"]),va=s().createContext({}),ka=e=>(0,v.jsx)(va.Provider,{value:e,children:(0,v.jsxs)(ma,{className:"auth-editor",role:"tabpanel",children:[(0,v.jsx)(U,{}),(0,v.jsx)(pa,{})]})}),ya=({model:e,modelId:t})=>e&&t?[e,t].join("/"):"",fa=e=>{const t=String(e).split("/");if(2!==t.length)return"";const[a,n]=t;return a&&n?{model:a,modelId:n}:""},ga=new Pe.KVStorage("auth-session"),ba=e=>ga.get(e),xa=e=>{const t=ya(e);return ba(t)},_a=e=>{const t=ya(e);return ga.has(t)},Ta=(e,t)=>{const a=(n=t,JSON.parse(JSON.stringify(n)));var n;return ga.set(e,a)},Aa=(e,t)=>{const a=ya(e);return Ta(a,t)},wa=e=>{const t=ya(e);return ga.remove(t)},ja=(e,t)=>{const a=ya(e);return ga.subscribe(a,t)},Ca=()=>ga,Sa=async e=>{var t;const a=await Ze(e);if(a)return[{key:"accessToken",value:(null==(t=a.data)?void 0:t.token_key)===Ae?null==a?void 0:a.data[Ae]:null==a?void 0:a.data[we]},{key:"tokenType",value:null==a?void 0:a.data.tokenType}]},Ra=async e=>{var t;const a=ya(e),n=await ba(a);if(!n)return;const s=null==(t=n.oauth2.find((e=>"token_id"===e.key)))?void 0:t.value;return{type:"oauth2",oauth2:await Sa(s)||[]}},Pa=async e=>{var t;const a=ya(e),n=await ba(a);if(n)return null==(t=n.oauth2.find((e=>"token_id"===e.key)))?void 0:t.value},Ia=async e=>({type:"oauth2",oauth2:await Sa(e)||[]}),qa={id:"",type:"oauth2",oauth2:[]},Za=e=>(0,Pe.useKVStorage)(Ca(),ya(e)),Oa=({model:e,modelId:t})=>{const a=e&&t?ya({model:e,modelId:t}):"";return(0,Pe.useKVStorage)(Ca(),a)}},38087:()=>{},174854:()=>{},166602:()=>{}}]);
//# sourceMappingURL=9825.c87f757e4ebd8a87.js.map