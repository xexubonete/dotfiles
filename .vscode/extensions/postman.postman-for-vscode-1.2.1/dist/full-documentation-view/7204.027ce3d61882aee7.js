"use strict";(self.webpackChunkfull_documentation_view=self.webpackChunkfull_documentation_view||[]).push([[7204],{808137:(e,t,n)=>{n.r(t),n.d(t,{FeatureFlagsProvider:()=>L,useFeatureFlag:()=>r,withFeatureFlagsConsumer:()=>d});var l=n(178439),a=n(607560);const u=({options:e,allFlags:t,ldClient:n})=>{var l,u;const{flagName:r,defaultValue:s,requiredAttributesInContext:o=[]}="defaultValue"in e?e:(0,a.Z)({},e,{defaultValue:void 0}),i=null!=(l=null==n||null==(u=n.getContext())?void 0:u.custom)?l:{},d=(null==o?void 0:o.length)>0&&!o.every((e=>e in i))?s:t[r];return null!=d?d:t[r]};function r(e){const t=(0,l.useFlags)(),n=(0,l.useLDClient)();return{value:u({allFlags:t,ldClient:n,options:e})}}var s=n(540540),o=n(552322);const i={ldClient:void 0,flags:void 0};function d(e){return(0,l.withLDConsumer)()((t=>{const n=(0,l.useFlags)(),r=(0,l.useLDClient)();return(0,o.jsx)(e,(0,a.Z)({},t,i,{getFlagsValue:e=>u({options:e,ldClient:r,allFlags:n})}))}))}var c=n(926663),g=n.n(c),C=n(613101);const m=()=>(0,C.isLoggedIn)()?{kind:"user",key:(0,C.getUserId)(),custom:{platform:window.SDK_PLATFORM,appVersion:window.APP_VERSION,releaseChannel:window.NX_RELEASE_CHANNEL,analyticsEnabled:"browser"===window.SDK_PLATFORM,userCreatedAt:0,daysSinceUserCreate:0,emailDomain:"",isPaidPlanGrowth:!1,teamSize:0,roles:[],teamCreatedAt:0,daysSinceTeamCreate:0,webFnCustomPlanId:""}}:{kind:"anonymous",key:"0",custom:{platform:window.SDK_PLATFORM,appVersion:window.APP_VERSION,releaseChannel:window.NX_RELEASE_CHANNEL,analyticsEnabled:"browser"===window.SDK_PLATFORM}};var v=n(916669),w=n(588749);function f(e){return e&&+new Date(e)||0}function F(e){if(!e)return null;const t=new Date,n=new Date(e);return Math.floor(Math.abs(t.getTime()-n.getTime())/864e5)}const I=(0,s.createContext)(void 0),_=({passedInFeatureFlagContext:e,children:t,debounceInterval:n=200})=>{const[u,r]=(0,s.useState)([]),i=(0,s.useRef)(!1),d=(0,l.useLDClient)(),c=(0,s.useCallback)((e=>{r((t=>[...t,e]))}),[]),{loggedInUserCustomAttributes:g,isCustomAttributesLoading:m,externalUserId:_}=function(e){var t,n,u;const r=(0,C.getUserId)(),o=(0,C.isLoggedIn)(),i=(0,l.useLDClient)(),{data:d,isLoading:c}=(0,v.useTeamsByUserId)({overrideQueryParams:{billing:!0},enabled:o}),{data:g,isLoading:m}=(0,v.useExternalId)({userId:r,enabled:o}),{data:I,isLoading:_}=(0,v.useUserInfo)({userId:r,enabled:o}),{data:p,isLoading:x}=(0,w.useGetPlanFeatures)(r,o),L=null!=(t=null==d||null==(n=d.organizations)?void 0:n.find((e=>e.id===(0,C.getTeamId)())))?t:void 0,b=c||_||x||m,h=(0,s.useMemo)((()=>{var t,n,l,u,r,s,d,c,g,C,m;return b||!o?void 0:(0,a.Z)({},null==i?void 0:i.getContext().custom,null==e?void 0:e.custom,{userCreatedAt:f(null!=(t=null==I?void 0:I.created_at)?t:null),daysSinceUserCreate:F(null!=(n=null==I?void 0:I.created_at)?n:null)||0,emailDomain:null!=(l=null==I||null==(u=I.email)?void 0:u.split("@")[1])?l:"",teamSize:null!=(r=null==L?void 0:L.team_size)?r:0,roles:(null!=(s=null==L?void 0:L.roles)?s:"").split(","),teamCreatedAt:f(null!=(d=null==L?void 0:L.created_at)?d:null),daysSinceTeamCreate:F(null!=(c=null==L?void 0:L.created_at)?c:null)||0,webFnCustomPlanId:null!=(g=null==L?void 0:L.plan)?g:null,isPaidPlanGrowth:null!=(C=null==p||null==(m=p.data)||null==(m=m.features.is_paid_plan_growth)?void 0:m.value)&&C})}),[b,o,i,null==e?void 0:e.custom,null==I?void 0:I.created_at,null==I?void 0:I.email,null==L?void 0:L.team_size,null==L?void 0:L.roles,null==L?void 0:L.created_at,null==L?void 0:L.plan,null==p||null==(u=p.data)?void 0:u.features]);return{isCustomAttributesLoading:b,loggedInUserCustomAttributes:h,externalUserId:null!=g?g:(0,C.getUserId)()}}(e);(0,s.useEffect)((()=>{m||c(g)}),[c,m,g]);const x=((e,t)=>{const n=(0,s.useRef)(null);return(0,s.useCallback)((()=>{n.current&&clearTimeout(n.current),n.current=setTimeout(e,t)}),[e,t])})((0,s.useCallback)((async()=>{if(!i.current&&0!==u.length){const t=p({contextUpdateQueue:u,currentFeatureFlagsContext:null==d?void 0:d.getContext(),externalUserId:_,passedInFeatureFlagContext:e});i.current=!0;try{await(null==d?void 0:d.identify(t)),r([])}catch(e){throw new Error(`Error occurred while updating feature flags context: ${e}`)}finally{i.current=!1}}}),[u,d,_,e]),n);return(0,s.useEffect)((()=>{x()}),[x]),(0,o.jsx)(I.Provider,{value:{addCustomAttributesUpdateToQueue:c},children:t})},p=({contextUpdateQueue:e,currentFeatureFlagsContext:t,externalUserId:n,passedInFeatureFlagContext:l})=>e.reduce(((e,l)=>{const u=(0,a.Z)({},e.custom,l);return(0,a.Z)({},t,{key:n,custom:u})}),(0,a.Z)({},t,l,{custom:(null==t?void 0:t.custom)||{}})),x={useCamelCaseFlagKeys:!1};function L({children:e,featureFlagsContext:t}){const n=g().LAUNCH_DARKLY_CLIENT_SIDE_ID;return n?(0,o.jsx)(l.LDProvider,{clientSideID:n,context:m(),reactOptions:x,children:(0,o.jsx)(_,{passedInFeatureFlagContext:t,children:e})}):(0,o.jsx)(o.Fragment,{children:e})}}}]);
//# sourceMappingURL=7204.027ce3d61882aee7.js.map